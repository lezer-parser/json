{"version":3,"sources":["node_modules/@codemirror/next/text/dist/index.js","node_modules/lezer-tree/dist/tree.es.js","node_modules/process/browser.js","node_modules/@codemirror/next/state/dist/index.js","node_modules/style-mod/src/style-mod.js","node_modules/@codemirror/next/rangeset/dist/index.js","node_modules/w3c-keyname/index.es.js","node_modules/@codemirror/next/view/dist/index.js","node_modules/@codemirror/next/history/dist/index.js","node_modules/@codemirror/next/gutter/dist/index.js","node_modules/@codemirror/next/fold/dist/index.js","node_modules/@codemirror/next/matchbrackets/dist/index.js","node_modules/@codemirror/next/commands/dist/index.js","node_modules/@codemirror/next/closebrackets/dist/index.js","node_modules/@codemirror/next/panel/dist/index.js","node_modules/@codemirror/next/search/dist/index.js","node_modules/@codemirror/next/tooltip/dist/index.js","node_modules/@codemirror/next/autocomplete/dist/index.js","node_modules/@codemirror/next/comment/dist/index.js","node_modules/@codemirror/next/rectangular-selection/dist/index.js","node_modules/@codemirror/next/goto-line/dist/index.js","node_modules/@codemirror/next/highlight-selection/dist/index.js","node_modules/@codemirror/next/highlight/dist/index.js","node_modules/@codemirror/next/lint/dist/index.js","node_modules/@codemirror/next/basic-setup/dist/index.js","../../node_modules/tslib/tslib.es6.js","../src/stack.ts","../src/token.ts","../src/decode.ts","../src/parse.ts","dist/index.es.js","node_modules/@codemirror/next/syntax/dist/index.js","demo.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["extend","split","map","s","parseInt","i","length","isExtendingChar","code","isRegionalIndicator","ZWJ","nextClusterBreak","str","pos","surrogateLow","charCodeAt","surrogateHigh","prev","codePointAt","codePointSize","next","countBefore","prevClusterBreak","found","ch","code0","code1","fromCodePoint","String","fromCharCode","countColumn","string","n","tabSize","findColumn","col","offset","leftOver","Text","constructor","lineAt","RangeError","line","lineCache","doc","from","to","cacheLine","lineInner","finish","lines","number","replace","text","parts","decompose","push","TextNode","append","slice","eq","other","eqContent","iter","dir","RawTextCursor","iterRange","PartialTextCursor","iterLines","LineCursor","toString","sliceString","toJSON","done","value","of","empty","textLength","TextLeaf","Symbol","prototype","iterator","lineCachePos","lineCacheSize","children","target","isLine","end","Line","sliceText","Math","min","max","lastLineLength","firstLineLength","newLen","appendText","lineSep","result","flatten","part","newLength","cut","after","child","endLine","inner","add","lineLengthTo","content","lineLengthFrom","lengthDiff","copy","every","Error","chunkLength","maxLength","minLength","chunked","currentLength","currentChunk","childLength","last","node","flush","first","a","b","iterA","iterB","offA","offB","lineBreak","strA","strB","nodes","offsets","skip","top","pop","len","start","cursor","limit","LineContent","findClusterBreak","forward","contextStart","context","strings","DefaultBufferLength","Iteration","enter","leave","undefined","doEnter","type","nextPropID","NodeProp","deserialize","id","Number","flag","set","propObj","match","NodePropSource","NodeType","error","skipped","closedBy","openedBy","prop","f","name","props","direct","Object","create","none","NodeGroup","types","newTypes","newProps","source","Subtree","depth","d","p","parent","root","cx","resolve","side","resolveAt","childBefore","childAfter","firstChild","lastChild","Tree","positions","c","join","test","JSON","stringify","partial","applyChanges","changes","cutAt","tree","iterate","off","nextPos","fromA","toA","toB","fromB","at","iterInner","cacheRoot","cached","resolveInner","findChild","childStart","select","NodeSubtree","findIndex","buffer","BufferSubtree","concat","balance","maxBufferLength","BalanceBranchFactor","balanceRange","build","data","buildTree","TreeBuffer","group","index","childToString","endIndex","cutPoint","newBuffer","Uint16Array","iterChild","iterRev","parentNodesByEnd","startIndex","order","scan","endOrder","nextStart","nextEnd","takeNext","run","base","lastI","buf","start1","end1","ignore","bufferStart","FlatBufferCursor","size","fork","topID","reused","minRepeatType","Array","isArray","takeNode","parentStart","minPos","tagBuffer","startPos","findBufferSize","endPos","copyToBuffer","localChildren","localPositions","repeating","isRepeat","reverse","maxSize","minStart","nodeSize","localSkipped","nodeStart","outerType","innerType","maxChild","ceil","groupFrom","groupStart","only","j","containsType","elt","process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","nextTick","args","arguments","Item","array","apply","title","env","argv","version","versions","noop","on","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","DefaultSplit","MapMode","ChangeDesc","sections","ins","iterGaps","posA","posB","iterChangedRanges","individual","iterChanges","invertedDesc","composeDesc","composeSets","mapDesc","before","mapSet","mapPos","assoc","mode","Simple","endA","TrackDel","TrackBefore","TrackAfter","mapPosStable","lastB","touchesRange","ChangeSet","inserted","_toB","invert","compose","desc","filter","ranges","resultSections","resultInserted","filteredSections","SectionIter","addSection","addInsert","filtered","total","force","spec","sub","insert","insText","insLen","fromJSON","json","forceJoin","values","endB","setA","setB","mkSet","open","len2","sectionLen","insB","textBit","forward2","SelectionRange","flags","anchor","head","bidiLevel","level","goalColumn","mapping","EditorSelection","range","abs","primaryIndex","r","primary","asSingle","addRange","replaceRange","which","single","normalized","goal","sort","indexOf","splice","checkSelection","selection","docLength","nextID","Facet","combine","compareInput","compare","isStatic","default","define","config","sameArray","static","FacetProvider","compute","deps","get","computeN","prec","field","maybePrec","state","nFrom","dependencies","facet","dynamicSlot","addresses","getter","idx","multi","depDoc","depSel","depAddrs","dep","tr","reconfigure","depChanged","docChanged","some","addr","ensureAddr","newVal","oldVal","startState","compareArray","dynamicFacetSlot","providers","providerAddrs","providerTypes","dynamic","oldAddr","address","changed","dynAddr","getAddr","val","maybeIndex","StateField","createF","updateF","compareF","facets","update","provide","slot","oldIdx","Prec","fallback","override","precedence","extension","hasOwnProperty","PrecExtension","ext","TaggedExtension","tag","tagExtension","Configuration","replacements","dynamicSlots","staticValues","statusTemplate","staticFacet","oldState","fields","allKeys","obj","getOwnPropertySymbols","keys","seen","Map","tagsSeen","known","key","reduce","status","applying","allowMultipleSelections","v","lineSeparator","changeFilter","transactionFilter","languageDataProp","globalLanguageData","IndentContext","options","unit","indentUnit","textAfterPos","_a","_b","sim","simulateBreak","simulateDoubleBreak","sliceDoc","lineIndent","overrideIndentation","overriden","search","column","Annotation","AnnotationType","StateEffect","mapped","is","StateEffectType","mapEffects","effects","effect","Transaction","annotations","scrollIntoView","_doc","_state","time","Date","now","newDoc","newSelection","applyTransaction","annotation","ann","userEvent","addToHistory","joinRanges","iA","iB","mergeTransaction","sequential","mapForA","mapForB","full","assign","resolveTransactionInner","docSize","reconf","floor","random","sel","resolveTransaction","specs","seq","filterTransaction","back","filters","CharCategory","nonASCIISingleCaseWordChar","wordChar","RegExp","_","hasWordChar","toUpperCase","toLowerCase","makeCategorizer","wordChars","char","Space","Word","Other","EditorState","cur","require","conf","replaceSelection","toText","changeByRange","result1","newChanges","newMapped","extensions","configuration","indentString","cols","phrase","phrases","charCategorizer","languageDataAt","syntax","getTree","languageDataFacetAt","indentation","foldable","combineConfig","configs","defaults","current","sym","for","COUNT","SET","RULES","global","window","StyleModule","style","specificity","newName","selector","generateClasses","className","renderStyle","mount","modules","StyleSet","adoptedSet","adoptedStyleSheets","CSSStyleSheet","sheet","styleTag","ownerDocument","createElement","insertBefore","mod","k","insertRule","textContent","extendSelector","template","prefix","output","local","l","RangeValue","Range","startSide","endSide","point","mapMode","cmpRange","ChunkSize","BigPointSize","Far","Chunk","maxPoint","startAt","arr","lo","hi","mid","diff","between","newPos","curFrom","curTo","newFrom","newTo","RangeSet","chunkPos","chunk","nextLayer","chunkEnd","updateSpec","filterFrom","filterTo","LayerCursor","goto","spill","builder","RangeSetBuilder","addInner","rangeIndex","chunkIndex","addChunk","nextChunk","finishInner","chunks","touch","HeapCursor","sets","oldSets","newSets","textDiff","comparator","minPoint","minPointSize","sharedChunks","findSharedChunks","sideA","SpanCursor","sideB","spans","openStart","activeForPoint","openEnd","span","active","chunkStart","lastFrom","lastTo","setMaxPoint","finishChunk","newArrays","inA","shared","Set","layer","rank","gotoInner","has","heap","heapBubble","childIndex","activeTo","activeRank","minActive","pointFrom","pointRank","removeActive","remove","findMinIndex","addActive","trackOpen","trackExtra","nextVal","startA","startB","dPos","clipEnd","comparePoint","sameValues","compareRange","foundPos","shift","chrome","navigator","exec","userAgent","safari","vendor","gecko","mac","platform","ie","brokenModifierNames","keyName","event","ignoreKey","ctrlKey","altKey","metaKey","shiftKey","keyCode","nav","document","documentElement","ie_edge","ie_upto10","ie_11up","webkit","browser","ie_version","documentMode","gecko_version","chrome_version","ios","android","webkit_version","getSelection","selectionCollapsed","domSel","collapsed","isCollapsed","rangeCount","getRangeAt","hasSelection","dom","anchorNode","contains","nodeType","parentNode","clientRectsFor","createRange","setEnd","nodeValue","setStart","getClientRects","isEquivalentPosition","targetNode","targetOff","scanFor","domIndex","previousSibling","maxOffset","nodeName","childNodes","flattenRect","rect","left","x","right","bottom","windowRect","win","innerWidth","innerHeight","ScrollSpace","scrollRectIntoView","defaultView","bounding","body","scrollHeight","clientHeight","scrollWidth","clientWidth","getBoundingClientRect","moveX","moveY","scrollBy","scrollTop","scrollLeft","host","DOMSelection","anchorOffset","focusNode","focusOffset","preventScrollSupported","focusPreventScroll","setActive","focus","stack","preventScroll","DOMPos","precise","ContentView","dirty","editorView","overrideDOMText","posAtStart","posBefore","posAtEnd","view","breakAfter","posAfter","coordsAt","_pos","_side","sync","track","nextSibling","reuseDOM","written","syncNodeInto","rm","_dom","localPosFromDOM","bias","domBoundsAround","fromI","fromStart","toI","toEnd","startDOM","endDOM","markDirty","andParent","markParentsDirty","childList","setParent","setDOM","cmView","rootView","replaceChildren","ignoreMutation","_rec","ignoreEvent","_event","childCursor","ChildCursor","childPos","findPos","removeChild","coordsInChildren","none$1","InlineView","become","_other","getSide","MaxJoinLen","TextView","createDOM","textDOM","createTextNode","merge","domAtPos","_from","_to","textCoords","MarkView","mark","tagName","class","attrs","setAttribute","mergeInlineChildren","sliceInlineChildren","inlineDOMAtPos","WidgetView","widget","customView","updateDOM","toDOM","contentEditable","rects","CompositionView","elts","toOff","fromOff","dLen","joinInlineInto","combineAttrs","attrsEq","keysA","keysB","updateAttrs","removeAttribute","WidgetType","estimatedHeight","BlockType","Decoration","heightRelevant","MarkDecoration","block","PointDecoration","getInclusive","LineDecoration","hasHeight","attributes","isReplace","WidgetRange","WidgetBefore","WidgetAfter","widgetsEq","inclusiveStart","inclusiveEnd","inclusive","MinRangeGap","theme","strs","darkTheme","baseThemeID","baseLightThemeID","baseDarkThemeID","buildTheme","mainID","styles","piece","narrow","themeClass","baseTheme","wrap","position","boxSizing","outline_fallback","outline","display","flexDirection","scroller","alignItems","fontFamily","lineHeight","height","overflowX","margin","flexGrow","minHeight","whiteSpace","padding","caretColor","button","verticalAlign","color","fontSize","borderRadius","backgroundImage","border","textfield","backgroundColor","secondarySelection","backgroundColor_fallback","color_fallback","secondaryCursor","width","borderLeft","LineClass","LineView","prevAttrs","takeDeco","transferDOM","setDeco","none$2","addLineDeco","deco","classList","hack","cmIgnore","appendChild","measureTextSize","totalWidth","charWidth","find","docView","BlockWidgetView","_takeDeco","Text$1","ContentBuilder","curLine","breakAtStart","textOff","posCovered","getLine","addWidget","wrapMarks","buildText","take","NullWidget","decorations","Direction","LTR","RTL","dec","LowTypes","ArabicTypes","charType","BidiRE","BidiSpan","maybe","computeOrder","direction","trivialOrder","prevStrong","beforeL","afterL","rtl","movedOver","moveVisually","spanI","indexForward","nextIndex","nextSpan","wrappingWhiteSpace","HeightOracle","lineWrapping","heightSamples","lineLength","heightChanged","heightForGap","heightForLine","setDoc","mustRefresh","lineHeights","newHeight","h","refresh","knownHeights","round","MeasuredHeights","heights","more","BlockInfo","detail","QueryType","Epsilon","HeightMap","outdated","setHeight","oracle","decomposeLeft","decomposeRight","oldDoc","me","ByPosNoHeight","NodeBuilder","updateHeight","HeightMapText","break","brk","HeightMapBranch","HeightMapBlock","blockAt","_height","_value","_type","forEachLine","_force","measured","widgetHeight","HeightMapGap","firstLine","lastLine","ByHeight","unshift","rightTop","rightOffset","subQuery","ByPos","rightStart","balanced","mergeGaps","rebalance","around","relevantWidgetHeight","lineStart","lineEnd","covering","writtenTo","isCovered","addBlock","enterLine","blankContent","gap","ensureLine","heightRelevantDecoChanges","comp","DecorationComparator","none$3","clickAddsSelectionRange","dragMovesSelection","mouseSelectionStyle","exceptionSink","updateListener","inputHandler","logException","exception","handler","onerror","console","editable","PluginFieldProvider","PluginField","scrollMargins","nextPluginID","viewPlugin","ViewPlugin","eventHandlers","provider","domEventHandlers","plugin","handlers","pluginDecorations","fromClass","cls","PluginInstance","dummy","takeField","destroy","measure","editorAttributes","contentAttributes","styleModule","ChangedRange","addToSet","extendWithRanges","dI","rI","ViewUpdate","transactions","prevState","changedRanges","hasFocus","inputState","notifiedFocused","viewportChanged","focusChanged","selectionSet","visiblePixelRange","paddingTop","getComputedStyle","overflow","parentRect","LineGap","same","gA","gB","draw","wrapping","LineGapWidget","vertical","ViewState","pixelViewport","inView","paddingBottom","heightOracle","heightMap","scrollTo","printing","visibleRanges","mustEnforceCursorAssoc","viewport","getViewport","lineGaps","ensureLineGaps","lineGapDeco","computeVisibleRanges","newDeco","contentChanges","heightChanges","prevHeight","mapViewport","viewportIsAppropriate","updateLineGaps","mapLineGaps","repeated","dTop","dBottom","measureVisibleLineHeights","minWidth","enforceCursorAssoc","marginTop","Viewport","newTop","newBottom","gaps","structure","lineStructure","viewFrom","viewTo","findPosition","gapTo","gapFrom","gapSize","findFraction","ratio","editorTop","lineAtHeight","blockAtHeight","dist","counted","none$4","DocView","viewports","compositionDeco","minWidthFrom","minWidthTo","impreciseAnchor","impreciseHead","contentDOM","updateInner","updateDeco","composing","computeCompositionDeco","forceSelection","prevDeco","decoDiff","findChangedDeco","pointerSel","updateSelection","oldLength","updateChildren","observer","viewState","breakAtEnd","fromPointer","mayControlSelection","nextToUneditable","nextTo","nearbyTextNode","collapse","cursorBidiLevel","removeAllRanges","modify","activeElement","nearest","domView","posFromDOM","scrollDOM","computeBlockGapDeco","visible","BlockGapWidget","pluginField","scrollPosIntoView","mLeft","mRight","mTop","mBottom","margins","MaxNodeHeight","remaining","fill","textNode","cView","topNode","CompositionWidget","DecorationComparator$1","groupAt","categorize","linePos","cat","getdx","getdy","y","yOverlap","upTop","upBot","domPosAtCoords","closest","closestRect","closestX","closestY","above","below","aboveRect","belowRect","dx","dy","domPosInText","clipX","rectBefore","posAtCoords","halfLine","defaultLineHeight","bounced","element","elementFromPoint","caretPositionFromPoint","offsetNode","caretRangeFromPoint","startContainer","startOffset","moveToLineBoundary","includeWrap","coords","coordsAtPos","editorRect","textDirection","lineView","moveByChar","by","bidiSpans","check","byGroup","nextCat","moveVertically","distance","startCoords","resolvedGoal","startY","extra","goalCol","defaultCharacterWidth","otherLine","InputState","lastKeyCode","lastKeyTime","lastSelectionOrigin","lastSelectionTime","registeredEvents","customHandlers","compositionEndedAt","mouseSelection","addEventListener","eventBelongsToEditor","ignoreDuringComposition","mustFlushObserver","forceFlush","runCustomHandlers","preventDefault","ensureHandlers","setSelectionOrigin","origin","defaultPrevented","timeStamp","startMouseSelection","MouseSelection","startEvent","move","bind","up","multiple","addsSelectionRange","dragMove","dragMovesSelection$1","dragging","isInPrimarySelection","buttons","removeEventListener","dispatch","clientX","clientY","bubbles","brokenClipboardAPI","capturePaste","cssText","doPaste","input","byLine","linewise","lastLinewiseCopy","mustCapture","mods","macCtrl","keydown","touchdown","touchmove","mousedown","makeStyle","basicMouseSelection","rangeForClick","insideY","inside","findPositionSide","queryPos","BadMouseDetail","lastMouseDown","lastMouseDownCount","getClickType","startSel","lastEvent","startRange","dragstart","dataTransfer","setData","effectAllowed","drop","dropPos","getData","del","paste","clipboardData","captureCopy","selectionEnd","selectionStart","copiedRange","upto","clearData","blur","beforeprint","requestMeasure","forceClearComposition","compositionstart","compositionupdate","compositionend","observeOptions","characterData","subtree","characterDataOldValue","useCharData","DOMObserver","onChange","onScrollChanged","ignoreSelection","delayedFlush","scrollTargets","intersection","intersecting","parentCheck","MutationObserver","mutations","mut","m","removedNodes","oldValue","flushSoon","onCharData","prevValue","onSelectionChange","onScroll","IntersectionObserver","entries","listenForScroll","intersectionRatio","observe","stop","clear","disconnect","clearSelection","takeRecords","records","newSel","typeOver","record","readMutation","rec","curView","LineSep","applyDOMChange","change","bounds","selPoints","selectionPoints","reader","DOMReader","readRange","selectionFromPoints","preferredPos","preferredSide","findDiff","iHead","iAnchor","dispatchKey","minLen","adjust","points","findPointBefore","readNode","nextView","isBlockElement","fromView","findPointIn","maxLen","DOMPoint","cancelable","down","KeyboardEvent","dispatchEvent","EditorView","plugins","editorAttrs","contentAttrs","bidiCache","updateState","measureScheduled","measureRequests","_dispatch","mountStyles","ensureGlobalHandler","CachedOrder","updatePlugins","redrawn","styleModules","listener","setState","newState","prevSpecs","newPlugins","cancelAnimationFrame","updated","measuring","warn","read","BadMeasure","write","themeClasses","spellcheck","contenteditable","role","posAtDOM","readMeasured","request","requestAnimationFrame","inst","ensureTop","visualLineAtHeight","visualLineAt","viewportLines","contentHeight","moveByGroup","initial","MaxBidiLine","entry","dark","given","resizeDebounce","handleResize","querySelectorAll","cache","lastDir","currentPlatform","normalizeKeyName","alt","ctrl","meta","modifiers","keymaps","handleKeyEvents","runHandlers","keymap","bindings","buildKeymap","runScopeHandlers","scope","storedPrefix","PrefixTimeout","bound","isPrefix","checkPrefix","command","scopeObj","commands","ourObj","maps","isChar","fallthrough","runFor","cmd","baseName","decorateSelections","multipleSelections","CursorWidget","rangeMark","Specials","Names","_supportsTabSize","supportsTabSize","MozTabSize","UnicodeRegexpSupport","unicode","specialCharConfig","render","specialChars","addSpecialChars","replaceTabs","highlightSpecialChars","specialCharPlugin","tabStyleExt","decorationCache","recompute","confChange","getDecorationsFor","TabWidget","SpecialCharWidget","placeHolder","DefaultPlaceholder","ph","custom","tabStyle","tab","DontIndentBeyond","indentOnInput","rules","indent","norm","__test","fromHistory","isolateHistory","invertedEffects","historyConfig","minDepth","newGroupDelay","historyField","HistoryState","fromHist","item","HistEvent","fromTransaction","undone","updateBranch","addSelection","rest","isolate","addMapping","addChanges","history","historyState","undo","redo","undoSelection","redoSelection","histState","branch","undoDepth","redoDepth","startSelection","selectionsAfter","setSelAfter","selections","newEvent","newBranch","isAdjacent","t","_f","_t","eqSelectionShape","conc","MaxSelectionsPerEvent","sels","popSelection","addMappingToBranch","mapEvent","extraSelections","mappedChanges","fullMapping","prevTime","prevUserEvent","historyKeymap","GutterMarker","_view","elementClass","renderEmptyElements","elementStyle","markers","lineMarker","initialSpacer","updateSpacer","activeGutters","gutter","gutters","borderRight","flexShrink","gutterElement","textAlign","unfixGutters","gutterView","fixed","SingleGutterView","updateGutters","contexts","UpdateContext","g","offsetWidth","localMarkers","forLine","elements","newElt","GutterElement","sameMarkers","spacer","prevMarkers","eltClass","cssClass","lineNumberMarkers","lineNumberConfig","formatNumber","exists","NumberMarker","lineNumberGutter","others","maxLineNumber","lineNumbers","mapRange","foldEffect","unfoldEffect","selectedLines","foldState","folded","foldExists","FoldWidget","decoration","onSelection","foldInside","getFoldable","maybeEnable","codeFolding","foldCode","unfoldCode","foldAll","unfoldAll","foldKeymap","defaultConfig","placeholderDOM","placeholderText","foldConfig","ignoreEvents","onclick","foldGutterDefaults","openText","closedText","FoldMarker","foldGutter","fullConfig","canFold","canUnfold","click","foldPlaceholder","matchingBracket","nonmatchingBracket","DefaultScanDist","DefaultBrackets","bracketMatchingConfig","afterCursor","brackets","maxScanDistance","matchingMark","nonmatchingMark","bracketMatchingState","matchBrackets","matched","bracketMatchingUnique","bracketMatching","matchingNodes","byProp","matches","matchMarkedBrackets","matchPlainBrackets","token","matching","firstToken","tokenType","startCh","bracket","startToken","basePos","updateSel","setSel","moveSel","how","rangeEnd","cursorByChar","cursorCharLeft","cursorCharRight","cursorCharForward","cursorCharBackward","cursorByGroup","cursorGroupLeft","cursorGroupRight","cursorGroupForward","cursorGroupBackward","interestingNode","bracketProp","moveBySyntax","cursorSyntaxLeft","cursorSyntaxRight","cursorByLine","cursorLineUp","cursorLineDown","cursorByPage","cursorPageUp","cursorPageDown","moveByLineBoundary","moved","space","cursorLineBoundaryForward","cursorLineBoundaryBackward","cursorLineStart","cursorLineEnd","toMatchingBracket","cursorMatchingBracket","selectMatchingBracket","extendSel","selectByChar","selectCharLeft","selectCharRight","selectCharForward","selectCharBackward","selectByGroup","selectGroupLeft","selectGroupRight","selectGroupForward","selectGroupBackward","selectSyntaxLeft","selectSyntaxRight","selectByLine","selectLineUp","selectLineDown","selectByPage","selectPageUp","selectPageDown","selectLineBoundaryForward","selectLineBoundaryBackward","selectLineStart","selectLineEnd","cursorDocStart","cursorDocEnd","selectDocStart","selectDocEnd","selectAll","selectLine","selectedLineBlocks","selectParentSyntax","simplifySelection","deleteBy","towards","deleteByChar","codePoint","deleteCodePointBackward","deleteCodePointForward","deleteCharBackward","deleteCharForward","deleteByGroup","nextChar","deleteGroupBackward","deleteGroupForward","deleteToLineEnd","deleteTrailingWhitespace","trailing","splitLine","transposeChars","blocks","startLine","moveLine","nextLine","moveLineUp","moveLineDown","copyLine","copyLineUp","copyLineDown","deleteLine","getIndentation","insertNewline","isBetweenBrackets","insertNewlineAndIndent","explode","changeBySelectedLine","atLine","changeSet","indentSelection","indentMore","indentLess","keep","emacsStyleKeymap","standardKeymap","defaultKeymap","closeBrackets","handleInput","definedClosing","closing","charAt","handleInsertion","deleteBracketPair","tokens","dont","prevChar","closeBracketsKeymap","tok","closed","handleSame","handleOpen","handleClose","close","closeBefore","_open","allowTriple","isTriple","panelConfig","topContainer","bottomContainer","panels","panelPlugin","showPanel","getPanel","panel","PanelGroup","panelClass","container","syncClasses","scrollMargin","classes","syncDOM","curDOM","borderBottom","borderTop","basicNormalize","normalize","SearchCursor","query","bufferPos","peek","Query","caseInsensitive","valid","setQuery","togglePanel","searchState","SearchState","createSearchPanel","matchMark","selectedMatchMark","searchHighlighter","highlight","selected","searchCommand","openSearchPanel","findNextMatch","findNext","maybeAnnounceMatch","FindPrevChunkSize","findPrevInRange","findPrevious","selectMatches","selectSelectionMatches","replaceNext","replaceAll","buildPanel","updateQuery","q","querySelector","searchExtensions","closeSearchPanel","searchKeymap","searchField","placeholder","onchange","onkeyup","replaceField","caseField","checked","onkeydown","AnnounceMargin","Break","live","font","Outside","tooltipPlugin","measureReq","readMeasure","writeMeasure","tooltips","showTooltip","tooltipViews","tp","createTooltip","views","tip","tooltipView","tooltip","editor","tView","strictSide","positioned","zIndex","HoverTime","HoverMaxDist","HoverPlugin","setHover","lastMouseMove","hoverTimeout","mouseInside","checkHover","mouseenter","mouseleave","mousemove","lastMove","isOverRange","isInTooltip","fromDOM","hoverTooltip","hoverState","hideOnChange","CompletionContext","explicit","abortListeners","tokenBefore","matchBefore","expr","ensureAnchor","aborted","Option","completion","addStart","addEnd","ignoreCase","applyCompletion","option","label","FuzzyMatcher","pattern","chars","any","byWord","upper","astral","word","anyTo","preciseTo","byWordTo","byWordFolded","adjacentTo","adjacentStart","adjacentEnd","prevType","score","MaxInfoWidth","overflowY","maxHeight","listStyle","background_fallback","maxWidth","completionMatchedText","textDecoration","completionDetail","marginLeft","fontStyle","completionIcon","paddingRight","opacity","createListBox","ul","li","icon","labelElt","detailElt","createInfoDialog","info","CompletionTooltip","stateField","placeInfo","measureInfo","positionInfo","list","cState","updateSelectedOption","opt","hasAttribute","spaceLeft","spaceRight","completionTooltip","self","MaxOptions","sortOptions","hasResult","matcher","boost","cmpOption","CompletionDialog","timestamp","setSelected","makeAttrs","selectedValue","completionState","CompletionState","completionConfig","sources","ActiveSource","sameResults","setSelectedEffect","baseAttrs","dScore","lA","lB","handleUserEvent","handleChange","toggleCompletionEffect","setActiveEffect","_tr","activateOnTyping","ActiveResult","CompletionInteractMargin","moveCompletion","step","offsetHeight","acceptCompletion","startCompletion","closeCompletion","RunningQuery","updates","DebounceTime","MaxUpdateCount","MinAbortTime","completionPlugin","debounceUpdate","running","debounceAccept","startQuery","doesReset","startUpdate","pending","Promise","then","scheduleAccept","err","accept","FieldPos","FieldRange","Snippet","fieldPositions","instantiate","lineObj","baseIndent","tabs","parse","FieldMarker","fieldMarker","fieldRange","ActiveSnippet","selectionInsideField","moveToField","snippetState","fieldSelection","snippet","_completion","snippetKeymap","moveField","clearSnippet","autocompletion","completionKeymap","toSet","flat","words","prefixMatch","completeFromList","o","completeSnippets","snippets","completionStatus","currentCompletions","toggleLineComment","toggleLineCommentWithOption","CommentOption","Toggle","lineComment","OnlyComment","lineUncomment","OnlyUncomment","toggleBlockComment","toggleBlockCommentWithOption","blockComment","blockUncomment","commentKeymap","getConfig","BlockCommenter","toggle","LineCommenter","selectionCommented","isSelectionCommented","isRangeCommented","textBefore","SearchMargin","textAfter","spaceBefore","spaceAfter","beforeOff","startText","endText","startSpace","endSpace","endOff","lineCommentToken","linesAcrossSelection","linesAcrossRange","getLinesInRange","isRangeLineSkipped","isLineSkipped","minCol","marginLen","Infinity","isRangeLineDiscarded","MaxOff","rectangleFor","startOff","startCol","endCol","absoluteColumn","ref","getPos","rectangleSelectionStyle","newStart","newLine","_extend","rectangularSelection","eventFilter","extTag","createLineDialog","innerHTML","go","isNaN","gotoLine","gotoLineKeymap","highlightActiveLine","defaultTheme","activeLineHighlighter","lineDeco","getDeco","lastLineStart","defaultHighlightOptions","highlightWordAroundCursor","minSelectionLength","maxMatches","highlightConfig","highlightSelectionMatches","matchHighlighter","wordAt","matchDeco","mainMatchDeco","trim","TagSystem","typeNames","typeIDs","flagMask","pow","typeShift","subtypes","parentNames","typeID","subID","parents","getWithMode","addTagProp","Rule","noContext","tags","byName","rule","highlighter","styling","Styling","Highlighter","defaultTags","styleTags","StyleRule","modSpec","nextCls","nodeStack","classStack","inheritStack","buildDeco","parsePos","curClass","inheritedClass","opaque","matchContext","_s","backTo","defaultHighlighter","deleted","link","strong","fontWeight","emphasis","invalid","keyword","typeName","comment","SelectedDiagnostic","diagnostic","LintState","diagnostics","findDiagnostic","maybeEnableLint","lintState","activeMark","lintTooltip","setDiagnostics","setDiagnosticsEffect","movePanelSelection","selPos","severity","DiagnosticWidget","LintPanel","stackStart","stackEnd","renderDiagnostic","openLintPanel","closeLintPanel","nextDiagnostic","lintKeymap","LintDelay","linter","lintTime","message","actions","action","onmousedown","PanelItem","items","tabIndex","moveSelection","selectedIndex","needsSync","newSelectedItem","_start","_end","domPos","underline","svg","btoa","diagnosticAction","lintRange","backgroundPosition","backgroundRepeat","lintPoint","borderBottomColor","background","basicSetup","parser","Parser","states","stateData","nodeNames","maxTerm","nodeProps","repeatNodeCount","tokenData","tokenizers","topRules","tokenPrec","indentNodeProp","syntaxIndentation","computeIndentation","ast","scanPos","strategy","indentStrategy","TreeIndentContext","ignoreClosed","delimitedStrategy","topIndent","atBreak","isParent","bracketedAligned","openToken","openLine","delimitedIndent","align","units","closedAt","aligned","flatIndent","continuedIndent","except","matchExcept","foldNodeProp","syntaxFolding","LezerSyntax","dialect","languageData","setSyntax","SyntaxState","advance","HighlightWorker","withProps","topType","withDialect","ensureTree","updatedTree","startParse","work","stopParse","hasNested","DocStream","cursorPos","stringStart","clip","endTime","takeTree","parsed","forceFinish","requestIdle","requestIdleCallback","callback","cancelIdle","cancelIdleCallback","working","scheduleWork","deadline","timeRemaining","badness","raw","jsonSyntax","Null","PropertyName","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","onclose","log","removeErrorOverlay","overlay","createErrorOverlay","getElementById","stackTrace","innerText","getParents","Function","cb"],"mappings":"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","file":"demo.d3b53871.js","sourceRoot":"..","sourcesContent":["// Compressed representation of the Grapheme_Cluster_Break=Extend\n// information from\n// http://www.unicode.org/Public/13.0.0/ucd/auxiliary/GraphemeBreakProperty.txt.\n// Each pair of elements represents a range, as an offet from the\n// previous range and a length. Numbers are in base-36, with the empty\n// string being a shorthand for 1.\nlet extend = \"lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o\".split(\",\").map(s => s ? parseInt(s, 36) : 1);\n// Convert offsets into absolute values\nfor (let i = 1; i < extend.length; i++)\n    extend[i] += extend[i - 1];\nfunction isExtendingChar(code) {\n    for (let i = 1; i < extend.length; i += 2)\n        if (extend[i] > code)\n            return extend[i - 1] <= code;\n    return false;\n}\nfunction isRegionalIndicator(code) {\n    return code >= 0x1F1E6 && code <= 0x1F1FF;\n}\nconst ZWJ = 0x200d;\n/// Returns a grapheme cluster end _after_ (not equal to) `pos`, if\n/// possible. Moves across surrogate pairs, extending characters,\n/// characters joined with zero-width joiners, and flag emoji.\nfunction nextClusterBreak(str, pos) {\n    if (pos == str.length)\n        return pos;\n    // If pos is in the middle of a surrogate pair, move to its start\n    if (pos && surrogateLow(str.charCodeAt(pos)) && surrogateHigh(str.charCodeAt(pos - 1)))\n        pos--;\n    let prev = codePointAt(str, pos);\n    pos += codePointSize(prev);\n    while (pos < str.length) {\n        let next = codePointAt(str, pos);\n        if (prev == ZWJ || next == ZWJ || isExtendingChar(next)) {\n            pos += codePointSize(next);\n            prev = next;\n        }\n        else if (isRegionalIndicator(next)) {\n            let countBefore = 0, i = pos - 2;\n            while (i >= 0 && isRegionalIndicator(codePointAt(str, i))) {\n                countBefore++;\n                i -= 2;\n            }\n            if (countBefore % 2 == 0)\n                break;\n            else\n                pos += 2;\n        }\n        else {\n            break;\n        }\n    }\n    return pos;\n}\n/// Returns a grapheme cluster end _before_ `pos`, if possible.\nfunction prevClusterBreak(str, pos) {\n    while (pos > 0) {\n        let found = nextClusterBreak(str, pos - 2);\n        if (found < pos)\n            return found;\n        pos--;\n    }\n    return 0;\n}\nfunction surrogateLow(ch) { return ch >= 0xDC00 && ch < 0xE000; }\nfunction surrogateHigh(ch) { return ch >= 0xD800 && ch < 0xDC00; }\n/// Find the code point at the given position in a string (as in the\n/// [`codePointAt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt)\n/// string method).\nfunction codePointAt(str, pos) {\n    let code0 = str.charCodeAt(pos);\n    if (!surrogateHigh(code0) || pos + 1 == str.length)\n        return code0;\n    let code1 = str.charCodeAt(pos + 1);\n    if (!surrogateLow(code1))\n        return code0;\n    return ((code0 - 0xd800) << 10) + (code1 - 0xdc00) + 0x10000;\n}\n/// Given a Unicode codepoint, return the JavaScript string that\n/// respresents it (as in\n/// [`String.fromCodePoint`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint).\nfunction fromCodePoint(code) {\n    if (code <= 0xffff)\n        return String.fromCharCode(code);\n    code -= 0x10000;\n    return String.fromCharCode((code >> 10) + 0xd800, (code & 1023) + 0xdc00);\n}\n/// The first character that takes up two positions in a JavaScript\n/// string. It is often useful to compare with this after calling\n/// `codePointAt`, to figure out whether your character takes up 1 or\n/// 2 index positions.\nfunction codePointSize(code) { return code < 0x10000 ? 1 : 2; }\n\n/// Count the column position at the given offset into the string,\n/// taking extending characters and tab size into account.\nfunction countColumn(string, n, tabSize) {\n    for (let i = 0; i < string.length;) {\n        if (string.charCodeAt(i) == 9) {\n            n += tabSize - (n % tabSize);\n            i++;\n        }\n        else {\n            n++;\n            i = nextClusterBreak(string, i);\n        }\n    }\n    return n;\n}\n/// Find the offset that corresponds to the given column position in a\n/// string, taking extending characters and tab size into account.\nfunction findColumn(string, n, col, tabSize) {\n    for (let i = 0; i < string.length;) {\n        if (n >= col)\n            return { offset: i, leftOver: 0 };\n        n += string.charCodeAt(i) == 9 ? tabSize - (n % tabSize) : 1;\n        i = nextClusterBreak(string, i);\n    }\n    return { offset: string.length, leftOver: col - n };\n}\n\n/// The document tree type.\nclass Text {\n    /// @internal\n    constructor() { }\n    /// Get the line description around the given position.\n    lineAt(pos) {\n        if (pos < 0 || pos > this.length)\n            throw new RangeError(`Invalid position ${pos} in document of length ${this.length}`);\n        for (let line of lineCache) {\n            if (line.doc == this && line.from <= pos && line.to >= pos)\n                return line;\n        }\n        return cacheLine(this.lineInner(pos, false, 1, 0).finish(this));\n    }\n    /// Get the description for the given (1-based) line number.\n    line(n) {\n        if (n < 1 || n > this.lines)\n            throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);\n        for (let line of lineCache) {\n            if (line.doc == this && line.number == n)\n                return line;\n        }\n        return cacheLine(this.lineInner(n, true, 1, 0).finish(this));\n    }\n    /// Replace a range of the text with the given lines. `text` should\n    /// have a length of at least one.\n    replace(from, to, text) {\n        let parts = [];\n        this.decompose(0, from, parts);\n        parts.push(text);\n        this.decompose(to, this.length, parts);\n        return TextNode.from(parts, this.length - (to - from) + text.length);\n    }\n    /// Append another document to this one.\n    append(text) {\n        return this.length == 0 ? text : text.length == 0 ? this : TextNode.from([this, text], this.length + text.length);\n    }\n    /// Retrieve the text between the given points.\n    slice(from, to = this.length) {\n        let parts = [];\n        this.decompose(from, to, parts);\n        return TextNode.from(parts, to - from);\n    }\n    /// Test whether this text is equal to another instance.\n    eq(other) { return this == other || eqContent(this, other); }\n    /// Iterate over the text. When `dir` is `-1`, iteration happens\n    /// from end to start. This will return lines and the breaks between\n    /// them as separate strings, and for long lines, might split lines\n    /// themselves into multiple chunks as well.\n    iter(dir = 1) { return new RawTextCursor(this, dir); }\n    /// Iterate over a range of the text. When `from` > `to`, the\n    /// iterator will run in reverse.\n    iterRange(from, to = this.length) { return new PartialTextCursor(this, from, to); }\n    /// Iterate over lines in the text, starting at position (_not_ line\n    /// number) `from`. An iterator returned by this combines all text\n    /// on a line into a single string (which may be expensive for very\n    /// long lines), and skips line breaks (its\n    /// [`lineBreak`](#text.TextIterator.lineBreak) property is always\n    /// false).\n    iterLines(from = 0) { return new LineCursor(this, from); }\n    /// @internal\n    toString() { return this.sliceString(0); }\n    /// Convert the document to an array of lines (which can be\n    /// deserialized again via [`Text.of`](#text.Text^of).\n    toJSON() {\n        let lines = [];\n        for (let iter = this.iterLines(); !iter.next().done;)\n            lines.push(iter.value);\n        return lines;\n    }\n    /// Create a `Text` instance for the given array of lines.\n    static of(text) {\n        if (text.length == 0)\n            throw new RangeError(\"A document must have at least one line\");\n        if (text.length == 1 && !text[0] && Text.empty)\n            return Text.empty;\n        let length = textLength(text);\n        return length < 1024 /* MaxLeaf */ ? new TextLeaf(text, length) : TextNode.from(TextLeaf.split(text, []), length);\n    }\n}\nif (typeof Symbol != \"undefined\")\n    Text.prototype[Symbol.iterator] = function () { return this.iter(); };\nlet lineCache = [], lineCachePos = -1, lineCacheSize = 10;\nfunction cacheLine(line) {\n    return lineCache[lineCachePos = (lineCachePos + 1) % lineCacheSize] = line;\n}\n// Leaves store an array of strings. There are always line breaks\n// between these strings (though not between adjacent Text nodes).\n// These are limited in length, so that bigger documents are\n// constructed as a tree structure. Long lines will be broken into a\n// number of single-line leaves.\nclass TextLeaf extends Text {\n    constructor(text, length = textLength(text)) {\n        super();\n        this.text = text;\n        this.length = length;\n    }\n    get lines() { return this.text.length; }\n    get children() { return null; }\n    lineInner(target, isLine, line, offset) {\n        for (let i = 0;; i++) {\n            let string = this.text[i], end = offset + string.length;\n            if ((isLine ? line : end) >= target)\n                return new Line(offset, end, line, string);\n            offset = end + 1;\n            line++;\n        }\n    }\n    decompose(from, to, target) {\n        target.push(new TextLeaf(sliceText(this.text, from, to), Math.min(to, this.length) - Math.max(0, from)));\n    }\n    lastLineLength() { return this.text[this.text.length - 1].length; }\n    firstLineLength() { return this.text[0].length; }\n    replace(from, to, text) {\n        let newLen = this.length + text.length - (to - from);\n        if (newLen >= 1024 /* MaxLeaf */ || !(text instanceof TextLeaf))\n            return super.replace(from, to, text);\n        return new TextLeaf(appendText(this.text, appendText(text.text, sliceText(this.text, 0, from)), to), newLen);\n    }\n    sliceString(from, to = this.length, lineSep = \"\\n\") {\n        let result = \"\";\n        for (let pos = 0, i = 0; pos <= to && i < this.text.length; i++) {\n            let line = this.text[i], end = pos + line.length;\n            if (pos > from && i)\n                result += lineSep;\n            if (from < end && to > pos)\n                result += line.slice(Math.max(0, from - pos), to - pos);\n            pos = end + 1;\n        }\n        return result;\n    }\n    flatten(target) {\n        target[target.length - 1] += this.text[0];\n        for (let i = 1; i < this.text.length; i++)\n            target.push(this.text[i]);\n    }\n    static split(text, target) {\n        let part = [], length = -1;\n        for (let line of text) {\n            for (;;) {\n                let newLength = length + line.length + 1;\n                if (newLength < 512 /* BaseLeaf */) {\n                    length = newLength;\n                    part.push(line);\n                    break;\n                }\n                let cut = 512 /* BaseLeaf */ - length - 1, after = line.charCodeAt(cut);\n                if (after >= 0xdc00 && after < 0xe000)\n                    cut++;\n                part.push(line.slice(0, cut));\n                target.push(new TextLeaf(part, 512 /* BaseLeaf */));\n                line = line.slice(cut);\n                length = -1;\n                part = [];\n            }\n        }\n        if (length != -1)\n            target.push(new TextLeaf(part, length));\n        return target;\n    }\n}\n// Nodes provide the tree structure of the `Text` type. They store a\n// number of other nodes or leaves, taking care to balance itself on\n// changes.\nclass TextNode extends Text {\n    constructor(children, length) {\n        super();\n        this.children = children;\n        this.length = length;\n        this.lines = 1;\n        for (let child of children)\n            this.lines += child.lines - 1;\n    }\n    lineInner(target, isLine, line, offset) {\n        for (let i = 0;; i++) {\n            let child = this.children[i], end = offset + child.length, endLine = line + child.lines - 1;\n            if ((isLine ? endLine : end) >= target) {\n                let inner = child.lineInner(target, isLine, line, offset), add;\n                if (inner.from == offset && (add = this.lineLengthTo(i))) {\n                    inner.from -= add;\n                    inner.content = null;\n                }\n                if (inner.to == end && (add = this.lineLengthFrom(i + 1))) {\n                    inner.to += add;\n                    inner.content = null;\n                }\n                return inner;\n            }\n            offset = end;\n            line = endLine;\n        }\n    }\n    decompose(from, to, target) {\n        for (let i = 0, pos = 0; pos < to && i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (from < end && to > pos) {\n                if (pos >= from && end <= to)\n                    target.push(child);\n                else\n                    child.decompose(from - pos, to - pos, target);\n            }\n            pos = end;\n        }\n    }\n    lineLengthTo(to) {\n        let length = 0;\n        for (let i = to - 1; i >= 0; i--) {\n            let child = this.children[i];\n            if (child.lines > 1)\n                return length + child.lastLineLength();\n            length += child.length;\n        }\n        return length;\n    }\n    lastLineLength() { return this.lineLengthTo(this.children.length); }\n    lineLengthFrom(from) {\n        let length = 0;\n        for (let i = from; i < this.children.length; i++) {\n            let child = this.children[i];\n            if (child.lines > 1)\n                return length + child.firstLineLength();\n            length += child.length;\n        }\n        return length;\n    }\n    firstLineLength() { return this.lineLengthFrom(0); }\n    replace(from, to, text) {\n        // Looks like a small change, try to optimize\n        if (text.length < 512 /* BaseLeaf */ && to - from < 512 /* BaseLeaf */) {\n            let lengthDiff = text.length - (to - from);\n            for (let i = 0, pos = 0; i < this.children.length; i++) {\n                let child = this.children[i], end = pos + child.length;\n                // Fast path: if the change only affects one child and the\n                // child's size remains in the acceptable range, only update\n                // that child\n                if (from >= pos && to <= end &&\n                    child.length + lengthDiff < (this.length + lengthDiff) >> (3 /* BranchShift */ - 1) &&\n                    child.length + lengthDiff > 0) {\n                    let copy = this.children.slice();\n                    copy[i] = child.replace(from - pos, to - pos, text);\n                    return new TextNode(copy, this.length + lengthDiff);\n                }\n                pos = end;\n            }\n        }\n        return super.replace(from, to, text);\n    }\n    sliceString(from, to = this.length, lineSep = \"\\n\") {\n        let result = \"\";\n        for (let i = 0, pos = 0; pos < to && i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (from < end && to > pos) {\n                let part = child.sliceString(from - pos, to - pos, lineSep);\n                if (from >= pos && to <= end)\n                    return part;\n                result += part;\n            }\n            pos = end;\n        }\n        return result;\n    }\n    flatten(target) {\n        for (let child of this.children)\n            child.flatten(target);\n    }\n    static from(children, length) {\n        if (!children.every(ch => ch instanceof Text))\n            throw new Error(\"NOP\");\n        if (length < 1024 /* MaxLeaf */) {\n            let text = [\"\"];\n            for (let child of children)\n                child.flatten(text);\n            return new TextLeaf(text, length);\n        }\n        let chunkLength = Math.max(512 /* BaseLeaf */, length >> 3 /* BranchShift */), maxLength = chunkLength << 1, minLength = chunkLength >> 1;\n        let chunked = [], currentLength = 0, currentChunk = [];\n        function add(child) {\n            let childLength = child.length, last;\n            if (!childLength)\n                return;\n            if (childLength > maxLength && child instanceof TextNode) {\n                for (let node of child.children)\n                    add(node);\n            }\n            else if (childLength > minLength && (currentLength > minLength || currentLength == 0)) {\n                flush();\n                chunked.push(child);\n            }\n            else if (child instanceof TextLeaf && currentLength > 0 &&\n                (last = currentChunk[currentChunk.length - 1]) instanceof TextLeaf &&\n                child.length + last.length <= 512 /* BaseLeaf */) {\n                currentLength += childLength;\n                currentChunk[currentChunk.length - 1] = new TextLeaf(appendText(child.text, last.text.slice()), child.length + last.length);\n            }\n            else {\n                if (currentLength + childLength > chunkLength)\n                    flush();\n                currentLength += childLength;\n                currentChunk.push(child);\n            }\n        }\n        function flush() {\n            if (currentLength == 0)\n                return;\n            chunked.push(currentChunk.length == 1 ? currentChunk[0] : TextNode.from(currentChunk, currentLength));\n            currentLength = 0;\n            currentChunk.length = 0;\n        }\n        for (let child of children)\n            add(child);\n        flush();\n        return chunked.length == 1 ? chunked[0] : new TextNode(chunked, length);\n    }\n}\nText.empty = Text.of([\"\"]);\nfunction textLength(text) {\n    let length = -1;\n    for (let line of text)\n        length += line.length + 1;\n    return length;\n}\nfunction appendText(text, target, from = 0, to = 1e9) {\n    for (let pos = 0, i = 0, first = true; i < text.length && pos <= to; i++) {\n        let line = text[i], end = pos + line.length;\n        if (end >= from) {\n            if (end > to)\n                line = line.slice(0, to - pos);\n            if (pos < from)\n                line = line.slice(from - pos);\n            if (first) {\n                target[target.length - 1] += line;\n                first = false;\n            }\n            else\n                target.push(line);\n        }\n        pos = end + 1;\n    }\n    return target;\n}\nfunction sliceText(text, from, to) {\n    return appendText(text, [\"\"], from, to);\n}\nfunction eqContent(a, b) {\n    if (a.length != b.length || a.lines != b.lines)\n        return false;\n    let iterA = new RawTextCursor(a), iterB = new RawTextCursor(b);\n    for (let offA = 0, offB = 0;;) {\n        if (iterA.lineBreak != iterB.lineBreak || iterA.done != iterB.done) {\n            return false;\n        }\n        else if (iterA.done) {\n            return true;\n        }\n        else if (iterA.lineBreak) {\n            iterA.next();\n            iterB.next();\n            offA = offB = 0;\n        }\n        else {\n            let strA = iterA.value.slice(offA), strB = iterB.value.slice(offB);\n            if (strA.length == strB.length) {\n                if (strA != strB)\n                    return false;\n                iterA.next();\n                iterB.next();\n                offA = offB = 0;\n            }\n            else if (strA.length > strB.length) {\n                if (strA.slice(0, strB.length) != strB)\n                    return false;\n                offA += strB.length;\n                iterB.next();\n                offB = 0;\n            }\n            else {\n                if (strB.slice(0, strA.length) != strA)\n                    return false;\n                offB += strA.length;\n                iterA.next();\n                offA = 0;\n            }\n        }\n    }\n}\nclass RawTextCursor {\n    constructor(text, dir = 1) {\n        this.dir = dir;\n        this.done = false;\n        this.lineBreak = false;\n        this.value = \"\";\n        this.nodes = [text];\n        this.offsets = [dir > 0 ? 0 : text instanceof TextLeaf ? text.text.length : text.children.length];\n    }\n    next(skip = 0) {\n        for (;;) {\n            let last = this.nodes.length - 1;\n            if (last < 0) {\n                this.done = true;\n                this.value = \"\";\n                this.lineBreak = false;\n                return this;\n            }\n            let top = this.nodes[last];\n            let offset = this.offsets[last];\n            if (top instanceof TextLeaf) {\n                // Internal offset with lineBreak == false means we have to\n                // count the line break at this position\n                if (offset != (this.dir > 0 ? 0 : top.text.length) && !this.lineBreak) {\n                    this.lineBreak = true;\n                    if (skip == 0) {\n                        this.value = \"\\n\";\n                        return this;\n                    }\n                    skip--;\n                    continue;\n                }\n                // Otherwise, move to the next string\n                let next = top.text[offset - (this.dir < 0 ? 1 : 0)];\n                this.offsets[last] = (offset += this.dir);\n                if (offset == (this.dir > 0 ? top.text.length : 0)) {\n                    this.nodes.pop();\n                    this.offsets.pop();\n                }\n                this.lineBreak = false;\n                if (next.length > Math.max(0, skip)) {\n                    this.value = skip == 0 ? next : this.dir > 0 ? next.slice(skip) : next.slice(0, next.length - skip);\n                    return this;\n                }\n                skip -= next.length;\n            }\n            else if (offset == (this.dir > 0 ? top.children.length : 0)) {\n                this.nodes.pop();\n                this.offsets.pop();\n            }\n            else {\n                let next = top.children[this.dir > 0 ? offset : offset - 1], len = next.length;\n                this.offsets[last] = offset + this.dir;\n                if (skip > len) {\n                    skip -= len;\n                }\n                else {\n                    this.nodes.push(next);\n                    this.offsets.push(this.dir > 0 ? 0 : next instanceof TextLeaf ? next.text.length : next.children.length);\n                }\n            }\n        }\n    }\n}\nclass PartialTextCursor {\n    constructor(text, start, end) {\n        this.value = \"\";\n        this.cursor = new RawTextCursor(text, start > end ? -1 : 1);\n        if (start > end) {\n            this.skip = text.length - start;\n            this.limit = start - end;\n        }\n        else {\n            this.skip = start;\n            this.limit = end - start;\n        }\n    }\n    next() {\n        if (this.limit <= 0) {\n            this.limit = -1;\n        }\n        else {\n            let { value, lineBreak, done } = this.cursor.next(this.skip);\n            this.skip = 0;\n            this.value = value;\n            let len = lineBreak ? 1 : value.length;\n            if (len > this.limit)\n                this.value = this.cursor.dir > 0 ? value.slice(0, this.limit) : value.slice(len - this.limit);\n            if (done || this.value.length == 0)\n                this.limit = -1;\n            else\n                this.limit -= this.value.length;\n        }\n        return this;\n    }\n    get lineBreak() { return this.cursor.lineBreak; }\n    get done() { return this.limit < 0; }\n}\nclass LineCursor {\n    constructor(text, from = 0) {\n        this.value = \"\";\n        this.done = false;\n        this.cursor = text.iter();\n        this.skip = from;\n    }\n    next() {\n        if (this.cursor.done) {\n            this.done = true;\n            this.value = \"\";\n            return this;\n        }\n        for (this.value = \"\";;) {\n            let { value, lineBreak, done } = this.cursor.next(this.skip);\n            this.skip = 0;\n            if (done || lineBreak)\n                return this;\n            this.value += value;\n        }\n    }\n    get lineBreak() { return false; }\n}\n// FIXME rename start/end to from/to for consistency with other types?\n/// This type describes a line in the document. It is created\n/// on-demand when lines are [queried](#text.Text.lineAt).\nclass Line {\n    /// @internal\n    constructor(\n    /// The position of the start of the line.\n    from, \n    /// The position at the end of the line (_before_ the line break,\n    /// if this isn't the last line).\n    to, \n    /// This line's line number (1-based).\n    number, \n    /// @internal\n    content) {\n        this.from = from;\n        this.to = to;\n        this.number = number;\n        this.content = content;\n    }\n    /// The length of the line (not including any line break after it).\n    get length() { return this.to - this.from; }\n    /// Retrieve a part of the content of this line. This is a method,\n    /// rather than, say, a string property, to avoid concatenating long\n    /// lines whenever they are accessed. Try to write your code, if it\n    /// is going to be doing a lot of line-reading, to read only the\n    /// parts it needs.\n    slice(from = 0, to = this.length) {\n        if (from == to)\n            return \"\";\n        if (typeof this.content == \"string\")\n            return this.content.slice(from, to);\n        if (!this.content)\n            this.content = new LineContent(this.doc, this.from);\n        let result = this.content.slice(from, to);\n        if (from == 0 && to == this.length)\n            this.content = result;\n        return result;\n    }\n    /// @internal\n    finish(text) {\n        this.doc = text;\n        return this;\n    }\n    /// Find the next (or previous if `forward` is false) grapheme\n    /// cluster break from the given start position (as an offset inside\n    /// the line, not the document). Will return a position greater than\n    /// (or less than if `forward` is false) `start` unless there is no\n    /// such index in the string.\n    findClusterBreak(start, forward) {\n        if (start < 0 || start > this.length)\n            throw new RangeError(\"Invalid position given to Line.findClusterBreak\");\n        let contextStart, context;\n        if (this.content == \"string\") {\n            contextStart = this.from;\n            context = this.content;\n        }\n        else {\n            contextStart = Math.max(0, start - 256);\n            context = this.slice(contextStart, Math.min(this.length, contextStart + 512));\n        }\n        return (forward ? nextClusterBreak : prevClusterBreak)(context, start - contextStart) + contextStart;\n    }\n}\nclass LineContent {\n    constructor(doc, start) {\n        this.doc = doc;\n        this.start = start;\n        this.cursor = null;\n        this.strings = null;\n    }\n    // FIXME quadratic complexity (somewhat) when iterating long lines in small pieces\n    slice(from, to) {\n        if (!this.cursor) {\n            this.cursor = this.doc.iter();\n            this.strings = [this.cursor.next(this.start).value];\n        }\n        for (let result = \"\", pos = 0, i = 0;; i++) {\n            if (i == this.strings.length) {\n                let next = this.cursor.next().value;\n                if (!next)\n                    return result;\n                this.strings.push(next);\n            }\n            let string = this.strings[i], start = pos;\n            pos += string.length;\n            if (pos <= from)\n                continue;\n            result += string.slice(Math.max(0, from - start), Math.min(string.length, to - start));\n            if (pos >= to)\n                return result;\n        }\n    }\n}\n\nexport { Line, Text, codePointAt, codePointSize, countColumn, findColumn, fromCodePoint, nextClusterBreak, prevClusterBreak };\n","/// The default maximum length of a `TreeBuffer` node.\nexport const DefaultBufferLength = 1024;\nclass Iteration {\n    constructor(enter, leave) {\n        this.enter = enter;\n        this.leave = leave;\n        this.result = undefined;\n    }\n    get done() { return this.result !== undefined; }\n    doEnter(type, start, end) {\n        let value = this.enter(type, start, end);\n        if (value === undefined)\n            return true;\n        if (value !== false)\n            this.result = value;\n        return false;\n    }\n}\nlet nextPropID = 0;\n/// Each [node type](#tree.NodeType) can have metadata associated with\n/// it in props. Instances of this class represent prop names.\nexport class NodeProp {\n    /// Create a new node prop type. You can optionally pass a\n    /// `deserialize` function.\n    constructor({ deserialize } = {}) {\n        this.id = nextPropID++;\n        this.deserialize = deserialize || (() => {\n            throw new Error(\"This node type doesn't define a deserialize function\");\n        });\n    }\n    /// Create a string-valued node prop whose deserialize function is\n    /// the identity function.\n    static string() { return new NodeProp({ deserialize: str => str }); }\n    /// Create a number-valued node prop whose deserialize function is\n    /// just `Number`.\n    static number() { return new NodeProp({ deserialize: Number }); }\n    /// Creates a boolean-valued node prop whose deserialize function\n    /// returns true for any input.\n    static flag() { return new NodeProp({ deserialize: () => true }); }\n    /// Store a value for this prop in the given object. This can be\n    /// useful when building up a prop object to pass to the\n    /// [`NodeType`](#tree.NodeType) constructor. Returns its first\n    /// argument.\n    set(propObj, value) {\n        propObj[this.id] = value;\n        return propObj;\n    }\n    /// This is meant to be used with\n    /// [`NodeGroup.extend`](#tree.NodeGroup.extend) or\n    /// [`Parser.withProps`](#lezer.Parser.withProps) to compute prop\n    /// values for each node type in the group. Takes a [match\n    /// object](#tree.NodeType^match) or function that returns undefined\n    /// if the node type doesn't get this prop, and the prop's value if\n    /// it does.\n    add(match) {\n        return new NodePropSource(this, typeof match == \"function\" ? match : NodeType.match(match));\n    }\n}\n/// The special node type that the parser uses to represent parse\n/// errors has this flag set. (You shouldn't use it for custom nodes\n/// that represent erroneous content.)\nNodeProp.error = NodeProp.flag();\n/// Nodes that were produced by skipped expressions (such as\n/// comments) have this prop set to true.\nNodeProp.skipped = NodeProp.flag();\n/// Prop that is used to describe matching delimiters. For opening\n/// delimiters, this holds an array of node names (written as a\n/// space-separated string when declaring this prop in a grammar)\n/// for the node types of closing delimiters that match it.\nNodeProp.closedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/// The inverse of [`openedBy`](#tree.NodeProp^closedBy). This is\n/// attached to closing delimiters, holding an array of node names\n/// of types of matching opening delimiters.\nNodeProp.openedBy = new NodeProp({ deserialize: str => str.split(\" \") });\n/// Indicates that this node indicates a top level document.\nNodeProp.top = NodeProp.flag();\n/// Type returned by [`NodeProp.add`](#tree.NodeProp.add). Describes\n/// the way a prop should be added to each node type in a node group.\nexport class NodePropSource {\n    /// @internal\n    constructor(\n    /// @internal\n    prop, \n    /// @internal\n    f) {\n        this.prop = prop;\n        this.f = f;\n    }\n}\n/// Each node in a syntax tree has a node type associated with it.\nexport class NodeType {\n    /// @internal\n    constructor(\n    /// The name of the node type. Not necessarily unique, but if the\n    /// grammar was written properly, different node types with the\n    /// same name within a node group should play the same semantic\n    /// role.\n    name, \n    /// @internal\n    props, \n    /// The id of this node in its group. Corresponds to the term ids\n    /// used in the parser.\n    id) {\n        this.name = name;\n        this.props = props;\n        this.id = id;\n    }\n    /// Retrieves a node prop for this type. Will return `undefined` if\n    /// the prop isn't present on this node.\n    prop(prop) { return this.props[prop.id]; }\n    /// Create a function from node types to arbitrary values by\n    /// specifying an object whose property names are node names. Often\n    /// useful with [`NodeProp.add`](#tree.NodeProp.add). You can put\n    /// multiple node names, separated by spaces, in a single property\n    /// name to map multiple node names to a single value.\n    static match(map) {\n        let direct = Object.create(null);\n        for (let prop in map)\n            for (let name of prop.split(\" \"))\n                direct[name] = map[prop];\n        return (node) => direct[node.name];\n    }\n}\n/// An empty dummy node type to use when no actual type is available.\nNodeType.none = new NodeType(\"\", Object.create(null), 0);\n/// A node group holds a collection of node types. It is used to\n/// compactly represent trees by storing their type ids, rather than a\n/// full pointer to the type object, in a number array. Each parser\n/// [has](#lezer.Parser.group) a node group, and [tree\n/// buffers](#tree.TreeBuffer) can only store collections of nodes\n/// from the same group. A group can have a maximum of 2**16 (65536)\n/// node types in it, so that the ids fit into 16-bit typed array\n/// slots.\nexport class NodeGroup {\n    /// Create a group with the given types. The `id` property of each\n    /// type should correspond to its position within the array.\n    constructor(\n    /// The node types in this group, by id.\n    types) {\n        this.types = types;\n        for (let i = 0; i < types.length; i++)\n            if (types[i].id != i)\n                throw new RangeError(\"Node type ids should correspond to array positions when creating a node group\");\n    }\n    /// Create a copy of this group with some node properties added. The\n    /// arguments to this method should be created with\n    /// [`NodeProp.add`](#tree.NodeProp.add).\n    extend(...props) {\n        let newTypes = [];\n        for (let type of this.types) {\n            let newProps = null;\n            for (let source of props) {\n                let value = source.f(type);\n                if (value !== undefined) {\n                    if (!newProps) {\n                        newProps = Object.create(null);\n                        for (let prop in type.props)\n                            newProps[prop] = type.props[prop];\n                    }\n                    newProps[source.prop.id] = value;\n                }\n            }\n            newTypes.push(newProps ? new NodeType(type.name, newProps, type.id) : type);\n        }\n        return new NodeGroup(newTypes);\n    }\n}\n/// A subtree is a representation of part of the syntax tree. It may\n/// either be the tree root, or a tagged node.\nexport class Subtree {\n    // Shorthand for `.type.name`.\n    get name() { return this.type.name; }\n    /// The depth (number of parent nodes) of this subtree\n    get depth() {\n        let d = 0;\n        for (let p = this.parent; p; p = p.parent)\n            d++;\n        return d;\n    }\n    /// The root of the tree that this subtree is part of\n    get root() {\n        let cx = this;\n        while (cx.parent)\n            cx = cx.parent;\n        return cx;\n    }\n    /// Find the node at a given position. By default, this will return\n    /// the lowest-depth subtree that covers the position from both\n    /// sides, meaning that nodes starting or ending at the position\n    /// aren't entered. You can pass a `side` of `-1` to enter nodes\n    /// that end at the position, or `1` to enter nodes that start\n    /// there.\n    resolve(pos, side = 0) {\n        let result = this.resolveAt(pos);\n        // FIXME this is slightly inefficient in that it scans the result\n        // of resolveAt twice (but further complicating child-finding\n        // logic seems unattractive as well)\n        if (side != 0)\n            for (;;) {\n                let child = (side < 0 ? result.childBefore(pos) : result.childAfter(pos));\n                if (!child || (side < 0 ? child.end : child.start) != pos)\n                    break;\n                result = child;\n            }\n        return result;\n    }\n    /// Get the first child of this subtree.\n    get firstChild() { return this.childAfter(this.start - 1); }\n    /// Find the last child of this subtree.\n    get lastChild() { return this.childBefore(this.end + 1); }\n}\n/// A piece of syntax tree. There are two ways to approach these\n/// trees: the way they are actually stored in memory, and the\n/// convenient way.\n///\n/// Syntax trees are stored as a tree of `Tree` and `TreeBuffer`\n/// objects. By packing detail information into `TreeBuffer` leaf\n/// nodes, the representation is made a lot more memory-efficient.\n///\n/// However, when you want to actually work with tree nodes, this\n/// representation is very awkward, so most client code will want to\n/// use the `Subtree` interface instead, which provides a view on some\n/// part of this data structure, and can be used (through `resolve`,\n/// for example) to zoom in on any single node.\nexport class Tree extends Subtree {\n    /// Construct a new tree. You usually want to go through\n    /// [`Tree.build`](#tree.Tree^build) instead.\n    constructor(type, \n    /// The tree's child nodes. Children small enough to fit in a\n    /// `TreeBuffer` will be represented as such, other children can be\n    /// further `Tree` instances with their own internal structure.\n    children, \n    /// The positions (offsets relative to the start of this tree) of\n    /// the children.\n    positions, \n    /// The total length of this tree\n    length) {\n        super();\n        this.type = type;\n        this.children = children;\n        this.positions = positions;\n        this.length = length;\n    }\n    get start() { return 0; }\n    get end() { return this.length; }\n    /// @internal\n    toString() {\n        let children = this.children.map(c => c.toString()).join();\n        return !this.name ? children :\n            (/\\W/.test(this.name) && !this.type.prop(NodeProp.error) ? JSON.stringify(this.name) : this.name) +\n                (children.length ? \"(\" + children + \")\" : \"\");\n    }\n    partial(start, end, offset, children, positions) {\n        for (let i = 0; i < this.children.length; i++) {\n            let from = this.positions[i];\n            if (from > end)\n                break;\n            let child = this.children[i], to = from + child.length;\n            if (to < start)\n                continue;\n            if (start <= from && end >= to) {\n                children.push(child);\n                positions.push(from + offset);\n            }\n            else if (child instanceof Tree) {\n                child.partial(start - from, end - from, offset + from, children, positions);\n            }\n        }\n    }\n    /// Apply a set of edits to a tree, removing all nodes that were\n    /// touched by the edits, and moving remaining nodes so that their\n    /// positions are updated for insertions/deletions before them. This\n    /// is likely to destroy a lot of the structure of the tree, and\n    /// mostly useful for extracting the nodes that can be reused in a\n    /// subsequent incremental re-parse.\n    applyChanges(changes) {\n        if (changes.length == 0)\n            return this;\n        let children = [], positions = [];\n        function cutAt(tree, pos, side) {\n            let found = -1;\n            tree.iterate({\n                from: pos,\n                to: side < 0 ? 0 : tree.length,\n                enter() { return found < 0 ? undefined : false; },\n                leave(type, start, end) {\n                    if (found < 0 && (side < 0 ? end <= pos : start >= pos) && !type.prop(NodeProp.error))\n                        found = side < 0 ? Math.min(pos, end - 1) : Math.max(pos, start + 1);\n                }\n            });\n            return found > -1 ? found : side < 0 ? 0 : tree.length;\n        }\n        let off = 0;\n        for (let i = 0, pos = 0;; i++) {\n            let next = i == changes.length ? null : changes[i];\n            let nextPos = next ? cutAt(this, next.fromA, -1) : this.length;\n            if (nextPos > pos)\n                this.partial(pos, nextPos, off, children, positions);\n            if (!next)\n                break;\n            pos = cutAt(this, next.toA, 1);\n            off += (next.toB - next.fromB) - (next.toA - next.fromA);\n        }\n        return new Tree(NodeType.none, children, positions, this.length + off);\n    }\n    /// Take the part of the tree up to the given position.\n    cut(at) {\n        if (at >= this.length)\n            return this;\n        let children = [], positions = [];\n        for (let i = 0; i < this.children.length; i++) {\n            let from = this.positions[i];\n            if (from >= at)\n                break;\n            let child = this.children[i], to = from + child.length;\n            children.push(to <= at ? child : child.cut(at - from));\n            positions.push(from);\n        }\n        return new Tree(this.type, children, positions, at);\n    }\n    iterate({ from = this.start, to = this.end, enter, leave }) {\n        let iter = new Iteration(enter, leave);\n        this.iterInner(from, to, 0, iter);\n        return iter.result;\n    }\n    /// @internal\n    iterInner(from, to, offset, iter) {\n        if (this.type.name && !iter.doEnter(this.type, offset, offset + this.length))\n            return;\n        if (from <= to) {\n            for (let i = 0; i < this.children.length && !iter.done; i++) {\n                let child = this.children[i], start = this.positions[i] + offset, end = start + child.length;\n                if (start > to)\n                    break;\n                if (end < from)\n                    continue;\n                child.iterInner(from, to, start, iter);\n            }\n        }\n        else {\n            for (let i = this.children.length - 1; i >= 0 && !iter.done; i--) {\n                let child = this.children[i], start = this.positions[i] + offset, end = start + child.length;\n                if (end < to)\n                    break;\n                if (start > from)\n                    continue;\n                child.iterInner(from, to, start, iter);\n            }\n        }\n        if (iter.leave && this.type.name)\n            iter.leave(this.type, offset, offset + this.length);\n        return;\n    }\n    /// @internal\n    resolveAt(pos) {\n        if (cacheRoot == this) {\n            for (let tree = cached;;) {\n                let next = tree.parent;\n                if (!next)\n                    break;\n                if (tree.start < pos && tree.end > pos)\n                    return tree.resolve(pos);\n                tree = next;\n            }\n        }\n        cacheRoot = this;\n        return cached = this.resolveInner(pos, 0, this);\n    }\n    childBefore(pos) {\n        return this.findChild(pos, -1, 0, this);\n    }\n    childAfter(pos) {\n        return this.findChild(pos, 1, 0, this);\n    }\n    /// @internal\n    findChild(pos, side, start, parent) {\n        for (let i = 0; i < this.children.length; i++) {\n            let childStart = this.positions[i] + start, select = -1;\n            if (childStart >= pos) {\n                if (side < 0 && i > 0)\n                    select = i - 1;\n                else if (side > 0)\n                    select = i;\n                else\n                    break;\n            }\n            if (select < 0 && (childStart + this.children[i].length > pos || side < 0 && i == this.children.length - 1))\n                select = i;\n            if (select >= 0) {\n                let child = this.children[select], childStart = this.positions[select] + start;\n                if (child.length == 0 && childStart == pos)\n                    continue;\n                if (child instanceof Tree) {\n                    if (child.type.name)\n                        return new NodeSubtree(child, childStart, parent);\n                    return child.findChild(pos, side, childStart, parent);\n                }\n                else {\n                    let found = child.findIndex(pos, side, childStart, 0, child.buffer.length);\n                    if (found > -1)\n                        return new BufferSubtree(child, childStart, found, parent);\n                }\n            }\n        }\n        return null;\n    }\n    /// @internal\n    resolveInner(pos, start, parent) {\n        let found = this.findChild(pos, 0, start, parent);\n        return found ? found.resolveAt(pos) : parent;\n    }\n    /// Append another tree to this tree. `other` must have empty space\n    /// big enough to fit this tree at its start.\n    append(other) {\n        if (other.children.length && other.positions[0] < this.length)\n            throw new Error(\"Can't append overlapping trees\");\n        return new Tree(this.type, this.children.concat(other.children), this.positions.concat(other.positions), other.length);\n    }\n    /// Balance the direct children of this tree.\n    balance(maxBufferLength = DefaultBufferLength) {\n        return this.children.length <= BalanceBranchFactor ? this\n            : balanceRange(this.type, NodeType.none, this.children, this.positions, 0, this.children.length, 0, maxBufferLength, this.length);\n    }\n    /// Build a tree from a postfix-ordered buffer of node information,\n    /// or a cursor over such a buffer. \n    static build(data) { return buildTree(data); }\n}\n/// The empty tree\nTree.empty = new Tree(NodeType.none, [], [], 0);\nTree.prototype.parent = null;\n// Top-level `resolveAt` calls store their last result here, so that\n// if the next call is near the last, parent trees can be cheaply\n// reused.\nlet cacheRoot = Tree.empty;\nlet cached = Tree.empty;\n/// Tree buffers contain (type, start, end, endIndex) quads for each\n/// node. In such a buffer, nodes are stored in prefix order (parents\n/// before children, with the endIndex of the parent indicating which\n/// children belong to it)\nexport class TreeBuffer {\n    /// Create a tree buffer @internal\n    constructor(\n    /// @internal\n    buffer, \n    // The total length of the group of nodes in the buffer.\n    length, \n    /// @internal\n    group, type = NodeType.none) {\n        this.buffer = buffer;\n        this.length = length;\n        this.group = group;\n        this.type = type;\n    }\n    /// @internal\n    toString() {\n        let parts = [];\n        for (let index = 0; index < this.buffer.length;)\n            index = this.childToString(index, parts);\n        return parts.join(\",\");\n    }\n    /// @internal\n    childToString(index, parts) {\n        let id = this.buffer[index], endIndex = this.buffer[index + 3];\n        let type = this.group.types[id], result = type.name;\n        if (/\\W/.test(result) && !type.prop(NodeProp.error))\n            result = JSON.stringify(result);\n        index += 4;\n        if (endIndex > index) {\n            let children = [];\n            while (index < endIndex)\n                index = this.childToString(index, children);\n            result += \"(\" + children.join(\",\") + \")\";\n        }\n        parts.push(result);\n        return index;\n    }\n    /// @internal\n    cut(at) {\n        let cutPoint = 0;\n        while (cutPoint < this.buffer.length && this.buffer[cutPoint + 1] < at)\n            cutPoint += 4;\n        let newBuffer = new Uint16Array(cutPoint);\n        for (let i = 0; i < cutPoint; i += 4) {\n            newBuffer[i] = this.buffer[i];\n            newBuffer[i + 1] = this.buffer[i + 1];\n            newBuffer[i + 2] = Math.min(at, this.buffer[i + 2]);\n            newBuffer[i + 3] = Math.min(this.buffer[i + 3], cutPoint);\n        }\n        return new TreeBuffer(newBuffer, Math.min(at, this.length), this.group);\n    }\n    iterate({ from = 0, to = this.length, enter, leave }) {\n        let iter = new Iteration(enter, leave);\n        this.iterInner(from, to, 0, iter);\n        return iter.result;\n    }\n    /// @internal\n    iterInner(from, to, offset, iter) {\n        if (from <= to) {\n            for (let index = 0; index < this.buffer.length;)\n                index = this.iterChild(from, to, offset, index, iter);\n        }\n        else {\n            this.iterRev(from, to, offset, 0, this.buffer.length, iter);\n        }\n    }\n    /// @internal\n    iterChild(from, to, offset, index, iter) {\n        let type = this.group.types[this.buffer[index++]], start = this.buffer[index++] + offset, end = this.buffer[index++] + offset, endIndex = this.buffer[index++];\n        if (start > to)\n            return this.buffer.length;\n        if (end >= from && iter.doEnter(type, start, end)) {\n            while (index < endIndex && !iter.done)\n                index = this.iterChild(from, to, offset, index, iter);\n            if (iter.leave)\n                iter.leave(type, start, end);\n        }\n        return endIndex;\n    }\n    parentNodesByEnd(startIndex, endIndex) {\n        // Build up an array of node indices reflecting the order in which\n        // non-empty nodes end, to avoid having to scan for parent nodes\n        // at every position during reverse iteration.\n        let order = [];\n        let scan = (index) => {\n            let end = this.buffer[index + 3];\n            if (end == index + 4)\n                return end;\n            for (let i = index + 4; i < end;)\n                i = scan(i);\n            order.push(index);\n            return end;\n        };\n        for (let index = startIndex; index < endIndex;)\n            index = scan(index);\n        return order;\n    }\n    /// @internal\n    iterRev(from, to, offset, startIndex, endIndex, iter) {\n        let endOrder = this.parentNodesByEnd(startIndex, endIndex);\n        // Index range for the next non-empty node\n        let nextStart = -1, nextEnd = -1;\n        let takeNext = () => {\n            if (endOrder.length > 0) {\n                nextStart = endOrder.pop();\n                nextEnd = this.buffer[nextStart + 3];\n            }\n            else {\n                nextEnd = -1;\n            }\n        };\n        takeNext();\n        run: for (let index = endIndex; index > startIndex && !iter.done;) {\n            while (nextEnd == index) {\n                let base = nextStart;\n                let id = this.buffer[base], start = this.buffer[base + 1] + offset, end = this.buffer[base + 2] + offset;\n                takeNext();\n                if (start <= from && end >= to) {\n                    if (!iter.doEnter(this.group.types[id], start, end)) {\n                        // Skip the entire node\n                        index = base;\n                        while (nextEnd > base)\n                            takeNext();\n                        continue run;\n                    }\n                }\n            }\n            let endIndex = this.buffer[--index], end = this.buffer[--index] + offset, start = this.buffer[--index] + offset, id = this.buffer[--index];\n            if (start > from || end < to)\n                continue;\n            if ((endIndex != index + 4 || iter.doEnter(this.group.types[id], start, end)) && iter.leave)\n                iter.leave(this.group.types[id], start, end);\n        }\n    }\n    /// @internal\n    findIndex(pos, side, start, from, to) {\n        let lastI = -1;\n        for (let i = from, buf = this.buffer; i < to;) {\n            let start1 = buf[i + 1] + start, end1 = buf[i + 2] + start;\n            let ignore = start1 == end1 && start1 == pos;\n            if (start1 >= pos) {\n                if (side > 0 && !ignore)\n                    return i;\n                break;\n            }\n            if (end1 > pos)\n                return i;\n            if (!ignore)\n                lastI = i;\n            i = buf[i + 3];\n        }\n        return side < 0 ? lastI : -1;\n    }\n}\nclass NodeSubtree extends Subtree {\n    constructor(node, start, parent) {\n        super();\n        this.node = node;\n        this.start = start;\n        this.parent = parent;\n    }\n    get type() { return this.node.type; }\n    get end() { return this.start + this.node.length; }\n    resolveAt(pos) {\n        if (pos <= this.start || pos >= this.end)\n            return this.parent.resolveAt(pos);\n        return this.node.resolveInner(pos, this.start, this);\n    }\n    childBefore(pos) {\n        return this.node.findChild(pos, -1, this.start, this);\n    }\n    childAfter(pos) {\n        return this.node.findChild(pos, 1, this.start, this);\n    }\n    toString() { return this.node.toString(); }\n    iterate({ from = this.start, to = this.end, enter, leave }) {\n        let iter = new Iteration(enter, leave);\n        this.node.iterInner(from, to, this.start, iter);\n        return iter.result;\n    }\n}\nclass BufferSubtree extends Subtree {\n    constructor(buffer, bufferStart, index, parent) {\n        super();\n        this.buffer = buffer;\n        this.bufferStart = bufferStart;\n        this.index = index;\n        this.parent = parent;\n    }\n    get type() { return this.buffer.group.types[this.buffer.buffer[this.index]]; }\n    get start() { return this.buffer.buffer[this.index + 1] + this.bufferStart; }\n    get end() { return this.buffer.buffer[this.index + 2] + this.bufferStart; }\n    get endIndex() { return this.buffer.buffer[this.index + 3]; }\n    childBefore(pos) {\n        let index = this.buffer.findIndex(pos, -1, this.bufferStart, this.index + 4, this.endIndex);\n        return index < 0 ? null : new BufferSubtree(this.buffer, this.bufferStart, index, this);\n    }\n    childAfter(pos) {\n        let index = this.buffer.findIndex(pos, 1, this.bufferStart, this.index + 4, this.endIndex);\n        return index < 0 ? null : new BufferSubtree(this.buffer, this.bufferStart, index, this);\n    }\n    iterate({ from = this.start, to = this.end, enter, leave }) {\n        let iter = new Iteration(enter, leave);\n        if (from <= to)\n            this.buffer.iterChild(from, to, this.bufferStart, this.index, iter);\n        else\n            this.buffer.iterRev(from, to, this.bufferStart, this.index, this.endIndex, iter);\n        return iter.result;\n    }\n    resolveAt(pos) {\n        if (pos <= this.start || pos >= this.end)\n            return this.parent.resolveAt(pos);\n        let found = this.buffer.findIndex(pos, 0, this.bufferStart, this.index + 4, this.endIndex);\n        return found < 0 ? this : new BufferSubtree(this.buffer, this.bufferStart, found, this).resolveAt(pos);\n    }\n    toString() {\n        let result = [];\n        this.buffer.childToString(this.index, result);\n        return result.join(\"\");\n    }\n}\nclass FlatBufferCursor {\n    constructor(buffer, index) {\n        this.buffer = buffer;\n        this.index = index;\n    }\n    get id() { return this.buffer[this.index - 4]; }\n    get start() { return this.buffer[this.index - 3]; }\n    get end() { return this.buffer[this.index - 2]; }\n    get size() { return this.buffer[this.index - 1]; }\n    get pos() { return this.index; }\n    next() { this.index -= 4; }\n    fork() { return new FlatBufferCursor(this.buffer, this.index); }\n}\nconst BalanceBranchFactor = 8;\nfunction buildTree(data) {\n    let { buffer, group, topID = 0, maxBufferLength = DefaultBufferLength, reused = [], minRepeatType = group.types.length } = data;\n    let cursor = Array.isArray(buffer) ? new FlatBufferCursor(buffer, buffer.length) : buffer;\n    let types = group.types;\n    function takeNode(parentStart, minPos, children, positions, tagBuffer) {\n        let { id, start, end, size } = cursor, buffer;\n        let startPos = start - parentStart;\n        if (size < 0) { // Reused node\n            children.push(reused[id]);\n            positions.push(startPos);\n            cursor.next();\n            return;\n        }\n        let type = types[id], node;\n        if (end - start <= maxBufferLength && (buffer = findBufferSize(cursor.pos - minPos))) {\n            // Small enough for a buffer, and no reused nodes inside\n            let data = new Uint16Array(buffer.size - buffer.skip);\n            let endPos = cursor.pos - buffer.size, index = data.length;\n            while (cursor.pos > endPos)\n                index = copyToBuffer(buffer.start, data, index);\n            node = new TreeBuffer(data, end - buffer.start, group, tagBuffer);\n            startPos = buffer.start - parentStart;\n        }\n        else { // Make it a node\n            let endPos = cursor.pos - size;\n            cursor.next();\n            let localChildren = [], localPositions = [];\n            // Check if this is a repeat wrapper. Store the id of the inner\n            // repeat node in the variable if it is\n            let repeating = id >= group.types.length ? id - (group.types.length - minRepeatType) : -1;\n            if (repeating > -1) {\n                type = types[repeating];\n                while (cursor.pos > endPos) {\n                    let isRepeat = cursor.id == repeating; // This starts with an inner repeated node\n                    takeNode(start, endPos, localChildren, localPositions, isRepeat ? type : NodeType.none);\n                }\n            }\n            else {\n                while (cursor.pos > endPos)\n                    takeNode(start, endPos, localChildren, localPositions, NodeType.none);\n            }\n            localChildren.reverse();\n            localPositions.reverse();\n            if (repeating > -1 && localChildren.length > BalanceBranchFactor)\n                node = balanceRange(type, type, localChildren, localPositions, 0, localChildren.length, 0, maxBufferLength, end - start);\n            else\n                node = new Tree(type, localChildren, localPositions, end - start);\n        }\n        children.push(node);\n        positions.push(startPos);\n    }\n    function findBufferSize(maxSize) {\n        // Scan through the buffer to find previous siblings that fit\n        // together in a TreeBuffer, and don't contain any reused nodes\n        // (which can't be stored in a buffer)\n        // If `type` is > -1, only include siblings with that same type\n        // (used to group repeat content into a buffer)\n        let fork = cursor.fork();\n        let size = 0, start = 0, skip = 0, minStart = fork.end - maxBufferLength;\n        scan: for (let minPos = fork.pos - maxSize; fork.pos > minPos;) {\n            let nodeSize = fork.size, startPos = fork.pos - nodeSize;\n            if (nodeSize < 0 || startPos < minPos || fork.start < minStart)\n                break;\n            let localSkipped = fork.id >= minRepeatType ? 4 : 0;\n            let nodeStart = fork.start;\n            fork.next();\n            while (fork.pos > startPos) {\n                if (fork.size < 0)\n                    break scan;\n                if (fork.id >= minRepeatType)\n                    localSkipped += 4;\n                fork.next();\n            }\n            start = nodeStart;\n            size += nodeSize;\n            skip += localSkipped;\n        }\n        return size > 4 ? { size, start, skip } : null;\n    }\n    function copyToBuffer(bufferStart, buffer, index) {\n        let { id, start, end, size } = cursor;\n        cursor.next();\n        let startIndex = index;\n        if (size > 4) {\n            let endPos = cursor.pos - (size - 4);\n            while (cursor.pos > endPos)\n                index = copyToBuffer(bufferStart, buffer, index);\n        }\n        if (id < minRepeatType) { // Don't copy repeat nodes into buffers\n            buffer[--index] = startIndex;\n            buffer[--index] = end - bufferStart;\n            buffer[--index] = start - bufferStart;\n            buffer[--index] = id;\n        }\n        return index;\n    }\n    let children = [], positions = [];\n    while (cursor.pos > 0)\n        takeNode(0, 0, children, positions, NodeType.none);\n    let length = children.length ? positions[0] + children[0].length : 0;\n    return new Tree(group.types[topID], children.reverse(), positions.reverse(), length);\n}\nfunction balanceRange(outerType, innerType, children, positions, from, to, start, maxBufferLength, length) {\n    let localChildren = [], localPositions = [];\n    if (length <= maxBufferLength) {\n        for (let i = from; i < to; i++) {\n            localChildren.push(children[i]);\n            localPositions.push(positions[i] - start);\n        }\n    }\n    else {\n        let maxChild = Math.max(maxBufferLength, Math.ceil(length * 1.5 / BalanceBranchFactor));\n        for (let i = from; i < to;) {\n            let groupFrom = i, groupStart = positions[i];\n            i++;\n            for (; i < to; i++) {\n                let nextEnd = positions[i] + children[i].length;\n                if (nextEnd - groupStart > maxChild)\n                    break;\n            }\n            if (i == groupFrom + 1) {\n                let only = children[groupFrom];\n                if (only instanceof Tree && only.type == innerType && only.length > maxChild << 1) { // Too big, collapse\n                    for (let j = 0; j < only.children.length; j++) {\n                        localChildren.push(only.children[j]);\n                        localPositions.push(only.positions[j] + groupStart - start);\n                    }\n                    continue;\n                }\n                localChildren.push(only);\n            }\n            else if (i == groupFrom + 1) {\n                localChildren.push(children[groupFrom]);\n            }\n            else {\n                let inner = balanceRange(innerType, innerType, children, positions, groupFrom, i, groupStart, maxBufferLength, positions[i - 1] + children[i - 1].length - groupStart);\n                if (innerType != NodeType.none && !containsType(inner.children, innerType))\n                    inner = new Tree(NodeType.none, inner.children, inner.positions, inner.length);\n                localChildren.push(inner);\n            }\n            localPositions.push(groupStart - start);\n        }\n    }\n    return new Tree(outerType, localChildren, localPositions, length);\n}\nfunction containsType(nodes, type) {\n    for (let elt of nodes)\n        if (elt.type == type)\n            return true;\n    return false;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import { Text, countColumn } from '@codemirror/next/text';\nexport { Text } from '@codemirror/next/text';\nimport { NodeProp, Tree } from 'lezer-tree';\n\nconst DefaultSplit = /\\r\\n?|\\n/;\n/// Distinguishes different ways in which positions can be mapped.\nvar MapMode;\n(function (MapMode) {\n    /// Map a position to a valid new position, even when its context\n    /// was deleted.\n    MapMode[MapMode[\"Simple\"] = 0] = \"Simple\";\n    /// Return -1 if deletion happens across the position.\n    MapMode[MapMode[\"TrackDel\"] = 1] = \"TrackDel\";\n    /// Return -1 if the character _before_ the position is deleted.\n    MapMode[MapMode[\"TrackBefore\"] = 2] = \"TrackBefore\";\n    /// Return -1 if the character _after_ the position is deleted.\n    MapMode[MapMode[\"TrackAfter\"] = 3] = \"TrackAfter\";\n})(MapMode || (MapMode = {}));\n/// A change description is a variant of [change set](#state.ChangeSet)\n/// that doesn't store the inserted text. As such, it can't be\n/// applied, but is cheaper to store and manipulate.\nclass ChangeDesc {\n    // Sections are encoded as pairs of integers. The first is the\n    // length in the current document, and the second is -1 for\n    // unaffected sections, and the length of the replacement content\n    // otherwise. So an insertion would be (0, n>0), a deletion (n>0,\n    // 0), and a replacement two positive numbers.\n    /// @internal\n    constructor(sections) {\n        this.sections = sections;\n    }\n    /// The length of the document before the change.\n    get length() {\n        let result = 0;\n        for (let i = 0; i < this.sections.length; i += 2)\n            result += this.sections[i];\n        return result;\n    }\n    /// The length of the document after the change.\n    get newLength() {\n        let result = 0;\n        for (let i = 0; i < this.sections.length; i += 2) {\n            let ins = this.sections[i + 1];\n            result += ins < 0 ? this.sections[i] : ins;\n        }\n        return result;\n    }\n    /// False when there are actual changes in this set.\n    get empty() { return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0; }\n    /// Iterate over the unchanged parts left by these changes.\n    iterGaps(f) {\n        for (let i = 0, posA = 0, posB = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++];\n            if (ins < 0) {\n                f(posA, posB, len);\n                posB += len;\n            }\n            else {\n                posB += ins;\n            }\n            posA += len;\n        }\n    }\n    /// Iterate over the ranges changed by these changes. (See\n    /// [`ChangeSet.iterChanges`](#state.ChangeSet.iterChanges) for a\n    /// variant that also provides you with the inserted text.)\n    ///\n    /// When `individual` is true, adjacent changes (which are kept\n    /// separate for [position mapping](#state.ChangeDesc.mapPos)) are\n    /// reported separately.\n    iterChangedRanges(f, individual = false) {\n        iterChanges(this, f, individual);\n    }\n    /// Get a description of the inverted form of these changes.\n    get invertedDesc() {\n        let sections = [];\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++];\n            if (ins < 0)\n                sections.push(len, ins);\n            else\n                sections.push(ins, len);\n        }\n        return new ChangeDesc(sections);\n    }\n    /// Compute the combined effect of applying another set of changes\n    /// after this one. The length of the document after this set should\n    /// match the length before `other`.\n    composeDesc(other) { return this.empty ? other : other.empty ? this : composeSets(this, other); }\n    /// Map this description, which should start with the same document\n    /// as `other`, over another set of changes, so that it can be\n    /// applied after it.\n    mapDesc(other, before = false) { return other.empty ? this : mapSet(this, other, before); }\n    /// Map a given position through these changes.\n    ///\n    /// `assoc` indicates which side the position should be associated\n    /// with. When it is negative or zero, the mapping will try to keep\n    /// the position close to the character before it (if any), and will\n    /// move it before insertions at that point or replacements across\n    /// that point. When it is positive, the position is associated with\n    /// the character after it, and will be moved forward for insertions\n    /// at or replacements across the position. Defaults to -1.\n    ///\n    /// `mode` determines whether deletions should be\n    /// [reported](#state.MapMode). It defaults to `MapMode.Simple`\n    /// (don't report deletions).\n    mapPos(pos, assoc = -1, mode = MapMode.Simple) {\n        let posA = 0, posB = 0;\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++], endA = posA + len;\n            if (ins < 0) {\n                if (endA > pos)\n                    return posB + (pos - posA);\n                posB += len;\n            }\n            else {\n                if (mode != MapMode.Simple && endA >= pos &&\n                    (mode == MapMode.TrackDel && posA < pos && endA > pos ||\n                        mode == MapMode.TrackBefore && posA < pos ||\n                        mode == MapMode.TrackAfter && endA > pos))\n                    return -1;\n                if (endA > pos || endA == pos && assoc < 0 && !len)\n                    return pos == posA || assoc < 0 ? posB : posB + ins;\n                posB += ins;\n            }\n            posA = endA;\n        }\n        if (pos > posA)\n            throw new RangeError(`Position ${pos} is out of range for changeset of length ${posA}`);\n        return posB;\n    }\n    /// Map a position in a way that reliably produces the same position\n    /// for a sequence of changes, regardless of the order in which they\n    /// were [mapped](#state.ChangeSet.map) and applied. This will map a\n    /// position to the start (or end) through _all_ adjacent changes\n    /// next to it, and often produces more surprising results than\n    /// [`mapPos`](#state.ChangeDesc.mapPos). But it can be useful in\n    /// cases where it is important that all clients in a collaborative\n    /// setting end up doing the precise same mapping.\n    mapPosStable(pos, side = -1) {\n        let posA = 0, posB = 0, lastB = 0;\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++], endA = posA + len;\n            if (ins < 0) {\n                if (endA > pos)\n                    return posB + Math.max(0, pos - posA);\n                lastB = posB += len;\n            }\n            else {\n                if (side <= 0 && endA >= pos)\n                    return lastB;\n                posB += ins;\n            }\n            posA = endA;\n        }\n        return posB;\n    }\n    /// Check whether these changes touch a given range. When one of the\n    /// changes entirely covers the range, the string `\"cover\"` is\n    /// returned.\n    touchesRange(from, to = from) {\n        for (let i = 0, pos = 0; i < this.sections.length && pos <= to;) {\n            let len = this.sections[i++], ins = this.sections[i++], end = pos + len;\n            if (ins >= 0 && pos <= to && end >= from)\n                return pos < from && end > to ? \"cover\" : true;\n            pos = end;\n        }\n        return false;\n    }\n    /// @internal\n    toString() {\n        let result = \"\";\n        for (let i = 0; i < this.sections.length;) {\n            let len = this.sections[i++], ins = this.sections[i++];\n            result += (result ? \" \" : \"\") + len + (ins >= 0 ? \":\" + ins : \"\");\n        }\n        return result;\n    }\n}\n/// A change set represents a group of modifications to a document. It\n/// stores the document length, and can only be applied to documents\n/// with exactly that length.\nclass ChangeSet extends ChangeDesc {\n    /// @internal\n    constructor(sections, \n    /// @internal\n    inserted) {\n        super(sections);\n        this.inserted = inserted;\n    }\n    /// Apply the changes to a document, returning the modified\n    /// document.\n    apply(doc) {\n        if (this.length != doc.length)\n            throw new RangeError(\"Applying change set to a document with the wrong length\");\n        iterChanges(this, (fromA, toA, fromB, _toB, text) => doc = doc.replace(fromB, fromB + (toA - fromA), text), false);\n        return doc;\n    }\n    /// Map this set, which should start with the same document as\n    /// `other`, over another set of changes, so that it can be applied\n    /// after it. When `before` is true, map as if the changes in\n    /// `other` happened before the ones in `this`.\n    mapDesc(other, before = false) { return mapSet(this, other, before, true); }\n    /// Given the document as it existed _before_ the changes, return a\n    /// change set that represents the inverse of this set, which could\n    /// be used to go from the document created by the changes back to\n    /// the document as it existed before the changes.\n    invert(doc) {\n        let sections = this.sections.slice(), inserted = [];\n        for (let i = 0, pos = 0; i < sections.length; i += 2) {\n            let len = sections[i], ins = sections[i + 1];\n            if (ins >= 0) {\n                sections[i] = ins;\n                sections[i + 1] = len;\n                let index = i >> 1;\n                while (inserted.length < index)\n                    inserted.push(Text.empty);\n                inserted.push(len ? doc.slice(pos, pos + len) : Text.empty);\n            }\n            pos += len;\n        }\n        return new ChangeSet(sections, inserted);\n    }\n    /// Combine two subsequent change sets into a single set. `other`\n    /// must start in the document produced by `this`. If `this` goes\n    /// `docA`  `docB` and `other` represents `docB`  `docC`, the\n    /// returned value will represent the change `docA`  `docC`.\n    compose(other) { return this.empty ? other : other.empty ? this : composeSets(this, other, true); }\n    /// Given another change set starting in the same document, maps this\n    /// change set over the other, producing a new change set that can be\n    /// applied to the document produced by applying `other`. When\n    /// `before` is `true`, order changes as if `this` comes before\n    /// `other`, otherwise (the default) treat `other` as coming first.\n    ///\n    /// Given two changes `A` and `B`, `A.compose(B.map(A))` and\n    /// `B.compose(A.map(B, true))` will produce the same document. This\n    /// provides a basic form of [operational\n    /// transformation](https://en.wikipedia.org/wiki/Operational_transformation),\n    /// and can be used for collaborative editing.\n    map(other, before = false) { return other.empty ? this : mapSet(this, other, before, true); }\n    /// Iterate over the changed ranges in the document, calling `f` for\n    /// each.\n    iterChanges(f, individual = false) {\n        iterChanges(this, f, individual);\n    }\n    /// Get a [change description](#state.ChangeDesc) for this change\n    /// set.\n    get desc() { return new ChangeDesc(this.sections); }\n    /// @internal\n    filter(ranges) {\n        let resultSections = [], resultInserted = [], filteredSections = [];\n        let iter = new SectionIter(this);\n        done: for (let i = 0, pos = 0;;) {\n            let next = i == ranges.length ? 1e9 : ranges[i++];\n            while (pos < next || pos == next && iter.len == 0) {\n                if (iter.done)\n                    break done;\n                let len = Math.min(iter.len, next - pos);\n                addSection(filteredSections, len, -1);\n                let ins = iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0;\n                addSection(resultSections, len, ins);\n                if (ins > 0)\n                    addInsert(resultInserted, resultSections, iter.text);\n                iter.forward(len);\n                pos += len;\n            }\n            let end = ranges[i++];\n            while (pos < end) {\n                if (iter.done)\n                    break done;\n                let len = Math.min(iter.len, end - pos);\n                addSection(resultSections, len, -1);\n                addSection(filteredSections, len, iter.ins == -1 ? -1 : iter.off == 0 ? iter.ins : 0);\n                iter.forward(len);\n                pos += len;\n            }\n        }\n        return { changes: new ChangeSet(resultSections, resultInserted),\n            filtered: new ChangeDesc(filteredSections) };\n    }\n    /// Serialize this change set to a JSON-representable value.\n    toJSON() {\n        let parts = [];\n        for (let i = 0; i < this.sections.length; i += 2) {\n            let len = this.sections[i], ins = this.sections[i + 1];\n            if (ins < 0)\n                parts.push(len);\n            else if (ins == 0)\n                parts.push([len]);\n            else\n                parts.push([len, this.inserted[i >> 1].toJSON()]);\n        }\n        return parts;\n    }\n    /// Create a change set for the given changes, for a document of the\n    /// given length, using `lineSep` as line separator.\n    static of(changes, length, lineSep) {\n        let sections = [], inserted = [], pos = 0;\n        let total = null;\n        function flush(force = false) {\n            if (!force && !sections.length)\n                return;\n            if (pos < length)\n                addSection(sections, length - pos, -1);\n            let set = new ChangeSet(sections, inserted);\n            total = total ? total.compose(set.map(total)) : set;\n            sections = [];\n            inserted = [];\n            pos = 0;\n        }\n        function process(spec) {\n            if (Array.isArray(spec)) {\n                for (let sub of spec)\n                    process(sub);\n            }\n            else if (spec instanceof ChangeSet) {\n                if (spec.length != length)\n                    throw new RangeError(`Mismatched change set length (got ${spec.length}, expected ${length})`);\n                flush();\n                total = total ? total.compose(spec.map(total)) : spec;\n            }\n            else {\n                let { from, to = from, insert } = spec;\n                if (from > to || from < 0 || to > length)\n                    throw new RangeError(`Invalid change range ${from} to ${to} (in doc of length ${length})`);\n                let insText = !insert ? Text.empty : typeof insert == \"string\" ? Text.of(insert.split(lineSep || DefaultSplit)) : insert;\n                let insLen = insText.length;\n                if (from == to && insLen == 0)\n                    return;\n                if (from < pos)\n                    flush();\n                if (from > pos)\n                    addSection(sections, from - pos, -1);\n                addSection(sections, to - from, insLen);\n                addInsert(inserted, sections, insText);\n                pos = to;\n            }\n        }\n        process(changes);\n        flush(!total);\n        return total;\n    }\n    /// Create an empty changeset of the given length.\n    static empty(length) {\n        return new ChangeSet(length ? [length, -1] : [], []);\n    }\n    /// Create a changeset from its JSON representation (as produced by\n    /// [`toJSON`](#state.ChangeSet.toJSON).\n    static fromJSON(json) {\n        let sections = [], inserted = [];\n        for (let i = 0; i < json.length; i++) {\n            let part = json[i];\n            if (typeof part == \"number\") {\n                sections.push(part, -1);\n            }\n            else if (part.length == 1) {\n                sections.push(part[0], 0);\n            }\n            else {\n                while (inserted.length < i - 1)\n                    inserted.push(Text.empty);\n                inserted[i] = Text.of(part[1]);\n                sections.push(part[0], inserted[i].length);\n            }\n        }\n        return new ChangeSet(sections, inserted);\n    }\n}\nfunction addSection(sections, len, ins, forceJoin = false) {\n    if (len == 0 && ins <= 0)\n        return;\n    let last = sections.length - 2;\n    if (last >= 0 && ins <= 0 && ins == sections[last + 1])\n        sections[last] += len;\n    else if (len == 0 && sections[last] == 0)\n        sections[last + 1] += ins;\n    else if (forceJoin) {\n        sections[last] += len;\n        sections[last + 1] += ins;\n    }\n    else\n        sections.push(len, ins);\n}\nfunction addInsert(values, sections, value) {\n    if (value.length == 0)\n        return;\n    let index = (sections.length - 2) >> 1;\n    if (index < values.length) {\n        values[values.length - 1] = values[values.length - 1].append(value);\n    }\n    else {\n        while (values.length < index)\n            values.push(Text.empty);\n        values.push(value);\n    }\n}\nfunction iterChanges(desc, f, individual) {\n    let inserted = desc.inserted;\n    for (let posA = 0, posB = 0, i = 0; i < desc.sections.length;) {\n        let len = desc.sections[i++], ins = desc.sections[i++];\n        if (ins < 0) {\n            posA += len;\n            posB += len;\n        }\n        else {\n            let endA = posA, endB = posB, text = Text.empty;\n            for (;;) {\n                endA += len;\n                endB += ins;\n                if (ins && inserted)\n                    text = text.append(inserted[(i - 2) >> 1]);\n                if (individual || i == desc.sections.length || desc.sections[i + 1] < 0)\n                    break;\n                len = desc.sections[i++];\n                ins = desc.sections[i++];\n            }\n            f(posA, endA, posB, endB, text);\n            posA = endA;\n            posB = endB;\n        }\n    }\n}\nfunction mapSet(setA, setB, before, mkSet = false) {\n    let sections = [], insert = mkSet ? [] : null;\n    let a = new SectionIter(setA), b = new SectionIter(setB);\n    for (let posA = 0, posB = 0;;) {\n        if (a.ins == -1) {\n            posA += a.len;\n            a.next();\n        }\n        else if (b.ins == -1 && posB < posA) {\n            let skip = Math.min(b.len, posA - posB);\n            b.forward(skip);\n            addSection(sections, skip, -1);\n            posB += skip;\n        }\n        else if (b.ins >= 0 && (a.done || posB < posA || posB == posA && (b.len < a.len || b.len == a.len && !before))) {\n            addSection(sections, b.ins, -1);\n            while (posA > posB && !a.done && posA + a.len < posB + b.len) {\n                posA += a.len;\n                a.next();\n            }\n            posB += b.len;\n            b.next();\n        }\n        else if (a.ins >= 0) {\n            let len = 0, end = posA + a.len;\n            for (;;) {\n                if (b.ins >= 0 && posB > posA && posB + b.len < end) {\n                    len += b.ins;\n                    posB += b.len;\n                    b.next();\n                }\n                else if (b.ins == -1 && posB < end) {\n                    let skip = Math.min(b.len, end - posB);\n                    len += skip;\n                    b.forward(skip);\n                    posB += skip;\n                }\n                else {\n                    break;\n                }\n            }\n            addSection(sections, len, a.ins);\n            if (insert)\n                addInsert(insert, sections, a.text);\n            posA = end;\n            a.next();\n        }\n        else if (a.done && b.done) {\n            return insert ? new ChangeSet(sections, insert) : new ChangeDesc(sections);\n        }\n        else {\n            throw new Error(\"Mismatched change set lengths\");\n        }\n    }\n}\nfunction composeSets(setA, setB, mkSet = false) {\n    let sections = [];\n    let insert = mkSet ? [] : null;\n    let a = new SectionIter(setA), b = new SectionIter(setB);\n    for (let open = false;;) {\n        if (a.done && b.done) {\n            return insert ? new ChangeSet(sections, insert) : new ChangeDesc(sections);\n        }\n        else if (a.ins == 0) { // Deletion in A\n            addSection(sections, a.len, 0, open);\n            a.next();\n        }\n        else if (b.len == 0 && !b.done) { // Insertion in B\n            addSection(sections, 0, b.ins, open);\n            if (insert)\n                addInsert(insert, sections, b.text);\n            b.next();\n        }\n        else if (a.done || b.done) {\n            throw new Error(\"Mismatched change set lengths\");\n        }\n        else {\n            let len = Math.min(a.len2, b.len), sectionLen = sections.length;\n            if (a.ins == -1) {\n                let insB = b.ins == -1 ? -1 : b.off ? 0 : b.ins;\n                addSection(sections, len, insB, open);\n                if (insert && insB)\n                    addInsert(insert, sections, b.text);\n            }\n            else if (b.ins == -1) {\n                addSection(sections, a.off ? 0 : a.len, len, open);\n                if (insert)\n                    addInsert(insert, sections, a.textBit(len));\n            }\n            else {\n                addSection(sections, a.off ? 0 : a.len, b.off ? 0 : b.ins, open);\n                if (insert && !b.off)\n                    addInsert(insert, sections, b.text);\n            }\n            open = (a.ins > len || b.ins >= 0 && b.len > len) && (open || sections.length > sectionLen);\n            a.forward2(len);\n            b.forward(len);\n        }\n    }\n}\nclass SectionIter {\n    constructor(set) {\n        this.set = set;\n        this.i = 0;\n        this.next();\n    }\n    next() {\n        let { sections } = this.set;\n        if (this.i < sections.length) {\n            this.len = sections[this.i++];\n            this.ins = sections[this.i++];\n        }\n        else {\n            this.len = 0;\n            this.ins = -2;\n        }\n        this.off = 0;\n    }\n    get done() { return this.ins == -2; }\n    get len2() { return this.ins < 0 ? this.len : this.ins; }\n    get text() {\n        let { inserted } = this.set, index = (this.i - 2) >> 1;\n        return index >= inserted.length ? Text.empty : inserted[index];\n    }\n    textBit(len) {\n        let { inserted } = this.set, index = (this.i - 2) >> 1;\n        return index >= inserted.length && !len ? Text.empty\n            : inserted[index].slice(this.off, len == null ? undefined : this.off + len);\n    }\n    forward(len) {\n        if (len == this.len)\n            this.next();\n        else {\n            this.len -= len;\n            this.off += len;\n        }\n    }\n    forward2(len) {\n        if (this.ins == -1)\n            this.forward(len);\n        else if (len == this.ins)\n            this.next();\n        else {\n            this.ins -= len;\n            this.off += len;\n        }\n    }\n}\n\n/// A single selection range. When\n/// [`allowMultipleSelections`](#state.EditorState^allowMultipleSelections)\n/// is enabled, a [selection](#state.EditorSelection) may hold\n/// multiple ranges. By default, selections hold exactly one range.\nclass SelectionRange {\n    // @internal\n    constructor(\n    /// The lower side of the range.\n    from, \n    /// The upper side of the range.\n    to, flags) {\n        this.from = from;\n        this.to = to;\n        this.flags = flags;\n    }\n    /// The anchor of the rangethe side that doesn't move when you\n    /// extend it.\n    get anchor() { return this.flags & 16 /* Inverted */ ? this.to : this.from; }\n    /// The head of the range, which is moved when the range is\n    /// [extended](#state.SelectionRange.extend).\n    get head() { return this.flags & 16 /* Inverted */ ? this.from : this.to; }\n    /// True when `anchor` and `head` are at the same position.\n    get empty() { return this.from == this.to; }\n    /// If this is a cursor that is explicitly associated with the\n    /// character on one of its sides, this returns the side. -1 means\n    /// the character before its position, 1 the character after, and 0\n    /// means no association.\n    get assoc() { return this.flags & 4 /* AssocBefore */ ? -1 : this.flags & 8 /* AssocAfter */ ? 1 : 0; }\n    /// The bidirectional text level associated with this cursor.\n    get bidiLevel() {\n        let level = this.flags & 3 /* BidiLevelMask */;\n        return level == 3 ? null : level;\n    }\n    get goalColumn() {\n        let value = this.flags >> 5 /* GoalColumnOffset */;\n        return value == 33554431 /* NoGoalColumn */ ? undefined : value;\n    }\n    /// Map this range through a mapping.\n    map(mapping) {\n        let from = mapping.mapPos(this.from), to = mapping.mapPos(this.to);\n        return from == this.from && to == this.to ? this : new SelectionRange(from, to, this.flags);\n    }\n    /// Extend this range to cover at least `from` to `to`.\n    extend(from, to = from) {\n        if (from <= this.anchor && to >= this.anchor)\n            return EditorSelection.range(from, to);\n        let head = Math.abs(from - this.anchor) > Math.abs(to - this.anchor) ? from : to;\n        return EditorSelection.range(this.anchor, head);\n    }\n    /// Compare this range to another range.\n    eq(other) {\n        return this.anchor == other.anchor && this.head == other.head;\n    }\n    /// Return a JSON-serializable object representing the range.\n    toJSON() { return { anchor: this.anchor, head: this.head }; }\n    /// Convert a JSON representation of a range to a `SelectionRange`\n    /// instance.\n    static fromJSON(json) {\n        if (!json || typeof json.anchor != \"number\" || typeof json.head != \"number\")\n            throw new RangeError(\"Invalid JSON representation for SelectionRange\");\n        return EditorSelection.range(json.anchor, json.head);\n    }\n}\n/// An editor selection holds one or more selection ranges.\nclass EditorSelection {\n    /// @internal\n    constructor(\n    /// The ranges in the selection, sorted by position. Ranges cannot\n    /// overlap (but they may touch, if they aren't empty).\n    ranges, \n    /// The index of the _primary_ range in the selection (which is\n    /// usually the range that was added last).\n    primaryIndex = 0) {\n        this.ranges = ranges;\n        this.primaryIndex = primaryIndex;\n    }\n    /// Map a selection through a mapping. Mostly used to adjust the\n    /// selection position for changes.\n    map(mapping) {\n        if (mapping.empty)\n            return this;\n        return EditorSelection.create(this.ranges.map(r => r.map(mapping)), this.primaryIndex);\n    }\n    /// Compare this selection to another selection.\n    eq(other) {\n        if (this.ranges.length != other.ranges.length ||\n            this.primaryIndex != other.primaryIndex)\n            return false;\n        for (let i = 0; i < this.ranges.length; i++)\n            if (!this.ranges[i].eq(other.ranges[i]))\n                return false;\n        return true;\n    }\n    /// Get the primary selection range. Usually, you should make sure\n    /// your code applies to _all_ ranges, by using methods like\n    /// [`changeByRange`](#state.EditorState.changeByRange).\n    get primary() { return this.ranges[this.primaryIndex]; }\n    /// Make sure the selection only has one range. Returns a selection\n    /// holding only the primary range from this selection.\n    asSingle() {\n        return this.ranges.length == 1 ? this : new EditorSelection([this.primary]);\n    }\n    /// Extend this selection with an extra range.\n    addRange(range, primary = true) {\n        return EditorSelection.create([range].concat(this.ranges), primary ? 0 : this.primaryIndex + 1);\n    }\n    /// Replace a given range with another range, and then normalize the\n    /// selection to merge and sort ranges if necessary.\n    replaceRange(range, which = this.primaryIndex) {\n        let ranges = this.ranges.slice();\n        ranges[which] = range;\n        return EditorSelection.create(ranges, this.primaryIndex);\n    }\n    /// Convert this selection to an object that can be serialized to\n    /// JSON.\n    toJSON() {\n        return { ranges: this.ranges.map(r => r.toJSON()), primaryIndex: this.primaryIndex };\n    }\n    /// Create a selection from a JSON representation.\n    static fromJSON(json) {\n        if (!json || !Array.isArray(json.ranges) || typeof json.primaryIndex != \"number\" || json.primaryIndex >= json.ranges.length)\n            throw new RangeError(\"Invalid JSON representation for EditorSelection\");\n        return new EditorSelection(json.ranges.map((r) => SelectionRange.fromJSON(r)), json.primaryIndex);\n    }\n    /// Create a selection holding a single range.\n    static single(anchor, head = anchor) {\n        return new EditorSelection([EditorSelection.range(anchor, head)], 0);\n    }\n    /// Sort and merge the given set of ranges, creating a valid\n    /// selection.\n    static create(ranges, primaryIndex = 0) {\n        if (ranges.length == 0)\n            throw new RangeError(\"A selection needs at least one range\");\n        for (let pos = 0, i = 0; i < ranges.length; i++) {\n            let range = ranges[i];\n            if (range.empty ? range.from <= pos : range.from < pos)\n                return normalized(ranges.slice(), primaryIndex);\n            pos = range.to;\n        }\n        return new EditorSelection(ranges, primaryIndex);\n    }\n    /// Create a cursor selection range at the given position. You can\n    /// probably ignore [association](#state.SelectionRange.assoc) and\n    /// [bidi level](#state.SelectionRange.bidiLevel) in most\n    /// situations.\n    static cursor(pos, assoc = 0, bidiLevel, goalColumn) {\n        return new SelectionRange(pos, pos, (assoc == 0 ? 0 : assoc < 0 ? 4 /* AssocBefore */ : 8 /* AssocAfter */) |\n            (bidiLevel == null ? 3 : Math.min(2, bidiLevel)) |\n            ((goalColumn !== null && goalColumn !== void 0 ? goalColumn : 33554431 /* NoGoalColumn */) << 5 /* GoalColumnOffset */));\n    }\n    /// Create a selection range.\n    static range(anchor, head, goalColumn) {\n        let goal = (goalColumn !== null && goalColumn !== void 0 ? goalColumn : 33554431 /* NoGoalColumn */) << 5 /* GoalColumnOffset */;\n        return head < anchor ? new SelectionRange(head, anchor, 16 /* Inverted */ | goal) : new SelectionRange(anchor, head, goal);\n    }\n}\nfunction normalized(ranges, primaryIndex = 0) {\n    let primary = ranges[primaryIndex];\n    ranges.sort((a, b) => a.from - b.from);\n    primaryIndex = ranges.indexOf(primary);\n    for (let i = 1; i < ranges.length; i++) {\n        let range = ranges[i], prev = ranges[i - 1];\n        if (range.empty ? range.from <= prev.to : range.from < prev.to) {\n            let from = prev.from, to = Math.max(range.to, prev.to);\n            if (i <= primaryIndex)\n                primaryIndex--;\n            ranges.splice(--i, 2, range.anchor > range.head ? EditorSelection.range(to, from) : EditorSelection.range(from, to));\n        }\n    }\n    return new EditorSelection(ranges, primaryIndex);\n}\nfunction checkSelection(selection, docLength) {\n    for (let range of selection.ranges)\n        if (range.to > docLength)\n            throw new RangeError(\"Selection points outside of document\");\n}\n\nlet nextID = 0;\n/// A facet is a value that is assicated with a state and can be\n/// influenced by any number of extensions. Extensions can provide\n/// input values for the facet, and the facet combines those into an\n/// output value.\n///\n/// Examples of facets are the theme styles associated with an editor\n/// (which are all stored) or the tab size (which is reduced to a\n/// single value, using the input with the hightest precedence).\nclass Facet {\n    constructor(\n    /// @internal\n    combine, \n    /// @internal\n    compareInput, \n    /// @internal\n    compare, isStatic) {\n        this.combine = combine;\n        this.compareInput = compareInput;\n        this.compare = compare;\n        this.isStatic = isStatic;\n        /// @internal\n        this.id = nextID++;\n        this.default = combine([]);\n    }\n    /// Define a new facet.\n    static define(config = {}) {\n        return new Facet(config.combine || ((a) => a), config.compareInput || ((a, b) => a === b), config.compare || (!config.combine ? sameArray : (a, b) => a === b), !!config.static);\n    }\n    /// Returns an extension that adds the given value for this facet.\n    of(value) {\n        return new FacetProvider([], this, 0 /* Static */, value);\n    }\n    /// Create an extension that computes a value for the facet from a\n    /// state. You must take care to declare the parts of the state that\n    /// this value depends on, since your function is only called again\n    /// for a new state when one of those parts changed.\n    ///\n    /// In most cases, you'll want to use the\n    /// [`provide`](#state.StateField^define^config.provide) option when\n    /// defining a field instead.\n    compute(deps, get) {\n        if (this.isStatic)\n            throw new Error(\"Can't compute a static facet\");\n        return new FacetProvider(deps, this, 1 /* Single */, get);\n    }\n    /// Create an extension that computes zero or more values for this\n    /// facet from a state.\n    computeN(deps, get) {\n        if (this.isStatic)\n            throw new Error(\"Can't compute a static facet\");\n        return new FacetProvider(deps, this, 2 /* Multi */, get);\n    }\n    /// Helper method for registering a facet source with a state field\n    /// via its [`provide`](#state.StateField^define^config.provide) option.\n    /// Returns a value that can be passed to that option to make the\n    /// field automatically provide a value for this facet.\n    from(get, prec) {\n        return field => maybePrec(prec, this.compute([field], state => get(state.field(field))));\n    }\n    /// Helper for [providing](#state.StateField^define^config.provide)\n    /// a dynamic number of values for this facet from a state field.\n    nFrom(get, prec) {\n        return field => maybePrec(prec, this.computeN([field], state => get(state.field(field))));\n    }\n}\nfunction sameArray(a, b) {\n    return a == b || a.length == b.length && a.every((e, i) => e === b[i]);\n}\nclass FacetProvider {\n    constructor(dependencies, facet, type, value) {\n        this.dependencies = dependencies;\n        this.facet = facet;\n        this.type = type;\n        this.value = value;\n        this.id = nextID++;\n    }\n    dynamicSlot(addresses) {\n        let getter = this.value;\n        let compare = this.facet.compareInput;\n        let idx = addresses[this.id] >> 1, multi = this.type == 2 /* Multi */;\n        let depDoc = false, depSel = false, depAddrs = [];\n        for (let dep of this.dependencies) {\n            if (dep == \"doc\")\n                depDoc = true;\n            else if (dep == \"selection\")\n                depSel = true;\n            else if ((addresses[dep.id] & 1) == 0)\n                depAddrs.push(addresses[dep.id]);\n        }\n        return (state, tr) => {\n            if (!tr || tr.reconfigure) {\n                state.values[idx] = getter(state);\n                return 1 /* Changed */;\n            }\n            else {\n                let depChanged = (depDoc && tr.docChanged) || (depSel && (tr.docChanged || tr.selection)) ||\n                    depAddrs.some(addr => (ensureAddr(state, addr) & 1 /* Changed */) > 0);\n                if (!depChanged)\n                    return 0;\n                let newVal = getter(state), oldVal = tr.startState.values[idx];\n                if (multi ? compareArray(newVal, oldVal, compare) : compare(newVal, oldVal))\n                    return 0;\n                state.values[idx] = newVal;\n                return 1 /* Changed */;\n            }\n        };\n    }\n}\nfunction compareArray(a, b, compare) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!compare(a[i], b[i]))\n            return false;\n    return true;\n}\nfunction dynamicFacetSlot(addresses, facet, providers) {\n    let providerAddrs = providers.map(p => addresses[p.id]);\n    let providerTypes = providers.map(p => p.type);\n    let dynamic = providerAddrs.filter(p => !(p & 1));\n    let idx = addresses[facet.id] >> 1;\n    return (state, tr) => {\n        let oldAddr = !tr ? null : tr.reconfigure ? tr.startState.config.address[facet.id] : idx << 1;\n        let changed = oldAddr == null;\n        for (let dynAddr of dynamic) {\n            if (ensureAddr(state, dynAddr) & 1 /* Changed */)\n                changed = true;\n        }\n        if (!changed)\n            return 0;\n        let values = [];\n        for (let i = 0; i < providerAddrs.length; i++) {\n            let value = getAddr(state, providerAddrs[i]);\n            if (providerTypes[i] == 2 /* Multi */)\n                for (let val of value)\n                    values.push(val);\n            else\n                values.push(value);\n        }\n        let newVal = facet.combine(values);\n        if (oldAddr != null && facet.compare(newVal, getAddr(tr.startState, oldAddr)))\n            return 0;\n        state.values[idx] = newVal;\n        return 1 /* Changed */;\n    };\n}\nfunction maybeIndex(state, id) {\n    let found = state.config.address[id];\n    return found == null ? null : found >> 1;\n}\n/// Fields can store additional information in an editor state, and\n/// keep it in sync with the rest of the state.\nclass StateField {\n    constructor(\n    /// @internal\n    id, createF, updateF, compareF, \n    /// @internal\n    facets) {\n        this.id = id;\n        this.createF = createF;\n        this.updateF = updateF;\n        this.compareF = compareF;\n        this.facets = facets;\n    }\n    /// Define a state field.\n    static define(config) {\n        let facets = [];\n        let field = new StateField(nextID++, config.create, config.update, config.compare || ((a, b) => a === b), facets);\n        if (config.provide)\n            for (let p of config.provide) {\n                if (p instanceof Facet)\n                    facets.push(p.compute([field], state => state.field(field)));\n                else\n                    facets.push(p(field));\n            }\n        return field;\n    }\n    /// @internal\n    slot(addresses) {\n        let idx = addresses[this.id] >> 1;\n        return (state, tr) => {\n            if (!tr) {\n                state.values[idx] = this.createF(state);\n                return 1 /* Changed */;\n            }\n            let oldVal, changed = 0;\n            if (tr.reconfigure) {\n                let oldIdx = maybeIndex(tr.startState, this.id);\n                oldVal = oldIdx == null ? this.createF(tr.startState) : tr.startState.values[oldIdx];\n                changed = 1 /* Changed */;\n            }\n            else {\n                oldVal = tr.startState.values[idx];\n            }\n            let value = this.updateF(oldVal, tr);\n            if (!changed && !this.compareF(oldVal, value))\n                changed = 1 /* Changed */;\n            if (changed)\n                state.values[idx] = value;\n            return changed;\n        };\n    }\n}\nconst Prec = { fallback: 3, default: 2, extend: 1, override: 0 };\n/// By default extensions are registered in the order they are found\n/// the flattened form of nested array that was provided. Individual\n/// extension values can be assigned a precedence to override this.\n/// Extensions that do not have a precedence set get the precedence of\n/// the nearest parent with a precedence, or\n/// [`\"default\"`](#state.Precedence) if there is no such parent. The\n/// final ordering of extensions is determined by first sorting by\n/// precedence and then by order within each precedence.\nfunction precedence(extension, value) {\n    if (!Prec.hasOwnProperty(value))\n        throw new RangeError(`Invalid precedence: ${value}`);\n    return new PrecExtension(extension, Prec[value]);\n}\nfunction maybePrec(prec, ext) {\n    return prec ? precedence(ext, prec) : ext;\n}\nclass PrecExtension {\n    constructor(e, prec) {\n        this.e = e;\n        this.prec = prec;\n    }\n}\nclass TaggedExtension {\n    constructor(tag, extension) {\n        this.tag = tag;\n        this.extension = extension;\n    }\n}\n/// Tagged extensions can be used to make a configuration dynamic.\n/// Tagging an extension allows you to later\n/// [replace](#state.TransactionSpec.reconfigure) it with\n/// another extension. A given tag may only occur once within a given\n/// configuration.\nfunction tagExtension(tag, extension) {\n    return new TaggedExtension(tag, extension);\n}\nclass Configuration {\n    constructor(source, replacements, dynamicSlots, address, staticValues) {\n        this.source = source;\n        this.replacements = replacements;\n        this.dynamicSlots = dynamicSlots;\n        this.address = address;\n        this.staticValues = staticValues;\n        this.statusTemplate = [];\n        while (this.statusTemplate.length < staticValues.length)\n            this.statusTemplate.push(0 /* Uninitialized */);\n    }\n    staticFacet(facet) {\n        let addr = this.address[facet.id];\n        return addr == null ? facet.default : this.staticValues[addr >> 1];\n    }\n    static resolve(extension, replacements = Object.create(null), oldState) {\n        let fields = [];\n        let facets = Object.create(null);\n        for (let ext of flatten(extension, replacements)) {\n            if (ext instanceof StateField)\n                fields.push(ext);\n            else\n                (facets[ext.facet.id] || (facets[ext.facet.id] = [])).push(ext);\n        }\n        let address = Object.create(null);\n        let staticValues = [];\n        let dynamicSlots = [];\n        for (let field of fields) {\n            address[field.id] = dynamicSlots.length << 1;\n            dynamicSlots.push(a => field.slot(a));\n        }\n        for (let id in facets) {\n            let providers = facets[id], facet = providers[0].facet;\n            if (providers.every(p => p.type == 0 /* Static */)) {\n                address[facet.id] = (staticValues.length << 1) | 1;\n                let value = facet.combine(providers.map(p => p.value));\n                let oldAddr = oldState ? oldState.config.address[facet.id] : null;\n                if (oldAddr != null) {\n                    let oldVal = getAddr(oldState, oldAddr);\n                    if (facet.compare(value, oldVal))\n                        value = oldVal;\n                }\n                staticValues.push(value);\n            }\n            else {\n                for (let p of providers) {\n                    if (p.type == 0 /* Static */) {\n                        address[p.id] = (staticValues.length << 1) | 1;\n                        staticValues.push(p.value);\n                    }\n                    else {\n                        address[p.id] = dynamicSlots.length << 1;\n                        dynamicSlots.push(a => p.dynamicSlot(a));\n                    }\n                }\n                address[facet.id] = dynamicSlots.length << 1;\n                dynamicSlots.push(a => dynamicFacetSlot(a, facet, providers));\n            }\n        }\n        return new Configuration(extension, replacements, dynamicSlots.map(f => f(address)), address, staticValues);\n    }\n}\nfunction allKeys(obj) {\n    return (Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(obj) : []).concat(Object.keys(obj));\n}\nfunction flatten(extension, replacements) {\n    let result = [[], [], [], []];\n    let seen = new Map();\n    let tagsSeen = Object.create(null);\n    function inner(ext, prec) {\n        let known = seen.get(ext);\n        if (known != null) {\n            if (known >= prec)\n                return;\n            let found = result[known].indexOf(ext);\n            if (found > -1)\n                result[known].splice(found, 1);\n        }\n        seen.set(ext, prec);\n        if (Array.isArray(ext)) {\n            for (let e of ext)\n                inner(e, prec);\n        }\n        else if (ext instanceof TaggedExtension) {\n            if (ext.tag in tagsSeen)\n                throw new RangeError(`Duplicate use of tag '${String(ext.tag)}' in extensions`);\n            tagsSeen[ext.tag] = true;\n            inner(replacements[ext.tag] || ext.extension, prec);\n        }\n        else if (ext.extension) {\n            inner(ext.extension, prec);\n        }\n        else if (ext instanceof PrecExtension) {\n            inner(ext.e, ext.prec);\n        }\n        else {\n            result[prec].push(ext);\n            if (ext instanceof StateField)\n                inner(ext.facets, prec);\n        }\n    }\n    inner(extension, Prec.default);\n    for (let key of allKeys(replacements))\n        if (!(key in tagsSeen) && key != \"full\" && replacements[key]) {\n            tagsSeen[key] = true;\n            inner(replacements[key], Prec.default);\n        }\n    return result.reduce((a, b) => a.concat(b));\n}\nfunction ensureAddr(state, addr) {\n    if (addr & 1)\n        return 2 /* Computed */;\n    let idx = addr >> 1;\n    let status = state.status[idx];\n    if (status == 4 /* Computing */)\n        throw new Error(\"Cyclic dependency between fields and/or facets\");\n    if (status & 2 /* Computed */)\n        return status;\n    state.status[idx] = 4 /* Computing */;\n    let changed = state.config.dynamicSlots[idx](state, state.applying);\n    return state.status[idx] = 2 /* Computed */ | changed;\n}\nfunction getAddr(state, addr) {\n    return addr & 1 ? state.config.staticValues[addr >> 1] : state.values[addr >> 1];\n}\n\nconst allowMultipleSelections = Facet.define({\n    combine: values => values.some(v => v),\n    static: true\n});\nconst lineSeparator = Facet.define({\n    combine: values => values.length ? values[0] : undefined,\n    static: true\n});\nconst changeFilter = Facet.define();\nconst transactionFilter = Facet.define();\n/// A node prop stored on a grammar's top node to indicate the facet\n/// used to store [language data](#state.EditorState.languageDataAt)\n/// related to that language.\nconst languageDataProp = new NodeProp();\nconst globalLanguageData = Facet.define();\n/// Indentation contexts are used when calling\n/// [`EditorState.indentation`](#state.EditorState^indentation). They\n/// provide helper utilities useful in indentation logic, and can\n/// selectively override the indentation reported for some\n/// lines.\nclass IndentContext {\n    /// Create an indent context.\n    constructor(\n    /// The editor state.\n    state, \n    /// @internal\n    options = {}) {\n        this.state = state;\n        this.options = options;\n    }\n    /// The indent unit (number of columns per indentation level).\n    get unit() { return this.state.indentUnit; }\n    /// Get the text directly after `pos`, either the entire line\n    /// or the next 100 characters, whichever is shorter.\n    textAfterPos(pos) {\n        var _a, _b;\n        let sim = (_a = this.options) === null || _a === void 0 ? void 0 : _a.simulateBreak;\n        if (pos == sim && ((_b = this.options) === null || _b === void 0 ? void 0 : _b.simulateDoubleBreak))\n            return \"\";\n        return this.state.sliceDoc(pos, Math.min(pos + 100, sim != null && sim > pos ? sim : 1e9, this.state.doc.lineAt(pos).to));\n    }\n    /// find the column position (taking tabs into account) of the given\n    /// position in the given string.\n    countColumn(line, pos) {\n        return countColumn(pos < 0 ? line : line.slice(0, pos), 0, this.state.tabSize);\n    }\n    /// Find the indentation column of the given document line.\n    lineIndent(line) {\n        var _a;\n        let override = (_a = this.options) === null || _a === void 0 ? void 0 : _a.overrideIndentation;\n        if (override) {\n            let overriden = override(line.from);\n            if (overriden > -1)\n                return overriden;\n        }\n        let text = line.slice(0, Math.min(100, line.length));\n        return this.countColumn(text, text.search(/\\S/));\n    }\n    /// Find the column for the given position.\n    column(pos) {\n        var _a;\n        let line = this.state.doc.lineAt(pos), text = line.slice(0, pos - line.from);\n        let result = this.countColumn(text, pos - line.from);\n        let override = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.overrideIndentation) ? this.options.overrideIndentation(line.from) : -1;\n        if (override > -1)\n            result += override - this.countColumn(text, text.search(/\\S/));\n        return result;\n    }\n}\n\n/// Annotations are tagged values that are used to add metadata to\n/// transactions in an extensible way. They should be used to model\n/// things that effect the entire transaction (such as its [time\n/// stamp](#state.Transaction^time) or information about its\n/// [origin](#state.Transaction^userEvent)). For effects that happen\n/// _alongside_ the other changes made by the transaction, [state\n/// effects](#state.StateEffect) are more appropriate.\nclass Annotation {\n    /// @internal\n    constructor(type, value) {\n        this.type = type;\n        this.value = value;\n    }\n    /// Define a new type of annotation.\n    static define() { return new AnnotationType(); }\n}\n/// Marker that identifies a type of [annotation](#state.Annotation).\nclass AnnotationType {\n    of(value) { return new Annotation(this, value); }\n}\n/// State effects can be used to represent additional effects\n/// associated with a [transaction](#state.Transaction.effects). They\n/// are often useful to model changes to custom [state\n/// fields](#state.StateField), when those changes aren't implicit in\n/// document or selection changes.\nclass StateEffect {\n    /// @internal\n    constructor(\n    /// @internal\n    type, \n    /// The value of this effect.\n    value) {\n        this.type = type;\n        this.value = value;\n    }\n    /// Map this effect through a position mapping. Will return\n    /// `undefined` when that ends up deleting the effect.\n    map(mapping) {\n        let mapped = this.type.map(this.value, mapping);\n        return mapped === undefined ? undefined : mapped == this.value ? this : new StateEffect(this.type, mapped);\n    }\n    /// Tells you whether this effect object is of a given\n    /// [type](#state.StateEffectType).\n    is(type) { return this.type == type; }\n    /// Define a new effect type. The type parameter indicates the type\n    /// of values that his effect holds.\n    static define(spec = {}) {\n        return new StateEffectType(spec.map || (v => v));\n    }\n    /// Map an array of effects through a change set.\n    static mapEffects(effects, mapping) {\n        if (!effects.length)\n            return effects;\n        let result = [];\n        for (let effect of effects) {\n            let mapped = effect.map(mapping);\n            if (mapped)\n                result.push(mapped);\n        }\n        return result;\n    }\n}\n/// Representation of a type of state effect. Defined with\n/// [`StateEffect.define`](#state.StateEffect^define).\nclass StateEffectType {\n    /// @internal\n    constructor(\n    // The `any` types in these function types are there to work\n    // around TypeScript issue #37631, where the type guard on\n    // `StateEffect.is` mysteriously stops working when these properly\n    // have type `Value`.\n    /// @internal\n    map) {\n        this.map = map;\n    }\n    /// Create a [state effect](#state.StateEffect) instance of this\n    /// type.\n    of(value) { return new StateEffect(this, value); }\n}\n/// Changes to the editor state are grouped into transactions.\n/// Typically, a user action creates a single transaction, which may\n/// contain any number of document changes, may change the selection,\n/// or have other effects. Create a transaction by calling\n/// [`EditorState.update`](#state.EditorState.update).\nclass Transaction {\n    /// @internal\n    constructor(\n    /// The state from which the transaction starts.\n    startState, \n    /// The document changes made by this transaction.\n    changes, \n    /// The selection set by this transaction, or undefined if it\n    /// doesn't explicitly set a selection.\n    selection, \n    /// The effects added to the transaction.\n    effects, \n    /// @internal\n    annotations, \n    /// Holds an object when this transaction\n    /// [reconfigures](#state.ReconfigurationSpec) the state.\n    reconfigure, \n    /// Whether the selection should be scrolled into view after this\n    /// transaction is dispatched.\n    scrollIntoView) {\n        this.startState = startState;\n        this.changes = changes;\n        this.selection = selection;\n        this.effects = effects;\n        this.annotations = annotations;\n        this.reconfigure = reconfigure;\n        this.scrollIntoView = scrollIntoView;\n        /// @internal\n        this._doc = null;\n        /// @internal\n        this._state = null;\n        if (selection)\n            checkSelection(selection, changes.newLength);\n        if (!annotations.some((a) => a.type == Transaction.time))\n            this.annotations = annotations.concat(Transaction.time.of(Date.now()));\n    }\n    /// The new document produced by the transaction. (Mostly exposed so\n    /// that [transaction filters](#state.EditorState^transactionFilter)\n    /// can look at the new document without forcing an entire new state\n    /// to be computed by accessing\n    /// [`.state`](#state.Transaction.state).\n    get newDoc() {\n        return this._doc || (this._doc = this.changes.apply(this.startState.doc));\n    }\n    /// The new selection produced by the transaction. If\n    /// [`this.selection`](#state.Transaction.selection) is undefined,\n    /// this will [map](#state.EditorSelection.map) the start state's\n    /// current selection through the changes made by the transaction.\n    get newSelection() {\n        return this.selection || this.startState.selection.map(this.changes);\n    }\n    /// The new state created by the transaction.\n    get state() {\n        if (!this._state)\n            this.startState.applyTransaction(this);\n        return this._state;\n    }\n    /// Get the value of the given annotation type, if any.\n    annotation(type) {\n        for (let ann of this.annotations)\n            if (ann.type == type)\n                return ann.value;\n        return undefined;\n    }\n    /// Indicates whether the transaction changed the document.\n    get docChanged() { return !this.changes.empty; }\n}\n/// Annotation used to store transaction timestamps.\nTransaction.time = Annotation.define();\n/// Annotation used to associate a transaction with a user interface\n/// event. The view will set this to...\n///\n///  - `\"input\"` when the user types text\n///  - `\"delete\"` when the user deletes the selection or text near the selection\n///  - `\"keyboardselection\"` when moving the selection via the keyboard\n///  - `\"pointerselection\"` when moving the selection through the pointing device\n///  - `\"paste\"` when pasting content\n///  - `\"cut\"` when cutting\n///  - `\"drop\"` when content is inserted via drag-and-drop\nTransaction.userEvent = Annotation.define();\n/// Annotation indicating whether a transaction should be added to\n/// the undo history or not.\nTransaction.addToHistory = Annotation.define();\nfunction joinRanges(a, b) {\n    let result = [];\n    for (let iA = 0, iB = 0;;) {\n        let from, to;\n        if (iA < a.length && (iB == b.length || b[iB] >= a[iA])) {\n            from = a[iA++];\n            to = a[iA++];\n        }\n        else if (iB < b.length) {\n            from = b[iB++];\n            to = b[iB++];\n        }\n        else\n            return result;\n        if (!result.length || result[result.length - 1] < from)\n            result.push(from, to);\n        else if (result[result.length - 1] < to)\n            result[result.length - 1] = to;\n    }\n}\nfunction mergeTransaction(a, b, sequential) {\n    var _a;\n    let mapForA, mapForB, changes;\n    if (sequential) {\n        mapForA = b.changes;\n        mapForB = ChangeSet.empty(b.changes.length);\n        changes = a.changes.compose(b.changes);\n    }\n    else {\n        mapForA = b.changes.map(a.changes);\n        mapForB = a.changes.mapDesc(b.changes, true);\n        changes = a.changes.compose(mapForA);\n    }\n    return {\n        changes,\n        selection: b.selection ? b.selection.map(mapForB) : (_a = a.selection) === null || _a === void 0 ? void 0 : _a.map(mapForA),\n        effects: StateEffect.mapEffects(a.effects, mapForA).concat(StateEffect.mapEffects(b.effects, mapForB)),\n        annotations: a.annotations.length ? a.annotations.concat(b.annotations) : b.annotations,\n        scrollIntoView: a.scrollIntoView || b.scrollIntoView,\n        reconfigure: !b.reconfigure ? a.reconfigure : b.reconfigure.full || !a.reconfigure ? b.reconfigure\n            : Object.assign({}, a.reconfigure, b.reconfigure)\n    };\n}\nfunction resolveTransactionInner(state, spec, docSize) {\n    let reconf = spec.reconfigure;\n    if (reconf && reconf.append) {\n        reconf = Object.assign({}, reconf);\n        let tag = typeof Symbol == \"undefined\" ? \"__append\" + Math.floor(Math.random() * 0xffffffff) : Symbol(\"appendConf\");\n        reconf[tag] = reconf.append;\n        reconf.append = undefined;\n    }\n    let sel = spec.selection;\n    return {\n        changes: spec.changes instanceof ChangeSet ? spec.changes\n            : ChangeSet.of(spec.changes || [], docSize, state.facet(lineSeparator)),\n        selection: sel && (sel instanceof EditorSelection ? sel : EditorSelection.single(sel.anchor, sel.head)),\n        effects: !spec.effects ? none : Array.isArray(spec.effects) ? spec.effects : [spec.effects],\n        annotations: !spec.annotations ? none : Array.isArray(spec.annotations) ? spec.annotations : [spec.annotations],\n        scrollIntoView: !!spec.scrollIntoView,\n        reconfigure: reconf\n    };\n}\nfunction resolveTransaction(state, specs, filter) {\n    let s = resolveTransactionInner(state, specs.length ? specs[0] : {}, state.doc.length);\n    if (specs.length && specs[0].filter === false)\n        filter = false;\n    for (let i = 1; i < specs.length; i++) {\n        if (specs[i].filter === false)\n            filter = false;\n        let seq = !!specs[i].sequential;\n        s = mergeTransaction(s, resolveTransactionInner(state, specs[i], seq ? s.changes.newLength : state.doc.length), seq);\n    }\n    let tr = new Transaction(state, s.changes, s.selection, s.effects, s.annotations, s.reconfigure, s.scrollIntoView);\n    return filter ? filterTransaction(tr) : tr;\n}\n// Finish a transaction by applying filters if necessary.\nfunction filterTransaction(tr) {\n    let state = tr.startState;\n    // Change filters\n    let result = true;\n    for (let filter of state.facet(changeFilter)) {\n        let value = filter(tr);\n        if (value === false) {\n            result = false;\n            break;\n        }\n        if (Array.isArray(value))\n            result = result === true ? value : joinRanges(result, value);\n    }\n    if (result !== true) {\n        let changes, back;\n        if (result === false) {\n            back = tr.changes.invertedDesc;\n            changes = ChangeSet.empty(state.doc.length);\n        }\n        else {\n            let filtered = tr.changes.filter(result);\n            changes = filtered.changes;\n            back = filtered.filtered.invertedDesc;\n        }\n        tr = new Transaction(state, changes, tr.selection && tr.selection.map(back), StateEffect.mapEffects(tr.effects, back), tr.annotations, tr.reconfigure, tr.scrollIntoView);\n    }\n    // Transaction filters\n    let filters = state.facet(transactionFilter);\n    for (let i = filters.length - 1; i >= 0; i--) {\n        let filtered = filters[i](tr);\n        if (filtered instanceof Transaction)\n            tr = filtered;\n        else if (Array.isArray(filtered) && filtered.length == 1 && filtered[0] instanceof Transaction)\n            tr = filtered[0];\n        else\n            tr = resolveTransaction(state, Array.isArray(filtered) ? filtered : [filtered], false);\n    }\n    return tr;\n}\nconst none = [];\n\n/// This is used to [categorize](#state.EditorState.charCategorizer)\n/// characters into three categoriesword characters, whitespace, and\n/// anything else. It is used do things like selecting by word.\nvar CharCategory;\n(function (CharCategory) {\n    CharCategory[CharCategory[\"Word\"] = 0] = \"Word\";\n    CharCategory[CharCategory[\"Space\"] = 1] = \"Space\";\n    CharCategory[CharCategory[\"Other\"] = 2] = \"Other\";\n})(CharCategory || (CharCategory = {}));\nconst nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\nlet wordChar;\ntry {\n    wordChar = new RegExp(\"[\\\\p{Alphabetic}\\\\p{Number}_]\", \"u\");\n}\ncatch (_) { }\nfunction hasWordChar(str) {\n    if (wordChar)\n        return wordChar.test(str);\n    for (let i = 0; i < str.length; i++) {\n        let ch = str[i];\n        if (/\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch)))\n            return true;\n    }\n    return false;\n}\nfunction makeCategorizer(wordChars) {\n    return (char) => {\n        if (!/\\S/.test(char))\n            return CharCategory.Space;\n        if (hasWordChar(char))\n            return CharCategory.Word;\n        for (let i = 0; i < wordChars.length; i++)\n            if (char.indexOf(wordChars[i]) > -1)\n                return CharCategory.Word;\n        return CharCategory.Other;\n    };\n}\n\n/// The editor state class is a persistent (immutable) data structure.\n/// To update a state, you [create](#state.EditorState.update) a\n/// [transaction](#state.Transaction), which produces a _new_ state\n/// instance, without modifying the original object.\n///\n/// As such, _never_ mutate properties of a state directly. That'll\n/// just break things.\nclass EditorState {\n    /// @internal\n    constructor(\n    /// @internal\n    config, \n    /// The current document.\n    doc, \n    /// The current selection.\n    selection, tr = null) {\n        this.config = config;\n        this.doc = doc;\n        this.selection = selection;\n        /// @internal\n        this.applying = null;\n        this.status = config.statusTemplate.slice();\n        if (tr && !tr.reconfigure) {\n            this.values = tr.startState.values.slice();\n        }\n        else {\n            this.values = config.dynamicSlots.map(_ => null);\n            // Copy over old values for shared facets/fields if this is a reconfigure\n            if (tr)\n                for (let id in config.address) {\n                    let cur = config.address[id], prev = tr.startState.config.address[id];\n                    if (prev != null && (cur & 1) == 0)\n                        this.values[cur >> 1] = getAddr(tr.startState, prev);\n                }\n        }\n        this.applying = tr;\n        // Fill in the computed state immediately, so that further queries\n        // for it made during the update return this state\n        if (tr)\n            tr._state = this;\n        for (let i = 0; i < this.config.dynamicSlots.length; i++)\n            ensureAddr(this, i << 1);\n        this.applying = null;\n    }\n    field(field, require = true) {\n        let addr = this.config.address[field.id];\n        if (addr == null) {\n            if (require)\n                throw new RangeError(\"Field is not present in this state\");\n            return undefined;\n        }\n        ensureAddr(this, addr);\n        return getAddr(this, addr);\n    }\n    /// Create a [transaction](#state.Transaction) that updates this\n    /// state. Any number of [transaction specs](#state.TransactionSpec)\n    /// can be passed. The [changes](#state.TransactionSpec.changes) (if\n    /// any) of each spec are assumed to start in the _current_ document\n    /// (not the document produced by previous specs), and its\n    /// [selection](#state.TransactionSpec.selection) and\n    /// [effects](#state.TransactionSpec.effects) are assumed to refer\n    /// to the document created by its _own_ changes. The resulting\n    /// transaction contains the combined effect of all the different\n    /// specs. For things like\n    /// [selection](#state.TransactionSpec.selection) or\n    /// [reconfiguration](#state.TransactionSpec.reconfigure), later\n    /// specs take precedence over earlier ones.\n    update(...specs) {\n        return resolveTransaction(this, specs, true);\n    }\n    /// @internal\n    applyTransaction(tr) {\n        let conf = this.config;\n        if (tr.reconfigure)\n            conf = Configuration.resolve(tr.reconfigure.full || conf.source, Object.assign(conf.replacements, tr.reconfigure, { full: undefined }), this);\n        new EditorState(conf, tr.newDoc, tr.newSelection, tr);\n    }\n    /// Create a [transaction](#state.Transaction) that replaces every\n    /// selection range with the given content.\n    replaceSelection(text) {\n        if (typeof text == \"string\")\n            text = this.toText(text);\n        return this.changeByRange(range => ({ changes: { from: range.from, to: range.to, insert: text },\n            range: EditorSelection.cursor(range.from + text.length) }));\n    }\n    /// Create a set of changes and a new selection by running the given\n    /// function for each range in the active selection. The function\n    /// can return an optional set of changes (in the coordinate space\n    /// of the start document), plus an updated range (in the coordinate\n    /// space of the document produced by the call's own changes). This\n    /// method will merge all the changes and ranges into a single\n    /// changeset and selection, and return it as a [transaction\n    /// spec](#state.TransactionSpec), which can be passed to\n    /// [`update`](#state.EditorState.update).\n    changeByRange(f) {\n        let sel = this.selection;\n        let result1 = f(sel.ranges[0]);\n        let changes = this.changes(result1.changes), ranges = [result1.range];\n        for (let i = 1; i < sel.ranges.length; i++) {\n            let result = f(sel.ranges[i]);\n            let newChanges = this.changes(result.changes), newMapped = newChanges.map(changes);\n            for (let j = 0; j < i; j++)\n                ranges[j] = ranges[j].map(newMapped);\n            ranges.push(result.range.map(changes.mapDesc(newChanges, true)));\n            changes = changes.compose(newMapped);\n        }\n        return {\n            changes,\n            selection: EditorSelection.create(ranges, sel.primaryIndex)\n        };\n    }\n    /// Create a [change set](#state.ChangeSet) from the given change\n    /// description, taking the state's document length and line\n    /// separator into account.\n    changes(spec = []) {\n        if (spec instanceof ChangeSet)\n            return spec;\n        return ChangeSet.of(spec, this.doc.length, this.facet(EditorState.lineSeparator));\n    }\n    /// Using the state's [line\n    /// separator](#state.EditorState^lineSeparator), create a\n    /// [`Text`](#text.Text) instance from the given string.\n    toText(string) {\n        return Text.of(string.split(this.facet(EditorState.lineSeparator) || DefaultSplit));\n    }\n    /// Return the given range of the document as a string.\n    sliceDoc(from = 0, to = this.doc.length) {\n        return this.doc.sliceString(from, to, this.lineBreak);\n    }\n    /// Get the value of a state [facet](#state.Facet).\n    facet(facet) {\n        let addr = this.config.address[facet.id];\n        if (addr == null)\n            return facet.default;\n        ensureAddr(this, addr);\n        return getAddr(this, addr);\n    }\n    /// Convert this state to a JSON-serializable object.\n    toJSON() {\n        // FIXME plugin state serialization\n        return {\n            doc: this.sliceDoc(),\n            selection: this.selection.toJSON()\n        };\n    }\n    /// Deserialize a state from its JSON representation.\n    static fromJSON(json, config = {}) {\n        if (!json || typeof json.doc != \"string\")\n            throw new RangeError(\"Invalid JSON representation for EditorState\");\n        return EditorState.create({\n            doc: json.doc,\n            selection: EditorSelection.fromJSON(json.selection),\n            extensions: config.extensions\n        });\n    }\n    /// Create a new state. You'll usually only need this when\n    /// initializing an editorupdated states are created by applying\n    /// transactions.\n    static create(config = {}) {\n        let configuration = Configuration.resolve(config.extensions || []);\n        let doc = config.doc instanceof Text ? config.doc\n            : Text.of((config.doc || \"\").split(configuration.staticFacet(EditorState.lineSeparator) || DefaultSplit));\n        let selection = !config.selection ? EditorSelection.single(0)\n            : config.selection instanceof EditorSelection ? config.selection\n                : EditorSelection.single(config.selection.anchor, config.selection.head);\n        checkSelection(selection, doc.length);\n        if (!configuration.staticFacet(allowMultipleSelections))\n            selection = selection.asSingle();\n        return new EditorState(configuration, doc, selection);\n    }\n    /// The size (in columns) of a tab in the document, determined by\n    /// the [`tabSize`](#state.EditorState^tabSize) facet.\n    get tabSize() { return this.facet(EditorState.tabSize); }\n    /// Get the proper [line-break](#state.EditorState^lineSeparator)\n    /// string for this state.\n    get lineBreak() { return this.facet(EditorState.lineSeparator) || \"\\n\"; }\n    /// The _column width_ of an indent unit in the document. Determined\n    /// by the [`indentUnit`](#state.EditorState^indentUnit) facet, and\n    /// [`tabSize`](#state.EditorState^tabSize) when that contains tabs.\n    get indentUnit() {\n        let unit = this.facet(EditorState.indentUnit);\n        return unit.charCodeAt(0) == 9 ? this.tabSize * unit.length : unit.length;\n    }\n    /// Create an indentation string that covers columns 0 to `cols`.\n    /// Will use tabs for as much of the columns as possible when the\n    /// [`indentUnit`](#state.EditorState^indentUnit) facet contains\n    /// tabs.\n    indentString(cols) {\n        let result = \"\";\n        if (this.facet(EditorState.indentUnit).charCodeAt(0) == 9)\n            while (cols >= this.tabSize) {\n                result += \"\\t\";\n                cols -= this.tabSize;\n            }\n        for (let i = 0; i < cols; i++)\n            result += \" \";\n        return result;\n    }\n    /// Look up a translation for the given phrase (via the\n    /// [`phrases`](#state.EditorState^phrases) facet), or return the\n    /// original string if no translation is found.\n    phrase(phrase) {\n        for (let map of this.facet(EditorState.phrases))\n            if (Object.prototype.hasOwnProperty.call(map, phrase))\n                return map[phrase];\n        return phrase;\n    }\n    /// Return a function that can categorize strings (expected to\n    /// represent a single [grapheme cluster](#text.nextClusterBreak))\n    /// into one of:\n    ///\n    ///  - Word (contains an alphanumeric character or a character\n    ///    explicitly listed in the local language's `\"wordChars\"`\n    ///    language data, which should be a string)\n    ///  - Space (contains only whitespace)\n    ///  - Other (anything else)\n    charCategorizer(at) {\n        return makeCategorizer(this.languageDataAt(\"wordChars\", at).join(\"\"));\n    }\n    /// Get the syntax tree for this state, which is the current\n    /// (possibly incomplete) parse tree of the [syntax](#state.Syntax)\n    /// with the highest precedence, or the empty tree if there is no\n    /// syntax available.\n    get tree() {\n        let syntax = this.facet(EditorState.syntax);\n        return syntax.length ? syntax[0].getTree(this) : Tree.empty;\n    }\n    /// Find the values for a given language data field, either provided\n    /// by the [syntax](#syntax.LezerSyntax.languageData) or through the\n    /// [`globalLanguageData`](#state.EditorState^globalLanguageData) facet,\n    /// for the [language](#state.Syntax.languageDataFacetAt) at the\n    /// given position. Values provided by the facet, in precedence\n    /// order, will appear before those provided by the syntax.\n    languageDataAt(name, pos) {\n        let values = [];\n        let syntax = this.facet(EditorState.syntax);\n        for (let i = syntax.length ? 0 : 1; i < 2; i++) {\n            let source = this.facet(i ? globalLanguageData : syntax[0].languageDataFacetAt(this, pos));\n            for (let obj of source)\n                if (Object.prototype.hasOwnProperty.call(obj, name))\n                    values.push(obj[name]);\n        }\n        return values;\n    }\n}\n/// A facet that, when enabled, causes the editor to allow multiple\n/// ranges to be selected. You should probably not use this\n/// directly, but let a plugin like\n/// [multiple-selections](#view.multipleSelections) handle it (which\n/// also makes sure the selections are visible in the view).\nEditorState.allowMultipleSelections = allowMultipleSelections;\n/// Facet that defines a way to query for automatic indentation\n/// depth at the start of a given line.\nEditorState.indentation = Facet.define();\n/// Configures the tab size to use in this state. The first\n/// (highest-precedence) value of the facet is used. If no value is\n/// given, this defaults to 4.\nEditorState.tabSize = Facet.define({\n    combine: values => values.length ? values[0] : 4\n});\n/// The line separator to use. By default, any of `\"\\n\"`, `\"\\r\\n\"`\n/// and `\"\\r\"` is treated as a separator when splitting lines, and\n/// lines are joined with `\"\\n\"`.\n///\n/// When you configure a value here, only that precise separator\n/// will be used, allowing you to round-trip documents through the\n/// editor without normalizing line separators.\nEditorState.lineSeparator = lineSeparator;\n/// Facet for overriding the unit by which indentation happens.\n/// Should be a string consisting either entirely of spaces or\n/// entirely of tabs. When not set, this defaults to 2 spaces.\nEditorState.indentUnit = Facet.define({\n    combine: values => {\n        if (!values.length)\n            return \"  \";\n        if (!/^(?: +|\\t+)$/.test(values[0]))\n            throw new Error(\"Invalid indent unit: \" + JSON.stringify(values[0]));\n        return values[0];\n    }\n});\n/// Registers translation phrases. The\n/// [`phrase`](#state.EditorState.phrase) method will look through\n/// all objects registered with this facet to find translations for\n/// its argument.\nEditorState.phrases = Facet.define();\n/// Facet that registers a parsing service for the state.\nEditorState.syntax = Facet.define();\n/// A facet used to register [language\n/// data](#state.EditorState.languageDataAt) that should apply\n/// throughout the document, regardless of language.\nEditorState.globalLanguageData = globalLanguageData;\n/// A facet that registers a code folding service. When called with\n/// the extent of a line, such a function should return a range\n/// object when a foldable that starts on that line (but continues\n/// beyond it), if one can be found.\nEditorState.foldable = Facet.define();\n/// Facet used to register change filters, which are called for each\n/// transaction (unless explicitly\n/// [disabled](#state.TransactionSpec.filter)), and can suppress\n/// part of the transaction's changes.\n///\n/// Such a function can return `true` to indicate that it doesn't\n/// want to do anything, `false` to completely stop the changes in\n/// the transaction, or a set of ranges in which changes should be\n/// suppressed. Such ranges are represented as an array of numbers,\n/// with each pair of two number indicating the start and end of a\n/// range. So for example `[10, 20, 100, 110]` suppresses changes\n/// between 10 and 20, and between 100 and 110.\nEditorState.changeFilter = changeFilter;\n/// Facet used to register a hook that gets a chance to update or\n/// replace transaction specs before they are applied. This will\n/// only be applied for transactions that don't have\n/// [`filter`](#state.TransactionSpec.filter) set to `false`. You\n/// can either return a single (possibly the input transaction), or\n/// an array of specs (which will be combined in the same way as the\n/// arguments to [`EditorState.update`](#state.EditorState.update)).\n///\n/// When possible, it is recommended to avoid accessing\n/// [`Transaction.state`](#state.Transaction.state) in a filter,\n/// since it will force creation of a state that will then be\n/// discarded again, if the transaction is actually filtered.\n///\n/// (This functionality should be used with care. Indiscriminately\n/// modifying transaction is likely to break something or degrade\n/// the user experience.)\nEditorState.transactionFilter = transactionFilter;\n\n/// Utility function for combining behaviors to fill in a config\n/// object from an array of provided configs. Will, by default, error\n/// when a field gets two values that aren't ===-equal, but you can\n/// provide combine functions per field to do something else.\nfunction combineConfig(configs, defaults, // Should hold only the optional properties of Config, but I haven't managed to express that\ncombine = {}) {\n    let result = {};\n    for (let config of configs)\n        for (let key of Object.keys(config)) {\n            let value = config[key], current = result[key];\n            if (current === undefined)\n                result[key] = value;\n            else if (current === value || value === undefined) ; // No conflict\n            else if (Object.hasOwnProperty.call(combine, key))\n                result[key] = combine[key](current, value);\n            else\n                throw new Error(\"Config merge conflict for field \" + key);\n        }\n    for (let key in defaults)\n        if (result[key] === undefined)\n            result[key] = defaults[key];\n    return result;\n}\n\nexport { Annotation, AnnotationType, ChangeDesc, ChangeSet, CharCategory, EditorSelection, EditorState, Facet, IndentContext, MapMode, SelectionRange, StateEffect, StateEffectType, StateField, Transaction, combineConfig, languageDataProp, precedence, tagExtension };\n","function sym(name, random) {\n  return typeof Symbol == \"undefined\"\n    ? \"__\" + name + (random ? Math.floor(Math.random() * 1e8) : \"\")\n    : random ? Symbol(name) : Symbol.for(name)\n}\n\nconst COUNT = sym(\"\\u037c\"), SET = sym(\"styleSet\", 1), RULES = sym(\"rules\", 1)\nconst top = typeof global == \"undefined\" ? window : global\n\n// :: (Object<Style>, ?{generateClasses: ?boolean})  StyleModule\n// Instances of this class bind the property names from `spec` to CSS\n// class names that assign the styles in the corresponding property\n// values, unless `generateClasses` is `false`, in which case the\n// property names in the spec are treated as plain CSS selectors.\n//\n// A style module can only be used in a given DOM root after it has\n// been _mounted_ there with `StyleModule.mount`.\n//\n// Style modules should be created once and stored somewhere, as\n// opposed to re-creating them every time you need them. The amount of\n// CSS rules generated for a given DOM root is bounded by the amount\n// of style modules that were used. So to avoid leaking rules, don't\n// create these dynamically, but treat them as one-time allocations.\nexport function StyleModule(spec, options) {\n  this[RULES] = []\n  for (let name in spec) {\n    let style = spec[name], specificity = style.specificity || 0\n    let id = StyleModule.newName(), selector = name\n    if ((options && options.generateClasses) !== false) {\n      let className = id\n      selector = \".\" + id\n      for (let i = 0; i < specificity; i++) {\n        let name = \"\\u037c_\" + (i ? i.toString(36) : \"\")\n        selector += \".\" + name\n        className += \" \" + name\n      }\n      this[name] = className\n    }\n    renderStyle(selector, spec[name], this[RULES])\n  }\n}\n\n// :: ()  string\n// Generate a new unique CSS class name.\nStyleModule.newName = () => {\n  let id = top[COUNT] || 1\n  top[COUNT] = id + 1\n  return \"\\u037c\" + id.toString(36)\n}\n\nStyleModule.prototype = Object.create(null)\n\n// :: (union<Document, ShadowRoot>, union<[StyleModule], StyleModule>)\n//\n// Mount the given set of modules in the given DOM root, which ensures\n// that the CSS rules defined by the module are available in that\n// context.\n//\n// Rules are only added to the document once per root.\n//\n// Rule order will follow the order of the modules, so that rules from\n// modules later in the array take precedence of those from earlier\n// modules. If you call this function multiple times for the same root\n// in a way that changes the order of already mounted modules, the old\n// order will be changed.\nStyleModule.mount = function(root, modules) {\n  (root[SET] || new StyleSet(root)).mount(Array.isArray(modules) ? modules : [modules])\n}\n\nlet adoptedSet = null\n\nclass StyleSet {\n  constructor(root) {\n    if (root.adoptedStyleSheets && typeof CSSStyleSheet != \"undefined\") {\n      if (adoptedSet) {\n        root.adoptedStyleSheets = [adoptedSet.sheet].concat(root.adoptedStyleSheets)\n        return root[SET] = adoptedSet\n      }\n      this.sheet = new CSSStyleSheet\n      root.adoptedStyleSheets = [this.sheet].concat(root.adoptedStyleSheets)\n      adoptedSet = this\n    } else {\n      this.styleTag = (root.ownerDocument || root).createElement(\"style\")\n      let target = root.head || root\n      target.insertBefore(this.styleTag, target.firstChild)\n    }\n    this.modules = []\n    root[SET] = this\n  }\n\n  mount(modules) {\n    let sheet = this.sheet\n    let pos = 0 /* Current rule offset */, j = 0 /* Index into this.modules */\n    for (let i = 0; i < modules.length; i++) {\n      let mod = modules[i], index = this.modules.indexOf(mod)\n      if (index < j && index > -1) { // Ordering conflict\n        this.modules.splice(index, 1)\n        j--\n        index = -1\n      }\n      if (index == -1) {\n        this.modules.splice(j++, 0, mod)\n        if (sheet) for (let k = 0; k < mod[RULES].length; k++)\n          sheet.insertRule(mod[RULES][k], pos++)\n      } else {\n        while (j < index) pos += this.modules[j++][RULES].length\n        pos += mod[RULES].length\n        j++\n      }\n    }\n\n    if (!sheet) {\n      let text = \"\"\n      for (let i = 0; i < this.modules.length; i++)\n        text += this.modules[i][RULES].join(\"\\n\") + \"\\n\"\n      this.styleTag.textContent = text\n    }\n  }\n}\n\nfunction extendSelector(template, sel) {\n  return sel.split(/\\s*,\\s*/).map(sel => {\n    let cut = sel.indexOf(\"/*|*/\")\n    let prefix = cut < 0 ? \"\" : sel.slice(0, cut + 5)\n    return prefix + template.replace(/&/g, cut < 0 ? sel : sel.slice(cut + 5))\n  }).join(\", \")\n}\n\nfunction renderStyle(selector, spec, output) {\n  if (typeof spec != \"object\") throw new RangeError(\"Expected style object, got \" + JSON.stringify(spec))\n  let props = []\n  for (let prop in spec) {\n    if (/^@/.test(prop)) {\n      let local = []\n      renderStyle(selector, spec[prop], local)\n      output.push(prop + \" {\" + local.join(\" \") + \"}\")\n    } else if (/&/.test(prop)) {\n      renderStyle(extendSelector(prop, selector), spec[prop], output)\n    } else if (prop != \"specificity\") {\n      if (typeof spec[prop] == \"object\") throw new RangeError(\"The value of a property (\" + prop + \") should be a primitive value.\")\n      props.push(prop.replace(/_.*/, \"\").replace(/[A-Z]/g, l => \"-\" + l.toLowerCase()) + \": \" + spec[prop])\n    }\n  }\n  if (props.length) output.push(selector + \" {\" + props.join(\"; \") + \"}\")\n}\n\n// Style::Object<union<Style,string>>\n//\n// A style is an object that, in the simple case, maps CSS property\n// names to strings holding their values, as in `{color: \"red\",\n// fontWeight: \"bold\"}`. The property names can be given in\n// camel-casethe library will insert a dash before capital letters\n// when converting them to CSS.\n//\n// If you include an underscore in a property name, it and everything\n// after it will be removed from the output, which can be useful when\n// providing a property multiple times, for browser compatibility\n// reasons.\n//\n// A property called `specificity` has a special meaning: if it holds\n// a number _N_, greater than 0, the selector for the class will have\n// _N_ extra dummy classes added, and those dummy classes will also be\n// present in the class name string created for the style. This allows\n// you to create rules that take precedence over other rules, even\n// when they are defined earlier.\n//\n// A property in a style object can also be a sub-selector, which\n// extends the current context to add a pseudo-selector or a child\n// selector. Such a property should contain a `&` character, which\n// will be replaced by the current selector. For example `{\"&:before\":\n// {content: '\"hi\"'}}`. Sub-selectors and regular properties can\n// freely be mixed in a given object. Any property containing a `&` is\n// assumed to be a sub-selector.\n//\n// Finally, a property can specify an @-block to be wrapped around the\n// styles defined inside the object that's the property's value. For\n// example to create a media query you can do `{\"@media screen and\n// (min-width: 400px)\": {...}}`.\n","import { MapMode } from '@codemirror/next/state';\n\n/// Each range is associated with a value, which must inherit from\n/// this class.\nclass RangeValue {\n    /// Compare this value with another value. The default\n    /// implementation compares by identity.\n    eq(other) { return this == other; }\n    /// Create a [range](#rangeset.Range) with this value.\n    range(from, to = from) { return new Range(from, to, this); }\n}\nRangeValue.prototype.startSide = RangeValue.prototype.endSide = 0;\nRangeValue.prototype.point = false;\nRangeValue.prototype.mapMode = MapMode.TrackDel;\n/// A range associates a value with a range of positions.\nclass Range {\n    /// @internal\n    constructor(\n    /// The range's start position.\n    from, \n    /// Its end position.\n    to, \n    /// The value associated with this range.\n    value) {\n        this.from = from;\n        this.to = to;\n        this.value = value;\n    }\n}\nfunction cmpRange(a, b) {\n    return a.from - b.from || a.value.startSide - b.value.startSide;\n}\n// The maximum amount of ranges to store in a single chunk\nconst ChunkSize = 250, \n// Chunks with points of this size are never skipped during\n// compare, since moving past those points is likely to speed\n// up, rather than slow down, the comparison.\nBigPointSize = 500, \n// A large (fixnum) value to use for max/min values.\nFar = 1e9;\nclass Chunk {\n    constructor(from, to, value, \n    // Chunks are marked with the largest point that occurs\n    // in them (or -1 for no points), so that scans that are\n    // only interested in points (such as the\n    // heightmap-related logic) can skip range-only chunks.\n    maxPoint) {\n        this.from = from;\n        this.to = to;\n        this.value = value;\n        this.maxPoint = maxPoint;\n    }\n    get length() { return this.to[this.to.length - 1]; }\n    // With side == -1, return the first index where to >= pos. When\n    // side == 1, the first index where from > pos.\n    findIndex(pos, end, side = end * Far, startAt = 0) {\n        if (pos <= 0)\n            return startAt;\n        let arr = end < 0 ? this.to : this.from;\n        for (let lo = startAt, hi = arr.length;;) {\n            if (lo == hi)\n                return lo;\n            let mid = (lo + hi) >> 1;\n            let diff = arr[mid] - pos || (end < 0 ? this.value[mid].startSide : this.value[mid].endSide) - side;\n            if (mid == lo)\n                return diff >= 0 ? lo : hi;\n            if (diff >= 0)\n                hi = mid;\n            else\n                lo = mid + 1;\n        }\n    }\n    between(offset, from, to, f) {\n        for (let i = this.findIndex(from, -1), e = this.findIndex(to, 1, undefined, i); i < e; i++)\n            if (f(this.from[i] + offset, this.to[i] + offset, this.value[i]) === false)\n                return false;\n    }\n    map(offset, changes) {\n        let value = [], from = [], to = [], newPos = -1, maxPoint = -1;\n        for (let i = 0; i < this.value.length; i++) {\n            let val = this.value[i], curFrom = this.from[i] + offset, curTo = this.to[i] + offset, newFrom, newTo;\n            if (curFrom == curTo) {\n                let mapped = changes.mapPos(curFrom, val.startSide, val.mapMode);\n                if (mapped < 0)\n                    continue;\n                newFrom = newTo = mapped;\n            }\n            else {\n                newFrom = changes.mapPos(curFrom, val.startSide);\n                newTo = changes.mapPos(curTo, val.endSide);\n                if (newFrom > newTo || newFrom == newTo && val.startSide > 0 && val.endSide <= 0)\n                    continue;\n            }\n            if ((newTo - newFrom || val.endSide - val.startSide) < 0)\n                continue;\n            if (newPos < 0)\n                newPos = newFrom;\n            if (val.point)\n                maxPoint = Math.max(maxPoint, newTo - newFrom);\n            value.push(val);\n            from.push(newFrom - newPos);\n            to.push(newTo - newPos);\n        }\n        return { mapped: value.length ? new Chunk(from, to, value, maxPoint) : null, pos: newPos };\n    }\n}\n/// A range set stores a collection of [ranges](#rangeset.Range) in a\n/// way that makes them efficient to [map](#rangeset.RangeSet.map) and\n/// [update](#rangeset.RangeSet.update). This is an immutable data\n/// structure.\nclass RangeSet {\n    /// @internal\n    constructor(\n    /// @internal\n    chunkPos, \n    /// @internal\n    chunk, \n    /// @internal\n    nextLayer = RangeSet.empty, \n    /// @internal\n    maxPoint) {\n        this.chunkPos = chunkPos;\n        this.chunk = chunk;\n        this.nextLayer = nextLayer;\n        this.maxPoint = maxPoint;\n    }\n    /// @internal\n    get length() {\n        let last = this.chunk.length - 1;\n        return last < 0 ? 0 : Math.max(this.chunkEnd(last), this.nextLayer.length);\n    }\n    /// @internal\n    get size() {\n        if (this == RangeSet.empty)\n            return 0;\n        let size = this.nextLayer.size;\n        for (let chunk of this.chunk)\n            size += chunk.value.length;\n        return size;\n    }\n    /// @internal\n    chunkEnd(index) {\n        return this.chunkPos[index] + this.chunk[index].length;\n    }\n    /// Update the range set, optionally adding new ranges or filtering\n    /// out existing ones.\n    update(updateSpec) {\n        let { add = [], sort = false, filter, filterFrom = 0, filterTo = this.length } = updateSpec;\n        if (add.length == 0 && !filter)\n            return this;\n        if (sort)\n            add.slice().sort(cmpRange);\n        if (this == RangeSet.empty)\n            return add.length ? RangeSet.of(add) : this;\n        let cur = new LayerCursor(this, null, -1).goto(0), i = 0, spill = [];\n        let builder = new RangeSetBuilder();\n        while (cur.value || i < add.length) {\n            if (i < add.length && (cur.from - add[i].from || cur.startSide - add[i].value.startSide) >= 0) {\n                let range = add[i++];\n                if (!builder.addInner(range.from, range.to, range.value))\n                    spill.push(range);\n            }\n            else if (cur.rangeIndex == 1 && cur.chunkIndex < this.chunk.length &&\n                (i == add.length || this.chunkEnd(cur.chunkIndex) < add[i].from) &&\n                (!filter || filterFrom > this.chunkEnd(cur.chunkIndex) || filterTo < this.chunkPos[cur.chunkIndex]) &&\n                builder.addChunk(this.chunkPos[cur.chunkIndex], this.chunk[cur.chunkIndex])) {\n                cur.nextChunk();\n            }\n            else {\n                if (!filter || filterFrom > cur.to || filterTo < cur.from || filter(cur.from, cur.to, cur.value)) {\n                    if (!builder.addInner(cur.from, cur.to, cur.value))\n                        spill.push(new Range(cur.from, cur.to, cur.value));\n                }\n                cur.next();\n            }\n        }\n        return builder.finishInner(this.nextLayer == RangeSet.empty && !spill.length ? RangeSet.empty\n            : this.nextLayer.update({ add: spill, filter, filterFrom, filterTo }));\n    }\n    /// Map this range set through a set of changes, return the new set.\n    map(changes) {\n        if (changes.length == 0 || this == RangeSet.empty)\n            return this;\n        let chunks = [], chunkPos = [], maxPoint = -1;\n        for (let i = 0; i < this.chunk.length; i++) {\n            let start = this.chunkPos[i], chunk = this.chunk[i];\n            let touch = changes.touchesRange(start, start + chunk.length);\n            if (touch === false) {\n                maxPoint = Math.max(maxPoint, chunk.maxPoint);\n                chunks.push(chunk);\n                chunkPos.push(changes.mapPos(start));\n            }\n            else if (touch === true) {\n                let { mapped, pos } = chunk.map(start, changes);\n                if (mapped) {\n                    maxPoint = Math.max(maxPoint, mapped.maxPoint);\n                    chunks.push(mapped);\n                    chunkPos.push(pos);\n                }\n            }\n        }\n        let next = this.nextLayer.map(changes);\n        return chunks.length == 0 ? next : new RangeSet(chunkPos, chunks, next, maxPoint);\n    }\n    /// Iterate over the ranges that touch the region `from` to `to`,\n    /// calling `f` for each. There is no guarantee that the ranges will\n    /// be reported in any order. When the callback returns `false`,\n    /// iteration stops.\n    between(from, to, f) {\n        if (this == RangeSet.empty)\n            return;\n        for (let i = 0; i < this.chunk.length; i++) {\n            let start = this.chunkPos[i], chunk = this.chunk[i];\n            if (to >= start && from <= start + chunk.length &&\n                chunk.between(start, from - start, to - start, f) === false)\n                return;\n        }\n        this.nextLayer.between(from, to, f);\n    }\n    /// Iterate over the ranges in this set, in order, including all\n    /// ranges that end at or after `from`.\n    iter(from = 0) {\n        return HeapCursor.from([this]).goto(from);\n    }\n    /// Iterate over the given sets, starting from `from`.\n    static iter(sets, from = 0) {\n        return HeapCursor.from(sets).goto(from);\n    }\n    /// Iterate over two groups of sets, calling methods on `comparator`\n    /// to notify it of possible differences. `textDiff` indicates how\n    /// the underlying data changed between these ranges, and is needed\n    /// to synchronize the iteration. `from` and `to` are coordinates in\n    /// the _new_ space, after these changes.\n    static compare(oldSets, newSets, textDiff, comparator) {\n        var _a;\n        let minPoint = (_a = comparator.minPointSize) !== null && _a !== void 0 ? _a : -1;\n        let a = oldSets.filter(set => set.maxPoint >= BigPointSize ||\n            set != RangeSet.empty && newSets.indexOf(set) < 0 && set.maxPoint >= minPoint);\n        let b = newSets.filter(set => set.maxPoint >= BigPointSize ||\n            set != RangeSet.empty && oldSets.indexOf(set) < 0 && set.maxPoint >= minPoint);\n        let sharedChunks = findSharedChunks(a, b);\n        let sideA = new SpanCursor(a, sharedChunks, minPoint);\n        let sideB = new SpanCursor(b, sharedChunks, minPoint);\n        textDiff.iterGaps((fromA, fromB, length) => compare(sideA, fromA, sideB, fromB, length, comparator));\n        if (textDiff.empty && textDiff.length == 0)\n            compare(sideA, 0, sideB, 0, 0, comparator);\n    }\n    /// Iterate over a group of range sets at the same time, notifying\n    /// the iterator about the ranges covering every given piece of\n    /// content. Returns the open count (see\n    /// [`SpanIterator.range`](#rangeset.SpanIterator.range)) at the end\n    /// of the iteration.\n    static spans(sets, from, to, iterator) {\n        var _a;\n        let cursor = new SpanCursor(sets, null, (_a = iterator.minPointSize) !== null && _a !== void 0 ? _a : -1).goto(from), pos = from;\n        let open = cursor.openStart;\n        for (;;) {\n            let curTo = Math.min(cursor.to, to);\n            if (cursor.point) {\n                iterator.point(pos, curTo, cursor.point, cursor.activeForPoint(cursor.to), open);\n                open = cursor.openEnd(curTo) + (cursor.to > curTo ? 1 : 0);\n            }\n            else if (curTo > pos) {\n                iterator.span(pos, curTo, cursor.active, open);\n                open = cursor.openEnd(curTo);\n            }\n            if (cursor.to > to)\n                break;\n            pos = cursor.to;\n            cursor.next();\n        }\n        return open;\n    }\n    /// Create a range set for the given range or array of ranges. By\n    /// default, this expects the ranges to be _sorted_ (by start\n    /// position and, if two start at the same position,\n    /// `value.startSide`). You can pass `true` as second argument to\n    /// cause the method to sort them.\n    static of(ranges, sort = false) {\n        let build = new RangeSetBuilder();\n        for (let range of ranges instanceof Range ? [ranges] : sort ? ranges.slice().sort(cmpRange) : ranges)\n            build.add(range.from, range.to, range.value);\n        return build.finish();\n    }\n}\n/// The empty set of ranges.\nRangeSet.empty = new RangeSet([], [], null, -1);\nRangeSet.empty.nextLayer = RangeSet.empty;\n/// A range set builder is a data structure that helps build up a\n/// [range set](#rangeset.RangeSet) directly, without first allocating\n/// an array of [`Range`](#rangeset.Range) objects.\nclass RangeSetBuilder {\n    /// Create an empty builder.\n    constructor() {\n        this.chunks = [];\n        this.chunkPos = [];\n        this.chunkStart = -1;\n        this.last = null;\n        this.lastFrom = -Far;\n        this.lastTo = -Far;\n        this.from = [];\n        this.to = [];\n        this.value = [];\n        this.maxPoint = -1;\n        this.setMaxPoint = -1;\n        this.nextLayer = null;\n    }\n    finishChunk(newArrays) {\n        this.chunks.push(new Chunk(this.from, this.to, this.value, this.maxPoint));\n        this.chunkPos.push(this.chunkStart);\n        this.chunkStart = -1;\n        this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint);\n        this.maxPoint = -1;\n        if (newArrays) {\n            this.from = [];\n            this.to = [];\n            this.value = [];\n        }\n    }\n    /// Add a range. Ranges should be added in sorted (by `from` and\n    /// `value.startSide`) order.\n    add(from, to, value) {\n        if (!this.addInner(from, to, value))\n            (this.nextLayer || (this.nextLayer = new RangeSetBuilder)).add(from, to, value);\n    }\n    /// @internal\n    addInner(from, to, value) {\n        let diff = from - this.lastTo || value.startSide - this.last.endSide;\n        if (diff <= 0 && (from - this.lastFrom || value.startSide - this.last.startSide) < 0)\n            throw new Error(\"Ranges must be added sorted by `from` position and `startSide`\");\n        if (diff < 0)\n            return false;\n        if (this.from.length == ChunkSize)\n            this.finishChunk(true);\n        if (this.chunkStart < 0)\n            this.chunkStart = from;\n        this.from.push(from - this.chunkStart);\n        this.to.push(to - this.chunkStart);\n        this.last = value;\n        this.lastFrom = from;\n        this.lastTo = to;\n        this.value.push(value);\n        if (value.point)\n            this.maxPoint = Math.max(this.maxPoint, to - from);\n        return true;\n    }\n    /// @internal\n    addChunk(from, chunk) {\n        if ((from - this.lastTo || chunk.value[0].startSide - this.last.endSide) < 0)\n            return false;\n        if (this.from.length)\n            this.finishChunk(true);\n        this.setMaxPoint = Math.max(this.setMaxPoint, chunk.maxPoint);\n        this.chunks.push(chunk);\n        this.chunkPos.push(from);\n        let last = chunk.value.length - 1;\n        this.last = chunk.value[last];\n        this.lastFrom = chunk.from[last] + from;\n        this.lastTo = chunk.to[last] + from;\n        return true;\n    }\n    /// Finish the range set. Returns the new set. The builder can't be\n    /// used anymore after this has been called.\n    finish() { return this.finishInner(RangeSet.empty); }\n    /// @internal\n    finishInner(next) {\n        if (this.from.length)\n            this.finishChunk(false);\n        if (this.chunks.length == 0)\n            return next;\n        let result = new RangeSet(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(next) : next, this.setMaxPoint);\n        this.from = null; // Make sure further `add` calls produce errors\n        return result;\n    }\n}\nfunction findSharedChunks(a, b) {\n    let inA = new Map();\n    for (let set of a)\n        for (let i = 0; i < set.chunk.length; i++)\n            if (set.chunk[i].maxPoint < BigPointSize)\n                inA.set(set.chunk[i], set.chunkPos[i]);\n    let shared = new Set();\n    for (let set of b)\n        for (let i = 0; i < set.chunk.length; i++)\n            if (inA.get(set.chunk[i]) == set.chunkPos[i])\n                shared.add(set.chunk[i]);\n    return shared;\n}\nclass LayerCursor {\n    constructor(layer, skip, minPoint, rank = 0) {\n        this.layer = layer;\n        this.skip = skip;\n        this.minPoint = minPoint;\n        this.rank = rank;\n    }\n    get startSide() { return this.value ? this.value.startSide : 0; }\n    get endSide() { return this.value ? this.value.endSide : 0; }\n    goto(pos, side = -Far) {\n        this.chunkIndex = this.rangeIndex = 0;\n        this.gotoInner(pos, side, false);\n        return this;\n    }\n    gotoInner(pos, side, forward) {\n        while (this.chunkIndex < this.layer.chunk.length) {\n            let next = this.layer.chunk[this.chunkIndex];\n            if (!(this.skip && this.skip.has(next) ||\n                this.layer.chunkEnd(this.chunkIndex) < pos ||\n                next.maxPoint < this.minPoint))\n                break;\n            this.chunkIndex++;\n            forward = false;\n        }\n        let rangeIndex = this.chunkIndex == this.layer.chunk.length ? 0\n            : this.layer.chunk[this.chunkIndex].findIndex(pos - this.layer.chunkPos[this.chunkIndex], -1, side);\n        if (!forward || this.rangeIndex < rangeIndex)\n            this.rangeIndex = rangeIndex;\n        this.next();\n    }\n    forward(pos, side) {\n        if ((this.to - pos || this.endSide - side) < 0)\n            this.gotoInner(pos, side, true);\n    }\n    next() {\n        for (;;) {\n            if (this.chunkIndex == this.layer.chunk.length) {\n                this.from = this.to = Far;\n                this.value = null;\n                break;\n            }\n            else {\n                let chunkPos = this.layer.chunkPos[this.chunkIndex], chunk = this.layer.chunk[this.chunkIndex];\n                let from = chunkPos + chunk.from[this.rangeIndex];\n                this.from = from;\n                this.to = chunkPos + chunk.to[this.rangeIndex];\n                this.value = chunk.value[this.rangeIndex];\n                if (++this.rangeIndex == chunk.value.length) {\n                    this.chunkIndex++;\n                    if (this.skip) {\n                        while (this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]))\n                            this.chunkIndex++;\n                    }\n                    this.rangeIndex = 0;\n                }\n                if (this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)\n                    break;\n            }\n        }\n    }\n    nextChunk() {\n        this.chunkIndex++;\n        this.rangeIndex = 0;\n        this.next();\n    }\n    compare(other) {\n        return this.from - other.from || this.startSide - other.startSide || this.to - other.to || this.endSide - other.endSide;\n    }\n}\nclass HeapCursor {\n    constructor(heap) {\n        this.heap = heap;\n    }\n    static from(sets, skip = null, minPoint = -1) {\n        let heap = [];\n        for (let i = 0; i < sets.length; i++) {\n            for (let cur = sets[i]; cur != RangeSet.empty; cur = cur.nextLayer) {\n                if (cur.maxPoint >= minPoint)\n                    heap.push(new LayerCursor(cur, skip, minPoint, i));\n            }\n        }\n        return heap.length == 1 ? heap[0] : new HeapCursor(heap);\n    }\n    get startSide() { return this.value ? this.value.startSide : 0; }\n    goto(pos, side = -Far) {\n        for (let cur of this.heap)\n            cur.goto(pos, side);\n        for (let i = this.heap.length >> 1; i >= 0; i--)\n            heapBubble(this.heap, i);\n        this.next();\n        return this;\n    }\n    forward(pos, side) {\n        for (let cur of this.heap)\n            cur.forward(pos, side);\n        for (let i = this.heap.length >> 1; i >= 0; i--)\n            heapBubble(this.heap, i);\n        if ((this.to - pos || this.value.endSide - side) < 0)\n            this.next();\n    }\n    next() {\n        if (this.heap.length == 0) {\n            this.from = this.to = Far;\n            this.value = null;\n            this.rank = -1;\n        }\n        else {\n            let top = this.heap[0];\n            this.from = top.from;\n            this.to = top.to;\n            this.value = top.value;\n            this.rank = top.rank;\n            if (top.value)\n                top.next();\n            heapBubble(this.heap, 0);\n        }\n    }\n}\nfunction heapBubble(heap, index) {\n    for (let cur = heap[index];;) {\n        let childIndex = (index << 1) + 1;\n        if (childIndex >= heap.length)\n            break;\n        let child = heap[childIndex];\n        if (childIndex + 1 < heap.length && child.compare(heap[childIndex + 1]) >= 0) {\n            child = heap[childIndex + 1];\n            childIndex++;\n        }\n        if (cur.compare(child) < 0)\n            break;\n        heap[childIndex] = cur;\n        heap[index] = child;\n        index = childIndex;\n    }\n}\nclass SpanCursor {\n    constructor(sets, skip, minPoint) {\n        this.minPoint = minPoint;\n        this.active = [];\n        this.activeTo = [];\n        this.activeRank = [];\n        this.minActive = -1;\n        // A currently active point range, if any\n        this.point = null;\n        this.pointFrom = 0;\n        this.pointRank = 0;\n        this.to = -Far;\n        this.endSide = 0;\n        this.openStart = -1;\n        this.cursor = HeapCursor.from(sets, skip, minPoint);\n    }\n    goto(pos, side = -Far) {\n        this.cursor.goto(pos, side);\n        this.active.length = this.activeTo.length = this.activeRank.length = 0;\n        this.minActive = -1;\n        this.to = pos;\n        this.endSide = side;\n        this.openStart = -1;\n        this.next();\n        return this;\n    }\n    forward(pos, side) {\n        while (this.minActive > -1 && (this.activeTo[this.minActive] - pos || this.active[this.minActive].endSide - side) < 0)\n            this.removeActive(this.minActive);\n        this.cursor.forward(pos, side);\n    }\n    removeActive(index) {\n        remove(this.active, index);\n        remove(this.activeTo, index);\n        remove(this.activeRank, index);\n        this.minActive = findMinIndex(this.active, this.activeTo);\n    }\n    addActive(trackOpen) {\n        let i = 0, { value, to, rank } = this.cursor;\n        while (i < this.activeRank.length && this.activeRank[i] <= rank)\n            i++;\n        insert(this.active, i, value);\n        insert(this.activeTo, i, to);\n        insert(this.activeRank, i, rank);\n        if (trackOpen)\n            insert(trackOpen, i, this.cursor.from);\n        this.minActive = findMinIndex(this.active, this.activeTo);\n    }\n    // After calling this, if `this.point` != null, the next range is a\n    // point. Otherwise, it's a regular range, covered by `this.active`.\n    next() {\n        let from = this.to;\n        this.point = null;\n        let trackOpen = this.openStart < 0 ? [] : null, trackExtra = 0;\n        for (;;) {\n            let a = this.minActive;\n            if (a > -1 && (this.activeTo[a] - this.cursor.from || this.active[a].endSide - this.cursor.startSide) < 0) {\n                if (this.activeTo[a] > from) {\n                    this.to = this.activeTo[a];\n                    this.endSide = this.active[a].endSide;\n                    break;\n                }\n                this.removeActive(a);\n                if (trackOpen)\n                    remove(trackOpen, a);\n            }\n            else if (!this.cursor.value) {\n                this.to = this.endSide = Far;\n                break;\n            }\n            else if (this.cursor.from > from) {\n                this.to = this.cursor.from;\n                this.endSide = this.cursor.startSide;\n                break;\n            }\n            else {\n                let nextVal = this.cursor.value;\n                if (!nextVal.point) { // Opening a range\n                    this.addActive(trackOpen);\n                    this.cursor.next();\n                }\n                else { // New point\n                    this.point = nextVal;\n                    this.pointFrom = this.cursor.from;\n                    this.pointRank = this.cursor.rank;\n                    this.to = this.cursor.to;\n                    this.endSide = nextVal.endSide;\n                    if (this.cursor.from < from)\n                        trackExtra = 1;\n                    this.cursor.next();\n                    if (this.to > from)\n                        this.forward(this.to, this.endSide);\n                    break;\n                }\n            }\n        }\n        if (trackOpen) {\n            let openStart = 0;\n            while (openStart < trackOpen.length && trackOpen[openStart] < from)\n                openStart++;\n            this.openStart = openStart + trackExtra;\n        }\n    }\n    activeForPoint(to) {\n        if (!this.active.length)\n            return this.active;\n        let active = [];\n        for (let i = 0; i < this.active.length; i++) {\n            if (this.activeRank[i] > this.pointRank)\n                break;\n            if (this.activeTo[i] > to || this.activeTo[i] == to && this.active[i].endSide > this.point.endSide)\n                active.push(this.active[i]);\n        }\n        return active;\n    }\n    openEnd(to) {\n        let open = 0;\n        while (open < this.activeTo.length && this.activeTo[open] > to)\n            open++;\n        return open;\n    }\n}\nfunction compare(a, startA, b, startB, length, comparator) {\n    a.goto(startA);\n    b.goto(startB);\n    let endB = startB + length;\n    let pos = startB, dPos = startB - startA;\n    for (;;) {\n        let diff = (a.to + dPos) - b.to || a.endSide - b.endSide;\n        let end = diff < 0 ? a.to + dPos : b.to, clipEnd = Math.min(end, endB);\n        if (a.point || b.point) {\n            if (!(a.point && b.point && (a.point == b.point || a.point.eq(b.point))))\n                comparator.comparePoint(pos, clipEnd, a.point, b.point);\n        }\n        else {\n            if (clipEnd > pos && !sameValues(a.active, b.active))\n                comparator.compareRange(pos, clipEnd, a.active, b.active);\n        }\n        if (end > endB)\n            break;\n        pos = end;\n        if (diff <= 0)\n            a.next();\n        if (diff >= 0)\n            b.next();\n    }\n}\nfunction sameValues(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (a[i] != b[i] && !a[i].eq(b[i]))\n            return false;\n    return true;\n}\nfunction remove(array, index) {\n    for (let i = index, e = array.length - 1; i < e; i++)\n        array[i] = array[i + 1];\n    array.pop();\n}\nfunction insert(array, index, value) {\n    for (let i = array.length - 1; i >= index; i--)\n        array[i + 1] = array[i];\n    array[index] = value;\n}\nfunction findMinIndex(value, array) {\n    let found = -1, foundPos = Far;\n    for (let i = 0; i < array.length; i++)\n        if ((array[i] - foundPos || value[i].endSide - value[found].endSide) < 0) {\n            found = i;\n            foundPos = array[i];\n        }\n    return found;\n}\n\nexport { Range, RangeSet, RangeSetBuilder, RangeValue };\n","export var base = {\n  8: \"Backspace\",\n  9: \"Tab\",\n  10: \"Enter\",\n  12: \"NumLock\",\n  13: \"Enter\",\n  16: \"Shift\",\n  17: \"Control\",\n  18: \"Alt\",\n  20: \"CapsLock\",\n  27: \"Escape\",\n  32: \" \",\n  33: \"PageUp\",\n  34: \"PageDown\",\n  35: \"End\",\n  36: \"Home\",\n  37: \"ArrowLeft\",\n  38: \"ArrowUp\",\n  39: \"ArrowRight\",\n  40: \"ArrowDown\",\n  44: \"PrintScreen\",\n  45: \"Insert\",\n  46: \"Delete\",\n  59: \";\",\n  61: \"=\",\n  91: \"Meta\",\n  92: \"Meta\",\n  106: \"*\",\n  107: \"+\",\n  108: \",\",\n  109: \"-\",\n  110: \".\",\n  111: \"/\",\n  144: \"NumLock\",\n  145: \"ScrollLock\",\n  160: \"Shift\",\n  161: \"Shift\",\n  162: \"Control\",\n  163: \"Control\",\n  164: \"Alt\",\n  165: \"Alt\",\n  173: \"-\",\n  186: \";\",\n  187: \"=\",\n  188: \",\",\n  189: \"-\",\n  190: \".\",\n  191: \"/\",\n  192: \"`\",\n  219: \"[\",\n  220: \"\\\\\",\n  221: \"]\",\n  222: \"'\",\n  229: \"q\"\n}\n\nexport var shift = {\n  48: \")\",\n  49: \"!\",\n  50: \"@\",\n  51: \"#\",\n  52: \"$\",\n  53: \"%\",\n  54: \"^\",\n  55: \"&\",\n  56: \"*\",\n  57: \"(\",\n  59: \":\",\n  61: \"+\",\n  173: \"_\",\n  186: \":\",\n  187: \"+\",\n  188: \"<\",\n  189: \"_\",\n  190: \">\",\n  191: \"?\",\n  192: \"~\",\n  219: \"{\",\n  220: \"|\",\n  221: \"}\",\n  222: \"\\\"\",\n  229: \"Q\"\n}\n\nvar chrome = typeof navigator != \"undefined\" && /Chrome\\/(\\d+)/.exec(navigator.userAgent)\nvar safari = typeof navigator != \"undefined\" && /Apple Computer/.test(navigator.vendor)\nvar gecko = typeof navigator != \"undefined\" && /Gecko\\/\\d+/.test(navigator.userAgent)\nvar mac = typeof navigator != \"undefined\" && /Mac/.test(navigator.platform)\nvar ie = typeof navigator != \"undefined\" && /MSIE \\d|Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent)\nvar brokenModifierNames = chrome && (mac || +chrome[1] < 57) || gecko && mac\n\n// Fill in the digit keys\nfor (var i = 0; i < 10; i++) base[48 + i] = base[96 + i] = String(i)\n\n// The function keys\nfor (var i = 1; i <= 24; i++) base[i + 111] = \"F\" + i\n\n// And the alphabetic keys\nfor (var i = 65; i <= 90; i++) {\n  base[i] = String.fromCharCode(i + 32)\n  shift[i] = String.fromCharCode(i)\n}\n\n// For each code that doesn't have a shift-equivalent, copy the base name\nfor (var code in base) if (!shift.hasOwnProperty(code)) shift[code] = base[code]\n\nexport function keyName(event) {\n  // Don't trust event.key in Chrome when there are modifiers until\n  // they fix https://bugs.chromium.org/p/chromium/issues/detail?id=633838\n  var ignoreKey = brokenModifierNames && (event.ctrlKey || event.altKey || event.metaKey) ||\n    (safari || ie) && event.shiftKey && event.key && event.key.length == 1\n  var name = (!ignoreKey && event.key) ||\n    (event.shiftKey ? shift : base)[event.keyCode] ||\n    event.key || \"Unidentified\"\n  // Edge sometimes produces wrong names (Issue #3)\n  if (name == \"Esc\") name = \"Escape\"\n  if (name == \"Del\") name = \"Delete\"\n  // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/\n  if (name == \"Left\") name = \"ArrowLeft\"\n  if (name == \"Up\") name = \"ArrowUp\"\n  if (name == \"Right\") name = \"ArrowRight\"\n  if (name == \"Down\") name = \"ArrowDown\"\n  return name\n}\n","import { MapMode, Facet, Text as Text$1, EditorSelection, ChangeSet, Transaction, CharCategory, EditorState, precedence, StateField, combineConfig, IndentContext } from '@codemirror/next/state';\nimport { StyleModule } from 'style-mod';\nimport { RangeValue, RangeSet } from '@codemirror/next/rangeset';\nexport { Range } from '@codemirror/next/rangeset';\nimport { Text, countColumn, findColumn, codePointAt } from '@codemirror/next/text';\nimport { keyName, base } from 'w3c-keyname';\n\nlet [nav, doc] = typeof navigator != \"undefined\"\n    ? [navigator, document]\n    : [{ userAgent: \"\", vendor: \"\", platform: \"\" }, { documentElement: { style: {} } }];\nconst ie_edge = /Edge\\/(\\d+)/.exec(nav.userAgent);\nconst ie_upto10 = /MSIE \\d/.test(nav.userAgent);\nconst ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(nav.userAgent);\nconst ie = !!(ie_upto10 || ie_11up || ie_edge);\nconst gecko = !ie && /gecko\\/(\\d+)/i.test(nav.userAgent);\nconst chrome = !ie && /Chrome\\/(\\d+)/.exec(nav.userAgent);\nconst webkit = \"webkitFontSmoothing\" in doc.documentElement.style;\nvar browser = {\n    mac: /Mac/.test(nav.platform),\n    ie,\n    ie_version: ie_upto10 ? doc.documentMode || 6 : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0,\n    gecko,\n    gecko_version: gecko ? +(/Firefox\\/(\\d+)/.exec(nav.userAgent) || [0, 0])[1] : 0,\n    chrome: !!chrome,\n    chrome_version: chrome ? +chrome[1] : 0,\n    ios: !ie && /AppleWebKit/.test(nav.userAgent) && /Mobile\\/\\w+/.test(nav.userAgent),\n    android: /Android\\b/.test(nav.userAgent),\n    webkit,\n    safari: /Apple Computer/.test(nav.vendor),\n    webkit_version: webkit ? +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0,\n    tabSize: doc.documentElement.style.tabSize != null ? \"tab-size\" : \"-moz-tab-size\"\n};\n\nfunction getSelection(root) {\n    return (root.getSelection ? root.getSelection() : document.getSelection());\n}\n// Work around Chrome issue https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n// (isCollapsed inappropriately returns true in shadow dom)\nfunction selectionCollapsed(domSel) {\n    let collapsed = domSel.isCollapsed;\n    if (collapsed && browser.chrome && domSel.rangeCount && !domSel.getRangeAt(0).collapsed)\n        collapsed = false;\n    return collapsed;\n}\nfunction hasSelection(dom, selection) {\n    if (!selection.anchorNode)\n        return false;\n    try {\n        // Firefox will raise 'permission denied' errors when accessing\n        // properties of `sel.anchorNode` when it's in a generated CSS\n        // element.\n        return dom.contains(selection.anchorNode.nodeType == 3 ? selection.anchorNode.parentNode : selection.anchorNode);\n    }\n    catch (_) {\n        return false;\n    }\n}\nfunction clientRectsFor(dom) {\n    if (dom.nodeType == 3) {\n        let range = document.createRange();\n        range.setEnd(dom, dom.nodeValue.length);\n        range.setStart(dom, 0);\n        return range.getClientRects();\n    }\n    else if (dom.nodeType == 1) {\n        return dom.getClientRects();\n    }\n    else {\n        return [];\n    }\n}\n// Scans forward and backward through DOM positions equivalent to the\n// given one to see if the two are in the same place (i.e. after a\n// text node vs at the end of that text node)\nfunction isEquivalentPosition(node, off, targetNode, targetOff) {\n    return targetNode ? (scanFor(node, off, targetNode, targetOff, -1) ||\n        scanFor(node, off, targetNode, targetOff, 1)) : false;\n}\nfunction domIndex(node) {\n    for (var index = 0;; index++) {\n        node = node.previousSibling;\n        if (!node)\n            return index;\n    }\n}\nfunction scanFor(node, off, targetNode, targetOff, dir) {\n    for (;;) {\n        if (node == targetNode && off == targetOff)\n            return true;\n        if (off == (dir < 0 ? 0 : maxOffset(node))) {\n            if (node.nodeName == \"DIV\")\n                return false;\n            let parent = node.parentNode;\n            if (!parent || parent.nodeType != 1)\n                return false;\n            off = domIndex(node) + (dir < 0 ? 0 : 1);\n            node = parent;\n        }\n        else if (node.nodeType == 1) {\n            node = node.childNodes[off + (dir < 0 ? -1 : 0)];\n            off = dir < 0 ? maxOffset(node) : 0;\n        }\n        else {\n            return false;\n        }\n    }\n}\nfunction maxOffset(node) {\n    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\nfunction flattenRect(rect, left) {\n    let x = left ? rect.left : rect.right;\n    return { left: x, right: x, top: rect.top, bottom: rect.bottom };\n}\nfunction windowRect(win) {\n    return { left: 0, right: win.innerWidth,\n        top: 0, bottom: win.innerHeight };\n}\nconst ScrollSpace = 5;\nfunction scrollRectIntoView(dom, rect) {\n    let doc = dom.ownerDocument, win = doc.defaultView;\n    for (let cur = dom.parentNode; cur;) {\n        if (cur.nodeType == 1) { // Element\n            let bounding, top = cur == document.body;\n            if (top) {\n                bounding = windowRect(win);\n            }\n            else {\n                if (cur.scrollHeight <= cur.clientHeight && cur.scrollWidth <= cur.clientWidth) {\n                    cur = cur.parentNode;\n                    continue;\n                }\n                let rect = cur.getBoundingClientRect();\n                // Make sure scrollbar width isn't included in the rectangle\n                bounding = { left: rect.left, right: rect.left + cur.clientWidth,\n                    top: rect.top, bottom: rect.top + cur.clientHeight };\n            }\n            let moveX = 0, moveY = 0;\n            if (rect.top < bounding.top)\n                moveY = -(bounding.top - rect.top + ScrollSpace);\n            else if (rect.bottom > bounding.bottom)\n                moveY = rect.bottom - bounding.bottom + ScrollSpace;\n            if (rect.left < bounding.left)\n                moveX = -(bounding.left - rect.left + ScrollSpace);\n            else if (rect.right > bounding.right)\n                moveX = rect.right - bounding.right + ScrollSpace;\n            if (moveX || moveY) {\n                if (top) {\n                    win.scrollBy(moveX, moveY);\n                }\n                else {\n                    if (moveY) {\n                        let start = cur.scrollTop;\n                        cur.scrollTop += moveY;\n                        moveY = cur.scrollTop - start;\n                    }\n                    if (moveX) {\n                        let start = cur.scrollLeft;\n                        cur.scrollLeft += moveX;\n                        moveX = cur.scrollLeft - start;\n                    }\n                    rect = { left: rect.left - moveX, top: rect.top - moveY,\n                        right: rect.right - moveX, bottom: rect.bottom - moveY };\n                }\n            }\n            if (top)\n                break;\n            cur = cur.parentNode;\n        }\n        else if (cur.nodeType == 11) { // A shadow root\n            cur = cur.host;\n        }\n        else {\n            break;\n        }\n    }\n}\nclass DOMSelection {\n    constructor() {\n        this.anchorNode = null;\n        this.anchorOffset = 0;\n        this.focusNode = null;\n        this.focusOffset = 0;\n    }\n    eq(domSel) {\n        return this.anchorNode == domSel.anchorNode && this.anchorOffset == domSel.anchorOffset &&\n            this.focusNode == domSel.focusNode && this.focusOffset == domSel.focusOffset;\n    }\n    set(domSel) {\n        this.anchorNode = domSel.anchorNode;\n        this.anchorOffset = domSel.anchorOffset;\n        this.focusNode = domSel.focusNode;\n        this.focusOffset = domSel.focusOffset;\n    }\n}\nlet preventScrollSupported = null;\n// Feature-detects support for .focus({preventScroll: true}), and uses\n// a fallback kludge when not supported.\nfunction focusPreventScroll(dom) {\n    if (dom.setActive)\n        return dom.setActive(); // in IE\n    if (preventScrollSupported)\n        return dom.focus(preventScrollSupported);\n    let stack = [];\n    for (let cur = dom; cur; cur = cur.parentNode) {\n        stack.push(cur, cur.scrollTop, cur.scrollLeft);\n        if (cur == cur.ownerDocument)\n            break;\n    }\n    dom.focus(preventScrollSupported == null ? {\n        get preventScroll() {\n            preventScrollSupported = { preventScroll: true };\n            return true;\n        }\n    } : undefined);\n    if (!preventScrollSupported) {\n        preventScrollSupported = false;\n        for (let i = 0; i < stack.length;) {\n            let elt = stack[i++], top = stack[i++], left = stack[i++];\n            if (elt.scrollTop != top)\n                elt.scrollTop = top;\n            if (elt.scrollLeft != left)\n                elt.scrollLeft = left;\n        }\n    }\n}\n\nclass DOMPos {\n    constructor(node, offset, precise = true) {\n        this.node = node;\n        this.offset = offset;\n        this.precise = precise;\n    }\n    static before(dom, precise) { return new DOMPos(dom.parentNode, domIndex(dom), precise); }\n    static after(dom, precise) { return new DOMPos(dom.parentNode, domIndex(dom) + 1, precise); }\n}\nconst none = [];\nclass ContentView {\n    constructor() {\n        this.parent = null;\n        this.dom = null;\n        this.dirty = 2 /* Node */;\n    }\n    get editorView() {\n        if (!this.parent)\n            throw new Error(\"Accessing view in orphan content view\");\n        return this.parent.editorView;\n    }\n    get overrideDOMText() { return null; }\n    get posAtStart() {\n        return this.parent ? this.parent.posBefore(this) : 0;\n    }\n    get posAtEnd() {\n        return this.posAtStart + this.length;\n    }\n    posBefore(view) {\n        let pos = this.posAtStart;\n        for (let child of this.children) {\n            if (child == view)\n                return pos;\n            pos += child.length + child.breakAfter;\n        }\n        throw new RangeError(\"Invalid child in posBefore\");\n    }\n    posAfter(view) {\n        return this.posBefore(view) + view.length;\n    }\n    // Will return a rectangle directly before (when side < 0), after\n    // (side > 0) or directly on (when the browser supports it) the\n    // given position.\n    coordsAt(_pos, _side) { return null; }\n    sync(track) {\n        if (this.dirty & 2 /* Node */) {\n            let parent = this.dom, pos = null;\n            for (let child of this.children) {\n                if (child.dirty) {\n                    let next = pos ? pos.nextSibling : parent.firstChild;\n                    if (next && !child.dom && !ContentView.get(next))\n                        child.reuseDOM(next);\n                    child.sync(track);\n                    child.dirty = 0 /* Not */;\n                }\n                if (track && track.node == parent && pos != child.dom)\n                    track.written = true;\n                syncNodeInto(parent, pos, child.dom);\n                pos = child.dom;\n            }\n            let next = pos ? pos.nextSibling : parent.firstChild;\n            if (next && track && track.node == parent)\n                track.written = true;\n            while (next)\n                next = rm(next);\n        }\n        else if (this.dirty & 1 /* Child */) {\n            for (let child of this.children)\n                if (child.dirty) {\n                    child.sync(track);\n                    child.dirty = 0 /* Not */;\n                }\n        }\n    }\n    reuseDOM(_dom) { return false; }\n    localPosFromDOM(node, offset) {\n        let after;\n        if (node == this.dom) {\n            after = this.dom.childNodes[offset];\n        }\n        else {\n            let bias = maxOffset(node) == 0 ? 0 : offset == 0 ? -1 : 1;\n            for (;;) {\n                let parent = node.parentNode;\n                if (parent == this.dom)\n                    break;\n                if (bias == 0 && parent.firstChild != parent.lastChild) {\n                    if (node == parent.firstChild)\n                        bias = -1;\n                    else\n                        bias = 1;\n                }\n                node = parent;\n            }\n            if (bias < 0)\n                after = node;\n            else\n                after = node.nextSibling;\n        }\n        if (after == this.dom.firstChild)\n            return 0;\n        while (after && !ContentView.get(after))\n            after = after.nextSibling;\n        if (!after)\n            return this.length;\n        for (let i = 0, pos = 0;; i++) {\n            let child = this.children[i];\n            if (child.dom == after)\n                return pos;\n            pos += child.length + child.breakAfter;\n        }\n    }\n    domBoundsAround(from, to, offset = 0) {\n        let fromI = -1, fromStart = -1, toI = -1, toEnd = -1;\n        for (let i = 0, pos = offset; i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (pos < from && end > to)\n                return child.domBoundsAround(from, to, pos);\n            if (end >= from && fromI == -1) {\n                fromI = i;\n                fromStart = pos;\n            }\n            if (end >= to && toI == -1) {\n                toI = i;\n                toEnd = end;\n                break;\n            }\n            pos = end + child.breakAfter;\n        }\n        return { from: fromStart, to: toEnd, startDOM: (fromI ? this.children[fromI - 1].dom.nextSibling : null) || this.dom.firstChild, endDOM: toI < this.children.length - 1 ? this.children[toI + 1].dom : null };\n    }\n    // FIXME track precise dirty ranges, to avoid full DOM sync on every touched node?\n    markDirty(andParent = false) {\n        if (this.dirty & 2 /* Node */)\n            return;\n        this.dirty |= 2 /* Node */;\n        this.markParentsDirty(andParent);\n    }\n    markParentsDirty(childList) {\n        for (let parent = this.parent; parent; parent = parent.parent) {\n            if (childList)\n                parent.dirty |= 2 /* Node */;\n            if (parent.dirty & 1 /* Child */)\n                return;\n            parent.dirty |= 1 /* Child */;\n            childList = false;\n        }\n    }\n    setParent(parent) {\n        if (this.parent != parent) {\n            this.parent = parent;\n            if (this.dirty)\n                this.markParentsDirty(true);\n        }\n    }\n    setDOM(dom) {\n        this.dom = dom;\n        dom.cmView = this;\n    }\n    get rootView() {\n        for (let v = this;;) {\n            let parent = v.parent;\n            if (!parent)\n                return v;\n            v = parent;\n        }\n    }\n    replaceChildren(from, to, children = none) {\n        this.markDirty();\n        for (let i = from; i < to; i++)\n            this.children[i].parent = null;\n        this.children.splice(from, to - from, ...children);\n        for (let i = 0; i < children.length; i++)\n            children[i].setParent(this);\n    }\n    ignoreMutation(_rec) { return false; }\n    ignoreEvent(_event) { return false; }\n    childCursor(pos = this.length) {\n        return new ChildCursor(this.children, pos, this.children.length);\n    }\n    childPos(pos, bias = 1) {\n        return this.childCursor().findPos(pos, bias);\n    }\n    toString() {\n        let name = this.constructor.name.replace(\"View\", \"\");\n        return name + (this.children.length ? \"(\" + this.children.join() + \")\" :\n            this.length ? \"[\" + (name == \"Text\" ? this.text : this.length) + \"]\" : \"\") +\n            (this.breakAfter ? \"#\" : \"\");\n    }\n    static get(node) { return node.cmView; }\n}\nContentView.prototype.breakAfter = 0;\n// Remove a DOM node and return its next sibling.\nfunction rm(dom) {\n    let next = dom.nextSibling;\n    dom.parentNode.removeChild(dom);\n    return next;\n}\nfunction syncNodeInto(parent, after, dom) {\n    let next = after ? after.nextSibling : parent.firstChild;\n    if (dom.parentNode == parent)\n        while (next != dom)\n            next = rm(next);\n    else\n        parent.insertBefore(dom, next);\n}\nclass ChildCursor {\n    constructor(children, pos, i) {\n        this.children = children;\n        this.pos = pos;\n        this.i = i;\n        this.off = 0;\n    }\n    findPos(pos, bias = 1) {\n        for (;;) {\n            if (pos > this.pos || pos == this.pos &&\n                (bias > 0 || this.i == 0 || this.children[this.i - 1].breakAfter)) {\n                this.off = pos - this.pos;\n                return this;\n            }\n            let next = this.children[--this.i];\n            this.pos -= next.length + next.breakAfter;\n        }\n    }\n}\nfunction coordsInChildren(view, pos, side) {\n    for (let off = 0, i = 0; i < view.children.length; i++) {\n        let child = view.children[i], end = off + child.length;\n        if (end != off && (side <= 0 || end == view.length ? end >= pos : end > pos))\n            return child.coordsAt(pos - off, side);\n        off = end;\n    }\n    return view.dom.lastChild.getBoundingClientRect();\n}\n\nconst none$1 = [];\nclass InlineView extends ContentView {\n    /// Return true when this view is equivalent to `other` and can take\n    /// on its role.\n    become(_other) { return false; }\n    // When this is a zero-length view with a side, this should return a\n    // negative number to indicate it is before its position, or a\n    // positive number when after its position.\n    getSide() { return 0; }\n}\nInlineView.prototype.children = none$1;\nconst MaxJoinLen = 256;\nclass TextView extends InlineView {\n    constructor(text) {\n        super();\n        this.text = text;\n    }\n    get length() { return this.text.length; }\n    createDOM(textDOM) {\n        this.setDOM(textDOM || document.createTextNode(this.text));\n    }\n    sync(track) {\n        if (!this.dom)\n            this.createDOM();\n        if (this.dom.nodeValue != this.text) {\n            if (track && track.node == this.dom)\n                track.written = true;\n            this.dom.nodeValue = this.text;\n        }\n    }\n    reuseDOM(dom) {\n        if (dom.nodeType != 3)\n            return false;\n        this.createDOM(dom);\n        return true;\n    }\n    merge(from, to, source) {\n        if (source && (!(source instanceof TextView) || this.length - (to - from) + source.length > MaxJoinLen))\n            return false;\n        this.text = this.text.slice(0, from) + (source ? source.text : \"\") + this.text.slice(to);\n        this.markDirty();\n        return true;\n    }\n    slice(from) {\n        return new TextView(this.text.slice(from));\n    }\n    localPosFromDOM(node, offset) {\n        return node == this.dom ? offset : offset ? this.text.length : 0;\n    }\n    domAtPos(pos) { return new DOMPos(this.dom, pos); }\n    domBoundsAround(_from, _to, offset) {\n        return { from: offset, to: offset + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };\n    }\n    coordsAt(pos, side) {\n        return textCoords(this.dom, pos, side, this.length);\n    }\n}\nclass MarkView extends InlineView {\n    constructor(mark, children = [], length = 0) {\n        super();\n        this.mark = mark;\n        this.children = children;\n        this.length = length;\n        for (let ch of children)\n            ch.setParent(this);\n    }\n    createDOM() {\n        let dom = document.createElement(this.mark.tagName);\n        if (this.mark.class)\n            dom.className = this.mark.class;\n        if (this.mark.attrs)\n            for (let name in this.mark.attrs)\n                dom.setAttribute(name, this.mark.attrs[name]);\n        this.setDOM(dom);\n    }\n    sync(track) {\n        if (!this.dom)\n            this.createDOM();\n        super.sync(track);\n    }\n    merge(from, to, source, openStart, openEnd) {\n        if (source && (!(source instanceof MarkView && source.mark.eq(this.mark)) ||\n            (from && openStart <= 0) || (to < this.length && openEnd <= 0)))\n            return false;\n        mergeInlineChildren(this, from, to, source ? source.children : none$1, openStart - 1, openEnd - 1);\n        this.markDirty();\n        return true;\n    }\n    slice(from) {\n        return new MarkView(this.mark, sliceInlineChildren(this.children, from), this.length - from);\n    }\n    domAtPos(pos) {\n        return inlineDOMAtPos(this.dom, this.children, pos);\n    }\n    coordsAt(pos, side) {\n        return coordsInChildren(this, pos, side);\n    }\n}\nfunction textCoords(text, pos, side, length) {\n    let from = pos, to = pos, flatten = 0;\n    if (pos == 0 && side < 0 || pos == length && side >= 0) {\n        if (!(browser.chrome || browser.gecko)) { // These browsers reliably return valid rectangles for empty ranges\n            if (pos) {\n                from--;\n                flatten = 1;\n            } // FIXME this is wrong in RTL text\n            else {\n                to++;\n                flatten = -1;\n            }\n        }\n    }\n    else {\n        if (side < 0)\n            from--;\n        else\n            to++;\n    }\n    let range = document.createRange();\n    range.setEnd(text, to);\n    range.setStart(text, from);\n    let rect = range.getBoundingClientRect();\n    return flatten ? flattenRect(rect, flatten < 0) : rect;\n}\n// Also used for collapsed ranges that don't have a placeholder widget!\nclass WidgetView extends InlineView {\n    constructor(widget, length, side) {\n        super();\n        this.widget = widget;\n        this.length = length;\n        this.side = side;\n    }\n    static create(widget, length, side) {\n        return new (widget.customView || WidgetView)(widget, length, side);\n    }\n    slice(from) { return WidgetView.create(this.widget, this.length - from, this.side); }\n    sync() {\n        if (!this.dom || !this.widget.updateDOM(this.dom)) {\n            this.setDOM(this.widget.toDOM(this.editorView));\n            this.dom.contentEditable = \"false\";\n        }\n    }\n    getSide() { return this.side; }\n    merge(from, to, source, openStart, openEnd) {\n        if (source && (!(source instanceof WidgetView) || !this.widget.compare(source.widget) ||\n            from > 0 && openStart <= 0 || to < this.length && openEnd <= 0))\n            return false;\n        this.length = from + (source ? source.length : 0) + (this.length - to);\n        return true;\n    }\n    become(other) {\n        if (other.length == this.length && other instanceof WidgetView && other.side == this.side) {\n            if (this.widget.constructor == other.widget.constructor) {\n                if (!this.widget.eq(other.widget.value))\n                    this.markDirty(true);\n                this.widget = other.widget;\n                return true;\n            }\n        }\n        return false;\n    }\n    ignoreMutation() { return true; }\n    ignoreEvent(event) { return this.widget.ignoreEvent(event); }\n    get overrideDOMText() {\n        if (this.length == 0)\n            return Text.empty;\n        let top = this;\n        while (top.parent)\n            top = top.parent;\n        let view = top.editorView, text = view && view.state.doc, start = this.posAtStart;\n        return text ? text.slice(start, start + this.length) : Text.empty;\n    }\n    domAtPos(pos) {\n        return pos == 0 ? DOMPos.before(this.dom) : DOMPos.after(this.dom, pos == this.length);\n    }\n    domBoundsAround() { return null; }\n    coordsAt(pos, _side) {\n        let rects = this.dom.getClientRects(), rect = null;\n        for (let i = pos > 0 ? rects.length - 1 : 0;; i += (pos > 0 ? -1 : 1)) {\n            rect = rects[i];\n            if (pos > 0 ? i == 0 : i == rects.length - 1 || rect.top < rect.bottom)\n                break;\n        }\n        return rect;\n    }\n}\nclass CompositionView extends WidgetView {\n    domAtPos(pos) { return new DOMPos(this.widget.value.text, pos); }\n    sync() { if (!this.dom)\n        this.setDOM(this.widget.toDOM(this.editorView)); }\n    localPosFromDOM(node, offset) {\n        return !offset ? 0 : node.nodeType == 3 ? Math.min(offset, this.length) : this.length;\n    }\n    ignoreMutation() { return false; }\n    get overrideDOMText() { return null; }\n    coordsAt(pos, side) { return textCoords(this.widget.value.text, pos, side, this.length); }\n}\nfunction mergeInlineChildren(parent, from, to, elts, openStart, openEnd) {\n    let cur = parent.childCursor();\n    let { i: toI, off: toOff } = cur.findPos(to, 1);\n    let { i: fromI, off: fromOff } = cur.findPos(from, -1);\n    let dLen = from - to;\n    for (let view of elts)\n        dLen += view.length;\n    parent.length += dLen;\n    let { children } = parent;\n    // Both from and to point into the same text view\n    if (fromI == toI && fromOff) {\n        let start = children[fromI];\n        // Maybe just update that view and be done\n        if (elts.length == 1 && start.merge(fromOff, toOff, elts[0], openStart, openEnd))\n            return;\n        if (elts.length == 0) {\n            start.merge(fromOff, toOff, null, openStart, openEnd);\n            return;\n        }\n        // Otherwise split it, so that we don't have to worry about aliasing front/end afterwards\n        let after = start.slice(toOff);\n        if (after.merge(0, 0, elts[elts.length - 1], 0, openEnd))\n            elts[elts.length - 1] = after;\n        else\n            elts.push(after);\n        toI++;\n        openEnd = toOff = 0;\n    }\n    // Make sure start and end positions fall on node boundaries\n    // (fromOff/toOff are no longer used after this), and that if the\n    // start or end of the elts can be merged with adjacent nodes,\n    // this is done\n    if (toOff) {\n        let end = children[toI];\n        if (elts.length && end.merge(0, toOff, elts[elts.length - 1], 0, openEnd)) {\n            elts.pop();\n            openEnd = 0;\n        }\n        else {\n            end.merge(0, toOff, null, 0, 0);\n        }\n    }\n    else if (toI < children.length && elts.length &&\n        children[toI].merge(0, 0, elts[elts.length - 1], 0, openEnd)) {\n        elts.pop();\n        openEnd = 0;\n    }\n    if (fromOff) {\n        let start = children[fromI];\n        if (elts.length && start.merge(fromOff, start.length, elts[0], openStart, 0)) {\n            elts.shift();\n            openStart = 0;\n        }\n        else {\n            start.merge(fromOff, start.length, null, 0, 0);\n        }\n        fromI++;\n    }\n    else if (fromI && elts.length) {\n        let end = children[fromI - 1];\n        if (end.merge(end.length, end.length, elts[0], openStart, 0)) {\n            elts.shift();\n            openStart = 0;\n        }\n    }\n    // Then try to merge any mergeable nodes at the start and end of\n    // the changed range\n    while (fromI < toI && elts.length && children[toI - 1].become(elts[elts.length - 1])) {\n        elts.pop();\n        toI--;\n        openEnd = 0;\n    }\n    while (fromI < toI && elts.length && children[fromI].become(elts[0])) {\n        elts.shift();\n        fromI++;\n        openStart = 0;\n    }\n    if (!elts.length && fromI && toI < children.length && openStart && openEnd &&\n        children[toI].merge(0, 0, children[fromI - 1], openStart, openEnd))\n        fromI--;\n    // And if anything remains, splice the child array to insert the new elts\n    if (elts.length || fromI != toI)\n        parent.replaceChildren(fromI, toI, elts);\n}\nfunction sliceInlineChildren(children, from) {\n    let result = [], off = 0;\n    for (let elt of children) {\n        let end = off + elt.length;\n        if (end > from)\n            result.push(off < from ? elt.slice(from - off) : elt);\n        off = end;\n    }\n    return result;\n}\nfunction inlineDOMAtPos(dom, children, pos) {\n    let i = 0;\n    for (let off = 0; i < children.length; i++) {\n        let child = children[i], end = off + child.length;\n        if (end == off && child.getSide() <= 0)\n            continue;\n        if (pos > off && pos < end && child.dom.parentNode == dom)\n            return child.domAtPos(pos - off);\n        if (pos <= off)\n            break;\n        off = end;\n    }\n    for (; i > 0; i--) {\n        let before = children[i - 1].dom;\n        if (before.parentNode == dom)\n            return DOMPos.after(before);\n    }\n    return new DOMPos(dom, 0);\n}\n// Assumes `view`, if a mark view, has precisely 1 child.\nfunction joinInlineInto(parent, view, open) {\n    let last, { children } = parent;\n    if (open > 0 && view instanceof MarkView && children.length &&\n        (last = children[children.length - 1]) instanceof MarkView && last.mark.eq(view.mark)) {\n        joinInlineInto(last, view.children[0], open - 1);\n    }\n    else {\n        children.push(view);\n        view.setParent(parent);\n    }\n    parent.length += view.length;\n}\n\nfunction combineAttrs(source, target) {\n    for (let name in source) {\n        if (name == \"class\" && target.class)\n            target.class += \" \" + source.class;\n        else if (name == \"style\" && target.style)\n            target.style += \";\" + source.style;\n        else\n            target[name] = source[name];\n    }\n    return target;\n}\nfunction attrsEq(a, b) {\n    if (a == b)\n        return true;\n    if (!a || !b)\n        return false;\n    let keysA = Object.keys(a), keysB = Object.keys(b);\n    if (keysA.length != keysB.length)\n        return false;\n    for (let key of keysA) {\n        if (keysB.indexOf(key) == -1 || a[key] !== b[key])\n            return false;\n    }\n    return true;\n}\nfunction updateAttrs(dom, prev, attrs) {\n    if (prev)\n        for (let name in prev)\n            if (!(attrs && name in attrs))\n                dom.removeAttribute(name);\n    if (attrs)\n        for (let name in attrs)\n            if (!(prev && prev[name] == attrs[name]))\n                dom.setAttribute(name, attrs[name]);\n}\n\n/// Widgets added to the content are described by subclasses of this\n/// class. This makes it possible to delay creating of the DOM\n/// structure for a widget until it is needed, and to avoid redrawing\n/// widgets even when the decorations that define them are recreated.\n/// `T` can be a type of value passed to instances of the widget type.\nclass WidgetType {\n    /// Create an instance of this widget type.\n    constructor(\n    /// @internal\n    value) {\n        this.value = value;\n    }\n    /// Compare this instance to another instance of the same class. By\n    /// default, it'll compare the instances' parameters with `===`.\n    eq(value) { return this.value === value; }\n    /// Update a DOM element created by a widget of the same type but\n    /// with a different value to reflect this widget. May return true\n    /// to indicate that it could update, false to indicate it couldn't\n    /// (in which case the widget will be redrawn). The default\n    /// implementation just returns false.\n    updateDOM(_dom) { return false; }\n    /// @internal\n    compare(other) {\n        return this == other || this.constructor == other.constructor && this.eq(other.value);\n    }\n    /// The estimated height this widget will have, to be used when\n    /// estimating the height of content that hasn't been drawn. May\n    /// return -1 to indicate you don't know. The default implementation\n    /// returns -1.\n    get estimatedHeight() { return -1; }\n    /// Can be used to configure which kinds of events inside the widget\n    /// should be ignored by the editor. The default is to ignore all\n    /// events.\n    ignoreEvent(_event) { return true; }\n    //// @internal\n    get customView() { return null; }\n}\n/// The different types of blocks that can occur in an editor view.\nvar BlockType;\n(function (BlockType) {\n    /// A line of text.\n    BlockType[BlockType[\"Text\"] = 0] = \"Text\";\n    /// A block widget associated with the position after it.\n    BlockType[BlockType[\"WidgetBefore\"] = 1] = \"WidgetBefore\";\n    /// A block widget associated with the position before it.\n    BlockType[BlockType[\"WidgetAfter\"] = 2] = \"WidgetAfter\";\n    /// A block widget [replacing](#view.Decoration^replace) a range of content.\n    BlockType[BlockType[\"WidgetRange\"] = 3] = \"WidgetRange\";\n})(BlockType || (BlockType = {}));\n/// A decoration provides information on how to draw or style a piece\n/// of content. You'll usually use it wrapped in a\n/// [`Range`](#rangeset.Range), which adds a start and end position.\nclass Decoration extends RangeValue {\n    /// @internal\n    constructor(\n    /// @internal\n    startSide, \n    /// @internal\n    endSide, \n    /// @internal\n    widget, \n    /// The config object used to create this decoration.\n    spec) {\n        super();\n        this.startSide = startSide;\n        this.endSide = endSide;\n        this.widget = widget;\n        this.spec = spec;\n    }\n    /// @internal\n    get heightRelevant() { return false; }\n    /// Create a mark decoration, which influences the styling of the\n    /// content in its range. Nested mark decorations will cause nested\n    /// DOM elements to be created. Nesting order is determined by\n    /// precedence of the [facet](#view.EditorView^decorations) or\n    /// (below the facet-provided decorations) [view\n    /// plugin](#view.ViewPlugin.decorations). Such elements are broken\n    /// on line boundaries and on the boundaries of higher-precedence\n    /// decorations.\n    static mark(spec) {\n        return new MarkDecoration(spec);\n    }\n    /// Create a widget decoration, which adds an element at the given\n    /// position.\n    static widget(spec) {\n        let side = spec.side || 0;\n        if (spec.block)\n            side += (200000000 /* BigBlock */ + 1) * (side > 0 ? 1 : -1);\n        return new PointDecoration(spec, side, side, !!spec.block, spec.widget || null, false);\n    }\n    /// Create a replace decoration which replaces the given range with\n    /// a widget, or simply hides it.\n    static replace(spec) {\n        let block = !!spec.block;\n        let { start, end } = getInclusive(spec);\n        let startSide = block ? -200000000 /* BigBlock */ * (start ? 2 : 1) : 100000000 /* BigInline */ * (start ? -1 : 1);\n        let endSide = block ? 200000000 /* BigBlock */ * (end ? 2 : 1) : 100000000 /* BigInline */ * (end ? 1 : -1);\n        return new PointDecoration(spec, startSide, endSide, block, spec.widget || null, true);\n    }\n    /// Create a line decoration, which can add DOM attributes to the\n    /// line starting at the given position.\n    static line(spec) {\n        return new LineDecoration(spec);\n    }\n    /// Build a [`DecorationSet`](#view.DecorationSet) from the given\n    /// decorated range or ranges.\n    static set(of, sort = false) {\n        return RangeSet.of(of, sort);\n    }\n    /// @internal\n    hasHeight() { return this.widget ? this.widget.estimatedHeight > -1 : false; }\n}\n/// The empty set of decorations.\nDecoration.none = RangeSet.empty;\nclass MarkDecoration extends Decoration {\n    constructor(spec) {\n        let { start, end } = getInclusive(spec);\n        super(100000000 /* BigInline */ * (start ? -1 : 1), 100000000 /* BigInline */ * (end ? 1 : -1), null, spec);\n        this.tagName = spec.tagName || \"span\";\n        this.class = spec.class || \"\";\n        this.attrs = spec.attributes || null;\n    }\n    eq(other) {\n        return this == other ||\n            other instanceof MarkDecoration &&\n                this.tagName == other.tagName &&\n                this.class == other.class &&\n                attrsEq(this.attrs, other.attrs);\n    }\n    range(from, to = from) {\n        if (from >= to)\n            throw new RangeError(\"Mark decorations may not be empty\");\n        return super.range(from, to);\n    }\n}\nMarkDecoration.prototype.point = false;\nclass LineDecoration extends Decoration {\n    constructor(spec) {\n        super(-100000000 /* BigInline */, -100000000 /* BigInline */, null, spec);\n    }\n    eq(other) {\n        return other instanceof LineDecoration && attrsEq(this.spec.attributes, other.spec.attributes);\n    }\n    range(from, to = from) {\n        if (to != from)\n            throw new RangeError(\"Line decoration ranges must be zero-length\");\n        return super.range(from, to);\n    }\n}\nLineDecoration.prototype.mapMode = MapMode.TrackBefore;\nLineDecoration.prototype.point = true;\nclass PointDecoration extends Decoration {\n    constructor(spec, startSide, endSide, block, widget, isReplace) {\n        super(startSide, endSide, widget, spec);\n        this.block = block;\n        this.isReplace = isReplace;\n        this.mapMode = !block ? MapMode.TrackDel : startSide < 0 ? MapMode.TrackBefore : MapMode.TrackAfter;\n    }\n    // Only relevant when this.block == true\n    get type() {\n        return this.startSide < this.endSide ? BlockType.WidgetRange\n            : this.startSide < 0 ? BlockType.WidgetBefore : BlockType.WidgetAfter;\n    }\n    get heightRelevant() { return this.block || !!this.widget && this.widget.estimatedHeight >= 5; }\n    eq(other) {\n        return other instanceof PointDecoration &&\n            widgetsEq(this.widget, other.widget) &&\n            this.block == other.block &&\n            this.startSide == other.startSide && this.endSide == other.endSide;\n    }\n    range(from, to = from) {\n        if (this.isReplace && (from > to || (from == to && this.startSide > 0 && this.endSide < 0)))\n            throw new RangeError(\"Invalid range for replacement decoration\");\n        if (!this.isReplace && to != from)\n            throw new RangeError(\"Widget decorations can only have zero-length ranges\");\n        return super.range(from, to);\n    }\n}\nPointDecoration.prototype.point = true;\nfunction getInclusive(spec) {\n    let { inclusiveStart: start, inclusiveEnd: end } = spec;\n    if (start == null)\n        start = spec.inclusive;\n    if (end == null)\n        end = spec.inclusive;\n    return { start: start || false, end: end || false };\n}\nfunction widgetsEq(a, b) {\n    return a == b || !!(a && b && a.compare(b));\n}\nconst MinRangeGap = 4;\nfunction addRange(from, to, ranges) {\n    let last = ranges.length - 1;\n    if (last >= 0 && ranges[last] + MinRangeGap > from)\n        ranges[last] = Math.max(ranges[last], to);\n    else\n        ranges.push(from, to);\n}\n\nconst theme = Facet.define({ combine: strs => strs.join(\" \") });\nconst darkTheme = Facet.define({ combine: values => values.indexOf(true) > -1 });\nconst baseThemeID = StyleModule.newName();\nconst baseLightThemeID = StyleModule.newName();\nconst baseDarkThemeID = StyleModule.newName();\nfunction buildTheme(mainID, spec) {\n    let styles = Object.create(null);\n    for (let prop in spec) {\n        let selector = prop.split(/\\s*,\\s*/).map(piece => {\n            let id = mainID, narrow;\n            if (id == baseThemeID && (narrow = /^(.*?)@(light|dark)$/.exec(piece))) {\n                id = narrow[2] == \"dark\" ? baseDarkThemeID : baseLightThemeID;\n                piece = narrow[1];\n            }\n            let parts = piece.split(\".\"), selector = \".\" + id + (parts[0] == \"wrap\" ? \"\" : \" /*|*/ \");\n            for (let i = 1; i <= parts.length; i++)\n                selector += \".cm-\" + parts.slice(0, i).join(\"-\");\n            return selector;\n        }).join(\", \");\n        styles[selector] = spec[prop];\n    }\n    return new StyleModule(styles, { generateClasses: false });\n}\n/// Create a set of CSS class names for the given theme selector,\n/// which can be added to a DOM element within an editor to make\n/// themes able to style it. Theme selectors can be single words or\n/// words separated by dot characters. In the latter case, the\n/// returned classes combine those that match the full name and those\n/// that match some prefixfor example `\"panel.search\"` will match\n/// both the theme styles specified as `\"panel.search\"` and those with\n/// just `\"panel\"`. More specific theme styles (with more dots) take\n/// precedence.\nfunction themeClass(selector) {\n    let parts = selector.split(\".\"), result = \"\";\n    for (let i = 1; i <= parts.length; i++)\n        result += (result ? \" \" : \"\") + \"cm-\" + parts.slice(0, i).join(\"-\");\n    return result;\n}\nconst baseTheme = buildTheme(baseThemeID, {\n    wrap: {\n        position: \"relative !important\",\n        boxSizing: \"border-box\",\n        \"&.cm-focused\": {\n            // FIXME it would be great if we could directly use the browser's\n            // default focus outline, but it appears we can't, so this tries to\n            // approximate that\n            outline_fallback: \"1px dotted #212121\",\n            outline: \"5px auto -webkit-focus-ring-color\"\n        },\n        display: \"flex !important\",\n        flexDirection: \"column\"\n    },\n    scroller: {\n        display: \"flex !important\",\n        alignItems: \"flex-start !important\",\n        fontFamily: \"monospace\",\n        lineHeight: 1.4,\n        height: \"100%\",\n        overflowX: \"auto\"\n    },\n    content: {\n        margin: 0,\n        flexGrow: 2,\n        minHeight: \"100%\",\n        display: \"block\",\n        whiteSpace: \"pre\",\n        boxSizing: \"border-box\",\n        padding: \"4px 0\",\n        outline: \"none\"\n    },\n    \"content@light\": { caretColor: \"black\" },\n    \"content@dark\": { caretColor: \"white\" },\n    line: {\n        display: \"block\",\n        padding: \"0 2px 0 4px\"\n    },\n    button: {\n        verticalAlign: \"middle\",\n        color: \"inherit\",\n        fontSize: \"70%\",\n        padding: \".2em 1em\",\n        borderRadius: \"3px\"\n    },\n    \"button@light\": {\n        backgroundImage: \"linear-gradient(#eff1f5, #d9d9df)\",\n        border: \"1px solid #888\",\n        \"&:active\": {\n            backgroundImage: \"linear-gradient(#b4b4b4, #d0d3d6)\"\n        }\n    },\n    \"button@dark\": {\n        backgroundImage: \"linear-gradient(#555, #111)\",\n        border: \"1px solid #888\",\n        \"&:active\": {\n            backgroundImage: \"linear-gradient(#111, #333)\"\n        }\n    },\n    textfield: {\n        verticalAlign: \"middle\",\n        color: \"inherit\",\n        fontSize: \"70%\",\n        border: \"1px solid silver\",\n        padding: \".2em .5em\"\n    },\n    \"textfield@light\": {\n        backgroundColor: \"white\"\n    },\n    \"textfield@dark\": {\n        border: \"1px solid #555\",\n        backgroundColor: \"inherit\"\n    },\n    secondarySelection: {\n        backgroundColor_fallback: \"#3297FD\",\n        color_fallback: \"white !important\",\n        backgroundColor: \"Highlight\",\n        color: \"HighlightText !important\"\n    },\n    secondaryCursor: {\n        display: \"inline-block\",\n        verticalAlign: \"text-top\",\n        width: 0,\n        height: \"1.15em\",\n        margin: \"0 -0.7px -.7em\"\n    },\n    \"secondaryCursor@light\": { borderLeft: \"1.4px solid #555\" },\n    \"secondaryCursor@dark\": { borderLeft: \"1.4px solid #ddd\" }\n});\n\nconst LineClass = themeClass(\"line\");\nclass LineView extends ContentView {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n        this.length = 0;\n        this.prevAttrs = undefined;\n        this.attrs = null;\n        this.breakAfter = 0;\n    }\n    // Consumes source\n    merge(from, to, source, takeDeco, openStart, openEnd) {\n        if (source) {\n            if (!(source instanceof LineView))\n                return false;\n            if (!this.dom)\n                source.transferDOM(this); // Reuse source.dom when appropriate\n        }\n        if (takeDeco)\n            this.setDeco(source ? source.attrs : null);\n        mergeInlineChildren(this, from, to, source ? source.children : none$2, openStart, openEnd);\n        return true;\n    }\n    split(at) {\n        let end = new LineView;\n        end.breakAfter = this.breakAfter;\n        if (this.length == 0)\n            return end;\n        let { i, off } = this.childPos(at);\n        if (off) {\n            end.append(this.children[i].slice(off), 0);\n            this.children[i].merge(off, this.children[i].length, null, 0, 0);\n            i++;\n        }\n        for (let j = i; j < this.children.length; j++)\n            end.append(this.children[j], 0);\n        while (i > 0 && this.children[i - 1].length == 0) {\n            this.children[i - 1].parent = null;\n            i--;\n        }\n        this.children.length = i;\n        this.markDirty();\n        this.length = at;\n        return end;\n    }\n    transferDOM(other) {\n        if (!this.dom)\n            return;\n        other.setDOM(this.dom);\n        other.prevAttrs = this.prevAttrs === undefined ? this.attrs : this.prevAttrs;\n        this.prevAttrs = undefined;\n        this.dom = null;\n    }\n    setDeco(attrs) {\n        if (!attrsEq(this.attrs, attrs)) {\n            if (this.dom) {\n                this.prevAttrs = this.attrs;\n                this.markDirty();\n            }\n            this.attrs = attrs;\n        }\n    }\n    // Only called when building a line view in ContentBuilder\n    append(child, openStart) {\n        joinInlineInto(this, child, openStart);\n    }\n    // Only called when building a line view in ContentBuilder\n    addLineDeco(deco) {\n        let attrs = deco.spec.attributes;\n        if (attrs)\n            this.attrs = combineAttrs(attrs, this.attrs || {});\n    }\n    domAtPos(pos) {\n        return inlineDOMAtPos(this.dom, this.children, pos);\n    }\n    // FIXME might need another hack to work around Firefox's behavior\n    // of not actually displaying the cursor even though it's there in\n    // the DOM\n    sync(track) {\n        if (!this.dom) {\n            this.setDOM(document.createElement(\"div\"));\n            this.dom.className = LineClass;\n            this.prevAttrs = this.attrs ? null : undefined;\n        }\n        if (this.prevAttrs !== undefined) {\n            updateAttrs(this.dom, this.prevAttrs, this.attrs);\n            this.dom.classList.add(LineClass);\n            this.prevAttrs = undefined;\n        }\n        super.sync(track);\n        let last = this.dom.lastChild;\n        if (!last || (last.nodeName != \"BR\" && (ContentView.get(last) instanceof WidgetView))) {\n            let hack = document.createElement(\"BR\");\n            hack.cmIgnore = true;\n            this.dom.appendChild(hack);\n        }\n    }\n    measureTextSize() {\n        if (this.children.length == 0 || this.length > 20)\n            return null;\n        let totalWidth = 0;\n        for (let child of this.children) {\n            if (!(child instanceof TextView))\n                return null;\n            let rects = clientRectsFor(child.dom);\n            if (rects.length != 1)\n                return null;\n            totalWidth += rects[0].width;\n        }\n        return { lineHeight: this.dom.getBoundingClientRect().height, charWidth: totalWidth / this.length };\n    }\n    coordsAt(pos, side) {\n        return coordsInChildren(this, pos, side);\n    }\n    match(_other) { return false; }\n    get type() { return BlockType.Text; }\n    static find(docView, pos) {\n        for (let i = 0, off = 0;; i++) {\n            let block = docView.children[i], end = off + block.length;\n            if (end >= pos) {\n                if (block instanceof LineView)\n                    return block;\n                if (block.length)\n                    return null;\n            }\n            off = end + block.breakAfter;\n        }\n    }\n}\nconst none$2 = [];\nclass BlockWidgetView extends ContentView {\n    constructor(widget, length, type) {\n        super();\n        this.widget = widget;\n        this.length = length;\n        this.type = type;\n        this.breakAfter = 0;\n    }\n    merge(from, to, source, _takeDeco, openStart, openEnd) {\n        if (source && (!(source instanceof BlockWidgetView) || !this.widget.compare(source.widget) ||\n            from > 0 && openStart <= 0 || to < this.length && openEnd <= 0))\n            return false;\n        this.length = from + (source ? source.length : 0) + (this.length - to);\n        return true;\n    }\n    domAtPos(pos) {\n        return pos == 0 ? DOMPos.before(this.dom) : DOMPos.after(this.dom, pos == this.length);\n    }\n    split(at) {\n        let len = this.length - at;\n        this.length = at;\n        return new BlockWidgetView(this.widget, len, this.type);\n    }\n    get children() { return none$2; }\n    sync() {\n        if (!this.dom || !this.widget.updateDOM(this.dom)) {\n            this.setDOM(this.widget.toDOM(this.editorView));\n            this.dom.contentEditable = \"false\";\n        }\n    }\n    get overrideDOMText() {\n        return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : Text$1.empty;\n    }\n    domBoundsAround() { return null; }\n    match(other) {\n        if (other instanceof BlockWidgetView && other.type == this.type &&\n            other.widget.constructor == this.widget.constructor) {\n            if (!other.widget.eq(this.widget.value))\n                this.markDirty(true);\n            this.widget = other.widget;\n            this.length = other.length;\n            this.breakAfter = other.breakAfter;\n            return true;\n        }\n        return false;\n    }\n}\n\nclass ContentBuilder {\n    constructor(doc, pos, end) {\n        this.doc = doc;\n        this.pos = pos;\n        this.end = end;\n        this.content = [];\n        this.curLine = null;\n        this.breakAtStart = 0;\n        this.openStart = -1;\n        this.openEnd = -1;\n        this.text = \"\";\n        this.textOff = 0;\n        this.cursor = doc.iter();\n        this.skip = pos;\n    }\n    posCovered() {\n        if (this.content.length == 0)\n            return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;\n        let last = this.content[this.content.length - 1];\n        return !last.breakAfter && !(last instanceof BlockWidgetView && last.type == BlockType.WidgetBefore);\n    }\n    getLine() {\n        if (!this.curLine)\n            this.content.push(this.curLine = new LineView);\n        return this.curLine;\n    }\n    addWidget(view) {\n        this.curLine = null;\n        this.content.push(view);\n    }\n    finish() {\n        if (!this.posCovered())\n            this.getLine();\n    }\n    wrapMarks(view, active) {\n        for (let i = active.length - 1; i >= 0; i--)\n            view = new MarkView(active[i], [view], view.length);\n        return view;\n    }\n    buildText(length, active, openStart) {\n        while (length > 0) {\n            if (this.textOff == this.text.length) {\n                let { value, lineBreak, done } = this.cursor.next(this.skip);\n                this.skip = 0;\n                if (done)\n                    throw new Error(\"Ran out of text content when drawing inline views\");\n                if (lineBreak) {\n                    if (!this.posCovered())\n                        this.getLine();\n                    if (this.content.length)\n                        this.content[this.content.length - 1].breakAfter = 1;\n                    else\n                        this.breakAtStart = 1;\n                    this.curLine = null;\n                    length--;\n                    continue;\n                }\n                else {\n                    this.text = value;\n                    this.textOff = 0;\n                }\n            }\n            let take = Math.min(this.text.length - this.textOff, length);\n            this.getLine().append(this.wrapMarks(new TextView(this.text.slice(this.textOff, this.textOff + take)), active), openStart);\n            length -= take;\n            this.textOff += take;\n        }\n    }\n    span(from, to, active, openStart) {\n        this.buildText(to - from, active, openStart);\n        this.pos = to;\n        if (this.openStart < 0)\n            this.openStart = openStart;\n    }\n    point(from, to, deco, active, openStart) {\n        let len = to - from;\n        if (deco instanceof PointDecoration) {\n            if (deco.block) {\n                let { type } = deco;\n                if (type == BlockType.WidgetAfter && !this.posCovered())\n                    this.getLine();\n                this.addWidget(new BlockWidgetView(deco.widget || new NullWidget(\"div\"), len, type));\n            }\n            else {\n                let widget = this.wrapMarks(WidgetView.create(deco.widget || new NullWidget(\"span\"), len, deco.startSide), active);\n                this.getLine().append(widget, openStart);\n            }\n        }\n        else if (this.doc.lineAt(this.pos).from == this.pos) { // Line decoration\n            this.getLine().addLineDeco(deco);\n        }\n        if (len) {\n            // Advance the iterator past the replaced content\n            if (this.textOff + len <= this.text.length) {\n                this.textOff += len;\n            }\n            else {\n                this.skip += len - (this.text.length - this.textOff);\n                this.text = \"\";\n                this.textOff = 0;\n            }\n            this.pos = to;\n        }\n        if (this.openStart < 0)\n            this.openStart = openStart;\n    }\n    static build(text, from, to, decorations) {\n        let builder = new ContentBuilder(text, from, to);\n        builder.openEnd = RangeSet.spans(decorations, from, to, builder);\n        if (builder.openStart < 0)\n            builder.openStart = builder.openEnd;\n        builder.finish();\n        return builder;\n    }\n}\nclass NullWidget extends WidgetType {\n    toDOM() { return document.createElement(this.value); }\n    updateDOM(elt) { return elt.nodeName.toLowerCase() == this.value; }\n}\n\n/// Used to indicate [text direction](#view.EditorView.textDirection).\nvar Direction;\n(function (Direction) {\n    // (These are chosen to match the base levels, in bidi algorithm\n    // terms, of spans in that direction.)\n    Direction[Direction[\"LTR\"] = 0] = \"LTR\";\n    Direction[Direction[\"RTL\"] = 1] = \"RTL\";\n})(Direction || (Direction = {}));\nconst LTR = Direction.LTR, RTL = Direction.RTL;\n// Decode a string with each type encoded as log2(type)\nfunction dec(str) {\n    let result = [];\n    for (let i = 0; i < str.length; i++)\n        result.push(1 << +str[i]);\n    return result;\n}\n// Character types for codepoints 0 to 0xf8\nconst LowTypes = dec(\"88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008\");\n// Character types for codepoints 0x600 to 0x6f9\nconst ArabicTypes = dec(\"4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333\");\nfunction charType(ch) {\n    return ch <= 0xf7 ? LowTypes[ch] :\n        0x590 <= ch && ch <= 0x5f4 ? 2 /* R */ :\n            0x600 <= ch && ch <= 0x6f9 ? ArabicTypes[ch - 0x600] :\n                0x6ee <= ch && ch <= 0x8ac ? 4 /* AL */ :\n                    0x2000 <= ch && ch <= 0x200b ? 256 /* NI */ :\n                        ch == 0x200c ? 256 /* NI */ : 1 /* L */;\n}\nconst BidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\nclass BidiSpan {\n    constructor(from, to, level) {\n        this.from = from;\n        this.to = to;\n        this.level = level;\n    }\n    get dir() { return this.level % 2 ? RTL : LTR; }\n    side(end, dir) { return (this.dir == dir) == end ? this.to : this.from; }\n    static find(order, index, level, assoc) {\n        let maybe = -1;\n        for (let i = 0; i < order.length; i++) {\n            let span = order[i];\n            if (span.from <= index && span.to >= index) {\n                if (span.level == level)\n                    return i;\n                // When multiple spans match, if assoc != 0, take the one that\n                // covers that side, otherwise take the one with the minimum\n                // level.\n                if (maybe < 0 || (assoc != 0 ? (assoc < 0 ? span.from < index : span.to > index) : order[maybe].level > span.level))\n                    maybe = i;\n            }\n        }\n        if (maybe < 0)\n            throw new RangeError(\"Index out of range\");\n        return maybe;\n    }\n}\n// Reused array of character types\nconst types = [];\nfunction computeOrder(line, direction) {\n    let len = line.length, outerType = direction == LTR ? 1 /* L */ : 2 /* R */;\n    if (!line || outerType == 1 /* L */ && !BidiRE.test(line))\n        return trivialOrder(len);\n    // W1. Examine each non-spacing mark (NSM) in the level run, and\n    // change the type of the NSM to the type of the previous\n    // character. If the NSM is at the start of the level run, it will\n    // get the type of sor.\n    // W2. Search backwards from each instance of a European number\n    // until the first strong type (R, L, AL, or sor) is found. If an\n    // AL is found, change the type of the European number to Arabic\n    // number.\n    // W3. Change all ALs to R.\n    // (Left after this: L, R, EN, AN, ET, CS, NI)\n    for (let i = 0, prev = outerType, prevStrong = outerType; i < len; i++) {\n        let type = charType(line.charCodeAt(i));\n        if (type == 512 /* NSM */)\n            type = prev;\n        else if (type == 8 /* EN */ && prevStrong == 4 /* AL */)\n            type = 16 /* AN */;\n        types[i] = type == 4 /* AL */ ? 2 /* R */ : type;\n        if (type & 7 /* Strong */)\n            prevStrong = type;\n        prev = type;\n    }\n    // W5. A sequence of European terminators adjacent to European\n    // numbers changes to all European numbers.\n    // W6. Otherwise, separators and terminators change to Other\n    // Neutral.\n    // W7. Search backwards from each instance of a European number\n    // until the first strong type (R, L, or sor) is found. If an L is\n    // found, then change the type of the European number to L.\n    // (Left after this: L, R, EN+AN, NI)\n    for (let i = 0, prev = outerType, prevStrong = outerType; i < len; i++) {\n        let type = types[i];\n        if (type == 128 /* CS */) {\n            if (i < len - 1 && prev == types[i + 1] && (prev & 24 /* Num */))\n                type = types[i] = prev;\n            else\n                types[i] = 256 /* NI */;\n        }\n        else if (type == 64 /* ET */) {\n            let end = i + 1;\n            while (end < len && types[end] == 64 /* ET */)\n                end++;\n            let replace = (i && prev == 8 /* EN */) || (end < len && types[end] == 8 /* EN */) ? (prevStrong == 1 /* L */ ? 1 /* L */ : 8 /* EN */) : 256 /* NI */;\n            for (let j = i; j < end; j++)\n                types[j] = replace;\n            i = end - 1;\n        }\n        else if (type == 8 /* EN */ && prevStrong == 1 /* L */) {\n            types[i] = 1 /* L */;\n        }\n        prev = type;\n        if (type & 7 /* Strong */)\n            prevStrong = type;\n    }\n    // N1. A sequence of neutrals takes the direction of the\n    // surrounding strong text if the text on both sides has the same\n    // direction. European and Arabic numbers act as if they were R in\n    // terms of their influence on neutrals. Start-of-level-run (sor)\n    // and end-of-level-run (eor) are used at level run boundaries.\n    // N2. Any remaining neutrals take the embedding direction.\n    // (Left after this: L, R, EN+AN)\n    for (let i = 0; i < len; i++) {\n        if (types[i] == 256 /* NI */) {\n            let end = i + 1;\n            while (end < len && types[end] == 256 /* NI */)\n                end++;\n            let beforeL = (i ? types[i - 1] : outerType) == 1 /* L */;\n            let afterL = (end < len ? types[end] : outerType) == 1 /* L */;\n            let replace = beforeL == afterL ? (beforeL ? 1 /* L */ : 2 /* R */) : outerType;\n            for (let j = i; j < end; j++)\n                types[j] = replace;\n            i = end - 1;\n        }\n    }\n    // Here we depart from the documented algorithm, in order to avoid\n    // building up an actual levels array. Since there are only three\n    // levels (0, 1, 2) in an implementation that doesn't take\n    // explicit embedding into account, we can build up the order on\n    // the fly, without following the level-based algorithm.\n    let order = [];\n    if (outerType == 1 /* L */) {\n        for (let i = 0; i < len;) {\n            let start = i, rtl = types[i++] != 1 /* L */;\n            while (i < len && rtl == (types[i] != 1 /* L */))\n                i++;\n            if (rtl) {\n                for (let j = i; j > start;) {\n                    let end = j, l = types[--j] != 2 /* R */;\n                    while (j > start && l == (types[j - 1] != 2 /* R */))\n                        j--;\n                    order.push(new BidiSpan(j, end, l ? 2 : 1));\n                }\n            }\n            else {\n                order.push(new BidiSpan(start, i, 0));\n            }\n        }\n    }\n    else {\n        for (let i = 0; i < len;) {\n            let start = i, rtl = types[i++] == 2 /* R */;\n            while (i < len && rtl == (types[i] == 2 /* R */))\n                i++;\n            order.push(new BidiSpan(start, i, rtl ? 1 : 2));\n        }\n    }\n    return order;\n}\nfunction trivialOrder(length) {\n    return [new BidiSpan(0, length, 0)];\n}\nlet movedOver = \"\";\nfunction moveVisually(line, order, dir, start, forward) {\n    var _a;\n    let startIndex = start.head - line.from, spanI = -1;\n    if (startIndex == 0) {\n        if (!forward || !line.length)\n            return null;\n        if (order[0].level != dir) {\n            startIndex = order[0].side(false, dir);\n            spanI = 0;\n        }\n    }\n    else if (startIndex == line.length) {\n        if (forward)\n            return null;\n        let last = order[order.length - 1];\n        if (last.level != dir) {\n            startIndex = last.side(true, dir);\n            spanI = order.length - 1;\n        }\n    }\n    if (spanI < 0)\n        spanI = BidiSpan.find(order, startIndex, (_a = start.bidiLevel) !== null && _a !== void 0 ? _a : -1, start.assoc);\n    let span = order[spanI];\n    // End of span. (But not end of line--that was checked for above.)\n    if (startIndex == span.side(forward, dir)) {\n        span = order[spanI += forward ? 1 : -1];\n        startIndex = span.side(!forward, dir);\n    }\n    let indexForward = forward == (span.dir == dir);\n    let nextIndex = line.findClusterBreak(startIndex, indexForward);\n    movedOver = line.slice(Math.min(startIndex, nextIndex), Math.max(startIndex, nextIndex));\n    if (nextIndex != span.side(forward, dir))\n        return EditorSelection.cursor(nextIndex + line.from, indexForward ? -1 : 1, span.level);\n    let nextSpan = spanI == (forward ? order.length - 1 : 0) ? null : order[spanI + (forward ? 1 : -1)];\n    if (!nextSpan && span.level != dir)\n        return EditorSelection.cursor(forward ? line.to : line.from, forward ? -1 : 1, dir);\n    if (nextSpan && nextSpan.level < span.level)\n        return EditorSelection.cursor(nextSpan.side(!forward, dir) + line.from, 0, nextSpan.level);\n    return EditorSelection.cursor(nextIndex + line.from, 0, span.level);\n}\n\nconst wrappingWhiteSpace = [\"pre-wrap\", \"normal\", \"pre-line\"];\nclass HeightOracle {\n    constructor() {\n        this.doc = Text.empty;\n        this.lineWrapping = false;\n        this.direction = Direction.LTR;\n        this.heightSamples = {};\n        this.lineHeight = 14;\n        this.charWidth = 7;\n        this.lineLength = 30;\n        // Used to track, during updateHeight, if any actual heights changed\n        this.heightChanged = false;\n    }\n    heightForGap(from, to) {\n        let lines = this.doc.lineAt(to).number - this.doc.lineAt(from).number + 1;\n        if (this.lineWrapping)\n            lines += Math.ceil(((to - from) - (lines * this.lineLength * 0.5)) / this.lineLength);\n        return this.lineHeight * lines;\n    }\n    heightForLine(length) {\n        if (!this.lineWrapping)\n            return this.lineHeight;\n        let lines = 1 + Math.max(0, Math.ceil((length - this.lineLength) / (this.lineLength - 5)));\n        return lines * this.lineHeight;\n    }\n    setDoc(doc) { this.doc = doc; return this; }\n    mustRefresh(lineHeights, whiteSpace, direction) {\n        let newHeight = false;\n        for (let i = 0; i < lineHeights.length; i++) {\n            let h = lineHeights[i];\n            if (h < 0) {\n                i++;\n            }\n            else if (!this.heightSamples[Math.floor(h * 10)]) { // Round to .1 pixels\n                newHeight = true;\n                this.heightSamples[Math.floor(h * 10)] = true;\n            }\n        }\n        return newHeight || (wrappingWhiteSpace.indexOf(whiteSpace) > -1) != this.lineWrapping || this.direction != direction;\n    }\n    refresh(whiteSpace, direction, lineHeight, charWidth, lineLength, knownHeights) {\n        let lineWrapping = wrappingWhiteSpace.indexOf(whiteSpace) > -1;\n        let changed = Math.round(lineHeight) != Math.round(this.lineHeight) ||\n            this.lineWrapping != lineWrapping ||\n            this.direction != direction;\n        this.lineWrapping = lineWrapping;\n        this.direction = direction;\n        this.lineHeight = lineHeight;\n        this.charWidth = charWidth;\n        this.lineLength = lineLength;\n        if (changed) {\n            this.heightSamples = {};\n            for (let i = 0; i < knownHeights.length; i++) {\n                let h = knownHeights[i];\n                if (h < 0)\n                    i++;\n                else\n                    this.heightSamples[Math.floor(h * 10)] = true;\n            }\n        }\n        return changed;\n    }\n}\n// This object is used by `updateHeight` to make DOM measurements\n// arrive at the right nides. The `heights` array is a sequence of\n// block heights, starting from position `from`.\nclass MeasuredHeights {\n    constructor(from, heights) {\n        this.from = from;\n        this.heights = heights;\n        this.index = 0;\n    }\n    get more() { return this.index < this.heights.length; }\n}\n/// Record used to represent information about a block-level element\n/// in the editor view.\nclass BlockInfo {\n    /// @internal\n    constructor(\n    /// The start of the element in the document.\n    from, \n    /// The length of the element.\n    length, \n    /// The top position of the element.\n    top, \n    /// Its height.\n    height, \n    /// The type of element this is. When querying lines, this may be\n    /// an array of all the blocks that make up the line.\n    type) {\n        this.from = from;\n        this.length = length;\n        this.top = top;\n        this.height = height;\n        this.type = type;\n    }\n    /// The end of the element as a document position.\n    get to() { return this.from + this.length; }\n    /// The bottom position of the element.\n    get bottom() { return this.top + this.height; }\n    /// @internal\n    join(other) {\n        let detail = (Array.isArray(this.type) ? this.type : [this])\n            .concat(Array.isArray(other.type) ? other.type : [other]);\n        return new BlockInfo(this.from, this.length + other.length, this.top, this.height + other.height, detail);\n    }\n}\nvar QueryType;\n(function (QueryType) {\n    QueryType[QueryType[\"ByPos\"] = 0] = \"ByPos\";\n    QueryType[QueryType[\"ByHeight\"] = 1] = \"ByHeight\";\n    QueryType[QueryType[\"ByPosNoHeight\"] = 2] = \"ByPosNoHeight\";\n})(QueryType || (QueryType = {}));\nconst Epsilon = 1e-4;\nclass HeightMap {\n    constructor(length, // The number of characters covered\n    height, // Height of this part of the document\n    flags = 2 /* Outdated */) {\n        this.length = length;\n        this.height = height;\n        this.flags = flags;\n    }\n    get outdated() { return (this.flags & 2 /* Outdated */) > 0; }\n    set outdated(value) { this.flags = (value ? 2 /* Outdated */ : 0) | (this.flags & ~2 /* Outdated */); }\n    setHeight(oracle, height) {\n        if (this.height != height) {\n            if (Math.abs(this.height - height) > Epsilon)\n                oracle.heightChanged = true;\n            this.height = height;\n        }\n    }\n    // Base case is to replace a leaf node, which simply builds a tree\n    // from the new nodes and returns that (HeightMapBranch and\n    // HeightMapGap override this to actually use from/to)\n    replace(_from, _to, nodes) {\n        return HeightMap.of(nodes);\n    }\n    // Again, these are base cases, and are overridden for branch and gap nodes.\n    decomposeLeft(_to, result) { result.push(this); }\n    decomposeRight(_from, result) { result.push(this); }\n    applyChanges(decorations, oldDoc, oracle, changes) {\n        let me = this;\n        for (let i = changes.length - 1; i >= 0; i--) {\n            let { fromA, toA, fromB, toB } = changes[i];\n            let start = me.lineAt(fromA, QueryType.ByPosNoHeight, oldDoc, 0, 0);\n            let end = start.to >= toA ? start : me.lineAt(toA, QueryType.ByPosNoHeight, oldDoc, 0, 0);\n            toB += end.to - toA;\n            toA = end.to;\n            while (i > 0 && start.from <= changes[i - 1].toA) {\n                fromA = changes[i - 1].fromA;\n                fromB = changes[i - 1].fromB;\n                i--;\n                if (fromA < start.from)\n                    start = me.lineAt(fromA, QueryType.ByPosNoHeight, oldDoc, 0, 0);\n            }\n            fromB += start.from - fromA;\n            fromA = start.from;\n            let nodes = NodeBuilder.build(oracle, decorations, fromB, toB);\n            me = me.replace(fromA, toA, nodes);\n        }\n        return me.updateHeight(oracle, 0);\n    }\n    static empty() { return new HeightMapText(0, 0); }\n    // nodes uses null values to indicate the position of line breaks.\n    // There are never line breaks at the start or end of the array, or\n    // two line breaks next to each other, and the array isn't allowed\n    // to be empty (same restrictions as return value from the builder).\n    static of(nodes) {\n        if (nodes.length == 1)\n            return nodes[0];\n        let i = 0, j = nodes.length, before = 0, after = 0;\n        for (;;) {\n            if (i == j) {\n                if (before > after * 2) {\n                    let split = nodes[i - 1];\n                    if (split.break)\n                        nodes.splice(--i, 1, split.left, null, split.right);\n                    else\n                        nodes.splice(--i, 1, split.left, split.right);\n                    j += 1 + split.break;\n                    before -= split.size;\n                }\n                else if (after > before * 2) {\n                    let split = nodes[j];\n                    if (split.break)\n                        nodes.splice(j, 1, split.left, null, split.right);\n                    else\n                        nodes.splice(j, 1, split.left, split.right);\n                    j += 2 + split.break;\n                    after -= split.size;\n                }\n                else {\n                    break;\n                }\n            }\n            else if (before < after) {\n                let next = nodes[i++];\n                if (next)\n                    before += next.size;\n            }\n            else {\n                let next = nodes[--j];\n                if (next)\n                    after += next.size;\n            }\n        }\n        let brk = 0;\n        if (nodes[i - 1] == null) {\n            brk = 1;\n            i--;\n        }\n        else if (nodes[i] == null) {\n            brk = 1;\n            j++;\n        }\n        return new HeightMapBranch(HeightMap.of(nodes.slice(0, i)), brk, HeightMap.of(nodes.slice(j)));\n    }\n}\nHeightMap.prototype.size = 1;\nclass HeightMapBlock extends HeightMap {\n    constructor(length, height, type) {\n        super(length, height);\n        this.type = type;\n    }\n    blockAt(_height, _doc, top, offset) {\n        return new BlockInfo(offset, this.length, top, this.height, this.type);\n    }\n    lineAt(_value, _type, doc, top, offset) {\n        return this.blockAt(0, doc, top, offset);\n    }\n    forEachLine(_from, _to, doc, top, offset, f) {\n        f(this.blockAt(0, doc, top, offset));\n    }\n    updateHeight(oracle, offset = 0, _force = false, measured) {\n        if (measured && measured.from <= offset && measured.more)\n            this.setHeight(oracle, measured.heights[measured.index++]);\n        this.outdated = false;\n        return this;\n    }\n    toString() { return `block(${this.length})`; }\n}\nclass HeightMapText extends HeightMapBlock {\n    constructor(length, height) {\n        super(length, height, BlockType.Text);\n        this.collapsed = 0; // Amount of collapsed content in the line\n        this.widgetHeight = 0; // Maximum inline widget height\n    }\n    replace(_from, _to, nodes) {\n        let node = nodes[0];\n        if (nodes.length == 1 && (node instanceof HeightMapText || node instanceof HeightMapGap && (node.flags & 4 /* SingleLine */)) &&\n            Math.abs(this.length - node.length) < 10) {\n            if (node instanceof HeightMapGap)\n                node = new HeightMapText(node.length, this.height);\n            else\n                node.height = this.height;\n            if (!this.outdated)\n                node.outdated = false;\n            return node;\n        }\n        else {\n            return HeightMap.of(nodes);\n        }\n    }\n    updateHeight(oracle, offset = 0, force = false, measured) {\n        if (measured && measured.from <= offset && measured.more)\n            this.setHeight(oracle, measured.heights[measured.index++]);\n        else if (force || this.outdated)\n            this.setHeight(oracle, Math.max(this.widgetHeight, oracle.heightForLine(this.length - this.collapsed)));\n        this.outdated = false;\n        return this;\n    }\n    toString() {\n        return `line(${this.length}${this.collapsed ? -this.collapsed : \"\"}${this.widgetHeight ? \":\" + this.widgetHeight : \"\"})`;\n    }\n}\nclass HeightMapGap extends HeightMap {\n    constructor(length) { super(length, 0); }\n    lines(doc, offset) {\n        let firstLine = doc.lineAt(offset).number, lastLine = doc.lineAt(offset + this.length).number;\n        return { firstLine, lastLine, lineHeight: this.height / (lastLine - firstLine + 1) };\n    }\n    blockAt(height, doc, top, offset) {\n        let { firstLine, lastLine, lineHeight } = this.lines(doc, offset);\n        let line = Math.max(0, Math.min(lastLine - firstLine, Math.floor((height - top) / lineHeight)));\n        let { from, length } = doc.line(firstLine + line);\n        return new BlockInfo(from, length, top + lineHeight * line, lineHeight, BlockType.Text);\n    }\n    lineAt(value, type, doc, top, offset) {\n        if (type == QueryType.ByHeight)\n            return this.blockAt(value, doc, top, offset);\n        if (type == QueryType.ByPosNoHeight) {\n            let { from, to } = doc.lineAt(value);\n            return new BlockInfo(from, to - from, 0, 0, BlockType.Text);\n        }\n        let { firstLine, lineHeight } = this.lines(doc, offset);\n        let { from, length, number } = doc.lineAt(value);\n        return new BlockInfo(from, length, top + lineHeight * (number - firstLine), lineHeight, BlockType.Text);\n    }\n    forEachLine(from, to, doc, top, offset, f) {\n        let { firstLine, lineHeight } = this.lines(doc, offset);\n        for (let pos = from; pos < to;) {\n            let line = doc.lineAt(pos);\n            if (pos == from)\n                top += lineHeight * (line.number - firstLine);\n            f(new BlockInfo(line.from, line.length, top, top += lineHeight, BlockType.Text));\n            pos = line.to + 1;\n        }\n    }\n    replace(from, to, nodes) {\n        let after = this.length - to;\n        if (after > 0) {\n            let last = nodes[nodes.length - 1];\n            if (last instanceof HeightMapGap)\n                nodes[nodes.length - 1] = new HeightMapGap(last.length + after);\n            else\n                nodes.push(null, new HeightMapGap(after - 1));\n        }\n        if (from > 0) {\n            let first = nodes[0];\n            if (first instanceof HeightMapGap)\n                nodes[0] = new HeightMapGap(from + first.length);\n            else\n                nodes.unshift(new HeightMapGap(from - 1), null);\n        }\n        return HeightMap.of(nodes);\n    }\n    decomposeLeft(to, result) {\n        result.push(new HeightMapGap(to - 1), null);\n    }\n    decomposeRight(from, result) {\n        result.push(null, new HeightMapGap(this.length - from - 1));\n    }\n    updateHeight(oracle, offset = 0, force = false, measured) {\n        let end = offset + this.length;\n        if (measured && measured.from <= offset + this.length && measured.more) {\n            // Fill in part of this gap with measured lines. We know there\n            // can't be widgets or collapsed ranges in those lines, because\n            // they would already have been added to the heightmap (gaps\n            // only contain plain text).\n            let nodes = [], pos = Math.max(offset, measured.from);\n            if (measured.from > offset)\n                nodes.push(new HeightMapGap(measured.from - offset - 1).updateHeight(oracle, offset));\n            while (pos <= end && measured.more) {\n                let len = oracle.doc.lineAt(pos).length;\n                if (nodes.length)\n                    nodes.push(null);\n                let line = new HeightMapText(len, measured.heights[measured.index++]);\n                line.outdated = false;\n                nodes.push(line);\n                pos += len + 1;\n            }\n            if (pos <= end)\n                nodes.push(null, new HeightMapGap(end - pos).updateHeight(oracle, pos));\n            oracle.heightChanged = true;\n            return HeightMap.of(nodes);\n        }\n        else if (force || this.outdated) {\n            this.setHeight(oracle, oracle.heightForGap(offset, offset + this.length));\n            this.outdated = false;\n        }\n        return this;\n    }\n    toString() { return `gap(${this.length})`; }\n}\nclass HeightMapBranch extends HeightMap {\n    constructor(left, brk, right) {\n        super(left.length + brk + right.length, left.height + right.height, brk | (left.outdated || right.outdated ? 2 /* Outdated */ : 0));\n        this.left = left;\n        this.right = right;\n        this.size = left.size + right.size;\n    }\n    get break() { return this.flags & 1 /* Break */; }\n    blockAt(height, doc, top, offset) {\n        let mid = top + this.left.height;\n        return height < mid || this.right.height == 0 ? this.left.blockAt(height, doc, top, offset)\n            : this.right.blockAt(height, doc, mid, offset + this.left.length + this.break);\n    }\n    lineAt(value, type, doc, top, offset) {\n        let rightTop = top + this.left.height, rightOffset = offset + this.left.length + this.break;\n        let left = type == QueryType.ByHeight ? value < rightTop || this.right.height == 0 : value < rightOffset;\n        let base = left ? this.left.lineAt(value, type, doc, top, offset)\n            : this.right.lineAt(value, type, doc, rightTop, rightOffset);\n        if (this.break || (left ? base.to < rightOffset : base.from > rightOffset))\n            return base;\n        let subQuery = type == QueryType.ByPosNoHeight ? QueryType.ByPosNoHeight : QueryType.ByPos;\n        if (left)\n            return base.join(this.right.lineAt(rightOffset, subQuery, doc, rightTop, rightOffset));\n        else\n            return this.left.lineAt(rightOffset, subQuery, doc, top, offset).join(base);\n    }\n    forEachLine(from, to, doc, top, offset, f) {\n        let rightTop = top + this.left.height, rightOffset = offset + this.left.length + this.break;\n        if (this.break) {\n            if (from < rightOffset)\n                this.left.forEachLine(from, to, doc, top, offset, f);\n            if (to >= rightOffset)\n                this.right.forEachLine(from, to, doc, rightTop, rightOffset, f);\n        }\n        else {\n            let mid = this.lineAt(rightOffset, QueryType.ByPos, doc, top, offset);\n            if (from < mid.from)\n                this.left.forEachLine(from, mid.from - 1, doc, top, offset, f);\n            if (mid.to >= from && mid.from <= to)\n                f(mid);\n            if (to > mid.to)\n                this.right.forEachLine(mid.to + 1, to, doc, rightTop, rightOffset, f);\n        }\n    }\n    replace(from, to, nodes) {\n        let rightStart = this.left.length + this.break;\n        if (to < rightStart)\n            return this.balanced(this.left.replace(from, to, nodes), this.right);\n        if (from > this.left.length)\n            return this.balanced(this.left, this.right.replace(from - rightStart, to - rightStart, nodes));\n        let result = [];\n        if (from > 0)\n            this.decomposeLeft(from, result);\n        let left = result.length;\n        for (let node of nodes)\n            result.push(node);\n        if (from > 0)\n            mergeGaps(result, left - 1);\n        if (to < this.length) {\n            let right = result.length;\n            this.decomposeRight(to, result);\n            mergeGaps(result, right);\n        }\n        return HeightMap.of(result);\n    }\n    decomposeLeft(to, result) {\n        let left = this.left.length;\n        if (to <= left)\n            return this.left.decomposeLeft(to, result);\n        result.push(this.left);\n        if (this.break) {\n            left++;\n            if (to >= left)\n                result.push(null);\n        }\n        if (to > left)\n            this.right.decomposeLeft(to - left, result);\n    }\n    decomposeRight(from, result) {\n        let left = this.left.length, right = left + this.break;\n        if (from >= right)\n            return this.right.decomposeRight(from - right, result);\n        if (from < left)\n            this.left.decomposeRight(from, result);\n        if (this.break && from < right)\n            result.push(null);\n        result.push(this.right);\n    }\n    balanced(left, right) {\n        if (left.size > 2 * right.size || right.size > 2 * left.size)\n            return HeightMap.of(this.break ? [left, null, right] : [left, right]);\n        this.left = left;\n        this.right = right;\n        this.height = left.height + right.height;\n        this.outdated = left.outdated || right.outdated;\n        this.size = left.size + right.size;\n        this.length = left.length + this.break + right.length;\n        return this;\n    }\n    updateHeight(oracle, offset = 0, force = false, measured) {\n        let { left, right } = this, rightStart = offset + left.length + this.break, rebalance = null;\n        if (measured && measured.from <= offset + left.length && measured.more)\n            rebalance = left = left.updateHeight(oracle, offset, force, measured);\n        else\n            left.updateHeight(oracle, offset, force);\n        if (measured && measured.from <= rightStart + right.length && measured.more)\n            rebalance = right = right.updateHeight(oracle, rightStart, force, measured);\n        else\n            right.updateHeight(oracle, rightStart, force);\n        if (rebalance)\n            return this.balanced(left, right);\n        this.height = this.left.height + this.right.height;\n        this.outdated = false;\n        return this;\n    }\n    toString() { return this.left + (this.break ? \" \" : \"-\") + this.right; }\n}\nfunction mergeGaps(nodes, around) {\n    let before, after;\n    if (nodes[around] == null &&\n        (before = nodes[around - 1]) instanceof HeightMapGap &&\n        (after = nodes[around + 1]) instanceof HeightMapGap)\n        nodes.splice(around - 1, 3, new HeightMapGap(before.length + 1 + after.length));\n}\nconst relevantWidgetHeight = 5;\nclass NodeBuilder {\n    constructor(pos, oracle) {\n        this.pos = pos;\n        this.oracle = oracle;\n        this.nodes = [];\n        this.lineStart = -1;\n        this.lineEnd = -1;\n        this.covering = null;\n        this.writtenTo = pos;\n    }\n    get isCovered() {\n        return this.covering && this.nodes[this.nodes.length - 1] == this.covering;\n    }\n    span(_from, to) {\n        if (this.lineStart > -1) {\n            let end = Math.min(to, this.lineEnd), last = this.nodes[this.nodes.length - 1];\n            if (last instanceof HeightMapText)\n                last.length += end - this.pos;\n            else if (end > this.pos || !this.isCovered)\n                this.nodes.push(new HeightMapText(end - this.pos, -1));\n            this.writtenTo = end;\n            if (to > end) {\n                this.nodes.push(null);\n                this.writtenTo++;\n                this.lineStart = -1;\n            }\n        }\n        this.pos = to;\n    }\n    point(from, to, deco) {\n        if (from < to || deco.heightRelevant) {\n            let height = deco.widget ? Math.max(0, deco.widget.estimatedHeight) : 0;\n            let len = to - from;\n            if (deco.block) {\n                this.addBlock(new HeightMapBlock(len, height, deco.type));\n            }\n            else if (len || height >= relevantWidgetHeight) {\n                this.addLineDeco(height, len);\n            }\n        }\n        else if (to > from) {\n            this.span(from, to);\n        }\n        if (this.lineEnd > -1 && this.lineEnd < this.pos)\n            this.lineEnd = this.oracle.doc.lineAt(this.pos).to;\n    }\n    enterLine() {\n        if (this.lineStart > -1)\n            return;\n        let { from, to } = this.oracle.doc.lineAt(this.pos);\n        this.lineStart = from;\n        this.lineEnd = to;\n        if (this.writtenTo < from) {\n            if (this.writtenTo < from - 1 || this.nodes[this.nodes.length - 1] == null)\n                this.nodes.push(this.blankContent(this.writtenTo, from - 1));\n            this.nodes.push(null);\n        }\n        if (this.pos > from)\n            this.nodes.push(new HeightMapText(this.pos - from, -1));\n        this.writtenTo = this.pos;\n    }\n    blankContent(from, to) {\n        let gap = new HeightMapGap(to - from);\n        if (this.oracle.doc.lineAt(from).to == to)\n            gap.flags |= 4 /* SingleLine */;\n        return gap;\n    }\n    ensureLine() {\n        this.enterLine();\n        let last = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;\n        if (last instanceof HeightMapText)\n            return last;\n        let line = new HeightMapText(0, -1);\n        this.nodes.push(line);\n        return line;\n    }\n    addBlock(block) {\n        this.enterLine();\n        if (block.type == BlockType.WidgetAfter && !this.isCovered)\n            this.ensureLine();\n        this.nodes.push(block);\n        this.writtenTo = this.pos = this.pos + block.length;\n        if (block.type != BlockType.WidgetBefore)\n            this.covering = block;\n    }\n    addLineDeco(height, length) {\n        let line = this.ensureLine();\n        line.length += length;\n        line.collapsed += length;\n        line.widgetHeight = Math.max(line.widgetHeight, height);\n        this.writtenTo = this.pos = this.pos + length;\n    }\n    finish(from) {\n        let last = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];\n        if (this.lineStart > -1 && !(last instanceof HeightMapText) && !this.isCovered)\n            this.nodes.push(new HeightMapText(0, -1));\n        else if (this.writtenTo < this.pos || last == null)\n            this.nodes.push(this.blankContent(this.writtenTo, this.pos));\n        let pos = from;\n        for (let node of this.nodes) {\n            if (node instanceof HeightMapText)\n                node.updateHeight(this.oracle, pos);\n            pos += node ? node.length : 1;\n        }\n        return this.nodes;\n    }\n    // Always called with a region that on both sides either stretches\n    // to a line break or the end of the document.\n    // The returned array uses null to indicate line breaks, but never\n    // starts or ends in a line break, or has multiple line breaks next\n    // to each other.\n    static build(oracle, decorations, from, to) {\n        let builder = new NodeBuilder(from, oracle);\n        RangeSet.spans(decorations, from, to, builder);\n        return builder.finish(from);\n    }\n    get minPointSize() { return 0; }\n}\nfunction heightRelevantDecoChanges(a, b, diff) {\n    let comp = new DecorationComparator();\n    RangeSet.compare(a, b, diff, comp);\n    return comp.changes;\n}\nclass DecorationComparator {\n    constructor() {\n        this.changes = [];\n    }\n    compareRange() { }\n    comparePoint(from, to, a, b) {\n        if (from < to || a && a.heightRelevant || b && b.heightRelevant)\n            addRange(from, to, this.changes);\n    }\n    get minPointSize() { return 0; }\n}\n\nconst none$3 = [];\nconst clickAddsSelectionRange = Facet.define();\nconst dragMovesSelection = Facet.define();\nconst mouseSelectionStyle = Facet.define();\nconst exceptionSink = Facet.define();\nconst updateListener = Facet.define();\nconst inputHandler = Facet.define();\n/// Log or report an unhandled exception in client code. Should\n/// probably only be used by extension code that allows client code to\n/// provide functions, and calls those functions in a context where an\n/// exception can't be propagated to calling code in a reasonable way\n/// (for example when in an event handler).\n///\n/// Either calls a handler registered with\n/// [`EditorView.exceptionSink`](#view.EditorView^exceptionSink),\n/// `window.onerror`, if defined, or `console.error` (in which case\n/// it'll pass `context`, when given, as first argument).\nfunction logException(state, exception, context) {\n    let handler = state.facet(exceptionSink);\n    if (handler.length)\n        handler[0](exception);\n    else if (window.onerror)\n        window.onerror(String(exception), context, undefined, undefined, exception);\n    else if (context)\n        console.error(context + \":\", exception);\n    else\n        console.error(exception);\n}\nconst editable = Facet.define({ combine: values => values.length ? values[0] : true });\n/// Used to [declare](#view.PluginSpec.provide) which\n/// [fields](#view.PluginValue) a [view plugin](#view.ViewPlugin)\n/// provides.\nclass PluginFieldProvider {\n    /// @internal\n    constructor(\n    /// @internal\n    field, \n    /// @internal\n    get) {\n        this.field = field;\n        this.get = get;\n    }\n}\n/// Plugin fields are a mechanism for allowing plugins to provide\n/// values that can be retrieved through the\n/// [`pluginField`](#view.EditorView.pluginField) view method.\nclass PluginField {\n    from(get) {\n        return new PluginFieldProvider(this, get);\n    }\n    /// Define a new plugin field.\n    static define() { return new PluginField(); }\n}\n/// Plugins can provide additional scroll margins (space around the\n/// sides of the scrolling element that should be considered\n/// invisible) through this field. This can be useful when the\n/// plugin introduces elements that cover part of that element (for\n/// example a horizontally fixed gutter).\nPluginField.scrollMargins = PluginField.define();\nlet nextPluginID = 0;\nconst viewPlugin = Facet.define();\n/// View plugins associate stateful values with a view. They can\n/// influence the way the content is drawn, and are notified of things\n/// that happen in the view.\nclass ViewPlugin {\n    constructor(\n    /// @internal\n    id, \n    /// @internal\n    create, \n    /// @internal\n    fields) {\n        this.id = id;\n        this.create = create;\n        this.fields = fields;\n        this.extension = viewPlugin.of(this);\n    }\n    /// Define a plugin from a constructor function that creates the\n    /// plugin's value, given an editor view.\n    static define(create, spec) {\n        let { eventHandlers, provide, decorations } = spec || {};\n        let fields = [];\n        if (provide)\n            for (let provider of Array.isArray(provide) ? provide : [provide])\n                fields.push(provider);\n        if (eventHandlers)\n            fields.push(domEventHandlers.from((value) => ({ plugin: value, handlers: eventHandlers })));\n        if (decorations)\n            for (let get of Array.isArray(decorations) ? decorations : [decorations])\n                fields.push(pluginDecorations.from(get));\n        return new ViewPlugin(nextPluginID++, create, fields);\n    }\n    /// Create a plugin for a class whose constructor takes a single\n    /// editor view as argument.\n    static fromClass(cls, spec) {\n        return ViewPlugin.define(view => new cls(view), spec);\n    }\n}\n// FIXME somehow ensure that no replacing decorations end up in here\nconst pluginDecorations = PluginField.define();\nconst domEventHandlers = PluginField.define();\nclass PluginInstance {\n    constructor(value, spec) {\n        this.value = value;\n        this.spec = spec;\n    }\n    static create(spec, view) {\n        let value;\n        try {\n            value = spec.create(view);\n        }\n        catch (e) {\n            logException(view.state, e, \"CodeMirror plugin crashed\");\n            return PluginInstance.dummy;\n        }\n        return new PluginInstance(value, spec);\n    }\n    takeField(type, target) {\n        for (let { field, get } of this.spec.fields)\n            if (field == type)\n                target.push(get(this.value));\n    }\n    update(update) {\n        if (!this.value.update)\n            return this;\n        try {\n            this.value.update(update);\n            return this;\n        }\n        catch (e) {\n            logException(update.state, e, \"CodeMirror plugin crashed\");\n            if (this.value.destroy)\n                try {\n                    this.value.destroy();\n                }\n                catch (_) { }\n            return PluginInstance.dummy;\n        }\n    }\n    destroy(view) {\n        if (this.value.destroy) {\n            try {\n                this.value.destroy();\n            }\n            catch (e) {\n                logException(view.state, e, \"CodeMirror plugin crashed\");\n            }\n        }\n    }\n    measure(view) {\n        if (this.value.measure) {\n            try {\n                this.value.measure();\n            }\n            catch (e) {\n                logException(view.state, e, \"CodeMirror plugin crashed\");\n            }\n        }\n    }\n}\nPluginInstance.dummy = new PluginInstance({}, ViewPlugin.define(() => ({})));\nconst editorAttributes = Facet.define({\n    combine: values => values.reduce((a, b) => combineAttrs(b, a), {})\n});\nconst contentAttributes = Facet.define({\n    combine: values => values.reduce((a, b) => combineAttrs(b, a), {})\n});\n// Provide decorations\nconst decorations = Facet.define();\nconst styleModule = Facet.define();\nclass ChangedRange {\n    constructor(fromA, toA, fromB, toB) {\n        this.fromA = fromA;\n        this.toA = toA;\n        this.fromB = fromB;\n        this.toB = toB;\n    }\n    join(other) {\n        return new ChangedRange(Math.min(this.fromA, other.fromA), Math.max(this.toA, other.toA), Math.min(this.fromB, other.fromB), Math.max(this.toB, other.toB));\n    }\n    addToSet(set) {\n        let i = set.length, me = this;\n        for (; i > 0; i--) {\n            let range = set[i - 1];\n            if (range.fromA > me.toA)\n                continue;\n            if (range.toA < me.fromA)\n                break;\n            me = me.join(range);\n            set.splice(i - 1, 1);\n        }\n        set.splice(i, 0, me);\n        return set;\n    }\n    static extendWithRanges(diff, ranges) {\n        if (ranges.length == 0)\n            return diff;\n        let result = [];\n        for (let dI = 0, rI = 0, posA = 0, posB = 0;; dI++) {\n            let next = dI == diff.length ? null : diff[dI], off = posA - posB;\n            let end = next ? next.fromB : 1e9;\n            while (rI < ranges.length && ranges[rI] < end) {\n                let from = ranges[rI], to = ranges[rI + 1];\n                let fromB = Math.max(posB, from), toB = Math.min(end, to);\n                if (fromB <= toB)\n                    new ChangedRange(fromB + off, toB + off, fromB, toB).addToSet(result);\n                if (to > end)\n                    break;\n                else\n                    rI += 2;\n            }\n            if (!next)\n                return result;\n            new ChangedRange(next.fromA, next.toA, next.fromB, next.toB).addToSet(result);\n            posA = next.toA;\n            posB = next.toB;\n        }\n    }\n}\n/// View [plugins](#view.ViewPlugin) are given instances of this\n/// class, which describe what happened, whenever the view is updated.\nclass ViewUpdate {\n    /// @internal\n    constructor(\n    /// The editor view that the update is associated with.\n    view, \n    /// The new editor state.\n    state, \n    /// The transactions involved in the update. May be empty.\n    transactions = none$3) {\n        this.view = view;\n        this.state = state;\n        this.transactions = transactions;\n        /// @internal\n        this.flags = 0;\n        this.prevState = view.state;\n        this.changes = ChangeSet.empty(this.prevState.doc.length);\n        for (let tr of transactions)\n            this.changes = this.changes.compose(tr.changes);\n        let changedRanges = [];\n        this.changes.iterChangedRanges((fromA, toA, fromB, toB) => changedRanges.push(new ChangedRange(fromA, toA, fromB, toB)));\n        this.changedRanges = changedRanges;\n        let focus = view.hasFocus;\n        if (focus != view.inputState.notifiedFocused) {\n            view.inputState.notifiedFocused = focus;\n            this.flags != 1 /* Focus */;\n        }\n        if (this.docChanged)\n            this.flags |= 2 /* Height */;\n    }\n    /// Tells you whether the viewport changed in this update.\n    get viewportChanged() {\n        return (this.flags & 4 /* Viewport */) > 0;\n    }\n    /// Indicates whether the line height in the editor changed in this update.\n    get heightChanged() {\n        return (this.flags & 2 /* Height */) > 0;\n    }\n    /// True when this update indicates a focus change.\n    get focusChanged() {\n        return (this.flags & 1 /* Focus */) > 0;\n    }\n    /// Whether the document changed in this update.\n    get docChanged() {\n        return this.transactions.some(tr => tr.docChanged);\n    }\n    /// Whether the selection was explicitly set in this update.\n    get selectionSet() {\n        return this.transactions.some(tr => tr.selection);\n    }\n    /// @internal\n    get empty() { return this.flags == 0 && this.transactions.length == 0; }\n}\n\nfunction visiblePixelRange(dom, paddingTop) {\n    let rect = dom.getBoundingClientRect();\n    let left = Math.max(0, rect.left), right = Math.min(innerWidth, rect.right);\n    let top = Math.max(0, rect.top), bottom = Math.min(innerHeight, rect.bottom);\n    for (let parent = dom.parentNode; parent;) { // (Cast to any because TypeScript is useless with Node types)\n        if (parent.nodeType == 1) {\n            if ((parent.scrollHeight > parent.clientHeight || parent.scrollWidth > parent.clientWidth) &&\n                window.getComputedStyle(parent).overflow != \"visible\") {\n                let parentRect = parent.getBoundingClientRect();\n                left = Math.max(left, parentRect.left);\n                right = Math.min(right, parentRect.right);\n                top = Math.max(top, parentRect.top);\n                bottom = Math.min(bottom, parentRect.bottom);\n            }\n            parent = parent.parentNode;\n        }\n        else if (parent.nodeType == 11) { // Shadow root\n            parent = parent.host;\n        }\n        else {\n            break;\n        }\n    }\n    return { left: left - rect.left, right: right - rect.left,\n        top: top - (rect.top + paddingTop), bottom: bottom - (rect.top + paddingTop) };\n}\n// Line gaps are placeholder widgets used to hide pieces of overlong\n// lines within the viewport, as a kludge to keep the editor\n// responsive when a ridiculously long line is loaded into it.\nclass LineGap {\n    constructor(from, to, size) {\n        this.from = from;\n        this.to = to;\n        this.size = size;\n    }\n    static same(a, b) {\n        if (a.length != b.length)\n            return false;\n        for (let i = 0; i < a.length; i++) {\n            let gA = a[i], gB = b[i];\n            if (gA.from != gB.from || gA.to != gB.to || gA.size != gB.size)\n                return false;\n        }\n        return true;\n    }\n    draw(wrapping) {\n        return Decoration.replace({ widget: new LineGapWidget({ size: this.size, vertical: wrapping }) }).range(this.from, this.to);\n    }\n}\nclass LineGapWidget extends WidgetType {\n    toDOM() {\n        let elt = document.createElement(\"div\");\n        if (this.value.vertical) {\n            elt.style.height = this.value.size + \"px\";\n        }\n        else {\n            elt.style.width = this.value.size + \"px\";\n            elt.style.height = \"2px\";\n            elt.style.display = \"inline-block\";\n        }\n        return elt;\n    }\n    eq(other) { return this.value.size == other.size && this.value.vertical == other.vertical; }\n    get estimatedHeight() { return this.value.vertical ? this.value.size : -1; }\n}\nclass ViewState {\n    constructor(state) {\n        this.state = state;\n        // These are contentDOM-local coordinates\n        this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 };\n        this.inView = true;\n        this.paddingTop = 0;\n        this.paddingBottom = 0;\n        this.heightOracle = new HeightOracle;\n        this.heightMap = HeightMap.empty();\n        this.scrollTo = null;\n        // Briefly set to true when printing, to disable viewport limiting\n        this.printing = false;\n        this.visibleRanges = [];\n        // Cursor 'assoc' is only significant when the cursor is on a line\n        // wrap point, where it must stick to the character that it is\n        // associated with. Since browsers don't provide a reasonable\n        // interface to set or query this, when a selection is set that\n        // might cause this to be signficant, this flag is set. The next\n        // measure phase will check whether the cursor is on a line-wrapping\n        // boundary and, if so, reset it to make sure it is positioned in\n        // the right place.\n        this.mustEnforceCursorAssoc = false;\n        this.heightMap = this.heightMap.applyChanges(state.facet(decorations), Text.empty, this.heightOracle.setDoc(state.doc), [new ChangedRange(0, 0, 0, state.doc.length)]);\n        this.viewport = this.getViewport(0, null);\n        this.lineGaps = this.ensureLineGaps([]);\n        this.lineGapDeco = Decoration.set(this.lineGaps.map(gap => gap.draw(false)));\n        this.computeVisibleRanges();\n    }\n    update(update, scrollTo = null) {\n        let prev = this.state;\n        this.state = update.state;\n        let newDeco = this.state.facet(decorations);\n        let contentChanges = update.changedRanges;\n        let heightChanges = ChangedRange.extendWithRanges(contentChanges, heightRelevantDecoChanges(update.prevState.facet(decorations), newDeco, update ? update.changes : ChangeSet.empty(this.state.doc.length)));\n        let prevHeight = this.heightMap.height;\n        this.heightMap = this.heightMap.applyChanges(newDeco, prev.doc, this.heightOracle.setDoc(this.state.doc), heightChanges);\n        if (this.heightMap.height != prevHeight)\n            update.flags |= 2 /* Height */;\n        let viewport = heightChanges.length ? this.mapViewport(this.viewport, update.changes) : this.viewport;\n        if (scrollTo && (scrollTo.head < viewport.from || scrollTo.head > viewport.to) || !this.viewportIsAppropriate(viewport))\n            viewport = this.getViewport(0, scrollTo);\n        if (!viewport.eq(this.viewport)) {\n            this.viewport = viewport;\n            update.flags |= 4 /* Viewport */;\n        }\n        if (this.lineGaps.length || this.viewport.to - this.viewport.from > 15000 /* MinViewPort */)\n            update.flags |= this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, update.changes)));\n        this.computeVisibleRanges();\n        if (scrollTo)\n            this.scrollTo = scrollTo;\n        if (!this.mustEnforceCursorAssoc && update.selectionSet && update.view.lineWrapping &&\n            update.state.selection.primary.empty && update.state.selection.primary.assoc)\n            this.mustEnforceCursorAssoc = true;\n    }\n    measure(docView, repeated) {\n        let dom = docView.dom, whiteSpace = \"\", direction = Direction.LTR;\n        if (!repeated) {\n            // Vertical padding\n            let style = window.getComputedStyle(dom);\n            whiteSpace = style.whiteSpace, direction = (style.direction == \"rtl\" ? Direction.RTL : Direction.LTR);\n            this.paddingTop = parseInt(style.paddingTop) || 0;\n            this.paddingBottom = parseInt(style.paddingBottom) || 0;\n        }\n        // Pixel viewport\n        let pixelViewport = this.printing ? { top: -1e8, bottom: 1e8, left: -1e8, right: 1e8 } : visiblePixelRange(dom, this.paddingTop);\n        let dTop = pixelViewport.top - this.pixelViewport.top, dBottom = pixelViewport.bottom - this.pixelViewport.bottom;\n        this.pixelViewport = pixelViewport;\n        this.inView = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;\n        if (!this.inView)\n            return 0;\n        let lineHeights = docView.measureVisibleLineHeights();\n        let refresh = false, bias = 0;\n        if (!repeated) {\n            if (this.heightOracle.mustRefresh(lineHeights, whiteSpace, direction)) {\n                let { lineHeight, charWidth } = docView.measureTextSize();\n                refresh = this.heightOracle.refresh(whiteSpace, direction, lineHeight, charWidth, (docView.dom).clientWidth / charWidth, lineHeights);\n                if (refresh)\n                    docView.minWidth = 0;\n            }\n            if (dTop > 0 && dBottom > 0)\n                bias = Math.max(dTop, dBottom);\n            else if (dTop < 0 && dBottom < 0)\n                bias = Math.min(dTop, dBottom);\n        }\n        this.heightOracle.heightChanged = false;\n        this.heightMap = this.heightMap.updateHeight(this.heightOracle, 0, refresh, new MeasuredHeights(this.viewport.from, lineHeights));\n        let result = this.heightOracle.heightChanged ? 2 /* Height */ : 0;\n        if (!this.viewportIsAppropriate(this.viewport, bias) ||\n            this.scrollTo && (this.scrollTo.head < this.viewport.from || this.scrollTo.head > this.viewport.to)) {\n            this.viewport = this.getViewport(bias, this.scrollTo);\n            result |= 4 /* Viewport */;\n        }\n        if (this.lineGaps.length || this.viewport.to - this.viewport.from > 15000 /* MinViewPort */)\n            result |= this.updateLineGaps(this.ensureLineGaps(refresh ? [] : this.lineGaps));\n        this.computeVisibleRanges();\n        if (this.mustEnforceCursorAssoc) {\n            this.mustEnforceCursorAssoc = false;\n            // This is done in the read stage, because moving the selection\n            // to a line end is going to trigger a layout anyway, so it\n            // can't be a pure write. It should be rare that it does any\n            // writing.\n            docView.enforceCursorAssoc();\n        }\n        return result;\n    }\n    getViewport(bias, scrollTo) {\n        // This will divide VP.Margin between the top and the\n        // bottom, depending on the bias (the change in viewport position\n        // since the last update). It'll hold a number between 0 and 1\n        let marginTop = 0.5 - Math.max(-0.5, Math.min(0.5, bias / 1000 /* Margin */ / 2));\n        let map = this.heightMap, doc = this.state.doc, { top, bottom } = this.pixelViewport;\n        let viewport = new Viewport(map.lineAt(top - marginTop * 1000 /* Margin */, QueryType.ByHeight, doc, 0, 0).from, map.lineAt(bottom + (1 - marginTop) * 1000 /* Margin */, QueryType.ByHeight, doc, 0, 0).to);\n        // If scrollTo is given, make sure the viewport includes that position\n        if (scrollTo) {\n            if (scrollTo.head < viewport.from) {\n                let { top: newTop } = map.lineAt(scrollTo.head, QueryType.ByPos, doc, 0, 0);\n                viewport = new Viewport(map.lineAt(newTop - 1000 /* Margin */ / 2, QueryType.ByHeight, doc, 0, 0).from, map.lineAt(newTop + (bottom - top) + 1000 /* Margin */ / 2, QueryType.ByHeight, doc, 0, 0).to);\n            }\n            else if (scrollTo.head > viewport.to) {\n                let { bottom: newBottom } = map.lineAt(scrollTo.head, QueryType.ByPos, doc, 0, 0);\n                viewport = new Viewport(map.lineAt(newBottom - (bottom - top) - 1000 /* Margin */ / 2, QueryType.ByHeight, doc, 0, 0).from, map.lineAt(newBottom + 1000 /* Margin */ / 2, QueryType.ByHeight, doc, 0, 0).to);\n            }\n        }\n        return viewport;\n    }\n    mapViewport(viewport, changes) {\n        let from = changes.mapPos(viewport.from, -1), to = changes.mapPos(viewport.to, 1);\n        return new Viewport(this.heightMap.lineAt(from, QueryType.ByPos, this.state.doc, 0, 0).from, this.heightMap.lineAt(to, QueryType.ByPos, this.state.doc, 0, 0).to);\n    }\n    // Checks if a given viewport covers the visible part of the\n    // document and not too much beyond that.\n    viewportIsAppropriate({ from, to }, bias = 0) {\n        let { top } = this.heightMap.lineAt(from, QueryType.ByPos, this.state.doc, 0, 0);\n        let { bottom } = this.heightMap.lineAt(to, QueryType.ByPos, this.state.doc, 0, 0);\n        return (from == 0 || top <= this.pixelViewport.top - Math.max(10 /* MinCoverMargin */, Math.min(-bias, 250 /* MaxCoverMargin */))) &&\n            (to == this.state.doc.length ||\n                bottom >= this.pixelViewport.bottom + Math.max(10 /* MinCoverMargin */, Math.min(bias, 250 /* MaxCoverMargin */))) &&\n            (top > this.pixelViewport.top - 2 * 1000 /* Margin */ && bottom < this.pixelViewport.bottom + 2 * 1000 /* Margin */);\n    }\n    mapLineGaps(gaps, changes) {\n        if (!gaps.length || changes.empty)\n            return gaps;\n        let mapped = [];\n        for (let gap of gaps)\n            if (!changes.touchesRange(gap.from, gap.to))\n                mapped.push(new LineGap(changes.mapPos(gap.from), changes.mapPos(gap.to), gap.size));\n        return mapped;\n    }\n    // Computes positions in the viewport where the start or end of a\n    // line should be hidden, trying to reuse existing line gaps when\n    // appropriate to avoid unneccesary redraws.\n    // Uses crude character-counting for the positioning and sizing,\n    // since actual DOM coordinates aren't always available and\n    // predictable. Relies on generous margins (see LG.Margin) to hide\n    // the artifacts this might produce from the user.\n    ensureLineGaps(current) {\n        let gaps = [];\n        // This won't work at all in predominantly right-to-left text.\n        if (this.heightOracle.direction != Direction.LTR)\n            return gaps;\n        this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.state.doc, 0, 0, line => {\n            if (line.length < 10000 /* Margin */)\n                return;\n            let structure = lineStructure(line.from, line.to, this.state);\n            if (structure.total < 10000 /* Margin */)\n                return;\n            let viewFrom, viewTo;\n            if (this.heightOracle.lineWrapping) {\n                if (line.from != this.viewport.from)\n                    viewFrom = line.from;\n                else\n                    viewFrom = findPosition(structure, (this.pixelViewport.top - line.top) / line.height);\n                if (line.to != this.viewport.to)\n                    viewTo = line.to;\n                else\n                    viewTo = findPosition(structure, (this.pixelViewport.bottom - line.top) / line.height);\n            }\n            else {\n                let totalWidth = structure.total * this.heightOracle.charWidth;\n                viewFrom = findPosition(structure, this.pixelViewport.left / totalWidth);\n                viewTo = findPosition(structure, this.pixelViewport.right / totalWidth);\n            }\n            let sel = this.state.selection.primary;\n            // Make sure the gap doesn't cover a selection end\n            if (sel.from <= viewFrom && sel.to >= line.from)\n                viewFrom = sel.from;\n            if (sel.from <= line.to && sel.to >= viewTo)\n                viewTo = sel.to;\n            let gapTo = viewFrom - 10000 /* Margin */, gapFrom = viewTo + 10000 /* Margin */;\n            if (gapTo > line.from + 5000 /* HalfMargin */)\n                gaps.push(find(current, gap => gap.from == line.from && gap.to > gapTo - 5000 /* HalfMargin */ && gap.to < gapTo + 5000 /* HalfMargin */) ||\n                    new LineGap(line.from, gapTo, this.gapSize(line, gapTo, true, structure)));\n            if (gapFrom < line.to - 5000 /* HalfMargin */)\n                gaps.push(find(current, gap => gap.to == line.to && gap.from > gapFrom - 5000 /* HalfMargin */ &&\n                    gap.from < gapFrom + 5000 /* HalfMargin */) ||\n                    new LineGap(gapFrom, line.to, this.gapSize(line, gapFrom, false, structure)));\n        });\n        return gaps;\n    }\n    gapSize(line, pos, start, structure) {\n        if (this.heightOracle.lineWrapping) {\n            let height = line.height * findFraction(structure, pos);\n            return start ? height : line.height - height;\n        }\n        else {\n            let ratio = findFraction(structure, pos);\n            return structure.total * this.heightOracle.charWidth * (start ? ratio : 1 - ratio);\n        }\n    }\n    updateLineGaps(gaps) {\n        if (!LineGap.same(gaps, this.lineGaps)) {\n            this.lineGaps = gaps;\n            this.lineGapDeco = Decoration.set(gaps.map(gap => gap.draw(this.heightOracle.lineWrapping)));\n            return 16 /* LineGaps */;\n        }\n        return 0;\n    }\n    computeVisibleRanges() {\n        let deco = this.state.facet(decorations);\n        if (this.lineGaps.length)\n            deco = deco.concat(this.lineGapDeco);\n        let ranges = [];\n        RangeSet.spans(deco, this.viewport.from, this.viewport.to, {\n            span(from, to) { ranges.push({ from, to }); },\n            point() { },\n            minPointSize: 20\n        });\n        this.visibleRanges = ranges;\n    }\n    lineAt(pos, editorTop) {\n        return this.heightMap.lineAt(pos, QueryType.ByPos, this.state.doc, editorTop + this.paddingTop, 0);\n    }\n    lineAtHeight(height, editorTop) {\n        return this.heightMap.lineAt(height, QueryType.ByHeight, this.state.doc, editorTop + this.paddingTop, 0);\n    }\n    blockAtHeight(height, editorTop) {\n        return this.heightMap.blockAt(height, this.state.doc, editorTop + this.paddingTop, 0);\n    }\n    forEachLine(from, to, f, editorTop) {\n        return this.heightMap.forEachLine(from, to, this.state.doc, editorTop + this.paddingTop, 0, f);\n    }\n}\n/// Indicates the range of the document that is in the visible\n/// viewport.\nclass Viewport {\n    constructor(from, to) {\n        this.from = from;\n        this.to = to;\n    }\n    eq(b) { return this.from == b.from && this.to == b.to; }\n}\nfunction lineStructure(from, to, state) {\n    let ranges = [], pos = from, total = 0;\n    RangeSet.spans(state.facet(decorations), from, to, {\n        span() { },\n        point(from, to) {\n            if (from > pos) {\n                ranges.push({ from: pos, to: from });\n                total += from - pos;\n            }\n            pos = to;\n        },\n        minPointSize: 20 // We're only interested in collapsed ranges of a significant size\n    });\n    if (pos < to) {\n        ranges.push({ from: pos, to });\n        total += to - pos;\n    }\n    return { total, ranges };\n}\nfunction findPosition({ total, ranges }, ratio) {\n    if (ratio <= 0)\n        return ranges[0].from;\n    if (ratio >= 1)\n        return ranges[ranges.length - 1].to;\n    let dist = Math.floor(total * ratio);\n    for (let i = 0;; i++) {\n        let { from, to } = ranges[i], size = to - from;\n        if (dist <= size)\n            return from + dist;\n        dist -= size;\n    }\n}\nfunction findFraction(structure, pos) {\n    let counted = 0;\n    for (let { from, to } of structure.ranges) {\n        if (pos <= to) {\n            counted += pos - from;\n            break;\n        }\n        counted += to - from;\n    }\n    return counted / structure.total;\n}\nfunction find(array, f) {\n    for (let val of array)\n        if (f(val))\n            return val;\n    return undefined;\n}\n\nconst none$4 = [];\nclass DocView extends ContentView {\n    constructor(view) {\n        super();\n        this.view = view;\n        this.viewports = none$4;\n        this.compositionDeco = Decoration.none;\n        this.decorations = [];\n        // Track a minimum width for the editor. When measuring sizes in\n        // checkLayout, this is updated to point at the width of a given\n        // element and its extent in the document. When a change happens in\n        // that range, these are reset. That way, once we've seen a\n        // line/element of a given length, we keep the editor wide enough to\n        // fit at least that element, until it is changed, at which point we\n        // forget it again.\n        this.minWidth = 0;\n        this.minWidthFrom = 0;\n        this.minWidthTo = 0;\n        // Track whether the DOM selection was set in a lossy way, so that\n        // we don't mess it up when reading it back it\n        this.impreciseAnchor = null;\n        this.impreciseHead = null;\n        this.setDOM(view.contentDOM);\n        this.children = [new LineView];\n        this.children[0].setParent(this);\n        this.updateInner([new ChangedRange(0, 0, 0, view.state.doc.length)], this.updateDeco(), 0);\n    }\n    get root() { return this.view.root; }\n    get editorView() { return this.view; }\n    get length() { return this.view.state.doc.length; }\n    // Update the document view to a given state. scrollIntoView can be\n    // used as a hint to compute a new viewport that includes that\n    // position, if we know the editor is going to scroll that position\n    // into view.\n    update(update) {\n        var _a;\n        let changedRanges = update.changedRanges;\n        if (this.minWidth > 0 && changedRanges.length) {\n            if (!changedRanges.every(({ fromA, toA }) => toA < this.minWidthFrom || fromA > this.minWidthTo)) {\n                this.minWidth = 0;\n            }\n            else {\n                this.minWidthFrom = update.changes.mapPos(this.minWidthFrom, 1);\n                this.minWidthTo = update.changes.mapPos(this.minWidthTo, 1);\n            }\n        }\n        if (!((_a = this.view.inputState) === null || _a === void 0 ? void 0 : _a.composing))\n            this.compositionDeco = Decoration.none;\n        else if (update.transactions.length)\n            this.compositionDeco = computeCompositionDeco(this.view, update.changes);\n        // When the DOM nodes around the selection are moved to another\n        // parent, Chrome sometimes reports a different selection through\n        // getSelection than the one that it actually shows to the user.\n        // This forces a selection update when lines are joined to work\n        // around that. Issue #54\n        let forceSelection = (browser.ie || browser.chrome) && !this.compositionDeco.size && update &&\n            update.state.doc.lines != update.prevState.doc.lines;\n        let prevDeco = this.decorations, deco = this.updateDeco();\n        let decoDiff = findChangedDeco(prevDeco, deco, update.changes);\n        changedRanges = ChangedRange.extendWithRanges(changedRanges, decoDiff);\n        let pointerSel = update.transactions.some(tr => tr.annotation(Transaction.userEvent) == \"pointerselection\");\n        if (this.dirty == 0 /* Not */ && changedRanges.length == 0 &&\n            !(update.flags & (4 /* Viewport */ | 16 /* LineGaps */)) &&\n            update.state.selection.primary.from >= this.view.viewport.from &&\n            update.state.selection.primary.to <= this.view.viewport.to) {\n            this.updateSelection(forceSelection, pointerSel);\n            return false;\n        }\n        else {\n            this.updateInner(changedRanges, deco, update.prevState.doc.length, forceSelection, pointerSel);\n            return true;\n        }\n    }\n    // Used both by update and checkLayout do perform the actual DOM\n    // update\n    updateInner(changes, deco, oldLength, forceSelection = false, pointerSel = false) {\n        this.updateChildren(changes, deco, oldLength);\n        this.view.observer.ignore(() => {\n            // Lock the height during redrawing, since Chrome sometimes\n            // messes with the scroll position during DOM mutation (though\n            // no relayout is triggered and I cannot imagine how it can\n            // recompute the scroll position without a layout)\n            this.dom.style.height = this.view.viewState.heightMap.height + \"px\";\n            this.dom.style.minWidth = this.minWidth ? this.minWidth + \"px\" : \"\";\n            // Chrome will sometimes, when DOM mutations occur directly\n            // around the selection, get confused and report a different\n            // selection from the one it displays (issue #218). This tries\n            // to detect that situation.\n            let track = browser.chrome ? { node: getSelection(this.view.root).focusNode, written: false } : undefined;\n            this.sync(track);\n            this.dirty = 0 /* Not */;\n            if (track === null || track === void 0 ? void 0 : track.written)\n                forceSelection = true;\n            this.updateSelection(forceSelection, pointerSel);\n            this.dom.style.height = \"\";\n        });\n    }\n    updateChildren(changes, deco, oldLength) {\n        let cursor = this.childCursor(oldLength);\n        for (let i = changes.length - 1;; i--) {\n            let next = i >= 0 ? changes[i] : null;\n            if (!next)\n                break;\n            let { fromA, toA, fromB, toB } = next;\n            let { content, breakAtStart, openStart, openEnd } = ContentBuilder.build(this.view.state.doc, fromB, toB, deco);\n            let { i: toI, off: toOff } = cursor.findPos(toA, 1);\n            let { i: fromI, off: fromOff } = cursor.findPos(fromA, -1);\n            this.replaceRange(fromI, fromOff, toI, toOff, content, breakAtStart, openStart, openEnd);\n        }\n    }\n    replaceRange(fromI, fromOff, toI, toOff, content, breakAtStart, openStart, openEnd) {\n        let before = this.children[fromI], last = content.length ? content[content.length - 1] : null;\n        let breakAtEnd = last ? last.breakAfter : breakAtStart;\n        // Change within a single line\n        if (fromI == toI && !breakAtStart && !breakAtEnd && content.length < 2 &&\n            before.merge(fromOff, toOff, content.length ? last : null, fromOff == 0, openStart, openEnd))\n            return;\n        let after = this.children[toI];\n        // Make sure the end of the line after the update is preserved in `after`\n        if (toOff < after.length || after.children.length && after.children[after.children.length - 1].length == 0) {\n            // If we're splitting a line, separate part of the start line to\n            // avoid that being mangled when updating the start line.\n            if (fromI == toI) {\n                after = after.split(toOff);\n                toOff = 0;\n            }\n            // If the element after the replacement should be merged with\n            // the last replacing element, update `content`\n            if (!breakAtEnd && last && after.merge(0, toOff, last, true, 0, openEnd)) {\n                content[content.length - 1] = after;\n            }\n            else {\n                // Remove the start of the after element, if necessary, and\n                // add it to `content`.\n                if (toOff || after.children.length && after.children[0].length == 0)\n                    after.merge(0, toOff, null, false, 0, openEnd);\n                content.push(after);\n            }\n        }\n        else if (after.breakAfter) {\n            // The element at `toI` is entirely covered by this range.\n            // Preserve its line break, if any.\n            if (last)\n                last.breakAfter = 1;\n            else\n                breakAtStart = 1;\n        }\n        // Since we've handled the next element from the current elements\n        // now, make sure `toI` points after that.\n        toI++;\n        before.breakAfter = breakAtStart;\n        if (fromOff > 0) {\n            if (!breakAtStart && content.length && before.merge(fromOff, before.length, content[0], false, openStart, 0)) {\n                before.breakAfter = content.shift().breakAfter;\n            }\n            else if (fromOff < before.length || before.children.length && before.children[before.children.length - 1].length == 0) {\n                before.merge(fromOff, before.length, null, false, openStart, 0);\n            }\n            fromI++;\n        }\n        // Try to merge widgets on the boundaries of the replacement\n        while (fromI < toI && content.length) {\n            if (this.children[toI - 1].match(content[content.length - 1]))\n                toI--, content.pop();\n            else if (this.children[fromI].match(content[0]))\n                fromI++, content.shift();\n            else\n                break;\n        }\n        if (fromI < toI || content.length)\n            this.replaceChildren(fromI, toI, content);\n    }\n    // Sync the DOM selection to this.state.selection\n    updateSelection(force = false, fromPointer = false) {\n        if (!(fromPointer || this.mayControlSelection()))\n            return;\n        let primary = this.view.state.selection.primary;\n        // FIXME need to handle the case where the selection falls inside a block range\n        let anchor = this.domAtPos(primary.anchor);\n        let head = this.domAtPos(primary.head);\n        let domSel = getSelection(this.root);\n        // If the selection is already here, or in an equivalent position, don't touch it\n        if (force || !domSel.focusNode ||\n            (browser.gecko && primary.empty && nextToUneditable(domSel.focusNode, domSel.focusOffset)) ||\n            !isEquivalentPosition(anchor.node, anchor.offset, domSel.anchorNode, domSel.anchorOffset) ||\n            !isEquivalentPosition(head.node, head.offset, domSel.focusNode, domSel.focusOffset)) {\n            this.view.observer.ignore(() => {\n                if (primary.empty) {\n                    // Work around https://bugzilla.mozilla.org/show_bug.cgi?id=1612076\n                    if (browser.gecko) {\n                        let nextTo = nextToUneditable(anchor.node, anchor.offset);\n                        if (nextTo && nextTo != (1 /* Before */ | 2 /* After */)) {\n                            let text = nearbyTextNode(anchor.node, anchor.offset, nextTo == 1 /* Before */ ? 1 : -1);\n                            if (text)\n                                anchor = new DOMPos(text, nextTo == 1 /* Before */ ? 0 : text.nodeValue.length);\n                        }\n                    }\n                    domSel.collapse(anchor.node, anchor.offset);\n                    if (primary.bidiLevel != null && domSel.cursorBidiLevel != null)\n                        domSel.cursorBidiLevel = primary.bidiLevel;\n                }\n                else if (domSel.extend) {\n                    // Selection.extend can be used to create an 'inverted' selection\n                    // (one where the focus is before the anchor), but not all\n                    // browsers support it yet.\n                    domSel.collapse(anchor.node, anchor.offset);\n                    domSel.extend(head.node, head.offset);\n                }\n                else {\n                    // Primitive (IE) way\n                    let range = document.createRange();\n                    if (primary.anchor > primary.head)\n                        [anchor, head] = [head, anchor];\n                    range.setEnd(head.node, head.offset);\n                    range.setStart(anchor.node, anchor.offset);\n                    domSel.removeAllRanges();\n                    domSel.addRange(range);\n                }\n            });\n        }\n        this.impreciseAnchor = anchor.precise ? null : new DOMPos(domSel.anchorNode, domSel.anchorOffset);\n        this.impreciseHead = head.precise ? null : new DOMPos(domSel.focusNode, domSel.focusOffset);\n    }\n    enforceCursorAssoc() {\n        let cursor = this.view.state.selection.primary;\n        let sel = getSelection(this.root);\n        if (!cursor.empty || !cursor.assoc || !sel.modify)\n            return;\n        let line = LineView.find(this, cursor.head); // FIXME provide view-line-range finding helper\n        if (!line)\n            return;\n        let lineStart = line.posAtStart;\n        if (cursor.head == lineStart || cursor.head == lineStart + line.length)\n            return;\n        let before = this.coordsAt(cursor.head, -1), after = this.coordsAt(cursor.head, 1);\n        if (!before || !after || before.bottom > after.top)\n            return;\n        let dom = this.domAtPos(cursor.head + cursor.assoc);\n        sel.collapse(dom.node, dom.offset);\n        sel.modify(\"move\", cursor.assoc < 0 ? \"forward\" : \"backward\", \"lineboundary\");\n    }\n    mayControlSelection() {\n        return this.view.state.facet(editable) ? this.root.activeElement == this.dom : hasSelection(this.dom, getSelection(this.root));\n    }\n    nearest(dom) {\n        for (let cur = dom; cur;) {\n            let domView = ContentView.get(cur);\n            if (domView && domView.rootView == this)\n                return domView;\n            cur = cur.parentNode;\n        }\n        return null;\n    }\n    posFromDOM(node, offset) {\n        let view = this.nearest(node);\n        if (!view)\n            throw new RangeError(\"Trying to find position for a DOM position outside of the document\");\n        return view.localPosFromDOM(node, offset) + view.posAtStart;\n    }\n    domAtPos(pos) {\n        let { i, off } = this.childCursor().findPos(pos, -1);\n        for (; i < this.children.length - 1;) {\n            let child = this.children[i];\n            if (off < child.length || child instanceof LineView)\n                break;\n            i++;\n            off = 0;\n        }\n        return this.children[i].domAtPos(off);\n    }\n    coordsAt(pos, side) {\n        for (let off = this.length, i = this.children.length - 1;; i--) {\n            let child = this.children[i], start = off - child.breakAfter - child.length;\n            if (pos >= start && child.type != BlockType.WidgetAfter)\n                return child.coordsAt(pos - start, side);\n            off = start;\n        }\n    }\n    measureVisibleLineHeights() {\n        let result = [], { from, to } = this.view.viewState.viewport;\n        let minWidth = Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1;\n        for (let pos = 0, i = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = pos + child.length;\n            if (end > to)\n                break;\n            if (pos >= from) {\n                result.push(child.dom.getBoundingClientRect().height);\n                let width = child.dom.scrollWidth;\n                if (width > minWidth) {\n                    this.minWidth = minWidth = width;\n                    this.minWidthFrom = pos;\n                    this.minWidthTo = end;\n                }\n            }\n            pos = end + child.breakAfter;\n        }\n        return result;\n    }\n    measureTextSize() {\n        for (let child of this.children) {\n            if (child instanceof LineView) {\n                let measure = child.measureTextSize();\n                if (measure)\n                    return measure;\n            }\n        }\n        // If no workable line exists, force a layout of a measurable element\n        let dummy = document.createElement(\"div\"), lineHeight, charWidth;\n        dummy.className = \"cm-line\";\n        dummy.textContent = \"abc def ghi jkl mno pqr stu\";\n        this.view.observer.ignore(() => {\n            this.dom.appendChild(dummy);\n            let rect = clientRectsFor(dummy.firstChild)[0];\n            lineHeight = dummy.getBoundingClientRect().height;\n            charWidth = rect ? rect.width / 27 : 7;\n            dummy.remove();\n        });\n        return { lineHeight, charWidth };\n    }\n    childCursor(pos = this.length) {\n        // Move back to start of last element when possible, so that\n        // `ChildCursor.findPos` doesn't have to deal with the edge case\n        // of being after the last element.\n        let i = this.children.length;\n        if (i)\n            pos -= this.children[--i].length;\n        return new ChildCursor(this.children, pos, i);\n    }\n    computeBlockGapDeco() {\n        let visible = this.view.viewState.viewport, viewports = [visible];\n        let { head, anchor } = this.view.state.selection.primary;\n        if (head < visible.from || head > visible.to) {\n            let { from, to } = this.view.viewState.lineAt(head, 0);\n            viewports.push(new Viewport(from, to));\n        }\n        if (!viewports.some(({ from, to }) => anchor >= from && anchor <= to)) {\n            let { from, to } = this.view.viewState.lineAt(anchor, 0);\n            viewports.push(new Viewport(from, to));\n        }\n        this.viewports = viewports.sort((a, b) => a.from - b.from);\n        let deco = [];\n        for (let pos = 0, i = 0;; i++) {\n            let next = i == viewports.length ? null : viewports[i];\n            let end = next ? next.from - 1 : this.length;\n            if (end > pos) {\n                let height = this.view.viewState.lineAt(end, 0).bottom - this.view.viewState.lineAt(pos, 0).top;\n                deco.push(Decoration.replace({ widget: new BlockGapWidget(height), block: true, inclusive: true }).range(pos, end));\n            }\n            if (!next)\n                break;\n            pos = next.to + 1;\n        }\n        return Decoration.set(deco);\n    }\n    updateDeco() {\n        return this.decorations = [\n            this.computeBlockGapDeco(),\n            this.view.viewState.lineGapDeco,\n            this.compositionDeco,\n            ...this.view.state.facet(decorations),\n            ...this.view.pluginField(pluginDecorations)\n        ];\n    }\n    scrollPosIntoView(pos, side) {\n        let rect = this.coordsAt(pos, side);\n        if (!rect)\n            return;\n        let mLeft = 0, mRight = 0, mTop = 0, mBottom = 0;\n        for (let margins of this.view.pluginField(PluginField.scrollMargins))\n            if (margins) {\n                let { left, right, top, bottom } = margins;\n                if (left != null)\n                    mLeft = Math.max(mLeft, left);\n                if (right != null)\n                    mRight = Math.max(mRight, right);\n                if (top != null)\n                    mTop = Math.max(mTop, top);\n                if (bottom != null)\n                    mBottom = Math.max(mBottom, bottom);\n            }\n        scrollRectIntoView(this.dom, {\n            left: rect.left - mLeft, top: rect.top - mTop,\n            right: rect.right + mRight, bottom: rect.bottom + mBottom\n        });\n    }\n}\n// Browsers appear to reserve a fixed amount of bits for height\n// styles, and ignore or clip heights above that. For Chrome and\n// Firefox, this is in the 20 million range, so we try to stay below\n// that.\nconst MaxNodeHeight = 1e7;\nclass BlockGapWidget extends WidgetType {\n    toDOM() {\n        let elt = document.createElement(\"div\");\n        this.updateDOM(elt);\n        return elt;\n    }\n    updateDOM(elt) {\n        if (this.value < MaxNodeHeight) {\n            while (elt.lastChild)\n                elt.lastChild.remove();\n            elt.style.height = this.value + \"px\";\n        }\n        else {\n            elt.style.height = \"\";\n            for (let remaining = this.value; remaining > 0; remaining -= MaxNodeHeight) {\n                let fill = elt.appendChild(document.createElement(\"div\"));\n                fill.style.height = Math.min(remaining, MaxNodeHeight) + \"px\";\n            }\n        }\n        return true;\n    }\n    get estimatedHeight() { return this.value; }\n}\nfunction computeCompositionDeco(view, changes) {\n    let sel = getSelection(view.root);\n    let textNode = sel.focusNode && nearbyTextNode(sel.focusNode, sel.focusOffset, 0);\n    if (!textNode)\n        return Decoration.none;\n    let cView = view.docView.nearest(textNode);\n    let from, to, topNode = textNode;\n    if (cView instanceof InlineView) {\n        while (cView.parent instanceof InlineView)\n            cView = cView.parent;\n        from = cView.posAtStart;\n        to = from + cView.length;\n        topNode = cView.dom;\n    }\n    else if (cView instanceof LineView) {\n        while (topNode.parentNode != cView.dom)\n            topNode = topNode.parentNode;\n        let prev = topNode.previousSibling;\n        while (prev && !ContentView.get(prev))\n            prev = prev.previousSibling;\n        from = to = prev ? ContentView.get(prev).posAtEnd : cView.posAtStart;\n    }\n    else {\n        return Decoration.none;\n    }\n    let newFrom = changes.mapPos(from, 1), newTo = Math.max(newFrom, changes.mapPos(to, -1));\n    let text = textNode.nodeValue, { state } = view;\n    if (newTo - newFrom < text.length) {\n        if (state.sliceDoc(newFrom, Math.min(state.doc.length, newFrom + text.length)) == text)\n            newTo = newFrom + text.length;\n        else if (state.sliceDoc(Math.max(0, newTo - text.length), newTo) == text)\n            newFrom = newTo - text.length;\n        else\n            return Decoration.none;\n    }\n    else if (state.sliceDoc(newFrom, newTo) != text) {\n        return Decoration.none;\n    }\n    return Decoration.set(Decoration.replace({ widget: new CompositionWidget({ top: topNode, text: textNode }) }).range(newFrom, newTo));\n}\nclass CompositionWidget extends WidgetType {\n    eq(value) { return this.value.top == value.top && this.value.text == value.text; }\n    toDOM() { return this.value.top; }\n    ignoreEvent() { return false; }\n    get customView() { return CompositionView; }\n}\nfunction nearbyTextNode(node, offset, side) {\n    for (;;) {\n        if (node.nodeType == 3)\n            return node;\n        if (node.nodeType == 1 && offset > 0 && side <= 0) {\n            node = node.childNodes[offset - 1];\n            offset = maxOffset(node);\n        }\n        else if (node.nodeType == 1 && offset < node.childNodes.length && side >= 0) {\n            node = node.childNodes[offset];\n            offset = 0;\n        }\n        else {\n            return null;\n        }\n    }\n}\nfunction nextToUneditable(node, offset) {\n    if (node.nodeType != 1)\n        return 0;\n    return (offset && node.childNodes[offset - 1].contentEditable == \"false\" ? 1 /* Before */ : 0) |\n        (offset < node.childNodes.length && node.childNodes[offset].contentEditable == \"false\" ? 2 /* After */ : 0);\n}\nclass DecorationComparator$1 {\n    constructor() {\n        this.changes = [];\n    }\n    compareRange(from, to) { addRange(from, to, this.changes); }\n    comparePoint(from, to) { addRange(from, to, this.changes); }\n}\nfunction findChangedDeco(a, b, diff) {\n    let comp = new DecorationComparator$1;\n    RangeSet.compare(a, b, diff, comp);\n    return comp.changes;\n}\n\nfunction groupAt(state, pos, bias = 1) {\n    let categorize = state.charCategorizer(pos);\n    let line = state.doc.lineAt(pos), linePos = pos - line.from;\n    if (line.length == 0)\n        return EditorSelection.cursor(pos);\n    if (linePos == 0)\n        bias = 1;\n    else if (linePos == line.length)\n        bias = -1;\n    let from = linePos, to = linePos;\n    if (bias < 0)\n        from = line.findClusterBreak(linePos, false);\n    else\n        to = line.findClusterBreak(linePos, true);\n    let cat = categorize(line.slice(from, to));\n    while (from > 0) {\n        let prev = line.findClusterBreak(from, false);\n        if (categorize(line.slice(prev, from)) != cat)\n            break;\n        from = prev;\n    }\n    while (to < line.length) {\n        let next = line.findClusterBreak(to, true);\n        if (categorize(line.slice(to, next)) != cat)\n            break;\n        to = next;\n    }\n    return EditorSelection.range(from + line.from, to + line.from);\n}\n// Search the DOM for the {node, offset} position closest to the given\n// coordinates. Very inefficient and crude, but can usually be avoided\n// by calling caret(Position|Range)FromPoint instead.\n// FIXME holding arrow-up/down at the end of the viewport is a rather\n// common use case that will repeatedly trigger this code. Maybe\n// introduce some element of binary search after all?\nfunction getdx(x, rect) {\n    return rect.left > x ? rect.left - x : Math.max(0, x - rect.right);\n}\nfunction getdy(y, rect) {\n    return rect.top > y ? rect.top - y : Math.max(0, y - rect.bottom);\n}\nfunction yOverlap(a, b) {\n    return a.top < b.bottom - 1 && a.bottom > b.top + 1;\n}\nfunction upTop(rect, top) {\n    return top < rect.top ? { top, left: rect.left, right: rect.right, bottom: rect.bottom } : rect;\n}\nfunction upBot(rect, bottom) {\n    return bottom > rect.bottom ? { top: rect.top, left: rect.left, right: rect.right, bottom } : rect;\n}\nfunction domPosAtCoords(parent, x, y) {\n    let closest, closestRect, closestX, closestY;\n    let above, below, aboveRect, belowRect;\n    for (let child = parent.firstChild; child; child = child.nextSibling) {\n        let rects = clientRectsFor(child);\n        for (let i = 0; i < rects.length; i++) {\n            let rect = rects[i];\n            if (closestRect && yOverlap(closestRect, rect))\n                rect = upTop(upBot(rect, closestRect.bottom), closestRect.top);\n            let dx = getdx(x, rect), dy = getdy(y, rect);\n            if (dx == 0 && dy == 0)\n                return child.nodeType == 3 ? domPosInText(child, x, y) : domPosAtCoords(child, x, y);\n            if (!closest || closestY > dy || closestY == dy && closestX > dx) {\n                closest = child;\n                closestRect = rect;\n                closestX = dx;\n                closestY = dy;\n            }\n            if (dx == 0) {\n                if (y > rect.bottom && (!aboveRect || aboveRect.bottom < rect.bottom)) {\n                    above = child;\n                    aboveRect = rect;\n                }\n                else if (y < rect.top && (!belowRect || belowRect.top > rect.top)) {\n                    below = child;\n                    belowRect = rect;\n                }\n            }\n            else if (aboveRect && yOverlap(aboveRect, rect)) {\n                aboveRect = upBot(aboveRect, rect.bottom);\n            }\n            else if (belowRect && yOverlap(belowRect, rect)) {\n                belowRect = upTop(belowRect, rect.top);\n            }\n        }\n    }\n    if (aboveRect && aboveRect.bottom >= y) {\n        closest = above;\n        closestRect = aboveRect;\n    }\n    else if (belowRect && belowRect.top <= y) {\n        closest = below;\n        closestRect = belowRect;\n    }\n    if (!closest)\n        return { node: parent, offset: 0 };\n    let clipX = Math.max(closestRect.left, Math.min(closestRect.right, x));\n    if (closest.nodeType == 3)\n        return domPosInText(closest, clipX, y);\n    if (!closestX && closest.contentEditable == \"true\")\n        return domPosAtCoords(closest, clipX, y);\n    let offset = Array.prototype.indexOf.call(parent.childNodes, closest) +\n        (x >= (closestRect.left + closestRect.right) / 2 ? 1 : 0);\n    return { node: parent, offset };\n}\nfunction domPosInText(node, x, y) {\n    let len = node.nodeValue.length, range = document.createRange();\n    for (let i = 0; i < len; i++) {\n        range.setEnd(node, i + 1);\n        range.setStart(node, i);\n        let rects = range.getClientRects();\n        for (let j = 0; j < rects.length; j++) {\n            let rect = rects[j];\n            if (rect.top == rect.bottom)\n                continue;\n            if (rect.left - 1 <= x && rect.right + 1 >= x &&\n                rect.top - 1 <= y && rect.bottom + 1 >= y) {\n                let right = x >= (rect.left + rect.right) / 2, after = right;\n                if (browser.chrome || browser.gecko) {\n                    // Check for RTL on browsers that support getting client\n                    // rects for empty ranges.\n                    range.setEnd(node, i);\n                    let rectBefore = range.getBoundingClientRect();\n                    if (rectBefore.left == rect.right)\n                        after = !right;\n                }\n                return { node, offset: i + (after ? 1 : 0) };\n            }\n        }\n    }\n    return { node, offset: 0 };\n}\nfunction posAtCoords(view, { x, y }, bias = -1) {\n    let content = view.contentDOM.getBoundingClientRect(), block;\n    let halfLine = view.defaultLineHeight / 2;\n    for (let bounced = false;;) {\n        block = view.blockAtHeight(y, content.top);\n        if (block.top > y || block.bottom < y) {\n            bias = block.top > y ? -1 : 1;\n            y = Math.min(block.bottom - halfLine, Math.max(block.top + halfLine, y));\n            if (bounced)\n                return -1;\n            else\n                bounced = true;\n        }\n        if (block.type == BlockType.Text)\n            break;\n        y = bias > 0 ? block.bottom + halfLine : block.top - halfLine;\n    }\n    let lineStart = block.from;\n    // If this is outside of the rendered viewport, we can't determine a position\n    if (lineStart < view.viewport.from)\n        return view.viewport.from == 0 ? 0 : -1;\n    if (lineStart > view.viewport.to)\n        return view.viewport.to == view.state.doc.length ? view.state.doc.length : -1;\n    // Clip x to the viewport sides\n    x = Math.max(content.left + 1, Math.min(content.right - 1, x));\n    let root = view.root, element = root.elementFromPoint(x, y);\n    // There's visible editor content under the point, so we can try\n    // using caret(Position|Range)FromPoint as a shortcut\n    let node, offset = -1;\n    if (element && view.contentDOM.contains(element) && !(view.docView.nearest(element) instanceof WidgetView)) {\n        if (root.caretPositionFromPoint) {\n            let pos = root.caretPositionFromPoint(x, y);\n            if (pos)\n                ({ offsetNode: node, offset } = pos);\n        }\n        else if (root.caretRangeFromPoint) {\n            let range = root.caretRangeFromPoint(x, y);\n            if (range)\n                ({ startContainer: node, startOffset: offset } = range);\n        }\n    }\n    // No luck, do our own (potentially expensive) search\n    if (!node) {\n        let line = LineView.find(view.docView, lineStart);\n        ({ node, offset } = domPosAtCoords(line.dom, x, y));\n    }\n    return view.docView.posFromDOM(node, offset);\n}\nfunction moveToLineBoundary(view, start, forward, includeWrap) {\n    let line = view.state.doc.lineAt(start.head);\n    let coords = !includeWrap || !view.lineWrapping ? null\n        : view.coordsAtPos(start.assoc < 0 && start.head > line.from ? start.head - 1 : start.head);\n    if (coords) {\n        let editorRect = view.dom.getBoundingClientRect();\n        let pos = view.posAtCoords({ x: forward == (view.textDirection == Direction.LTR) ? editorRect.right - 1 : editorRect.left + 1,\n            y: (coords.top + coords.bottom) / 2 });\n        if (pos > -1)\n            return EditorSelection.cursor(pos, forward ? -1 : 1);\n    }\n    let lineView = LineView.find(view.docView, start.head);\n    let end = lineView ? (forward ? lineView.posAtEnd : lineView.posAtStart) : (forward ? line.to : line.from);\n    return EditorSelection.cursor(end, forward ? -1 : 1);\n}\nfunction moveByChar(view, start, forward, by) {\n    let line = view.state.doc.lineAt(start.head), spans = view.bidiSpans(line);\n    for (let cur = start, check = null;;) {\n        let next = moveVisually(line, spans, view.textDirection, cur, forward), char = movedOver;\n        if (!next) {\n            if (line.number == (forward ? view.state.doc.lines : 1))\n                return cur;\n            char = \"\\n\";\n            line = view.state.doc.line(line.number + (forward ? 1 : -1));\n            spans = view.bidiSpans(line);\n            next = EditorSelection.cursor(forward ? line.from : line.to);\n        }\n        if (!check) {\n            if (!by)\n                return next;\n            check = by(char);\n        }\n        else if (!check(char)) {\n            return cur;\n        }\n        cur = next;\n    }\n}\nfunction byGroup(view, pos, start) {\n    let categorize = view.state.charCategorizer(pos);\n    let cat = categorize(start);\n    return (next) => {\n        let nextCat = categorize(next);\n        if (cat == CharCategory.Space)\n            cat = nextCat;\n        return cat == nextCat;\n    };\n}\nfunction moveVertically(view, start, forward, distance) {\n    var _a;\n    let startPos = start.head, dir = forward ? 1 : -1;\n    if (startPos == (forward ? view.state.doc.length : 0))\n        return EditorSelection.cursor(startPos);\n    let startCoords = view.coordsAtPos(startPos);\n    if (startCoords) {\n        let rect = view.dom.getBoundingClientRect();\n        let goal = (_a = start.goalColumn) !== null && _a !== void 0 ? _a : startCoords.left - rect.left;\n        let resolvedGoal = rect.left + goal;\n        let dist = distance !== null && distance !== void 0 ? distance : 5;\n        for (let startY = dir < 0 ? startCoords.top : startCoords.bottom, extra = 0; extra < 50; extra += 10) {\n            let pos = posAtCoords(view, { x: resolvedGoal, y: startY + (dist + extra) * dir }, dir);\n            if (pos < 0)\n                break;\n            if (pos != startPos)\n                return EditorSelection.cursor(pos, undefined, undefined, goal);\n        }\n    }\n    // Outside of the drawn viewport, use a crude column-based approach\n    let { doc } = view.state, line = doc.lineAt(startPos), tabSize = view.state.tabSize;\n    let goal = start.goalColumn, goalCol = 0;\n    if (goal == null) {\n        for (const iter = doc.iterRange(line.from, startPos); !iter.next().done;)\n            goalCol = countColumn(iter.value, goalCol, tabSize);\n        goal = goalCol * view.defaultCharacterWidth;\n    }\n    else {\n        goalCol = Math.round(goal / view.defaultCharacterWidth);\n    }\n    if (dir < 0 && line.from == 0)\n        return EditorSelection.cursor(0);\n    else if (dir > 0 && line.to == doc.length)\n        return EditorSelection.cursor(line.to);\n    let otherLine = doc.line(line.number + dir);\n    let result = otherLine.from;\n    let seen = 0;\n    for (const iter = doc.iterRange(otherLine.from, otherLine.to); seen >= goalCol && !iter.next().done;) {\n        const { offset, leftOver } = findColumn(iter.value, seen, goalCol, tabSize);\n        seen = goalCol - leftOver;\n        result += offset;\n    }\n    return EditorSelection.cursor(result, undefined, undefined, goal);\n}\n\n// This will also be where dragging info and such goes\nclass InputState {\n    constructor(view) {\n        this.lastKeyCode = 0;\n        this.lastKeyTime = 0;\n        this.lastSelectionOrigin = null;\n        this.lastSelectionTime = 0;\n        this.registeredEvents = [];\n        this.customHandlers = [];\n        this.composing = false;\n        this.compositionEndedAt = 0;\n        this.mouseSelection = null;\n        for (let type in handlers) {\n            let handler = handlers[type];\n            view.contentDOM.addEventListener(type, (event) => {\n                if (!eventBelongsToEditor(view, event) || this.ignoreDuringComposition(event))\n                    return;\n                if (this.mustFlushObserver(event))\n                    view.observer.forceFlush();\n                if (this.runCustomHandlers(type, view, event))\n                    event.preventDefault();\n                else\n                    handler(view, event);\n            });\n            this.registeredEvents.push(type);\n        }\n        // Must always run, even if a custom handler handled the event\n        view.contentDOM.addEventListener(\"keydown\", (event) => {\n            view.inputState.lastKeyCode = event.keyCode;\n            view.inputState.lastKeyTime = Date.now();\n        });\n        if (view.root.activeElement == view.contentDOM)\n            view.dom.classList.add(\"cm-focused\");\n        this.notifiedFocused = view.hasFocus;\n        this.ensureHandlers(view);\n    }\n    setSelectionOrigin(origin) {\n        this.lastSelectionOrigin = origin;\n        this.lastSelectionTime = Date.now();\n    }\n    ensureHandlers(view) {\n        let handlers = this.customHandlers = view.pluginField(domEventHandlers);\n        for (let set of handlers) {\n            for (let type in set.handlers)\n                if (this.registeredEvents.indexOf(type) < 0) {\n                    this.registeredEvents.push(type);\n                    (type != \"scroll\" ? view.contentDOM : view.scrollDOM).addEventListener(type, (event) => {\n                        if (!eventBelongsToEditor(view, event))\n                            return;\n                        if (this.runCustomHandlers(type, view, event))\n                            event.preventDefault();\n                    });\n                }\n        }\n    }\n    runCustomHandlers(type, view, event) {\n        for (let set of this.customHandlers) {\n            let handler = set.handlers[type];\n            if (handler) {\n                try {\n                    if (handler.call(set.plugin, event, view) || event.defaultPrevented)\n                        return true;\n                }\n                catch (e) {\n                    logException(view.state, e);\n                }\n            }\n        }\n        return false;\n    }\n    ignoreDuringComposition(event) {\n        if (!/^key/.test(event.type))\n            return false;\n        if (this.composing)\n            return true;\n        // See https://www.stum.de/2016/06/24/handling-ime-events-in-javascript/.\n        // On some input method editors (IMEs), the Enter key is used to\n        // confirm character selection. On Safari, when Enter is pressed,\n        // compositionend and keydown events are sometimes emitted in the\n        // wrong order. The key event should still be ignored, even when\n        // it happens after the compositionend event.\n        if (browser.safari && event.timeStamp - this.compositionEndedAt < 500) {\n            this.compositionEndedAt = 0;\n            return true;\n        }\n        return false;\n    }\n    mustFlushObserver(event) {\n        return event.type == \"keydown\" || event.type == \"compositionend\";\n    }\n    startMouseSelection(view, event, style) {\n        if (this.mouseSelection)\n            this.mouseSelection.destroy();\n        this.mouseSelection = new MouseSelection(this, view, event, style);\n    }\n    update(update) {\n        if (this.mouseSelection)\n            this.mouseSelection.update(update);\n        this.lastKeyCode = this.lastSelectionTime = 0;\n    }\n    destroy() {\n        if (this.mouseSelection)\n            this.mouseSelection.destroy();\n    }\n}\nclass MouseSelection {\n    constructor(inputState, view, startEvent, style) {\n        this.inputState = inputState;\n        this.view = view;\n        this.startEvent = startEvent;\n        this.style = style;\n        let doc = view.contentDOM.ownerDocument;\n        doc.addEventListener(\"mousemove\", this.move = this.move.bind(this));\n        doc.addEventListener(\"mouseup\", this.up = this.up.bind(this));\n        this.extend = startEvent.shiftKey;\n        this.multiple = view.state.facet(EditorState.allowMultipleSelections) && addsSelectionRange(view, startEvent);\n        this.dragMove = dragMovesSelection$1(view, startEvent);\n        this.dragging = isInPrimarySelection(view, startEvent) ? null : false;\n        // When clicking outside of the selection, immediately apply the\n        // effect of starting the selection\n        if (this.dragging === false) {\n            startEvent.preventDefault();\n            this.select(startEvent);\n        }\n    }\n    move(event) {\n        if (event.buttons == 0)\n            return this.destroy();\n        if (this.dragging !== false)\n            return;\n        this.select(event);\n    }\n    up(event) {\n        if (this.dragging == null)\n            this.select(this.startEvent);\n        if (!this.dragging)\n            event.preventDefault();\n        this.destroy();\n    }\n    destroy() {\n        let doc = this.view.contentDOM.ownerDocument;\n        doc.removeEventListener(\"mousemove\", this.move);\n        doc.removeEventListener(\"mouseup\", this.up);\n        this.inputState.mouseSelection = null;\n    }\n    select(event) {\n        let selection = this.style.get(event, this.extend, this.multiple);\n        if (!selection.eq(this.view.state.selection) || selection.primary.assoc != this.view.state.selection.primary.assoc)\n            this.view.dispatch({\n                selection,\n                annotations: Transaction.userEvent.of(\"pointerselection\"),\n                scrollIntoView: true\n            });\n    }\n    update(update) {\n        if (update.docChanged && this.dragging)\n            this.dragging = this.dragging.map(update.changes);\n        this.style.update(update);\n    }\n}\nfunction addsSelectionRange(view, event) {\n    let facet = view.state.facet(clickAddsSelectionRange);\n    return facet.length ? facet[0](event) : browser.mac ? event.metaKey : event.ctrlKey;\n}\nfunction dragMovesSelection$1(view, event) {\n    let facet = view.state.facet(dragMovesSelection);\n    return facet.length ? facet[0](event) : browser.mac ? !event.altKey : !event.ctrlKey;\n}\nfunction isInPrimarySelection(view, event) {\n    let { primary } = view.state.selection;\n    if (primary.empty)\n        return false;\n    // On boundary clicks, check whether the coordinates are inside the\n    // selection's client rectangles\n    let sel = getSelection(view.root);\n    if (sel.rangeCount == 0)\n        return true;\n    let rects = sel.getRangeAt(0).getClientRects();\n    for (let i = 0; i < rects.length; i++) {\n        let rect = rects[i];\n        if (rect.left <= event.clientX && rect.right >= event.clientX &&\n            rect.top <= event.clientY && rect.bottom >= event.clientY)\n            return true;\n    }\n    return false;\n}\nfunction eventBelongsToEditor(view, event) {\n    if (!event.bubbles)\n        return true;\n    if (event.defaultPrevented)\n        return false;\n    for (let node = event.target, cView; node != view.contentDOM; node = node.parentNode)\n        if (!node || node.nodeType == 11 || ((cView = ContentView.get(node)) && cView.ignoreEvent(event)))\n            return false;\n    return true;\n}\nconst handlers = Object.create(null);\n// This is very crude, but unfortunately both these browsers _pretend_\n// that they have a clipboard APIall the objects and methods are\n// there, they just don't work, and they are hard to test.\nconst brokenClipboardAPI = (browser.ie && browser.ie_version < 15) ||\n    (browser.ios && browser.webkit_version < 604);\nfunction capturePaste(view) {\n    let parent = view.dom.parentNode;\n    if (!parent)\n        return;\n    let target = parent.appendChild(document.createElement(\"textarea\"));\n    target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    target.focus();\n    setTimeout(() => {\n        view.focus();\n        target.remove();\n        doPaste(view, target.value);\n    }, 50);\n}\nfunction doPaste(view, input) {\n    let { state } = view, changes, i = 1, text = state.toText(input);\n    let byLine = text.lines == state.selection.ranges.length;\n    let linewise = lastLinewiseCopy && state.selection.ranges.every(r => r.empty) && lastLinewiseCopy == text.toString();\n    if (linewise) {\n        changes = {\n            changes: state.selection.ranges.map(r => state.doc.lineAt(r.from))\n                .filter((l, i, a) => i == 0 || a[i - 1] != l)\n                .map(line => ({ from: line.from, insert: (byLine ? text.line(i++).slice() : input) + state.lineBreak }))\n        };\n    }\n    else if (byLine) {\n        changes = state.changeByRange(range => {\n            let line = text.line(i++);\n            return { changes: { from: range.from, to: range.to, insert: line.slice() },\n                range: EditorSelection.cursor(range.from + line.length) };\n        });\n    }\n    else {\n        changes = state.replaceSelection(text);\n    }\n    view.dispatch(changes, {\n        annotations: Transaction.userEvent.of(\"paste\"),\n        scrollIntoView: true\n    });\n}\nfunction mustCapture(event) {\n    let mods = (event.ctrlKey ? 1 /* Ctrl */ : 0) | (event.metaKey ? 8 /* Meta */ : 0) |\n        (event.altKey ? 2 /* Alt */ : 0) | (event.shiftKey ? 4 /* Shift */ : 0);\n    let code = event.keyCode, macCtrl = browser.mac && mods == 1 /* Ctrl */;\n    return code == 8 || (macCtrl && code == 72) || // Backspace, Ctrl-h on Mac\n        code == 46 || (macCtrl && code == 68) || // Delete, Ctrl-d on Mac\n        code == 27 || // Esc\n        (mods == (browser.mac ? 8 /* Meta */ : 1 /* Ctrl */) && // Ctrl/Cmd-[biyz]\n            (code == 66 || code == 73 || code == 89 || code == 90));\n}\nhandlers.keydown = (view, event) => {\n    if (mustCapture(event))\n        event.preventDefault();\n    view.inputState.setSelectionOrigin(\"keyboardselection\");\n};\nhandlers.touchdown = handlers.touchmove = view => {\n    view.inputState.setSelectionOrigin(\"pointerselection\");\n};\nhandlers.mousedown = (view, event) => {\n    let style = null;\n    for (let makeStyle of view.state.facet(mouseSelectionStyle)) {\n        style = makeStyle(view, event);\n        if (style)\n            break;\n    }\n    if (!style && event.button == 0)\n        style = basicMouseSelection(view, event);\n    if (style) {\n        if (view.root.activeElement != view.contentDOM)\n            view.observer.ignore(() => focusPreventScroll(view.contentDOM));\n        view.inputState.startMouseSelection(view, event, style);\n    }\n};\nfunction rangeForClick(view, pos, bias, type) {\n    if (type == 1) { // Single click\n        return EditorSelection.cursor(pos, bias);\n    }\n    else if (type == 2) { // Double click\n        return groupAt(view.state, pos, bias);\n    }\n    else { // Triple click\n        let line = LineView.find(view.docView, pos);\n        if (line)\n            return EditorSelection.range(line.posAtStart, line.posAtEnd);\n        let { from, to } = view.state.doc.lineAt(pos);\n        return EditorSelection.range(from, to);\n    }\n}\nlet insideY = (y, rect) => y >= rect.top && y <= rect.bottom;\nlet inside = (x, y, rect) => insideY(y, rect) && x >= rect.left && x <= rect.right;\n// Try to determine, for the given coordinates, associated with the\n// given position, whether they are related to the element before or\n// the element after the position.\nfunction findPositionSide(view, pos, x, y) {\n    let line = LineView.find(view.docView, pos);\n    if (!line)\n        return 1;\n    let off = pos - line.posAtStart;\n    // Line boundaries point into the line\n    if (off == 0)\n        return 1;\n    if (off == line.length)\n        return -1;\n    // Positions on top of an element point at that element\n    let before = line.coordsAt(off, -1);\n    if (before && inside(x, y, before))\n        return -1;\n    let after = line.coordsAt(off, 1);\n    if (after && inside(x, y, after))\n        return 1;\n    // This is probably a line wrap point. Pick before if the point is\n    // beside it.\n    return before && insideY(y, before) ? -1 : 1;\n}\nfunction queryPos(view, event) {\n    let pos = view.posAtCoords({ x: event.clientX, y: event.clientY });\n    if (pos < 0)\n        return null;\n    return { pos, bias: findPositionSide(view, pos, event.clientX, event.clientY) };\n}\nconst BadMouseDetail = browser.ie && browser.ie_version <= 11;\nlet lastMouseDown = null, lastMouseDownCount = 0;\nfunction getClickType(event) {\n    if (!BadMouseDetail)\n        return event.detail;\n    let last = lastMouseDown;\n    lastMouseDown = event;\n    return lastMouseDownCount = !last || (last.timeStamp > Date.now() - 400 && Math.abs(last.clientX - event.clientX) < 2 &&\n        Math.abs(last.clientY - event.clientY) < 2) ? (lastMouseDownCount + 1) % 3 : 1;\n}\nfunction basicMouseSelection(view, event) {\n    let start = queryPos(view, event), type = getClickType(event);\n    let startSel = view.state.selection;\n    let last = start, lastEvent = event;\n    return {\n        update(update) {\n            if (update.changes) {\n                if (start)\n                    start.pos = update.changes.mapPos(start.pos);\n                startSel = startSel.map(update.changes);\n            }\n        },\n        get(event, extend, multiple) {\n            let cur;\n            if (event.clientX == lastEvent.clientX && event.clientY == lastEvent.clientY)\n                cur = last;\n            else {\n                cur = last = queryPos(view, event);\n                lastEvent = event;\n            }\n            if (!cur || !start)\n                return startSel;\n            let range = rangeForClick(view, cur.pos, cur.bias, type);\n            if (start.pos != cur.pos && !extend) {\n                let startRange = rangeForClick(view, start.pos, start.bias, type);\n                let from = Math.min(startRange.from, range.from), to = Math.max(startRange.to, range.to);\n                range = from < range.from ? EditorSelection.range(from, to) : EditorSelection.range(to, from);\n            }\n            if (extend)\n                return startSel.replaceRange(startSel.primary.extend(range.from, range.to));\n            else if (multiple)\n                return startSel.addRange(range);\n            else\n                return EditorSelection.create([range]);\n        }\n    };\n}\nhandlers.dragstart = (view, event) => {\n    let { selection: { primary } } = view.state;\n    let { mouseSelection } = view.inputState;\n    if (mouseSelection)\n        mouseSelection.dragging = primary;\n    if (event.dataTransfer) {\n        event.dataTransfer.setData(\"Text\", view.state.sliceDoc(primary.from, primary.to));\n        event.dataTransfer.effectAllowed = \"copyMove\";\n    }\n};\nhandlers.drop = (view, event) => {\n    if (!event.dataTransfer)\n        return;\n    let dropPos = view.posAtCoords({ x: event.clientX, y: event.clientY });\n    let text = event.dataTransfer.getData(\"Text\");\n    if (dropPos < 0 || !text)\n        return;\n    event.preventDefault();\n    let { mouseSelection } = view.inputState;\n    let del = mouseSelection && mouseSelection.dragging && mouseSelection.dragMove ?\n        { from: mouseSelection.dragging.from, to: mouseSelection.dragging.to } : null;\n    let ins = { from: dropPos, insert: text };\n    let changes = view.state.changes(del ? [del, ins] : ins);\n    view.focus();\n    view.dispatch({\n        changes,\n        selection: { anchor: changes.mapPos(dropPos, -1), head: changes.mapPos(dropPos, 1) },\n        annotations: Transaction.userEvent.of(\"drop\")\n    });\n};\nhandlers.paste = (view, event) => {\n    view.observer.flush();\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    let text = data && data.getData(\"text/plain\");\n    if (text) {\n        doPaste(view, text);\n        event.preventDefault();\n    }\n    else {\n        capturePaste(view);\n    }\n};\nfunction captureCopy(view, text) {\n    // The extra wrapper is somehow necessary on IE/Edge to prevent the\n    // content from being mangled when it is put onto the clipboard\n    let parent = view.dom.parentNode;\n    if (!parent)\n        return;\n    let target = parent.appendChild(document.createElement(\"textarea\"));\n    target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    target.value = text;\n    target.focus();\n    target.selectionEnd = text.length;\n    target.selectionStart = 0;\n    setTimeout(() => {\n        target.remove();\n        view.focus();\n    }, 50);\n}\nfunction copiedRange(state) {\n    let content = [], ranges = [], linewise = false;\n    for (let range of state.selection.ranges)\n        if (!range.empty) {\n            content.push(state.sliceDoc(range.from, range.to));\n            ranges.push(range);\n        }\n    if (!content.length) {\n        // Nothing selected, do a line-wise copy\n        let upto = -1;\n        for (let { from } of state.selection.ranges) {\n            let line = state.doc.lineAt(from);\n            if (line.number > upto) {\n                content.push(line.slice());\n                ranges.push({ from: line.from, to: Math.min(state.doc.length, line.to + 1) });\n            }\n            upto = line.number;\n        }\n        linewise = true;\n    }\n    return { text: content.join(state.lineBreak), ranges, linewise };\n}\nlet lastLinewiseCopy = null;\nhandlers.copy = handlers.cut = (view, event) => {\n    let { text, ranges, linewise } = copiedRange(view.state);\n    if (!text)\n        return;\n    lastLinewiseCopy = linewise ? text : null;\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    if (data) {\n        event.preventDefault();\n        data.clearData();\n        data.setData(\"text/plain\", text);\n    }\n    else {\n        captureCopy(view, text);\n    }\n    if (event.type == \"cut\")\n        view.dispatch({\n            changes: ranges,\n            scrollIntoView: true,\n            annotations: Transaction.userEvent.of(\"cut\")\n        });\n};\nhandlers.focus = handlers.blur = view => {\n    setTimeout(() => {\n        if (view.hasFocus != view.inputState.notifiedFocused)\n            view.update([]);\n    }, 10);\n};\nhandlers.beforeprint = view => {\n    view.viewState.printing = true;\n    view.requestMeasure();\n    setTimeout(() => {\n        view.viewState.printing = false;\n        view.requestMeasure();\n    }, 2000);\n};\nfunction forceClearComposition(view) {\n    if (view.docView.compositionDeco.size)\n        view.update([]);\n}\nhandlers.compositionstart = handlers.compositionupdate = view => {\n    if (!view.inputState.composing) {\n        if (view.docView.compositionDeco.size) {\n            view.observer.flush();\n            forceClearComposition(view);\n        }\n        // FIXME possibly set a timeout to clear it again on Android\n        view.inputState.composing = true;\n    }\n};\nhandlers.compositionend = view => {\n    view.inputState.composing = false;\n    view.inputState.compositionEndedAt = Date.now();\n    setTimeout(() => {\n        if (!view.inputState.composing)\n            forceClearComposition(view);\n    }, 50);\n};\n\nconst observeOptions = {\n    childList: true,\n    characterData: true,\n    subtree: true,\n    characterDataOldValue: true\n};\n// IE11 has very broken mutation observers, so we also listen to\n// DOMCharacterDataModified there\nconst useCharData = browser.ie && browser.ie_version <= 11;\nclass DOMObserver {\n    constructor(view, onChange, onScrollChanged) {\n        this.view = view;\n        this.onChange = onChange;\n        this.onScrollChanged = onScrollChanged;\n        this.active = false;\n        this.ignoreSelection = new DOMSelection;\n        this.delayedFlush = -1;\n        this.queue = [];\n        this.scrollTargets = [];\n        this.intersection = null;\n        this.intersecting = false;\n        // Timeout for scheduling check of the parents that need scroll handlers\n        this.parentCheck = -1;\n        this.dom = view.contentDOM;\n        this.observer = new MutationObserver(mutations => {\n            for (let mut of mutations)\n                this.queue.push(mut);\n            // IE11 will sometimes (on typing over a selection or\n            // backspacing out a single character text node) call the\n            // observer callback before actually updating the DOM\n            if (browser.ie && browser.ie_version <= 11 &&\n                mutations.some(m => m.type == \"childList\" && m.removedNodes.length ||\n                    m.type == \"characterData\" && m.oldValue.length > m.target.nodeValue.length))\n                this.flushSoon();\n            else\n                this.flush();\n        });\n        if (useCharData)\n            this.onCharData = (event) => {\n                this.queue.push({ target: event.target,\n                    type: \"characterData\",\n                    oldValue: event.prevValue });\n                this.flushSoon();\n            };\n        this.onSelectionChange = () => {\n            if (this.view.root.activeElement != this.dom)\n                return;\n            // Deletions on IE11 fire their events in the wrong order, giving\n            // us a selection change event before the DOM changes are\n            // reported.\n            if (browser.ie && browser.ie_version <= 11 && !this.view.state.selection.primary.empty) {\n                let sel = getSelection(this.view.root);\n                // Selection.isCollapsed isn't reliable on IE\n                if (sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset))\n                    return this.flushSoon();\n            }\n            this.flush();\n        };\n        this.start();\n        this.onScroll = this.onScroll.bind(this);\n        window.addEventListener(\"scroll\", this.onScroll);\n        if (typeof IntersectionObserver == \"function\") {\n            this.intersection = new IntersectionObserver(entries => {\n                if (this.parentCheck < 0)\n                    this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1000);\n                if (entries[entries.length - 1].intersectionRatio > 0 != this.intersecting) {\n                    this.intersecting = !this.intersecting;\n                    this.onScrollChanged();\n                }\n            }, {});\n            this.intersection.observe(this.dom);\n        }\n        this.listenForScroll();\n    }\n    onScroll() {\n        if (this.intersecting) {\n            this.flush();\n            this.onScrollChanged();\n        }\n    }\n    listenForScroll() {\n        this.parentCheck = -1;\n        let i = 0, changed = null;\n        for (let dom = this.dom; dom;) {\n            if (dom.nodeType == 1) {\n                if (!changed && i < this.scrollTargets.length && this.scrollTargets[i] == dom)\n                    i++;\n                else if (!changed)\n                    changed = this.scrollTargets.slice(0, i);\n                if (changed)\n                    changed.push(dom);\n                dom = dom.parentNode;\n            }\n            else if (dom.nodeType == 11) { // Shadow root\n                dom = dom.host;\n            }\n            else {\n                break;\n            }\n        }\n        if (i < this.scrollTargets.length && !changed)\n            changed = this.scrollTargets.slice(0, i);\n        if (changed) {\n            for (let dom of this.scrollTargets)\n                dom.removeEventListener(\"scroll\", this.onScroll);\n            for (let dom of this.scrollTargets = changed)\n                dom.addEventListener(\"scroll\", this.onScroll);\n        }\n    }\n    ignore(f) {\n        if (!this.active)\n            return f();\n        try {\n            this.stop();\n            return f();\n        }\n        finally {\n            this.start();\n            this.clear();\n        }\n    }\n    start() {\n        if (this.active)\n            return;\n        this.observer.observe(this.dom, observeOptions);\n        // FIXME is this shadow-root safe?\n        this.dom.ownerDocument.addEventListener(\"selectionchange\", this.onSelectionChange);\n        if (useCharData)\n            this.dom.addEventListener(\"DOMCharacterDataModified\", this.onCharData);\n        this.active = true;\n    }\n    stop() {\n        if (!this.active)\n            return;\n        this.active = false;\n        this.observer.disconnect();\n        this.dom.ownerDocument.removeEventListener(\"selectionchange\", this.onSelectionChange);\n        if (useCharData)\n            this.dom.removeEventListener(\"DOMCharacterDataModified\", this.onCharData);\n    }\n    clearSelection() {\n        this.ignoreSelection.set(getSelection(this.view.root));\n    }\n    // Throw away any pending changes\n    clear() {\n        this.observer.takeRecords();\n        this.queue.length = 0;\n        this.clearSelection();\n    }\n    flushSoon() {\n        if (this.delayedFlush < 0)\n            this.delayedFlush = window.setTimeout(() => { this.delayedFlush = -1; this.flush(); }, 20);\n    }\n    forceFlush() {\n        if (this.delayedFlush >= 0) {\n            window.clearTimeout(this.delayedFlush);\n            this.delayedFlush = -1;\n            this.flush();\n        }\n    }\n    // Apply pending changes, if any\n    flush() {\n        if (this.delayedFlush >= 0)\n            return;\n        let records = this.queue;\n        for (let mut of this.observer.takeRecords())\n            records.push(mut);\n        if (records.length)\n            this.queue = [];\n        let selection = getSelection(this.view.root);\n        let newSel = !this.ignoreSelection.eq(selection) && hasSelection(this.dom, selection);\n        if (records.length == 0 && !newSel)\n            return;\n        let from = -1, to = -1, typeOver = false;\n        for (let record of records) {\n            let range = this.readMutation(record);\n            if (!range)\n                continue;\n            if (range.typeOver)\n                typeOver = true;\n            if (from == -1) {\n                ({ from, to } = range);\n            }\n            else {\n                from = Math.min(range.from, from);\n                to = Math.max(range.to, to);\n            }\n        }\n        let startState = this.view.state;\n        if (from > -1 || newSel)\n            this.onChange(from, to, typeOver);\n        if (this.view.state == startState) { // The view wasn't updated\n            if (this.view.docView.dirty) {\n                this.ignore(() => this.view.docView.sync());\n                this.view.docView.dirty = 0 /* Not */;\n            }\n            this.view.docView.updateSelection();\n        }\n        this.clearSelection();\n    }\n    readMutation(rec) {\n        let cView = this.view.docView.nearest(rec.target);\n        if (!cView || cView.ignoreMutation(rec))\n            return null;\n        cView.markDirty();\n        if (rec.type == \"childList\") {\n            let childBefore = findChild(cView, rec.previousSibling || rec.target.previousSibling, -1);\n            let childAfter = findChild(cView, rec.nextSibling || rec.target.nextSibling, 1);\n            return { from: childBefore ? cView.posAfter(childBefore) : cView.posAtStart,\n                to: childAfter ? cView.posBefore(childAfter) : cView.posAtEnd, typeOver: false };\n        }\n        else { // \"characterData\"\n            return { from: cView.posAtStart, to: cView.posAtEnd, typeOver: rec.target.nodeValue == rec.oldValue };\n        }\n    }\n    destroy() {\n        this.stop();\n        if (this.intersection)\n            this.intersection.disconnect();\n        for (let dom of this.scrollTargets)\n            dom.removeEventListener(\"scroll\", this.onScroll);\n        window.removeEventListener(\"scroll\", this.onScroll);\n        clearTimeout(this.parentCheck);\n    }\n}\nfunction findChild(cView, dom, dir) {\n    while (dom) {\n        let curView = ContentView.get(dom);\n        if (curView && curView.parent == cView)\n            return curView;\n        let parent = dom.parentNode;\n        dom = parent != cView.dom ? parent : dir > 0 ? dom.nextSibling : dom.previousSibling;\n    }\n    return null;\n}\n\n// FIXME reconsider this kludge (does it break reading dom text with newlines?)\nconst LineSep = \"\\ufdda\"; // A Unicode 'non-character', used to denote newlines internally\nfunction applyDOMChange(view, start, end, typeOver) {\n    let change, newSel;\n    let sel = view.state.selection.primary, bounds;\n    if (start > -1 && (bounds = view.docView.domBoundsAround(start, end, 0))) {\n        let { from, to } = bounds;\n        let selPoints = view.docView.impreciseHead || view.docView.impreciseAnchor ? [] : selectionPoints(view.contentDOM, view.root);\n        let reader = new DOMReader(selPoints);\n        reader.readRange(bounds.startDOM, bounds.endDOM);\n        newSel = selectionFromPoints(selPoints, from);\n        let preferredPos = sel.from, preferredSide = null;\n        // Prefer anchoring to end when Backspace is pressed\n        if (view.inputState.lastKeyCode === 8 && view.inputState.lastKeyTime > Date.now() - 100) {\n            preferredPos = sel.to;\n            preferredSide = \"end\";\n        }\n        let diff = findDiff(view.state.doc.sliceString(from, to, LineSep), reader.text, preferredPos - from, preferredSide);\n        if (diff)\n            change = { from: from + diff.from, to: from + diff.toA,\n                insert: Text$1.of(reader.text.slice(diff.from, diff.toB).split(LineSep)) };\n    }\n    else if (view.hasFocus) {\n        let domSel = getSelection(view.root);\n        let { impreciseHead: iHead, impreciseAnchor: iAnchor } = view.docView;\n        let head = iHead && iHead.node == domSel.focusNode && iHead.offset == domSel.focusOffset ? view.state.selection.primary.head\n            : view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset);\n        let anchor = iAnchor && iAnchor.node == domSel.anchorNode && iAnchor.offset == domSel.anchorOffset\n            ? view.state.selection.primary.anchor\n            : selectionCollapsed(domSel) ? head : view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset);\n        if (head != sel.head || anchor != sel.anchor)\n            newSel = EditorSelection.single(anchor, head);\n    }\n    if (!change && !newSel)\n        return;\n    // Heuristic to notice typing over a selected character\n    if (!change && typeOver && !sel.empty && newSel && newSel.primary.empty)\n        change = { from: sel.from, to: sel.to, insert: view.state.doc.slice(sel.from, sel.to) };\n    if (change) {\n        let startState = view.state;\n        // Android browsers don't fire reasonable key events for enter,\n        // backspace, or delete. So this detects changes that look like\n        // they're caused by those keys, and reinterprets them as key\n        // events.\n        if (browser.android &&\n            ((change.from == sel.from && change.to == sel.to &&\n                change.insert.length == 1 && change.insert.lines == 2 &&\n                dispatchKey(view, \"Enter\", 10)) ||\n                (change.from == sel.from - 1 && change.to == sel.to && change.insert.length == 0 &&\n                    dispatchKey(view, \"Backspace\", 8)) ||\n                (change.from == sel.from && change.to == sel.to + 1 && change.insert.length == 0 &&\n                    dispatchKey(view, \"Delete\", 46))))\n            return;\n        let text = change.insert.toString();\n        if (view.state.facet(inputHandler).some(h => h(view, change.from, change.to, text)))\n            return;\n        let tr;\n        if (change.from >= sel.from && change.to <= sel.to && change.to - change.from >= (sel.to - sel.from) / 3) {\n            let before = sel.from < change.from ? startState.doc.sliceString(sel.from, change.from, LineSep) : \"\";\n            let after = sel.to > change.to ? startState.doc.sliceString(change.to, sel.to, LineSep) : \"\";\n            tr = startState.replaceSelection(Text$1.of((before + change.insert.sliceString(0, undefined, LineSep) + after).split(LineSep)));\n        }\n        else {\n            let changes = startState.changes(change);\n            tr = {\n                changes,\n                selection: newSel && !startState.selection.primary.eq(newSel.primary) && newSel.primary.to <= changes.newLength\n                    ? startState.selection.replaceRange(newSel.primary) : undefined\n            };\n        }\n        view.dispatch(tr, { scrollIntoView: true, annotations: Transaction.userEvent.of(\"input\") });\n    }\n    else if (newSel && !newSel.primary.eq(sel)) {\n        let scrollIntoView = false, annotations;\n        if (view.inputState.lastSelectionTime > Date.now() - 50) {\n            if (view.inputState.lastSelectionOrigin == \"keyboardselection\")\n                scrollIntoView = true;\n            else\n                annotations = Transaction.userEvent.of(view.inputState.lastSelectionOrigin);\n        }\n        view.dispatch({ selection: newSel, scrollIntoView, annotations });\n    }\n}\nfunction findDiff(a, b, preferredPos, preferredSide) {\n    let minLen = Math.min(a.length, b.length);\n    let from = 0;\n    while (from < minLen && a.charCodeAt(from) == b.charCodeAt(from))\n        from++;\n    if (from == minLen && a.length == b.length)\n        return null;\n    let toA = a.length, toB = b.length;\n    while (toA > 0 && toB > 0 && a.charCodeAt(toA - 1) == b.charCodeAt(toB - 1)) {\n        toA--;\n        toB--;\n    }\n    if (preferredSide == \"end\") {\n        let adjust = Math.max(0, from - Math.min(toA, toB));\n        preferredPos -= toA + adjust - from;\n    }\n    if (toA < from && a.length < b.length) {\n        let move = preferredPos <= from && preferredPos >= toA ? from - preferredPos : 0;\n        from -= move;\n        toB = from + (toB - toA);\n        toA = from;\n    }\n    else if (toB < from) {\n        let move = preferredPos <= from && preferredPos >= toB ? from - preferredPos : 0;\n        from -= move;\n        toA = from + (toA - toB);\n        toB = from;\n    }\n    return { from, toA, toB };\n}\nclass DOMReader {\n    constructor(points) {\n        this.points = points;\n        this.text = \"\";\n    }\n    readRange(start, end) {\n        if (!start)\n            return;\n        let parent = start.parentNode;\n        for (let cur = start;;) {\n            this.findPointBefore(parent, cur);\n            this.readNode(cur);\n            let next = cur.nextSibling;\n            if (next == end)\n                break;\n            let view = ContentView.get(cur), nextView = ContentView.get(next);\n            if ((view ? view.breakAfter : isBlockElement(cur)) ||\n                ((nextView ? nextView.breakAfter : isBlockElement(next)) && !(cur.nodeName == \"BR\" && !cur.cmIgnore)))\n                this.text += LineSep;\n            cur = next;\n        }\n        this.findPointBefore(parent, end);\n    }\n    readNode(node) {\n        if (node.cmIgnore)\n            return;\n        let view = ContentView.get(node);\n        let fromView = view && view.overrideDOMText;\n        let text;\n        if (fromView != null)\n            text = fromView.sliceString(0, undefined, LineSep);\n        else if (node.nodeType == 3)\n            text = node.nodeValue;\n        else if (node.nodeName == \"BR\")\n            text = node.nextSibling ? LineSep : \"\";\n        else if (node.nodeType == 1)\n            this.readRange(node.firstChild, null);\n        if (text != null) {\n            this.findPointIn(node, text.length);\n            this.text += text;\n        }\n    }\n    findPointBefore(node, next) {\n        for (let point of this.points)\n            if (point.node == node && node.childNodes[point.offset] == next)\n                point.pos = this.text.length;\n    }\n    findPointIn(node, maxLen) {\n        for (let point of this.points)\n            if (point.node == node)\n                point.pos = this.text.length + Math.min(point.offset, maxLen);\n    }\n}\nfunction isBlockElement(node) {\n    return node.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\\d|SECTION|PRE)$/.test(node.nodeName);\n}\nclass DOMPoint {\n    constructor(node, offset) {\n        this.node = node;\n        this.offset = offset;\n        this.pos = -1;\n    }\n}\nfunction selectionPoints(dom, root) {\n    let result = [];\n    if (root.activeElement != dom)\n        return result;\n    let { anchorNode, anchorOffset, focusNode, focusOffset } = getSelection(root);\n    if (anchorNode) {\n        result.push(new DOMPoint(anchorNode, anchorOffset));\n        if (focusNode != anchorNode || focusOffset != anchorOffset)\n            result.push(new DOMPoint(focusNode, focusOffset));\n    }\n    return result;\n}\nfunction selectionFromPoints(points, base) {\n    if (points.length == 0)\n        return null;\n    let anchor = points[0].pos, head = points.length == 2 ? points[1].pos : anchor;\n    return anchor > -1 && head > -1 ? EditorSelection.single(anchor + base, head + base) : null;\n}\nfunction dispatchKey(view, name, code) {\n    let options = { key: name, code: name, keyCode: code, which: code, cancelable: true };\n    let down = new KeyboardEvent(\"keydown\", options);\n    view.contentDOM.dispatchEvent(down);\n    let up = new KeyboardEvent(\"keyup\", options);\n    view.contentDOM.dispatchEvent(up);\n    return down.defaultPrevented || up.defaultPrevented;\n}\n\n// The editor's update state machine looks something like this:\n//\n//     Idle  Updating  Idle (unchecked)  Measuring  Idle\n//                                               \n//                                         Updating (measure)\n//\n// The difference between 'Idle' and 'Idle (unchecked)' lies in\n// whether a layout check has been scheduled. A regular update through\n// the `update` method updates the DOM in a write-only fashion, and\n// relies on a check (scheduled with `requestAnimationFrame`) to make\n// sure everything is where it should be and the viewport covers the\n// visible code. That check continues to measure and then optionally\n// update until it reaches a coherent state.\n/// An editor view represents the editor's user interface. It holds\n/// the editable DOM surface, and possibly other elements such as the\n/// line number gutter. It handles events and dispatches state\n/// transactions for editing actions.\nclass EditorView {\n    /// Construct a new view. You'll usually want to put `view.dom` into\n    /// your document after creating a view, so that the user can see\n    /// it.\n    constructor(\n    /// Configuration options.\n    config = {}) {\n        this.plugins = [];\n        this.editorAttrs = {};\n        this.contentAttrs = {};\n        this.bidiCache = [];\n        /// @internal\n        this.updateState = 2 /* Updating */;\n        /// @internal\n        this.measureScheduled = -1;\n        /// @internal\n        this.measureRequests = [];\n        this.contentDOM = document.createElement(\"div\");\n        this.scrollDOM = document.createElement(\"div\");\n        this.scrollDOM.className = themeClass(\"scroller\");\n        this.scrollDOM.appendChild(this.contentDOM);\n        this.dom = document.createElement(\"div\");\n        this.dom.appendChild(this.scrollDOM);\n        this._dispatch = config.dispatch || ((tr) => this.update([tr]));\n        this.dispatch = this.dispatch.bind(this);\n        this.root = (config.root || document);\n        this.viewState = new ViewState(config.state || EditorState.create());\n        this.plugins = this.state.facet(viewPlugin).map(spec => PluginInstance.create(spec, this));\n        this.observer = new DOMObserver(this, (from, to, typeOver) => applyDOMChange(this, from, to, typeOver), () => this.measure());\n        this.docView = new DocView(this);\n        this.inputState = new InputState(this);\n        this.mountStyles();\n        this.updateAttrs();\n        this.updateState = 0 /* Idle */;\n        ensureGlobalHandler();\n        this.requestMeasure();\n        if (config.parent)\n            config.parent.appendChild(this.dom);\n    }\n    /// The current editor state.\n    get state() { return this.viewState.state; }\n    /// To be able to display large documents without consuming too much\n    /// memory or overloading the browser, CodeMirror only draws the\n    /// code that is visible (plus a margin around it) to the DOM. This\n    /// property tells you the extent of the current drawn viewport, in\n    /// document positions.\n    get viewport() { return this.viewState.viewport; }\n    /// When there are, for example, large collapsed ranges in the\n    /// viewport, its size can be a lot bigger than the actual visible\n    /// content. Thus, if you are doing something like styling the\n    /// content in the viewport, it is preferable to only do so for\n    /// these ranges, which are the subset of the viewport that is\n    /// actually drawn.\n    get visibleRanges() { return this.viewState.visibleRanges; }\n    /// Returns false when the editor is entirely scrolled out of view\n    /// or otherwise hidden.\n    get inView() { return this.viewState.inView; }\n    dispatch(...input) {\n        this._dispatch(input.length == 1 && input[0] instanceof Transaction ? input[0]\n            : this.state.update(...input));\n    }\n    /// Update the view for the given array of transactions. This will\n    /// update the visible document and selection to match the state\n    /// produced by the transactions, and notify view plugins of the\n    /// change. You should usually call\n    /// [`dispatch`](#view.EditorView.dispatch) instead, which uses this\n    /// as a primitive.\n    update(transactions) {\n        if (this.updateState != 0 /* Idle */)\n            throw new Error(\"Calls to EditorView.update are not allowed while an update is in progress\");\n        this.updateState = 2 /* Updating */;\n        let state = this.state;\n        for (let tr of transactions) {\n            if (tr.startState != state)\n                throw new RangeError(\"Trying to update state with a transaction that doesn't start from the previous state.\");\n            state = tr.state;\n        }\n        let update = new ViewUpdate(this, state, transactions);\n        let scrollTo = transactions.some(tr => tr.scrollIntoView) ? state.selection.primary : null;\n        this.viewState.update(update, scrollTo);\n        this.bidiCache = CachedOrder.update(this.bidiCache, update.changes);\n        if (!update.empty)\n            this.updatePlugins(update);\n        let redrawn = this.docView.update(update);\n        if (this.state.facet(styleModule) != this.styleModules)\n            this.mountStyles();\n        this.updateAttrs();\n        this.updateState = 0 /* Idle */;\n        if (redrawn || scrollTo || this.viewState.mustEnforceCursorAssoc)\n            this.requestMeasure();\n        for (let listener of this.state.facet(updateListener))\n            listener(update);\n    }\n    /// Reset the view to the given state. (This will cause the entire\n    /// document to be redrawn and all view plugins to be reinitialized,\n    /// so you should probably only use it when the new state isn't\n    /// derived from the old state. Otherwise, use\n    /// [`update`](#view.EditorView.update) instead.)\n    setState(newState) {\n        if (this.updateState != 0 /* Idle */)\n            throw new Error(\"Calls to EditorView.setState are not allowed while an update is in progress\");\n        this.updateState = 2 /* Updating */;\n        for (let plugin of this.plugins)\n            plugin.destroy(this);\n        this.viewState = new ViewState(newState);\n        this.plugins = newState.facet(viewPlugin).map(spec => PluginInstance.create(spec, this));\n        this.docView = new DocView(this);\n        this.inputState.ensureHandlers(this);\n        this.mountStyles();\n        this.updateAttrs();\n        this.bidiCache = [];\n        this.updateState = 0 /* Idle */;\n        this.requestMeasure();\n    }\n    updatePlugins(update) {\n        let prevSpecs = update.prevState.facet(viewPlugin), specs = update.state.facet(viewPlugin);\n        if (prevSpecs != specs) {\n            let newPlugins = [], reused = [];\n            for (let spec of specs) {\n                let found = prevSpecs.indexOf(spec);\n                if (found < 0) {\n                    newPlugins.push(PluginInstance.create(spec, this));\n                }\n                else {\n                    let plugin = this.plugins[found].update(update);\n                    reused.push(plugin);\n                    newPlugins.push(plugin);\n                }\n            }\n            for (let plugin of this.plugins)\n                if (reused.indexOf(plugin) < 0)\n                    plugin.destroy(this);\n            this.plugins = newPlugins;\n            this.inputState.ensureHandlers(this);\n        }\n        else {\n            for (let i = 0; i < this.plugins.length; i++)\n                this.plugins[i] = this.plugins[i].update(update);\n        }\n    }\n    /// @internal\n    measure() {\n        if (this.measureScheduled > -1)\n            cancelAnimationFrame(this.measureScheduled);\n        this.measureScheduled = 1; // Prevent requestMeasure calls from scheduling another animation frame\n        let updated = null;\n        for (let i = 0;; i++) {\n            this.updateState = 1 /* Measuring */;\n            let changed = this.viewState.measure(this.docView, i > 0);\n            if (!i)\n                for (let plugin of this.plugins)\n                    plugin.measure(this);\n            let measuring = this.measureRequests;\n            if (!changed && !measuring.length && this.viewState.scrollTo == null)\n                break;\n            this.measureRequests = [];\n            if (i > 5) {\n                console.warn(\"Viewport failed to stabilize\");\n                break;\n            }\n            let measured = measuring.map(m => {\n                try {\n                    return m.read(this);\n                }\n                catch (e) {\n                    logException(this.state, e);\n                    return BadMeasure;\n                }\n            });\n            let update = new ViewUpdate(this, this.state);\n            update.flags |= changed;\n            if (!updated)\n                updated = update;\n            else\n                updated.flags |= changed;\n            this.updateState = 2 /* Updating */;\n            this.updatePlugins(update);\n            if (changed)\n                this.docView.update(update);\n            for (let i = 0; i < measuring.length; i++)\n                if (measured[i] != BadMeasure) {\n                    try {\n                        measuring[i].write(measured[i], this);\n                    }\n                    catch (e) {\n                        logException(this.state, e);\n                    }\n                }\n            if (this.viewState.scrollTo) {\n                this.docView.scrollPosIntoView(this.viewState.scrollTo.head, this.viewState.scrollTo.assoc);\n                this.viewState.scrollTo = null;\n            }\n            if (!(changed & 4 /* Viewport */) && this.measureRequests.length == 0)\n                break;\n        }\n        this.updateState = 0 /* Idle */;\n        this.measureScheduled = -1;\n        if (updated)\n            for (let listener of this.state.facet(updateListener))\n                listener(updated);\n    }\n    /// Get the CSS classes for the currently active editor themes.\n    get themeClasses() {\n        return baseThemeID + \" \" +\n            (this.state.facet(darkTheme) ? baseDarkThemeID : baseLightThemeID) + \" \" +\n            this.state.facet(theme);\n    }\n    updateAttrs() {\n        let editorAttrs = combineAttrs(this.state.facet(editorAttributes), {\n            class: themeClass(\"wrap\") + (this.hasFocus ? \" cm-focused \" : \" \") + this.themeClasses\n        });\n        updateAttrs(this.dom, this.editorAttrs, editorAttrs);\n        this.editorAttrs = editorAttrs;\n        let contentAttrs = combineAttrs(this.state.facet(contentAttributes), {\n            spellcheck: \"false\",\n            contenteditable: String(this.state.facet(editable)),\n            class: themeClass(\"content\"),\n            style: `${browser.tabSize}: ${this.state.tabSize}`,\n            role: \"textbox\",\n            \"aria-multiline\": \"true\"\n        });\n        updateAttrs(this.contentDOM, this.contentAttrs, contentAttrs);\n        this.contentAttrs = contentAttrs;\n    }\n    mountStyles() {\n        this.styleModules = this.state.facet(styleModule);\n        StyleModule.mount(this.root, this.styleModules.concat(baseTheme).reverse());\n    }\n    /// Find the DOM parent node and offset (child offset if `node` is\n    /// an element, character offset when it is a text node) at the\n    /// given document position.\n    domAtPos(pos) {\n        return this.docView.domAtPos(pos);\n    }\n    /// Find the document position at the given DOM node. Can be useful\n    /// for associating positions with DOM events. Will raise an error\n    /// when `node` isn't part of the editor content.\n    posAtDOM(node, offset = 0) {\n        return this.docView.posFromDOM(node, offset);\n    }\n    readMeasured() {\n        if (this.updateState == 2 /* Updating */)\n            throw new Error(\"Reading the editor layout isn't allowed during an update\");\n        if (this.updateState == 0 /* Idle */ && this.measureScheduled > -1)\n            this.measure();\n    }\n    /// Make sure plugins get a chance to measure the DOM before the\n    /// next frame. Calling this is preferable to messing with the DOM\n    /// directly from, for example, an even handler, because it'll make\n    /// sure measuring and drawing done by other components is\n    /// synchronized, avoiding unnecessary DOM layout computations.\n    requestMeasure(request) {\n        if (this.measureScheduled < 0)\n            this.measureScheduled = requestAnimationFrame(() => this.measure());\n        if (request) {\n            if (request.key != null)\n                for (let i = 0; i < this.measureRequests.length; i++) {\n                    if (this.measureRequests[i].key === request.key) {\n                        this.measureRequests[i] = request;\n                        return;\n                    }\n                }\n            this.measureRequests.push(request);\n        }\n    }\n    /// Collect all values provided by the active plugins for a given\n    /// field.\n    pluginField(field) {\n        // FIXME make this error when called during plugin updating\n        let result = [];\n        for (let plugin of this.plugins)\n            plugin.takeField(field, result);\n        return result;\n    }\n    /// Get the value of a specific plugin, if present. Note that\n    /// plugins that crash can be dropped from a view, so even when you\n    /// know you registered a given plugin, it is recommended to check\n    /// the return value of this method.\n    plugin(plugin) {\n        for (let inst of this.plugins)\n            if (inst.spec == plugin)\n                return inst.value;\n        return null;\n    }\n    /// Find the line or block widget at the given vertical position.\n    /// `editorTop`, if given, provides the vertical position of the top\n    /// of the editor. It defaults to the editor's screen position\n    /// (which will force a DOM layout).\n    blockAtHeight(height, editorTop) {\n        this.readMeasured();\n        return this.viewState.blockAtHeight(height, ensureTop(editorTop, this.contentDOM));\n    }\n    /// Find information for the visual line (see\n    /// [`visualLineAt`](#view.EditorView.visualLineAt)) at the given\n    /// vertical position. The resulting block info might hold another\n    /// array of block info structs in its `type` field if this line\n    /// consists of more than one block.\n    ///\n    /// Heights are interpreted relative to the given `editorTop`\n    /// position. When not given, the top position of the editor's\n    /// [content element](#view.EditorView.contentDOM) is taken.\n    visualLineAtHeight(height, editorTop) {\n        this.readMeasured();\n        return this.viewState.lineAtHeight(height, ensureTop(editorTop, this.contentDOM));\n    }\n    /// Find the extent and height of the visual line (the content shown\n    /// in the editor as a line, which may be smaller than a document\n    /// line when broken up by block widgets, or bigger than a document\n    /// line when line breaks are covered by replaced decorations) at\n    /// the given position.\n    ///\n    /// Vertical positions are computed relative to the `editorTop`\n    /// argument. You can pass `view.dom.getBoundingClientRect().top`\n    /// here to get screen coordinates.\n    visualLineAt(pos, editorTop = 0) {\n        return this.viewState.lineAt(pos, editorTop);\n    }\n    /// Iterate over the height information of the lines in the\n    /// viewport.\n    viewportLines(f, editorTop) {\n        let { from, to } = this.viewport;\n        this.viewState.forEachLine(from, to, f, ensureTop(editorTop, this.contentDOM));\n    }\n    /// The editor's total content height.\n    get contentHeight() {\n        return this.viewState.heightMap.height + this.viewState.paddingTop + this.viewState.paddingBottom;\n    }\n    /// Move a cursor position by [grapheme\n    /// cluster](#text.nextClusterBreak). `forward` determines whether\n    /// the motion is away from the line start, or towards it. Motion in\n    /// bidirectional text is in visual order, in the editor's [text\n    /// direction](#view.EditorView.textDirection). When the start\n    /// position was the last one on the line, the returned position\n    /// will be across the line break. If there is no further line, the\n    /// original position is returned.\n    moveByChar(start, forward, by) {\n        return moveByChar(this, start, forward, by);\n    }\n    /// Move a cursor position across the next group of either\n    /// [letters](#state.EditorState.charCategorizer) or non-letter\n    /// non-whitespace characters.\n    moveByGroup(start, forward) {\n        return moveByChar(this, start, forward, initial => byGroup(this, start.head, initial));\n    }\n    /// Move to the next line boundary in the given direction. If\n    /// `includeWrap` is true, line wrapping is on, and there is a\n    /// further wrap point on the current line, the wrap point will be\n    /// returned. Otherwise this function will return the start or end\n    /// of the line.\n    moveToLineBoundary(start, forward, includeWrap = true) {\n        return moveToLineBoundary(this, start, forward, includeWrap);\n    }\n    /// Move a cursor position vertically. When `distance` isn't given,\n    /// it defaults to moving to the next line (including wrapped\n    /// lines). Otherwise, `distance` should provide a positive distance\n    /// in pixels.\n    ///\n    /// When `start` has a\n    /// [`goalColumn`](#state.SelectionRange.goalColumn), the vertical\n    /// motion will use that as a target horizontal position. Otherwise,\n    /// the cursor's own horizontal position is used. The returned\n    /// cursor will have its goal column set to whichever column was\n    /// used.\n    moveVertically(start, forward, distance) {\n        return moveVertically(this, start, forward, distance);\n    }\n    /// Scroll the given document position into view.\n    scrollPosIntoView(pos) {\n        this.viewState.scrollTo = EditorSelection.cursor(pos);\n        this.requestMeasure();\n    }\n    /// Get the document position at the given screen coordinates.\n    /// Returns -1 if no valid position could be found.\n    posAtCoords(coords) {\n        this.readMeasured();\n        // FIXME return null instead, so you at least get a type error\n        // when you forget the failure case?\n        return posAtCoords(this, coords);\n    }\n    /// Get the screen coordinates at the given document position.\n    coordsAtPos(pos, side = 1) {\n        this.readMeasured();\n        let line = this.state.doc.lineAt(pos), order = this.bidiSpans(line);\n        let rect = this.docView.coordsAt(pos, side);\n        if (!rect || rect.left == rect.right)\n            return rect;\n        let span = order[BidiSpan.find(order, pos - line.from, -1, side)];\n        return flattenRect(rect, (span.dir == Direction.LTR) == (side > 0));\n    }\n    /// The default width of a character in the editor. May not\n    /// accurately reflect the width of all characters.\n    get defaultCharacterWidth() { return this.viewState.heightOracle.charWidth; }\n    /// The default height of a line in the editor.\n    get defaultLineHeight() { return this.viewState.heightOracle.lineHeight; }\n    /// The text direction (`direction` CSS property) of the editor.\n    get textDirection() { return this.viewState.heightOracle.direction; }\n    /// Whether this editor [wraps lines](#view.EditorView.lineWrapping)\n    /// (as determined by the `white-space` CSS property of its content\n    /// element).\n    get lineWrapping() { return this.viewState.heightOracle.lineWrapping; }\n    /// Returns the bidirectional text structure of the given line\n    /// (which should be in the current document) as an array of span\n    /// objects. The order of these spans matches the [text\n    /// direction](#view.EditorView.textDirection)if that is\n    /// left-to-right, the leftmost spans come first, otherwise the\n    /// rightmost spans come first.\n    bidiSpans(line) {\n        if (line.length > MaxBidiLine)\n            return trivialOrder(line.length);\n        let dir = this.textDirection;\n        for (let entry of this.bidiCache)\n            if (entry.from == line.from && entry.dir == dir)\n                return entry.order;\n        let order = computeOrder(line.slice(), this.textDirection);\n        this.bidiCache.push(new CachedOrder(line.from, line.to, dir, order));\n        return order;\n    }\n    /// Check whether the editor has focus.\n    get hasFocus() {\n        return this.root.activeElement == this.contentDOM;\n    }\n    /// Put focus on the editor.\n    focus() {\n        this.observer.ignore(() => {\n            focusPreventScroll(this.contentDOM);\n            this.docView.updateSelection();\n        });\n    }\n    /// Clean up this editor view, removing its element from the\n    /// document, unregistering event handlers, and notifying\n    /// plugins. The view instance can no longer be used after\n    /// calling this.\n    destroy() {\n        for (let plugin of this.plugins)\n            plugin.destroy(this);\n        this.inputState.destroy();\n        this.dom.remove();\n        this.observer.destroy();\n        if (this.measureScheduled > -1)\n            cancelAnimationFrame(this.measureScheduled);\n    }\n    /// Facet that can be used to add DOM event handlers. The value\n    /// should be an object mapping event names to handler functions. The\n    /// first such function to return true will be assumed to have handled\n    /// that event, and no other handlers or built-in behavior will be\n    /// activated for it.\n    static domEventHandlers(handlers) {\n        return ViewPlugin.define(() => ({}), { eventHandlers: handlers });\n    }\n    /// Create a theme extension. The argument object should map [theme\n    /// selectors](#view.themeClass) to styles, which are (potentially\n    /// nested) [style\n    /// declarations](https://github.com/marijnh/style-mod#documentation)\n    /// providing the CSS styling for the selector.\n    ///\n    /// When `dark` is set to true, the theme will be marked as dark,\n    /// which causes the [base theme](#view.EditorView^baseTheme) rules\n    /// marked with `@dark` to apply instead of those marked with\n    /// `@light`.\n    static theme(spec, options) {\n        let prefix = StyleModule.newName();\n        let result = [theme.of(prefix), styleModule.of(buildTheme(prefix, spec))];\n        if (options && options.dark)\n            result.push(darkTheme.of(true));\n        return result;\n    }\n    /// Create an extension that adds styles to the base theme. The\n    /// given object works much like the one passed to\n    /// [`theme`](#view.EditorView^theme), but allows selectors to be\n    /// marked by adding `@dark` to their end to only apply when there\n    /// is a dark theme active, or by `@light` to only apply when there\n    /// is _no_ dark theme active.\n    static baseTheme(spec) {\n        return precedence(styleModule.of(buildTheme(baseThemeID, spec)), \"fallback\");\n    }\n}\n/// Facet to add a [style\n/// module](https://github.com/marijnh/style-mod#readme) to an editor\n/// view. The view will ensure that the module is registered in its\n/// [document root](#view.EditorView.constructor^config.root).\nEditorView.styleModule = styleModule;\n/// An input handler can be used to override the way changes to the\n/// content are handled. A handler is passed the document positions\n/// between which the change was found, and the new content. When it\n/// returns true, no further input handlers are called and the\n/// default behavior is prevented.\nEditorView.inputHandler = inputHandler;\n/// Allows you to provide a function that should be called when the\n/// library catches an exception from an extension (mostly from view\n/// plugins, but may be used by other extensions to route exceptions\n/// from user-code-provided callbacks). This is mostly useful for\n/// debugging and logging. See [`logException`](#view.logException).\nEditorView.exceptionSink = exceptionSink;\n/// A facet that can be used to have a listener function be notified\n/// every time the view updates.\nEditorView.updateListener = updateListener;\n/// Facet that controls whether the editor content is editable. When\n/// its the highest-precedence value is `false`, editing is\n/// disabled, and the content element will no longer have its\n/// `contenteditable` attribute set to `true`. (Note that this\n/// doesn't affect API calls that change the editor content, even\n/// when those are bound to keys or buttons.)\nEditorView.editable = editable;\n/// Facet used to configure whether a given selection drag event\n/// should move or copy the selection. The given predicate will be\n/// called with the `mousedown` event, and can return `true` when\n/// the drag should move the content.\nEditorView.dragMovesSelection = dragMovesSelection;\n/// Facet used to configure whether a given selecting click adds\n/// a new range to the existing selection or replaces it entirely.\nEditorView.clickAddsSelectionRange = clickAddsSelectionRange;\n/// Allows you to influence the way mouse selection happens. The\n/// functions in this facet will be called for a `mousedown` event\n/// on the editor, and can return an object that overrides the way a\n/// selection is computed from that mouse click or drag.\nEditorView.mouseSelectionStyle = mouseSelectionStyle;\n/// A facet that determines which [decorations](#view.Decoration)\n/// are shown in the view. See also [view\n/// plugins](#view.EditorView^decorations), which have a separate\n/// mechanism for providing decorations.\nEditorView.decorations = decorations;\n/// An extension that enables line wrapping in the editor.\nEditorView.lineWrapping = EditorView.theme({ content: { whiteSpace: \"pre-wrap\" } });\n/// Facet that provides attributes for the editor's editable DOM\n/// element.\nEditorView.contentAttributes = contentAttributes;\n/// Facet that provides editor DOM attributes for the editor's\n/// outer element.\nEditorView.editorAttributes = editorAttributes;\n// Maximum line length for which we compute accurate bidi info\nconst MaxBidiLine = 4096;\nfunction ensureTop(given, dom) {\n    return given == null ? dom.getBoundingClientRect().top : given;\n}\nlet resizeDebounce = -1;\nfunction ensureGlobalHandler() {\n    window.addEventListener(\"resize\", () => {\n        if (resizeDebounce == -1)\n            resizeDebounce = setTimeout(handleResize, 50);\n    });\n}\nfunction handleResize() {\n    resizeDebounce = -1;\n    let found = document.querySelectorAll(\".cm-content\");\n    for (let i = 0; i < found.length; i++) {\n        let docView = ContentView.get(found[i]);\n        if (docView)\n            docView.editorView.requestMeasure();\n    }\n}\nconst BadMeasure = {};\nclass CachedOrder {\n    constructor(from, to, dir, order) {\n        this.from = from;\n        this.to = to;\n        this.dir = dir;\n        this.order = order;\n    }\n    static update(cache, changes) {\n        if (changes.empty)\n            return cache;\n        let result = [], lastDir = cache.length ? cache[cache.length - 1].dir : Direction.LTR;\n        for (let i = Math.max(0, cache.length - 10); i < cache.length; i++) {\n            let entry = cache[i];\n            if (entry.dir == lastDir && !changes.touchesRange(entry.from, entry.to))\n                result.push(new CachedOrder(changes.mapPos(entry.from, 1), changes.mapPos(entry.to, -1), entry.dir, entry.order));\n        }\n        return result;\n    }\n}\n\nconst currentPlatform = typeof navigator == \"undefined\" ? \"key\"\n    : /Mac/.test(navigator.platform) ? \"mac\"\n        : /Win/.test(navigator.platform) ? \"win\"\n            : /Linux|X11/.test(navigator.platform) ? \"linux\"\n                : \"key\";\nfunction normalizeKeyName(name, platform) {\n    const parts = name.split(/-(?!$)/);\n    let result = parts[parts.length - 1];\n    if (result == \"Space\")\n        result = \" \";\n    let alt, ctrl, shift, meta;\n    for (let i = 0; i < parts.length - 1; ++i) {\n        const mod = parts[i];\n        if (/^(cmd|meta|m)$/i.test(mod))\n            meta = true;\n        else if (/^a(lt)?$/i.test(mod))\n            alt = true;\n        else if (/^(c|ctrl|control)$/i.test(mod))\n            ctrl = true;\n        else if (/^s(hift)?$/i.test(mod))\n            shift = true;\n        else if (/^mod$/i.test(mod)) {\n            if (platform == \"mac\")\n                meta = true;\n            else\n                ctrl = true;\n        }\n        else\n            throw new Error(\"Unrecognized modifier name: \" + mod);\n    }\n    if (alt)\n        result = \"Alt-\" + result;\n    if (ctrl)\n        result = \"Ctrl-\" + result;\n    if (meta)\n        result = \"Meta-\" + result;\n    if (shift)\n        result = \"Shift-\" + result;\n    return result;\n}\nfunction modifiers(name, event, shift) {\n    if (event.altKey)\n        name = \"Alt-\" + name;\n    if (event.ctrlKey)\n        name = \"Ctrl-\" + name;\n    if (event.metaKey)\n        name = \"Meta-\" + name;\n    if (shift !== false && event.shiftKey)\n        name = \"Shift-\" + name;\n    return name;\n}\nconst keymaps = Facet.define();\nconst handleKeyEvents = EditorView.domEventHandlers({\n    keydown(event, view) {\n        return runHandlers(view.state.facet(keymaps), event, view, \"editor\");\n    }\n});\n/// Create a view extension that registers a keymap.\n///\n/// You can add multiple keymap extensions to an editor. Their\n/// priorities determine their precedence (the ones specified early or\n/// with high priority get checked first). When a handler has returned\n/// `true` for a given key, no further handlers are called.\n///\n/// When a key is bound multiple times (either in a single keymap or\n/// in separate maps), the bound commands all get a chance to handle\n/// the key stroke, in order of precedence, until one of them returns\n/// true.\nfunction keymap(bindings, platform) {\n    return [handleKeyEvents, keymaps.of(buildKeymap(bindings, platform))];\n}\n/// Run the key handlers registered for a given scope. Returns true if\n/// any of them handled the event.\nfunction runScopeHandlers(view, event, scope) {\n    return runHandlers(view.state.facet(keymaps), event, view, scope);\n}\nlet storedPrefix = null;\nconst PrefixTimeout = 4000;\nfunction buildKeymap(bindings, platform = currentPlatform) {\n    let bound = Object.create(null);\n    let isPrefix = Object.create(null);\n    let checkPrefix = (name, is) => {\n        let current = isPrefix[name];\n        if (current == null)\n            isPrefix[name] = is;\n        else if (current != is)\n            throw new Error(\"Key binding \" + name + \" is used both as a regular binding and as a multi-stroke prefix\");\n    };\n    let add = (scope, key, command, preventDefault) => {\n        let scopeObj = bound[scope] || (bound[scope] = Object.create(null));\n        let parts = key.split(/ (?!$)/).map(k => normalizeKeyName(k, platform));\n        for (let i = 1; i < parts.length; i++) {\n            let prefix = parts.slice(0, i).join(\" \");\n            checkPrefix(prefix, true);\n            if (!scopeObj[prefix])\n                scopeObj[prefix] = {\n                    preventDefault: true,\n                    commands: [(view) => {\n                            let ourObj = storedPrefix = { view, prefix, scope };\n                            setTimeout(() => { if (storedPrefix == ourObj)\n                                storedPrefix = null; }, PrefixTimeout);\n                            return true;\n                        }]\n                };\n        }\n        let full = parts.join(\" \");\n        checkPrefix(full, false);\n        let binding = scopeObj[full] || (scopeObj[full] = { preventDefault: false, commands: [] });\n        binding.commands.push(command);\n        if (preventDefault)\n            binding.preventDefault = true;\n    };\n    for (let b of bindings) {\n        let name = b[platform] || b.key;\n        if (!name)\n            continue;\n        for (let scope of b.scope ? b.scope.split(\" \") : [\"editor\"]) {\n            add(scope, name, b.run, b.preventDefault);\n            if (b.shift)\n                add(scope, \"Shift-\" + name, b.shift, b.preventDefault);\n        }\n    }\n    return bound;\n}\nfunction runHandlers(maps, event, view, scope) {\n    let name = keyName(event), isChar = name.length == 1 && name != \" \";\n    let prefix = \"\";\n    if (storedPrefix && storedPrefix.view == view && storedPrefix.scope == scope) {\n        prefix = storedPrefix.prefix + \" \";\n        storedPrefix = null;\n    }\n    let fallthrough = !!prefix;\n    let runFor = (binding) => {\n        if (binding) {\n            for (let cmd of binding.commands)\n                if (cmd(view))\n                    return true;\n            if (binding.preventDefault)\n                fallthrough = true;\n        }\n        return false;\n    };\n    for (let map of maps) {\n        let scopeObj = map[scope], baseName;\n        if (!scopeObj)\n            continue;\n        if (runFor(scopeObj[prefix + modifiers(name, event, !isChar)]))\n            return true;\n        if (isChar && (event.shiftKey || event.altKey || event.metaKey) &&\n            (baseName = base[event.keyCode]) && baseName != name) {\n            if (runFor(scopeObj[prefix + modifiers(baseName, event, true)]))\n                return true;\n        }\n        else if (isChar && event.shiftKey) {\n            if (runFor(scopeObj[prefix + modifiers(name, event, true)]))\n                return true;\n        }\n    }\n    return fallthrough;\n}\n\nconst field = StateField.define({\n    create(state) {\n        return decorateSelections(state.selection);\n    },\n    update(deco, tr) {\n        return tr.docChanged || tr.selection ? decorateSelections(tr.state.selection) : deco;\n    },\n    provide: [EditorView.decorations]\n});\n/// Returns an extension that enables multiple selections for the\n/// editor. Secondary cursors and selected ranges are drawn with\n/// simple decorations, and might not look the same as the primary\n/// native selection.\nfunction multipleSelections() {\n    return [\n        EditorState.allowMultipleSelections.of(true),\n        field\n    ];\n}\nclass CursorWidget extends WidgetType {\n    toDOM() {\n        let span = document.createElement(\"span\");\n        span.className = themeClass(\"secondaryCursor\");\n        return span;\n    }\n}\nCursorWidget.deco = Decoration.widget({ widget: new CursorWidget(null) });\nconst rangeMark = Decoration.mark({ class: themeClass(\"secondarySelection\") });\nfunction decorateSelections(selection) {\n    let { ranges, primaryIndex } = selection;\n    if (ranges.length == 1)\n        return Decoration.none;\n    let deco = [];\n    for (let i = 0; i < ranges.length; i++)\n        if (i != primaryIndex) {\n            let range = ranges[i];\n            deco.push(range.empty ? CursorWidget.deco.range(range.from) : rangeMark.range(ranges[i].from, ranges[i].to));\n        }\n    return Decoration.set(deco);\n}\n\nconst Specials = /[\\u0000-\\u0008\\u000a-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200c\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/gu;\nconst Names = {\n    0: \"null\",\n    7: \"bell\",\n    8: \"backspace\",\n    10: \"newline\",\n    11: \"vertical tab\",\n    13: \"carriage return\",\n    27: \"escape\",\n    8203: \"zero width space\",\n    8204: \"zero width non-joiner\",\n    8205: \"zero width joiner\",\n    8206: \"left-to-right mark\",\n    8207: \"right-to-left mark\",\n    8232: \"line separator\",\n    8233: \"paragraph separator\",\n    65279: \"zero width no-break space\",\n    65532: \"object replacement\"\n};\nlet _supportsTabSize = null;\nfunction supportsTabSize() {\n    if (_supportsTabSize == null && typeof document != \"undefined\" && document.body) {\n        let styles = document.body.style;\n        _supportsTabSize = (styles.tabSize || styles.MozTabSize) != null;\n    }\n    return _supportsTabSize || false;\n}\nconst UnicodeRegexpSupport = /x/.unicode != null ? \"gu\" : \"g\";\nconst specialCharConfig = Facet.define({\n    combine(configs) {\n        // FIXME make configurations compose properly\n        let config = combineConfig(configs, {\n            render: null,\n            specialChars: Specials,\n            addSpecialChars: null\n        });\n        if (config.replaceTabs = !supportsTabSize())\n            config.specialChars = new RegExp(\"\\t|\" + config.specialChars.source, UnicodeRegexpSupport);\n        if (config.addSpecialChars)\n            config.specialChars = new RegExp(config.specialChars.source + \"|\" + config.addSpecialChars.source, UnicodeRegexpSupport);\n        return config;\n    }\n});\n/// Returns an extension that installs highlighting of special\n/// characters.\nfunction highlightSpecialChars(\n/// Configuration options.\nconfig = {}) {\n    let ext = [specialCharConfig.of(config), specialCharPlugin];\n    if (!supportsTabSize())\n        ext.push(tabStyleExt);\n    return ext;\n}\nconst specialCharPlugin = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.decorations = Decoration.none;\n        this.decorationCache = Object.create(null);\n        this.recompute();\n    }\n    update(update) {\n        let confChange = update.prevState.facet(specialCharConfig) != update.state.facet(specialCharConfig);\n        if (confChange)\n            this.decorationCache = Object.create(null);\n        if (confChange || update.changes.length || update.viewportChanged)\n            this.recompute();\n    }\n    recompute() {\n        let decorations = [];\n        for (let { from, to } of this.view.visibleRanges)\n            this.getDecorationsFor(from, to, decorations);\n        this.decorations = Decoration.set(decorations);\n    }\n    getDecorationsFor(from, to, target) {\n        let config = this.view.state.facet(specialCharConfig);\n        let { doc } = this.view.state;\n        for (let pos = from, cursor = doc.iterRange(from, to), m; !cursor.next().done;) {\n            if (!cursor.lineBreak) {\n                while (m = config.specialChars.exec(cursor.value)) {\n                    let code = codePointAt(m[0], 0), deco;\n                    if (code == null)\n                        continue;\n                    if (code == 9) {\n                        let line = doc.lineAt(pos + m.index);\n                        let size = this.view.state.tabSize, col = countColumn(doc.sliceString(line.from, pos + m.index), 0, size);\n                        deco = Decoration.replace({ widget: new TabWidget((size - (col % size)) * this.view.defaultCharacterWidth) });\n                    }\n                    else {\n                        deco = this.decorationCache[code] ||\n                            (this.decorationCache[code] = Decoration.replace({ widget: new SpecialCharWidget(config, code) }));\n                    }\n                    target.push(deco.range(pos + m.index, pos + m.index + m[0].length));\n                }\n            }\n            pos += cursor.value.length;\n        }\n    }\n}, {\n    decorations: v => v.decorations\n});\n// Assigns placeholder characters from the Control Pictures block to\n// ASCII control characters\nfunction placeHolder(code) {\n    if (code >= 32)\n        return null;\n    if (code == 10)\n        return \"\\u2424\";\n    return String.fromCharCode(9216 + code);\n}\nconst DefaultPlaceholder = \"\\u2022\";\nclass SpecialCharWidget extends WidgetType {\n    constructor(options, code) {\n        super(code);\n        this.options = options;\n    }\n    toDOM() {\n        let ph = placeHolder(this.value) || DefaultPlaceholder;\n        let desc = \"Control character \" + (Names[this.value] || this.value);\n        let custom = this.options.render && this.options.render(this.value, desc, ph);\n        if (custom)\n            return custom;\n        let span = document.createElement(\"span\");\n        span.textContent = ph;\n        span.title = desc;\n        span.setAttribute(\"aria-label\", desc);\n        span.style.color = \"red\";\n        return span;\n    }\n    ignoreEvent() { return false; }\n}\nclass TabWidget extends WidgetType {\n    toDOM() {\n        let span = document.createElement(\"span\");\n        span.textContent = \"\\t\";\n        span.className = tabStyle.tab;\n        span.style.width = this.value + \"px\";\n        return span;\n    }\n    ignoreEvent() { return false; }\n}\nconst tabStyle = new StyleModule({\n    tab: {\n        display: \"inline-block\",\n        overflow: \"hidden\",\n        verticalAlign: \"bottom\"\n    }\n});\nconst tabStyleExt = EditorView.styleModule.of(tabStyle);\n\nconst DontIndentBeyond = 200;\n/// Enables reindentation on input. When a language defines an\n/// `indentOnInput` field in its [language\n/// data](#state.EditorState.languageDataAt), which must hold a\n/// regular expression, the line at the cursor will be reindented\n/// whenever new text is typed and the input from the start of the\n/// line up to the cursor matches that regexp.\n///\n/// To avoid unneccesary reindents, it is recommended to start the\n/// regexp with `^` (usually followed by `\\s*`), and end it with `$`.\n/// For example, `/^\\s*\\}$` will reindent when a closing brace is\n/// added at the start of a line.\nfunction indentOnInput() {\n    return EditorState.transactionFilter.of(tr => {\n        if (!tr.docChanged || tr.annotation(Transaction.userEvent) != \"input\")\n            return tr;\n        let rules = tr.startState.languageDataAt(\"indentOnInput\", tr.startState.selection.primary.head);\n        if (!rules.length)\n            return tr;\n        let doc = tr.newDoc, { head } = tr.newSelection.primary, line = doc.lineAt(head);\n        if (head > line.from + DontIndentBeyond)\n            return tr;\n        let lineStart = doc.sliceString(line.from, head);\n        if (!rules.some(r => r.test(lineStart)))\n            return tr;\n        let { state } = tr, last = -1, changes = [];\n        for (let { head } of state.selection.ranges) {\n            let line = state.doc.lineAt(head);\n            if (line.from == last)\n                continue;\n            last = line.from;\n            let indent = Math.max(...state.facet(EditorState.indentation).map(f => f(new IndentContext(state), line.from)));\n            if (indent < 0)\n                continue;\n            let cur = /^\\s*/.exec(line.slice(0, Math.min(line.length, DontIndentBeyond)))[0];\n            let norm = state.indentString(indent);\n            if (cur != norm)\n                changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n        return changes.length ? [tr, { changes }] : tr;\n    });\n}\n\n/// @internal\nconst __test = { HeightMap, HeightOracle, MeasuredHeights, QueryType, ChangedRange, computeOrder, moveVisually };\n\nexport { BidiSpan, BlockInfo, BlockType, Decoration, Direction, EditorView, PluginField, PluginFieldProvider, ViewPlugin, ViewUpdate, WidgetType, __test, highlightSpecialChars, indentOnInput, keymap, logException, multipleSelections, runScopeHandlers, themeClass };\n","import { Annotation, Facet, combineConfig, StateField, Transaction, StateEffect } from '@codemirror/next/state';\n\nconst fromHistory = Annotation.define();\n/// Transaction annotation that will prevent that annotation from\n/// being combined with other annotations in the undo history. Given\n/// `\"before\"`, it'll prevent merging with previous transactions. With\n/// `\"after\"`, subsequent transactions won't be combined with this\n/// one. With `\"full\"`, the transaction is isolated on both sides.\nconst isolateHistory = Annotation.define();\n/// This facet provides a way to register functions that, given a\n/// transaction, provide a set of effects that the history should\n/// store when inverting the transaction. This can be used to\n/// integrate some kinds of effects in the history, so that they can\n/// be undone (and redone again).\nconst invertedEffects = Facet.define();\nconst historyConfig = Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            minDepth: 100,\n            newGroupDelay: 500\n        }, { minDepth: Math.max, newGroupDelay: Math.min });\n    }\n});\nconst historyField = StateField.define({\n    create() {\n        return HistoryState.empty;\n    },\n    update(state, tr) {\n        let config = tr.state.facet(historyConfig);\n        let fromHist = tr.annotation(fromHistory);\n        if (fromHist) {\n            let item = HistEvent.fromTransaction(tr), from = fromHist.side;\n            let other = from == 0 /* Done */ ? state.undone : state.done;\n            if (item)\n                other = updateBranch(other, other.length, config.minDepth, item);\n            else\n                other = addSelection(other, tr.startState.selection);\n            return new HistoryState(from == 0 /* Done */ ? fromHist.rest : other, from == 0 /* Done */ ? other : fromHist.rest);\n        }\n        let isolate = tr.annotation(isolateHistory);\n        if (isolate == \"full\" || isolate == \"before\")\n            state = state.isolate();\n        if (tr.annotation(Transaction.addToHistory) === false)\n            return tr.changes.length ? state.addMapping(tr.changes.desc) : state;\n        let event = HistEvent.fromTransaction(tr);\n        let time = tr.annotation(Transaction.time), userEvent = tr.annotation(Transaction.userEvent);\n        if (event)\n            state = state.addChanges(event, time, userEvent, config.newGroupDelay, config.minDepth);\n        else if (tr.selection)\n            state = state.addSelection(tr.startState.selection, time, userEvent, config.newGroupDelay);\n        if (isolate == \"full\" || isolate == \"after\")\n            state = state.isolate();\n        return state;\n    }\n});\n/// Create a history extension with the given configuration.\nfunction history(config = {}) {\n    // FIXME register beforeinput handler\n    return [\n        historyField,\n        historyConfig.of(config)\n    ];\n}\nfunction cmd(side, selection) {\n    return function ({ state, dispatch }) {\n        let historyState = state.field(historyField, false);\n        if (!historyState)\n            return false;\n        let tr = historyState.pop(side, state, selection);\n        if (!tr)\n            return false;\n        dispatch(tr);\n        return true;\n    };\n}\n/// Undo a single group of history events. Returns false if no group\n/// was available.\nconst undo = cmd(0 /* Done */, false);\n/// Redo a group of history events. Returns false if no group was\n/// available.\nconst redo = cmd(1 /* Undone */, false);\n/// Undo a selection change.\nconst undoSelection = cmd(0 /* Done */, true);\n/// Redo a selection change.\nconst redoSelection = cmd(1 /* Undone */, true);\nfunction depth(side) {\n    return function (state) {\n        let histState = state.field(historyField, false);\n        if (!histState)\n            return 0;\n        let branch = side == 0 /* Done */ ? histState.done : histState.undone;\n        return branch.length - (branch.length && !branch[0].changes ? 1 : 0);\n    };\n}\n/// The amount of undoable change events available in a given state.\nconst undoDepth = depth(0 /* Done */);\n/// The amount of redoable change events available in a given state.\nconst redoDepth = depth(1 /* Undone */);\n// History events store groups of changes or effects that need to be\n// undone/redone together.\nclass HistEvent {\n    constructor(\n    // The changes in this event. Normal events hold at least one\n    // change or effect. But it may be necessary to store selection\n    // events before the first change, in which case a special type of\n    // instance is created which doesn't hold any changes, with\n    // changes == startSelection == undefined\n    changes, \n    // The effects associated with this event\n    effects, mapped, \n    // The selection before this event\n    startSelection, \n    // Stores selection changes after this event, to be used for\n    // selection undo/redo.\n    selectionsAfter) {\n        this.changes = changes;\n        this.effects = effects;\n        this.mapped = mapped;\n        this.startSelection = startSelection;\n        this.selectionsAfter = selectionsAfter;\n    }\n    setSelAfter(after) {\n        return new HistEvent(this.changes, this.effects, this.mapped, this.startSelection, after);\n    }\n    // This does not check `addToHistory` and such, it assumes the\n    // transaction needs to be converted to an item. Returns null when\n    // there are no changes or effects in the transaction.\n    static fromTransaction(tr) {\n        let effects = none;\n        for (let invert of tr.startState.facet(invertedEffects)) {\n            let result = invert(tr);\n            if (result.length)\n                effects = effects.concat(result);\n        }\n        if (!effects.length && tr.changes.empty)\n            return null;\n        return new HistEvent(tr.changes.invert(tr.startState.doc), effects, undefined, tr.startState.selection, none);\n    }\n    static selection(selections) {\n        return new HistEvent(undefined, none, undefined, undefined, selections);\n    }\n}\nfunction updateBranch(branch, to, maxLen, newEvent) {\n    let start = to + 1 > maxLen + 20 ? to - maxLen - 1 : 0;\n    let newBranch = branch.slice(start, to);\n    newBranch.push(newEvent);\n    return newBranch;\n}\nfunction isAdjacent(a, b) {\n    let ranges = [], isAdjacent = false;\n    a.iterChangedRanges((f, t) => ranges.push(f, t));\n    b.iterChangedRanges((_f, _t, f, t) => {\n        for (let i = 0; i < ranges.length;) {\n            let from = ranges[i++], to = ranges[i++];\n            if (t >= from && f <= to)\n                isAdjacent = true;\n        }\n    });\n    return isAdjacent;\n}\nfunction eqSelectionShape(a, b) {\n    return a.ranges.length == b.ranges.length &&\n        a.ranges.filter((r, i) => r.empty != b.ranges[i].empty).length === 0;\n}\nfunction conc(a, b) {\n    return !a.length ? b : !b.length ? a : a.concat(b);\n}\nconst none = [];\nconst MaxSelectionsPerEvent = 200;\nfunction addSelection(branch, selection) {\n    if (!branch.length) {\n        return [HistEvent.selection([selection])];\n    }\n    else {\n        let lastEvent = branch[branch.length - 1];\n        let sels = lastEvent.selectionsAfter.slice(Math.max(0, lastEvent.selectionsAfter.length - MaxSelectionsPerEvent));\n        if (sels.length && sels[sels.length - 1].eq(selection))\n            return branch;\n        sels.push(selection);\n        return updateBranch(branch, branch.length - 1, 1e9, lastEvent.setSelAfter(sels));\n    }\n}\n// Assumes the top item has one or more selectionAfter values\nfunction popSelection(branch) {\n    let last = branch[branch.length - 1];\n    let newBranch = branch.slice();\n    newBranch[branch.length - 1] = last.setSelAfter(last.selectionsAfter.slice(0, last.selectionsAfter.length - 1));\n    return newBranch;\n}\n// Add a mapping to the top event in the given branch. If this maps\n// away all the changes and effects in that item, drop it and\n// propagate the mapping to the next item.\nfunction addMappingToBranch(branch, mapping) {\n    if (!branch.length)\n        return branch;\n    let length = branch.length, selections = none;\n    while (length) {\n        let event = mapEvent(branch[length - 1], mapping, selections);\n        if (event.changes && !event.changes.empty || event.effects.length) { // Event survived mapping\n            let result = branch.slice(0, length);\n            result[length - 1] = event;\n            return result;\n        }\n        else { // Drop this event, since there's no changes or effects left\n            mapping = event.mapped;\n            length--;\n            selections = event.selectionsAfter;\n        }\n    }\n    return selections.length ? [HistEvent.selection(selections)] : none;\n}\nfunction mapEvent(event, mapping, extraSelections) {\n    let selections = conc(event.selectionsAfter.length ? event.selectionsAfter.map(s => s.map(mapping)) : none, extraSelections);\n    // Change-less events don't store mappings (they are always the last event in a branch)\n    if (!event.changes)\n        return HistEvent.selection(selections);\n    let mappedChanges = event.changes.map(mapping), before = mapping.mapDesc(event.changes, true);\n    let fullMapping = event.mapped ? event.mapped.composeDesc(before) : before;\n    return new HistEvent(mappedChanges, StateEffect.mapEffects(event.effects, mapping), fullMapping, event.startSelection.map(before), selections);\n}\nclass HistoryState {\n    constructor(done, undone, prevTime = 0, prevUserEvent = undefined) {\n        this.done = done;\n        this.undone = undone;\n        this.prevTime = prevTime;\n        this.prevUserEvent = prevUserEvent;\n    }\n    isolate() {\n        return this.prevTime ? new HistoryState(this.done, this.undone) : this;\n    }\n    addChanges(event, time, userEvent, newGroupDelay, maxLen) {\n        let done = this.done, lastEvent = done[done.length - 1];\n        if (lastEvent && lastEvent.changes &&\n            time - this.prevTime < newGroupDelay &&\n            !lastEvent.selectionsAfter.length &&\n            lastEvent.changes.length && event.changes &&\n            isAdjacent(lastEvent.changes, event.changes)) {\n            done = updateBranch(done, done.length - 1, maxLen, new HistEvent(event.changes.compose(lastEvent.changes), conc(event.effects, lastEvent.effects), lastEvent.mapped, lastEvent.startSelection, none));\n        }\n        else {\n            done = updateBranch(done, done.length, maxLen, event);\n        }\n        return new HistoryState(done, none, time, userEvent);\n    }\n    addSelection(selection, time, userEvent, newGroupDelay) {\n        let last = this.done.length ? this.done[this.done.length - 1].selectionsAfter : none;\n        if (last.length > 0 &&\n            time - this.prevTime < newGroupDelay &&\n            userEvent == \"keyboardselection\" && this.prevUserEvent == userEvent &&\n            eqSelectionShape(last[last.length - 1], selection))\n            return this;\n        return new HistoryState(addSelection(this.done, selection), this.undone, time, userEvent);\n    }\n    addMapping(mapping) {\n        return new HistoryState(addMappingToBranch(this.done, mapping), addMappingToBranch(this.undone, mapping), this.prevTime, this.prevUserEvent);\n    }\n    pop(side, state, selection) {\n        let branch = side == 0 /* Done */ ? this.done : this.undone;\n        if (branch.length == 0)\n            return null;\n        let event = branch[branch.length - 1];\n        if (selection && event.selectionsAfter.length) {\n            return state.update({\n                selection: event.selectionsAfter[event.selectionsAfter.length - 1],\n                annotations: fromHistory.of({ side, rest: popSelection(branch) })\n            });\n        }\n        else if (!event.changes) {\n            return null;\n        }\n        else {\n            let rest = branch.length == 1 ? none : branch.slice(0, branch.length - 1);\n            if (event.mapped)\n                rest = addMappingToBranch(rest, event.mapped);\n            return state.update({\n                changes: event.changes,\n                selection: event.startSelection,\n                effects: event.effects,\n                annotations: fromHistory.of({ side, rest }),\n                filter: false\n            });\n        }\n    }\n}\nHistoryState.empty = new HistoryState(none, none);\n/// Default key bindings for the undo history.\n///\n/// - Mod-z: [`undo`](#history.undo).\n/// - Mod-y (Mod-Shift-z on macOS): [`redo`](#history.redo).\n/// - Mod-u: [`undoSelection`](#history.undoSelection).\n/// - Alt-u (Mod-Shift-u on macOS): [`redoSelection`](#history.redoSelection).\nconst historyKeymap = [\n    { key: \"Mod-z\", run: undo, preventDefault: true },\n    { key: \"Mod-y\", mac: \"Mod-Shift-z\", run: redo, preventDefault: true },\n    { key: \"Mod-u\", run: undoSelection, preventDefault: true },\n    { key: \"Alt-u\", mac: \"Mod-Shift-u\", run: redoSelection, preventDefault: true }\n];\n\nexport { history, historyKeymap, invertedEffects, isolateHistory, redo, redoDepth, redoSelection, undo, undoDepth, undoSelection };\n","import { EditorView, ViewPlugin, themeClass, BlockType, PluginField, Direction } from '@codemirror/next/view';\nimport { RangeValue, Range, RangeSet } from '@codemirror/next/rangeset';\nimport { MapMode, Facet, combineConfig } from '@codemirror/next/state';\n\n/// A gutter marker represents a bit of information attached to a line\n/// in a specific gutter. Your own custom markers have to extend this\n/// class.\nclass GutterMarker extends RangeValue {\n    /// @internal\n    compare(other) {\n        return this == other || this.constructor == other.constructor && this.eq(other);\n    }\n    /// Render the DOM node for this marker, if any.\n    toDOM(_view) { return null; }\n    /// Create a range that places this marker at the given position.\n    at(pos) { return new Range(pos, pos, this); }\n}\nGutterMarker.prototype.elementClass = \"\";\nGutterMarker.prototype.mapMode = MapMode.TrackBefore;\nconst defaults = {\n    style: \"\",\n    renderEmptyElements: false,\n    elementStyle: \"\",\n    markers: () => RangeSet.empty,\n    lineMarker: () => null,\n    initialSpacer: null,\n    updateSpacer: null,\n    domEventHandlers: {}\n};\nconst activeGutters = Facet.define();\n/// Define an editor gutter.\nfunction gutter(config) {\n    return [gutters(), activeGutters.of(Object.assign(Object.assign({}, defaults), config))];\n}\nconst baseTheme = EditorView.baseTheme({\n    gutters: {\n        display: \"flex\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        left: 0\n    },\n    \"gutters@light\": {\n        backgroundColor: \"#f5f5f5\",\n        color: \"#999\",\n        borderRight: \"1px solid #ddd\"\n    },\n    \"gutters@dark\": {\n        backgroundColor: \"#333338\",\n        color: \"#ccc\"\n    },\n    gutter: {\n        display: \"flex !important\",\n        flexDirection: \"column\",\n        flexShrink: 0,\n        boxSizing: \"border-box\",\n        height: \"100%\",\n        overflow: \"hidden\"\n    },\n    gutterElement: {\n        boxSizing: \"border-box\"\n    },\n    \"gutterElement.lineNumber\": {\n        padding: \"0 3px 0 5px\",\n        minWidth: \"20px\",\n        textAlign: \"right\",\n        whiteSpace: \"nowrap\"\n    }\n});\nconst unfixGutters = Facet.define({\n    combine: values => values.some(x => x)\n});\n/// The gutter-drawing plugin is automatically enabled when you add a\n/// gutter, but you can use this function to explicitly configure it.\n///\n/// Unless `fixed` is explicitly set to `false`, the gutters are\n/// fixed, meaning they don't scroll along with the content\n/// horizontally.\nfunction gutters(config) {\n    let result = [\n        gutterView,\n        baseTheme\n    ];\n    if (config && config.fixed === false)\n        result.push(unfixGutters.of(true));\n    return result;\n}\nconst gutterView = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.dom = document.createElement(\"div\");\n        this.dom.className = themeClass(\"gutters\");\n        this.dom.setAttribute(\"aria-hidden\", \"true\");\n        this.gutters = view.state.facet(activeGutters).map(conf => new SingleGutterView(view, conf));\n        for (let gutter of this.gutters)\n            this.dom.appendChild(gutter.dom);\n        this.fixed = !view.state.facet(unfixGutters);\n        if (this.fixed) {\n            // FIXME IE11 fallback, which doesn't support position: sticky,\n            // by using position: relative + event handlers that realign the\n            // gutter (or just force fixed=false on IE11?)\n            this.dom.style.position = \"sticky\";\n        }\n        view.scrollDOM.insertBefore(this.dom, view.contentDOM);\n    }\n    update(update) {\n        if (!this.updateGutters(update))\n            return;\n        let contexts = this.gutters.map(gutter => new UpdateContext(gutter, this.view.viewport));\n        this.view.viewportLines(line => {\n            let text;\n            if (Array.isArray(line.type)) {\n                for (let b of line.type)\n                    if (b.type == BlockType.Text) {\n                        text = b;\n                        break;\n                    }\n            }\n            else {\n                text = line.type == BlockType.Text ? line : undefined;\n            }\n            if (!text)\n                return;\n            for (let cx of contexts)\n                cx.line(this.view, text);\n        }, 0);\n        for (let cx of contexts)\n            cx.finish();\n        this.dom.style.minHeight = this.view.contentHeight + \"px\";\n        if (update.state.facet(unfixGutters) != !this.fixed) {\n            this.fixed = !this.fixed;\n            this.dom.style.position = this.fixed ? \"sticky\" : \"\";\n        }\n    }\n    updateGutters(update) {\n        let prev = update.prevState.facet(activeGutters), cur = update.state.facet(activeGutters);\n        let change = update.docChanged || update.heightChanged || update.viewportChanged;\n        if (prev == cur) {\n            for (let gutter of this.gutters)\n                if (gutter.update(update))\n                    change = true;\n        }\n        else {\n            change = true;\n            let gutters = [];\n            for (let conf of cur) {\n                let known = prev.indexOf(conf);\n                if (known < 0) {\n                    gutters.push(new SingleGutterView(this.view, conf));\n                }\n                else {\n                    this.gutters[known].update(update);\n                    gutters.push(this.gutters[known]);\n                }\n            }\n            for (let g of this.gutters)\n                g.dom.remove();\n            for (let g of gutters)\n                this.dom.appendChild(g.dom);\n            this.gutters = gutters;\n        }\n        return change;\n    }\n    destroy() {\n        this.dom.remove();\n    }\n}, {\n    provide: PluginField.scrollMargins.from(value => {\n        if (value.gutters.length == 0 || !value.fixed)\n            return null;\n        return value.view.textDirection == Direction.LTR ? { left: value.dom.offsetWidth } : { right: value.dom.offsetWidth };\n    })\n});\nclass UpdateContext {\n    constructor(gutter, viewport) {\n        this.gutter = gutter;\n        this.localMarkers = [];\n        this.i = 0;\n        this.height = 0;\n        this.cursor = RangeSet.iter(Array.isArray(gutter.markers) ? gutter.markers : [gutter.markers], viewport.from);\n    }\n    line(view, line) {\n        if (this.localMarkers.length)\n            this.localMarkers = [];\n        while (this.cursor.value && this.cursor.from <= line.from) {\n            if (this.cursor.from == line.from)\n                this.localMarkers.push(this.cursor.value);\n            this.cursor.next();\n        }\n        let forLine = this.gutter.config.lineMarker(view, line, this.localMarkers);\n        if (forLine)\n            this.localMarkers.unshift(forLine);\n        let gutter = this.gutter;\n        if (this.localMarkers.length == 0 && !gutter.config.renderEmptyElements)\n            return;\n        let above = line.top - this.height;\n        if (this.i == gutter.elements.length) {\n            let newElt = new GutterElement(view, line.height, above, this.localMarkers, gutter.elementClass);\n            gutter.elements.push(newElt);\n            gutter.dom.appendChild(newElt.dom);\n        }\n        else {\n            let markers = this.localMarkers, elt = gutter.elements[this.i];\n            if (sameMarkers(markers, elt.markers)) {\n                markers = elt.markers;\n                this.localMarkers.length = 0;\n            }\n            elt.update(view, line.height, above, markers, gutter.elementClass);\n        }\n        this.height = line.bottom;\n        this.i++;\n    }\n    finish() {\n        let gutter = this.gutter;\n        while (gutter.elements.length > this.i)\n            gutter.dom.removeChild(gutter.elements.pop().dom);\n    }\n}\nclass SingleGutterView {\n    constructor(view, config) {\n        this.view = view;\n        this.config = config;\n        this.elements = [];\n        this.spacer = null;\n        this.dom = document.createElement(\"div\");\n        this.dom.className = themeClass(\"gutter\" + (this.config.style ? \".\" + this.config.style : \"\"));\n        this.elementClass = themeClass(\"gutterElement\" + (this.config.style ? \".\" + this.config.style : \"\"));\n        for (let prop in config.domEventHandlers) {\n            this.dom.addEventListener(prop, (event) => {\n                let line = view.visualLineAtHeight(event.clientY, view.contentDOM.getBoundingClientRect().top);\n                if (config.domEventHandlers[prop](view, line, event))\n                    event.preventDefault();\n            });\n        }\n        this.markers = config.markers(view.state);\n        if (config.initialSpacer) {\n            this.spacer = new GutterElement(view, 0, 0, [config.initialSpacer(view)], this.elementClass);\n            this.dom.appendChild(this.spacer.dom);\n            this.spacer.dom.style.cssText += \"visibility: hidden; pointer-events: none\";\n        }\n    }\n    update(update) {\n        let prevMarkers = this.markers;\n        this.markers = this.config.markers(update.state);\n        if (this.spacer && this.config.updateSpacer) {\n            let updated = this.config.updateSpacer(this.spacer.markers[0], update);\n            if (updated != this.spacer.markers[0])\n                this.spacer.update(update.view, 0, 0, [updated], this.elementClass);\n        }\n        return this.markers != prevMarkers;\n    }\n}\nclass GutterElement {\n    constructor(view, height, above, markers, eltClass) {\n        this.height = -1;\n        this.above = 0;\n        this.dom = document.createElement(\"div\");\n        this.update(view, height, above, markers, eltClass);\n    }\n    update(view, height, above, markers, cssClass) {\n        if (this.height != height)\n            this.dom.style.height = (this.height = height) + \"px\";\n        if (this.above != above)\n            this.dom.style.marginTop = (this.above = above) ? above + \"px\" : \"\";\n        if (this.markers != markers) {\n            this.markers = markers;\n            for (let ch; ch = this.dom.lastChild;)\n                ch.remove();\n            let cls = cssClass;\n            for (let m of markers) {\n                let dom = m.toDOM(view);\n                if (dom)\n                    this.dom.appendChild(dom);\n                let c = m.elementClass;\n                if (c)\n                    cls += \" \" + c;\n            }\n            this.dom.className = cls;\n        }\n    }\n}\nfunction sameMarkers(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!a[i].compare(b[i]))\n            return false;\n    return true;\n}\n/// Facet used to provide markers to the line number gutter.\nconst lineNumberMarkers = Facet.define();\nconst lineNumberConfig = Facet.define({\n    combine(values) {\n        return combineConfig(values, { formatNumber: String, domEventHandlers: {} }, {\n            domEventHandlers(a, b) {\n                let result = Object.assign({}, a);\n                for (let event in b) {\n                    let exists = result[event], add = b[event];\n                    result[event] = exists ? (view, line, event) => exists(view, line, event) || add(view, line, event) : add;\n                }\n                return result;\n            }\n        });\n    }\n});\nclass NumberMarker extends GutterMarker {\n    constructor(number) {\n        super();\n        this.number = number;\n    }\n    eq(other) { return this.number == other.number; }\n    toDOM(view) {\n        let config = view.state.facet(lineNumberConfig);\n        return document.createTextNode(config.formatNumber(this.number));\n    }\n}\nconst lineNumberGutter = gutter({\n    style: \"lineNumber\",\n    markers(state) { return state.facet(lineNumberMarkers); },\n    lineMarker(view, line, others) {\n        if (others.length)\n            return null;\n        // FIXME try to make the line number queries cheaper?\n        return new NumberMarker(view.state.doc.lineAt(line.from).number);\n    },\n    initialSpacer(view) {\n        return new NumberMarker(maxLineNumber(view.state.doc.lines));\n    },\n    updateSpacer(spacer, update) {\n        let max = maxLineNumber(update.view.state.doc.lines);\n        return max == spacer.number ? spacer : new NumberMarker(max);\n    }\n});\n/// Create a line number gutter extension. The order in which the\n/// gutters appear is determined by their extension priority.\nfunction lineNumbers(config = {}) {\n    return [\n        lineNumberConfig.of(config),\n        lineNumberGutter\n    ];\n}\nfunction maxLineNumber(lines) {\n    let last = 9;\n    while (last < lines)\n        last = last * 10 + 9;\n    return last;\n}\n\nexport { GutterMarker, gutter, gutters, lineNumberMarkers, lineNumbers };\n","import { StateEffect, StateField, EditorState, Facet, combineConfig } from '@codemirror/next/state';\nimport { Decoration, EditorView, WidgetType, themeClass } from '@codemirror/next/view';\nimport { gutter, GutterMarker } from '@codemirror/next/gutter';\n\nfunction mapRange(range, mapping) {\n    let from = mapping.mapPos(range.from, 1), to = mapping.mapPos(range.to, -1);\n    return from >= to ? undefined : { from, to };\n}\nconst foldEffect = StateEffect.define({ map: mapRange });\nconst unfoldEffect = StateEffect.define({ map: mapRange });\nfunction selectedLines(view) {\n    let lines = [];\n    for (let { head } of view.state.selection.ranges) {\n        if (lines.some(l => l.from <= head && l.to >= head))\n            continue;\n        lines.push(view.visualLineAt(head));\n    }\n    return lines;\n}\nconst foldState = StateField.define({\n    create() {\n        return Decoration.none;\n    },\n    update(folded, tr) {\n        folded = folded.map(tr.changes);\n        for (let e of tr.effects) {\n            if (e.is(foldEffect) && !foldExists(folded, e.value.from, e.value.to))\n                folded = folded.update({ add: [FoldWidget.decoration.range(e.value.from, e.value.to)] });\n            else if (e.is(unfoldEffect)) {\n                folded = folded.update({ filter: (from, to) => e.value.from != from || e.value.to != to,\n                    filterFrom: e.value.from, filterTo: e.value.to });\n            }\n        }\n        // Clear folded ranges that cover the selection head\n        if (tr.selection) {\n            let onSelection = false, { head } = tr.selection.primary;\n            folded.between(head, head, (a, b) => { if (a < head && b > head)\n                onSelection = true; });\n            if (onSelection)\n                folded = folded.update({\n                    filterFrom: head,\n                    filterTo: head,\n                    filter: (a, b) => b <= head || a >= head\n                });\n        }\n        return folded;\n    },\n    provide: [EditorView.decorations]\n});\nfunction foldInside(state, from, to) {\n    var _a;\n    let found = null;\n    (_a = state.field(foldState, false)) === null || _a === void 0 ? void 0 : _a.between(from, to, (from, to) => {\n        if (!found || found.from > from)\n            found = ({ from, to });\n    });\n    return found;\n}\nfunction foldExists(folded, from, to) {\n    let found = false;\n    folded.between(from, from, (a, b) => { if (a == from && b == to)\n        found = true; });\n    return found;\n}\nfunction getFoldable(state, from, to) {\n    return state.facet(EditorState.foldable).reduce((value, f) => value || f(state, from, to), null);\n}\nfunction maybeEnable(state) {\n    return state.field(foldState, false) ? undefined : { append: codeFolding() };\n}\n/// Fold the lines that are selected, if possible.\nconst foldCode = view => {\n    for (let line of selectedLines(view)) {\n        let range = getFoldable(view.state, line.from, line.to);\n        if (range) {\n            view.dispatch({ effects: foldEffect.of(range),\n                reconfigure: maybeEnable(view.state) });\n            return true;\n        }\n    }\n    return false;\n};\n/// Unfold folded ranges on selected lines.\nconst unfoldCode = view => {\n    if (!view.state.field(foldState, false))\n        return false;\n    let effects = [];\n    for (let line of selectedLines(view)) {\n        let folded = foldInside(view.state, line.from, line.to);\n        if (folded)\n            effects.push(unfoldEffect.of(folded));\n    }\n    if (effects.length)\n        view.dispatch({ effects });\n    return effects.length > 0;\n};\n/// Fold all top-level foldable ranges.\nconst foldAll = view => {\n    let { state } = view, effects = [];\n    for (let pos = 0; pos < state.doc.length;) {\n        let line = view.visualLineAt(pos), range = getFoldable(state, line.from, line.to);\n        if (range)\n            effects.push(foldEffect.of(range));\n        pos = (range ? view.visualLineAt(range.to) : line).to + 1;\n    }\n    if (effects.length)\n        view.dispatch({ effects, reconfigure: maybeEnable(view.state) });\n    return !!effects.length;\n};\n/// Unfold all folded code.\nconst unfoldAll = view => {\n    let field = view.state.field(foldState, false);\n    if (!field || !field.size)\n        return false;\n    let effects = [];\n    field.between(0, view.state.doc.length, (from, to) => { effects.push(unfoldEffect.of({ from, to })); });\n    view.dispatch({ effects });\n    return true;\n};\n/// Default fold-related key bindings.\n///\n///  - Ctrl-Shift-[ (Cmd-Alt-[ on macOS): [`foldCode`](#fold.foldCode).\n///  - Ctrl-Shift-] (Cmd-Alt-] on macOS): [`unfoldCode`](#fold.unfoldCode).\n///  - Ctrl-Alt-[: [`foldAll`](#fold.foldAll).\n///  - Ctrl-Alt-]: [`unfoldAll`](#fold.unfoldAll).\nconst foldKeymap = [\n    { key: \"Ctrl-Shift-[\", mac: \"Cmd-Alt-[\", run: foldCode },\n    { key: \"Ctrl-Shift-]\", mac: \"Cmd-Alt-]\", run: unfoldCode },\n    { key: \"Ctrl-Alt-[\", run: foldAll },\n    { key: \"Ctrl-Alt-]\", run: unfoldAll }\n];\nconst defaultConfig = {\n    placeholderDOM: null,\n    placeholderText: \"\"\n};\nconst foldConfig = Facet.define({\n    combine(values) { return combineConfig(values, defaultConfig); }\n});\n/// Create an extension that configures code folding.\nfunction codeFolding(config) {\n    let result = [foldState, baseTheme];\n    if (config)\n        result.push(foldConfig.of(config));\n    return result;\n}\nclass FoldWidget extends WidgetType {\n    ignoreEvents() { return false; }\n    toDOM(view) {\n        let { state } = view, conf = state.facet(foldConfig);\n        if (conf.placeholderDOM)\n            return conf.placeholderDOM();\n        let element = document.createElement(\"span\");\n        element.textContent = conf.placeholderText;\n        element.setAttribute(\"aria-label\", state.phrase(\"folded code\"));\n        element.title = state.phrase(\"unfold\");\n        element.className = themeClass(\"foldPlaceholder\");\n        element.onclick = event => {\n            let line = view.visualLineAt(view.posAtDOM(event.target));\n            let folded = foldInside(view.state, line.from, line.to);\n            if (folded)\n                view.dispatch({ effects: unfoldEffect.of(folded) });\n            event.preventDefault();\n        };\n        return element;\n    }\n}\nFoldWidget.decoration = Decoration.replace({ widget: new FoldWidget(null) });\nconst foldGutterDefaults = {\n    openText: \"\",\n    closedText: \"\"\n};\nclass FoldMarker extends GutterMarker {\n    constructor(config, open) {\n        super();\n        this.config = config;\n        this.open = open;\n    }\n    eq(other) { return this.config == other.config && this.open == other.open; }\n    toDOM(view) {\n        let span = document.createElement(\"span\");\n        span.textContent = this.open ? this.config.openText : this.config.closedText;\n        span.title = view.state.phrase(this.open ? \"Fold line\" : \"Unfold line\");\n        return span;\n    }\n}\n/// Create an extension that registers a fold gutter, which shows a\n/// fold status indicator before lines which can be clicked to fold or\n/// unfold the line.\nfunction foldGutter(config = {}) {\n    let fullConfig = Object.assign(Object.assign({}, foldGutterDefaults), config);\n    let canFold = new FoldMarker(fullConfig, true), canUnfold = new FoldMarker(fullConfig, false);\n    return [\n        gutter({\n            style: \"foldGutter\",\n            lineMarker(view, line) {\n                // FIXME optimize this. At least don't run it for updates that\n                // don't change anything relevant\n                let folded = foldInside(view.state, line.from, line.to);\n                if (folded)\n                    return canUnfold;\n                if (getFoldable(view.state, line.from, line.to))\n                    return canFold;\n                return null;\n            },\n            initialSpacer() {\n                return new FoldMarker(fullConfig, false);\n            },\n            domEventHandlers: {\n                click: (view, line) => {\n                    let folded = foldInside(view.state, line.from, line.to);\n                    if (folded) {\n                        view.dispatch({ effects: unfoldEffect.of(folded) });\n                        return true;\n                    }\n                    let range = getFoldable(view.state, line.from, line.to);\n                    if (range) {\n                        view.dispatch({ effects: foldEffect.of(range) });\n                        return true;\n                    }\n                    return false;\n                }\n            }\n        }),\n        codeFolding()\n    ];\n}\nconst baseTheme = EditorView.baseTheme({\n    foldPlaceholder: {\n        backgroundColor: \"#eee\",\n        border: \"1px solid #ddd\",\n        color: \"#888\",\n        borderRadius: \".2em\",\n        margin: \"0 1px\",\n        padding: \"0 1px\",\n        cursor: \"pointer\"\n    },\n    \"gutterElement.foldGutter\": {\n        padding: \"0 1px\",\n        cursor: \"pointer\"\n    }\n});\n\nexport { codeFolding, foldAll, foldCode, foldGutter, foldKeymap, unfoldAll, unfoldCode };\n","import { Facet, combineConfig, StateField } from '@codemirror/next/state';\nimport { EditorView, Decoration, themeClass } from '@codemirror/next/view';\nimport { NodeProp } from 'lezer-tree';\n\nconst baseTheme = EditorView.baseTheme({\n    matchingBracket: { color: \"#0b0\" },\n    nonmatchingBracket: { color: \"#a22\" }\n});\nconst DefaultScanDist = 10000, DefaultBrackets = \"()[]{}\";\nconst bracketMatchingConfig = Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            afterCursor: true,\n            brackets: DefaultBrackets,\n            maxScanDistance: DefaultScanDist\n        });\n    }\n});\nconst matchingMark = Decoration.mark({ class: themeClass(\"matchingBracket\") }), nonmatchingMark = Decoration.mark({ class: themeClass(\"nonmatchingBracket\") });\nconst bracketMatchingState = StateField.define({\n    create() { return Decoration.none; },\n    update(deco, tr) {\n        if (!tr.docChanged && !tr.selection)\n            return deco;\n        let decorations = [];\n        let config = tr.state.facet(bracketMatchingConfig);\n        for (let range of tr.state.selection.ranges) {\n            if (!range.empty)\n                continue;\n            let match = matchBrackets(tr.state, range.head, -1, config)\n                || (range.head > 0 && matchBrackets(tr.state, range.head - 1, 1, config))\n                || (config.afterCursor &&\n                    (matchBrackets(tr.state, range.head, 1, config) ||\n                        (range.head < tr.state.doc.length && matchBrackets(tr.state, range.head + 1, -1, config))));\n            if (!match)\n                continue;\n            let mark = match.matched ? matchingMark : nonmatchingMark;\n            decorations.push(mark.range(match.start.from, match.start.to));\n            if (match.end)\n                decorations.push(mark.range(match.end.from, match.end.to));\n        }\n        return Decoration.set(decorations, true);\n    },\n    provide: [EditorView.decorations]\n});\nconst bracketMatchingUnique = [\n    bracketMatchingState,\n    baseTheme\n];\n/// Create an extension that enables bracket matching. Whenever the\n/// cursor is next to a bracket, that bracket and the one it matches\n/// are highlighted. Or, when no matching bracket is found, another\n/// highlighting style is used to indicate this.\nfunction bracketMatching(config = {}) {\n    return [bracketMatchingConfig.of(config), bracketMatchingUnique];\n}\nfunction matchingNodes(node, dir, brackets) {\n    let byProp = node.prop(dir < 0 ? NodeProp.openedBy : NodeProp.closedBy);\n    if (byProp)\n        return byProp;\n    if (node.name.length == 1) {\n        let index = brackets.indexOf(node.name);\n        if (index > -1 && index % 2 == (dir < 0 ? 1 : 0))\n            return [brackets[index + dir]];\n    }\n    return null;\n}\n/// Find the matching bracket for the token at `pos`, scanning\n/// direction `dir`. Only the `brackets` and `maxScanDistance`\n/// properties are used from `config`, if given. Returns null if no\n/// bracket was found at `pos`, or a match result otherwise.\nfunction matchBrackets(state, pos, dir, config = {}) {\n    let maxScanDistance = config.maxScanDistance || DefaultScanDist, brackets = config.brackets || DefaultBrackets;\n    let tree = state.tree, sub = tree.resolve(pos, dir), matches;\n    if (matches = matchingNodes(sub.type, dir, brackets))\n        return matchMarkedBrackets(state, pos, dir, sub, matches, brackets);\n    else\n        return matchPlainBrackets(state, pos, dir, tree, sub.type, maxScanDistance, brackets);\n}\nfunction matchMarkedBrackets(_state, _pos, dir, token, matching, brackets) {\n    let parent = token.parent, firstToken = { from: token.start, to: token.end };\n    let depth = 0;\n    return (parent && parent.iterate({\n        from: dir < 0 ? token.start : token.end,\n        to: dir < 0 ? parent.start : parent.end,\n        enter(type, from, to) {\n            if (dir < 0 ? to > token.start : from < token.end)\n                return undefined;\n            if (depth == 0 && matching.indexOf(type.name) > -1) {\n                return { start: firstToken, end: { from, to }, matched: true };\n            }\n            else if (matchingNodes(type, dir, brackets)) {\n                depth++;\n            }\n            else if (matchingNodes(type, -dir, brackets)) {\n                depth--;\n                if (depth == 0)\n                    return { start: firstToken, end: { from, to }, matched: false };\n            }\n            return false;\n        }\n    })) || { start: firstToken, matched: false };\n}\nfunction matchPlainBrackets(state, pos, dir, tree, tokenType, maxScanDistance, brackets) {\n    let startCh = dir < 0 ? state.sliceDoc(pos - 1, pos) : state.sliceDoc(pos, pos + 1);\n    let bracket = brackets.indexOf(startCh);\n    if (bracket < 0 || (bracket % 2 == 0) != (dir > 0))\n        return null;\n    let startToken = { from: dir < 0 ? pos - 1 : pos, to: dir > 0 ? pos + 1 : pos };\n    let iter = state.doc.iterRange(pos, dir > 0 ? state.doc.length : 0), depth = 0;\n    for (let distance = 0; !(iter.next()).done && distance <= maxScanDistance;) {\n        let text = iter.value;\n        if (dir < 0)\n            distance += text.length;\n        let basePos = pos + distance * dir;\n        for (let pos = dir > 0 ? 0 : text.length - 1, end = dir > 0 ? text.length : -1; pos != end; pos += dir) {\n            let found = brackets.indexOf(text[pos]);\n            if (found < 0 || tree.resolve(basePos + pos, 1).type != tokenType)\n                continue;\n            if ((found % 2 == 0) == (dir > 0)) {\n                depth++;\n            }\n            else if (depth == 1) { // Closing\n                return { start: startToken, end: { from: basePos + pos, to: basePos + pos + 1 }, matched: (found >> 1) == (bracket >> 1) };\n            }\n            else {\n                depth--;\n            }\n        }\n        if (dir > 0)\n            distance += text.length;\n    }\n    return iter.done ? { start: startToken, matched: false } : null;\n}\n\nexport { bracketMatching, matchBrackets };\n","import { Transaction, EditorSelection, IndentContext, EditorState, CharCategory } from '@codemirror/next/state';\nimport { Text, countColumn, codePointSize, codePointAt } from '@codemirror/next/text';\nimport { Direction } from '@codemirror/next/view';\nimport { matchBrackets } from '@codemirror/next/matchbrackets';\nimport { NodeProp } from 'lezer-tree';\n\nfunction updateSel(sel, by) {\n    return EditorSelection.create(sel.ranges.map(by), sel.primaryIndex);\n}\nfunction setSel(state, selection) {\n    return state.update({ selection, scrollIntoView: true, annotations: Transaction.userEvent.of(\"keyboardselection\") });\n}\nfunction moveSel({ state, dispatch }, how) {\n    let selection = updateSel(state.selection, how);\n    if (selection.eq(state.selection))\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\nfunction rangeEnd(range, forward) {\n    return EditorSelection.cursor(forward ? range.to : range.from);\n}\nfunction cursorByChar(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByChar(range, forward) : rangeEnd(range, forward));\n}\n/// Move the selection one character to the left (which is backward in\n/// left-to-right text, forward in right-to-left text).\nconst cursorCharLeft = view => cursorByChar(view, view.textDirection != Direction.LTR);\n/// Move the selection one character to the right.\nconst cursorCharRight = view => cursorByChar(view, view.textDirection == Direction.LTR);\n/// Move the selection one character forward.\nconst cursorCharForward = view => cursorByChar(view, true);\n/// Move the selection one character backward.\nconst cursorCharBackward = view => cursorByChar(view, false);\nfunction cursorByGroup(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveByGroup(range, forward) : rangeEnd(range, forward));\n}\n/// Move the selection across one group of word or non-word (but also\n/// non-space) characters.\nconst cursorGroupLeft = view => cursorByGroup(view, view.textDirection != Direction.LTR);\n/// Move the selection one group to the right.\nconst cursorGroupRight = view => cursorByGroup(view, view.textDirection == Direction.LTR);\n/// Move the selection one group forward.\nconst cursorGroupForward = view => cursorByGroup(view, true);\n/// Move the selection one group backward.\nconst cursorGroupBackward = view => cursorByGroup(view, false);\nfunction interestingNode(state, node, bracketProp) {\n    if (node.type.prop(bracketProp))\n        return true;\n    let len = node.end - node.start;\n    return len && (len > 2 || /[^\\s,.;:]/.test(state.sliceDoc(node.start, node.end))) || node.firstChild;\n}\nfunction moveBySyntax(state, start, forward) {\n    let pos = state.tree.resolve(start.head);\n    let bracketProp = forward ? NodeProp.closedBy : NodeProp.openedBy;\n    // Scan forward through child nodes to see if there's an interesting\n    // node ahead.\n    for (let at = start.head;;) {\n        let next = forward ? pos.childAfter(at) : pos.childBefore(at);\n        if (!next)\n            break;\n        if (interestingNode(state, next, bracketProp))\n            pos = next;\n        else\n            at = forward ? next.end : next.start;\n    }\n    let bracket = pos.type.prop(bracketProp), match, newPos;\n    if (bracket && (match = forward ? matchBrackets(state, pos.start, 1) : matchBrackets(state, pos.end, -1)) && match.matched)\n        newPos = forward ? match.end.to : match.end.from;\n    else\n        newPos = forward ? pos.end : pos.start;\n    return EditorSelection.cursor(newPos, forward ? -1 : 1);\n}\n/// Move the cursor over the next syntactic element to the left.\nconst cursorSyntaxLeft = view => moveSel(view, range => moveBySyntax(view.state, range, view.textDirection != Direction.LTR));\n/// Move the cursor over the next syntactic element to the right.\nconst cursorSyntaxRight = view => moveSel(view, range => moveBySyntax(view.state, range, view.textDirection == Direction.LTR));\nfunction cursorByLine(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveVertically(range, forward) : rangeEnd(range, forward));\n}\n/// Move the selection one line up.\nconst cursorLineUp = view => cursorByLine(view, false);\n/// Move the selection one line down.\nconst cursorLineDown = view => cursorByLine(view, true);\nfunction cursorByPage(view, forward) {\n    return moveSel(view, range => range.empty ? view.moveVertically(range, forward, view.dom.clientHeight) : rangeEnd(range, forward));\n}\n/// Move the selection one page up.\nconst cursorPageUp = view => cursorByPage(view, false);\n/// Move the selection one page down.\nconst cursorPageDown = view => cursorByPage(view, true);\nfunction moveByLineBoundary(view, start, forward) {\n    let line = view.visualLineAt(start.head), moved = view.moveToLineBoundary(start, forward);\n    if (moved.head == start.head && moved.head != (forward ? line.to : line.from))\n        moved = view.moveToLineBoundary(start, forward, false);\n    if (!forward && moved.head == line.from && line.length) {\n        let space = /^\\s*/.exec(view.state.sliceDoc(line.from, Math.min(line.from + 100, line.to)))[0].length;\n        if (space && start.head > line.from + space)\n            moved = EditorSelection.cursor(line.from + space);\n    }\n    return moved;\n}\n/// Move the selection to the next line wrap point, or to the end of\n/// the line if there isn't one left on this line.\nconst cursorLineBoundaryForward = view => moveSel(view, range => moveByLineBoundary(view, range, true));\n/// Move the selection to previous line wrap point, or failing that to\n/// the start of the line.\nconst cursorLineBoundaryBackward = view => moveSel(view, range => moveByLineBoundary(view, range, false));\n/// Move the selection to the start of the line.\nconst cursorLineStart = view => moveSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).from, 1));\n/// Move the selection to the end of the line.\nconst cursorLineEnd = view => moveSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).to, -1));\nfunction toMatchingBracket(state, dispatch, extend) {\n    let found = false, selection = updateSel(state.selection, range => {\n        let matching = matchBrackets(state, range.head, -1)\n            || matchBrackets(state, range.head, 1)\n            || (range.head > 0 && matchBrackets(state, range.head - 1, 1))\n            || (range.head < state.doc.length && matchBrackets(state, range.head + 1, -1));\n        if (!matching || !matching.end)\n            return range;\n        found = true;\n        let head = matching.start.from == range.head ? matching.end.to : matching.end.from;\n        return extend ? EditorSelection.range(range.anchor, head) : EditorSelection.cursor(head);\n    });\n    if (!found)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n}\n/// Move the selection to the bracket matching the one it is currently\n/// on, if any.\nconst cursorMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, false);\n/// Extend the selection to the bracket matching the one the selection\n/// head is currently on, if any.\nconst selectMatchingBracket = ({ state, dispatch }) => toMatchingBracket(state, dispatch, true);\nfunction extendSel(view, how) {\n    let selection = updateSel(view.state.selection, range => {\n        let head = how(range);\n        return EditorSelection.range(range.anchor, head.head, head.goalColumn);\n    });\n    if (selection.eq(view.state.selection))\n        return false;\n    view.dispatch(setSel(view.state, selection));\n    return true;\n}\nfunction selectByChar(view, forward) {\n    return extendSel(view, range => view.moveByChar(range, forward));\n}\n/// Move the selection head one character to the left, while leaving\n/// the anchor in place.\nconst selectCharLeft = view => selectByChar(view, view.textDirection != Direction.LTR);\n/// Move the selection head one character to the right.\nconst selectCharRight = view => selectByChar(view, view.textDirection == Direction.LTR);\n/// Move the selection head one character forward.\nconst selectCharForward = view => selectByChar(view, true);\n/// Move the selection head one character backward.\nconst selectCharBackward = view => selectByChar(view, false);\nfunction selectByGroup(view, forward) {\n    return extendSel(view, range => view.moveByGroup(range, forward));\n}\n/// Move the selection head one [group](#commands.cursorGroupLeft) to\n/// the left.\nconst selectGroupLeft = view => selectByGroup(view, view.textDirection != Direction.LTR);\n/// Move the selection head one group to the right.\nconst selectGroupRight = view => selectByGroup(view, view.textDirection == Direction.LTR);\n/// Move the selection head one group forward.\nconst selectGroupForward = view => selectByGroup(view, true);\n/// Move the selection head one group backward.\nconst selectGroupBackward = view => selectByGroup(view, false);\n/// Move the selection head over the next syntactic element to the left.\nconst selectSyntaxLeft = view => extendSel(view, range => moveBySyntax(view.state, range, view.textDirection != Direction.LTR));\n/// Move the selection head over the next syntactic element to the right.\nconst selectSyntaxRight = view => extendSel(view, range => moveBySyntax(view.state, range, view.textDirection == Direction.LTR));\nfunction selectByLine(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward));\n}\n/// Move the selection head one line up.\nconst selectLineUp = view => selectByLine(view, false);\n/// Move the selection head one line down.\nconst selectLineDown = view => selectByLine(view, true);\nfunction selectByPage(view, forward) {\n    return extendSel(view, range => view.moveVertically(range, forward, view.dom.clientHeight));\n}\n/// Move the selection head one page up.\nconst selectPageUp = view => selectByPage(view, false);\n/// Move the selection head one page down.\nconst selectPageDown = view => selectByPage(view, true);\n/// Move the selection head to the next line boundary.\nconst selectLineBoundaryForward = view => extendSel(view, range => moveByLineBoundary(view, range, true));\n/// Move the selection head to the previous line boundary.\nconst selectLineBoundaryBackward = view => extendSel(view, range => moveByLineBoundary(view, range, false));\n/// Move the selection head to the start of the line.\nconst selectLineStart = view => extendSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).from));\n/// Move the selection head to the end of the line.\nconst selectLineEnd = view => extendSel(view, range => EditorSelection.cursor(view.visualLineAt(range.head).to));\n/// Move the selection to the start of the document.\nconst cursorDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: 0 }));\n    return true;\n};\n/// Move the selection to the end of the document.\nconst cursorDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.doc.length }));\n    return true;\n};\n/// Move the selection head to the start of the document.\nconst selectDocStart = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.primary.anchor, head: 0 }));\n    return true;\n};\n/// Move the selection head to the end of the document.\nconst selectDocEnd = ({ state, dispatch }) => {\n    dispatch(setSel(state, { anchor: state.selection.primary.anchor, head: state.doc.length }));\n    return true;\n};\n/// Select the entire document.\nconst selectAll = ({ state, dispatch }) => {\n    dispatch(state.update({ selection: { anchor: 0, head: state.doc.length }, annotations: Transaction.userEvent.of(\"keyboarselection\") }));\n    return true;\n};\n/// Expand the selection to cover entire lines.\nconst selectLine = ({ state, dispatch }) => {\n    let ranges = selectedLineBlocks(state).map(({ from, to }) => EditorSelection.range(from, Math.min(to + 1, state.doc.length)));\n    dispatch(state.update({ selection: new EditorSelection(ranges), annotations: Transaction.userEvent.of(\"keyboardselection\") }));\n    return true;\n};\n/// Select the next syntactic construct that is larger than the\n/// selection. Note that this will only work insofar as the language\n/// [syntaxes](#state.EditorState^syntax) you use builds up a full\n/// syntax tree.\nconst selectParentSyntax = ({ state, dispatch }) => {\n    let selection = updateSel(state.selection, range => {\n        var _a;\n        let context = state.tree.resolve(range.head, 1);\n        while (!((context.start < range.from && context.end >= range.to) ||\n            (context.end > range.to && context.start <= range.from) ||\n            !((_a = context.parent) === null || _a === void 0 ? void 0 : _a.parent)))\n            context = context.parent;\n        return EditorSelection.range(context.end, context.start);\n    });\n    dispatch(setSel(state, selection));\n    return true;\n};\n/// Simplify the current selection. When multiple ranges are selected,\n/// reduce it to its primary range. Otherwise, if the selection is\n/// non-empty, convert it to a cursor selection.\nconst simplifySelection = ({ state, dispatch }) => {\n    let cur = state.selection, selection = null;\n    if (cur.ranges.length > 1)\n        selection = new EditorSelection([cur.primary]);\n    else if (!cur.primary.empty)\n        selection = new EditorSelection([EditorSelection.cursor(cur.primary.head)]);\n    if (!selection)\n        return false;\n    dispatch(setSel(state, selection));\n    return true;\n};\nfunction deleteBy(view, by) {\n    let { state } = view, changes = state.changeByRange(range => {\n        let { from, to } = range;\n        if (from == to) {\n            let towards = by(from);\n            from = Math.min(from, towards);\n            to = Math.max(to, towards);\n        }\n        return from == to ? { range } : { changes: { from, to }, range: EditorSelection.cursor(from) };\n    });\n    if (changes.changes.empty)\n        return false;\n    view.dispatch(changes, { scrollIntoView: true, annotations: Transaction.userEvent.of(\"delete\") });\n    return true;\n}\nconst deleteByChar = (view, forward, codePoint) => deleteBy(view, pos => {\n    let { state } = view, line = state.doc.lineAt(pos), before;\n    if (!forward && pos > line.from && pos < line.from + 200 &&\n        !/[^ \\t]/.test(before = line.slice(0, pos - line.from))) {\n        if (before[before.length - 1] == \"\\t\")\n            return pos - 1;\n        let col = countColumn(before, 0, state.tabSize), drop = col % state.indentUnit || state.indentUnit;\n        for (let i = 0; i < drop && before[before.length - 1 - i] == \" \"; i++)\n            pos--;\n        return pos;\n    }\n    let target;\n    if (codePoint) {\n        let next = line.slice(pos - line.from + (forward ? 0 : -2), pos - line.from + (forward ? 2 : 0));\n        let size = next ? codePointSize(codePointAt(next, 0)) : 1;\n        target = forward ? Math.min(state.doc.length, pos + size) : Math.max(0, pos - size);\n    }\n    else {\n        target = line.findClusterBreak(pos - line.from, forward) + line.from;\n    }\n    if (target == pos && line.number != (forward ? state.doc.lines : 1))\n        target += forward ? 1 : -1;\n    return target;\n});\n/// Delete the selection, or, for cursor selections, the code point\n/// before the cursor.\nconst deleteCodePointBackward = view => deleteByChar(view, false, true);\n/// Delete the selection, or, for cursor selections, the code point\n/// after the cursor.\nconst deleteCodePointForward = view => deleteByChar(view, true, true);\n/// Delete the selection, or, for cursor selections, the character\n/// before the cursor.\nconst deleteCharBackward = view => deleteByChar(view, false, false);\n/// Delete the selection or the character after the cursor.\nconst deleteCharForward = view => deleteByChar(view, true, false);\nconst deleteByGroup = (view, forward) => deleteBy(view, pos => {\n    let { state } = view, line = state.doc.lineAt(pos), categorize = state.charCategorizer(pos);\n    for (let cat = null;;) {\n        let next, nextChar;\n        if (pos == (forward ? line.to : line.from)) {\n            if (line.number == (forward ? state.doc.lines : 1))\n                break;\n            line = state.doc.line(line.number + (forward ? 1 : -1));\n            next = forward ? line.from : line.to;\n            nextChar = \"\\n\";\n        }\n        else {\n            next = line.findClusterBreak(pos - line.from, forward) + line.from;\n            nextChar = line.slice(Math.min(pos, next) - line.from, Math.max(pos, next) - line.from);\n        }\n        let nextCat = categorize(nextChar);\n        if (cat != null && nextCat != cat)\n            break;\n        if (nextCat != CharCategory.Space)\n            cat = nextCat;\n        pos = next;\n    }\n    return pos;\n});\n/// Delete the selection or backward until the end of the next\n/// [group](#view.EditorView.moveByGroup).\nconst deleteGroupBackward = view => deleteByGroup(view, false);\n/// Delete the selection or forward until the end of the next group.\nconst deleteGroupForward = view => deleteByGroup(view, true);\n/// Delete the selection, or, if it is a cursor selection, delete to\n/// the end of the line. If the cursor is directly at the end of the\n/// line, delete the line break after it.\nconst deleteToLineEnd = view => deleteBy(view, pos => {\n    let lineEnd = view.visualLineAt(pos).to;\n    if (pos < lineEnd)\n        return lineEnd;\n    return Math.max(view.state.doc.length, pos + 1);\n});\n/// Delete all whitespace directly before a line end from the\n/// document.\nconst deleteTrailingWhitespace = ({ state, dispatch }) => {\n    let changes = [];\n    for (let pos = 0, iter = state.doc.iterLines(); !iter.next().done;) {\n        let trailing = iter.value.search(/\\s+$/);\n        if (trailing > -1)\n            changes.push({ from: pos + trailing, to: pos + iter.value.length });\n        pos += iter.value.length + 1;\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes }));\n    return true;\n};\n/// Replace each selection range with a line break, leaving the cursor\n/// on the line before the break.\nconst splitLine = ({ state, dispatch }) => {\n    let changes = state.changeByRange(range => {\n        return { changes: { from: range.from, to: range.to, insert: Text.of([\"\", \"\"]) },\n            range: EditorSelection.cursor(range.from) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true, annotations: Transaction.userEvent.of(\"input\") }));\n    return true;\n};\n/// Flip the characters before and after the cursor(s).\nconst transposeChars = ({ state, dispatch }) => {\n    let changes = state.changeByRange(range => {\n        if (!range.empty || range.from == 0 || range.from == state.doc.length)\n            return { range };\n        let pos = range.from, line = state.doc.lineAt(pos);\n        let from = pos == line.from ? pos - 1 : line.findClusterBreak(pos - line.from, false) + line.from;\n        let to = pos == line.to ? pos + 1 : line.findClusterBreak(pos - line.from, true) + line.from;\n        return { changes: { from, to, insert: state.doc.slice(pos, to).append(state.doc.slice(from, pos)) },\n            range: EditorSelection.cursor(to) };\n    });\n    if (changes.changes.empty)\n        return false;\n    dispatch(state.update(changes, { scrollIntoView: true }));\n    return true;\n};\nfunction selectedLineBlocks(state) {\n    let blocks = [], upto = -1;\n    for (let range of state.selection.ranges) {\n        let startLine = state.doc.lineAt(range.from), endLine = state.doc.lineAt(range.to);\n        if (upto == startLine.number)\n            blocks[blocks.length - 1].to = endLine.to;\n        else\n            blocks.push({ from: startLine.from, to: endLine.to });\n        upto = endLine.number;\n    }\n    return blocks;\n}\nfunction moveLine(state, dispatch, forward) {\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward ? block.to == state.doc.length : block.from == 0)\n            continue;\n        let nextLine = state.doc.lineAt(forward ? block.to + 1 : block.from - 1);\n        if (forward)\n            changes.push({ from: block.to, to: nextLine.to }, { from: block.from, insert: nextLine.slice() + state.lineBreak });\n        else\n            changes.push({ from: nextLine.from, to: block.from }, { from: block.to, insert: state.lineBreak + nextLine.slice() });\n    }\n    if (!changes.length)\n        return false;\n    dispatch(state.update({ changes, scrollIntoView: true }));\n    return true;\n}\n/// Move the selected lines up one line.\nconst moveLineUp = ({ state, dispatch }) => moveLine(state, dispatch, false);\n/// Move the selected lines down one line.\nconst moveLineDown = ({ state, dispatch }) => moveLine(state, dispatch, true);\nfunction copyLine(state, dispatch, forward) {\n    let changes = [];\n    for (let block of selectedLineBlocks(state)) {\n        if (forward)\n            changes.push({ from: block.from, insert: state.doc.slice(block.from, block.to) + state.lineBreak });\n        else\n            changes.push({ from: block.to, insert: state.lineBreak + state.doc.slice(block.from, block.to) });\n    }\n    dispatch(state.update({ changes, scrollIntoView: true }));\n    return true;\n}\n/// Create a copy of the selected lines. Keep the selection in the top copy.\nconst copyLineUp = ({ state, dispatch }) => copyLine(state, dispatch, false);\n/// Create a copy of the selected lines. Keep the selection in the bottom copy.\nconst copyLineDown = ({ state, dispatch }) => copyLine(state, dispatch, true);\n/// Delete selected lines.\nconst deleteLine = view => {\n    let { state } = view, changes = state.changes(selectedLineBlocks(state).map(({ from, to }) => {\n        if (from > 0)\n            from--;\n        else if (to < state.doc.length)\n            to++;\n        return { from, to };\n    }));\n    let selection = updateSel(state.selection, range => view.moveVertically(range, true)).map(changes);\n    view.dispatch({ changes, selection, scrollIntoView: true });\n    return true;\n};\nfunction getIndentation(cx, pos) {\n    for (let f of cx.state.facet(EditorState.indentation)) {\n        let result = f(cx, pos);\n        if (result > -1)\n            return result;\n    }\n    return -1;\n}\n/// Replace the selection with a newline.\nconst insertNewline = ({ state, dispatch }) => {\n    dispatch(state.update(state.replaceSelection(state.lineBreak), { scrollIntoView: true }));\n    return true;\n};\nfunction isBetweenBrackets(state, pos) {\n    if (/\\(\\)|\\[\\]|\\{\\}/.test(state.sliceDoc(pos - 1, pos + 1)))\n        return { from: pos, to: pos };\n    let context = state.tree.resolve(pos);\n    let before = context.childBefore(pos), after = context.childAfter(pos), closedBy;\n    if (before && after && before.end <= pos && after.start >= pos &&\n        (closedBy = before.type.prop(NodeProp.closedBy)) && closedBy.indexOf(after.name) > -1)\n        return { from: before.end, to: after.start };\n    return null;\n}\n/// Replace the selection with a newline and indent the newly created\n/// line(s). If the current line consists only of whitespace, this\n/// will also delete that whitespace. When the cursor is between\n/// matching brackets, an additional newline will be inserted after\n/// the cursor.\nconst insertNewlineAndIndent = ({ state, dispatch }) => {\n    let changes = state.changeByRange(({ from, to }) => {\n        let explode = from == to && isBetweenBrackets(state, from);\n        let cx = new IndentContext(state, { simulateBreak: from, simulateDoubleBreak: !!explode });\n        let indent = getIndentation(cx, from);\n        if (indent < 0)\n            indent = /^\\s*/.exec(state.doc.lineAt(from).slice(0, 50))[0].length;\n        let line = state.doc.lineAt(from);\n        while (to < line.to && /\\s/.test(line.slice(to - line.from, to + 1 - line.from)))\n            to++;\n        if (explode)\n            ({ from, to } = explode);\n        else if (from > line.from && from < line.from + 100 && !/\\S/.test(line.slice(0, from)))\n            from = line.from;\n        let insert = [\"\", state.indentString(indent)];\n        if (explode)\n            insert.push(state.indentString(cx.lineIndent(line)));\n        return { changes: { from, to, insert: Text.of(insert) },\n            range: EditorSelection.cursor(from + 1 + indent) };\n    });\n    dispatch(state.update(changes, { scrollIntoView: true }));\n    return true;\n};\nfunction changeBySelectedLine(state, f) {\n    let atLine = -1;\n    return state.changeByRange(range => {\n        let changes = [];\n        for (let line = state.doc.lineAt(range.from);;) {\n            if (line.number > atLine) {\n                f(line, changes, range);\n                atLine = line.number;\n            }\n            if (range.to <= line.to)\n                break;\n            line = state.doc.lineAt(line.to + 1);\n        }\n        let changeSet = state.changes(changes);\n        return { changes,\n            range: EditorSelection.range(changeSet.mapPos(range.anchor, 1), changeSet.mapPos(range.head, 1)) };\n    });\n}\n/// Auto-indent the selected lines. This uses the [indentation\n/// facet](#state.EditorState^indentation) as source for auto-indent\n/// information.\nconst indentSelection = ({ state, dispatch }) => {\n    let updated = Object.create(null);\n    let context = new IndentContext(state, { overrideIndentation: start => {\n            let found = updated[start];\n            return found == null ? -1 : found;\n        } });\n    let changes = changeBySelectedLine(state, (line, changes, range) => {\n        let indent = getIndentation(context, line.from);\n        if (indent < 0)\n            return;\n        let cur = /^\\s*/.exec(line.slice(0, Math.min(line.length, 200)))[0];\n        let norm = state.indentString(indent);\n        if (cur != norm || range.from < line.from + cur.length) {\n            updated[line.from] = indent;\n            changes.push({ from: line.from, to: line.from + cur.length, insert: norm });\n        }\n    });\n    if (!changes.changes.empty)\n        dispatch(state.update(changes));\n    return true;\n};\n/// Add a [unit](#state.EditorState^indentUnit) of indentation to all\n/// selected lines.\nconst indentMore = ({ state, dispatch }) => {\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        changes.push({ from: line.from, insert: state.facet(EditorState.indentUnit) });\n    })));\n    return true;\n};\n/// Remove a [unit](#state.EditorState^indentUnit) of indentation from\n/// all selected lines.\nconst indentLess = ({ state, dispatch }) => {\n    dispatch(state.update(changeBySelectedLine(state, (line, changes) => {\n        let lineStart = line.slice(0, Math.min(line.length, 200));\n        let space = /^\\s*/.exec(lineStart)[0];\n        if (!space)\n            return;\n        let col = countColumn(space, 0, state.tabSize), insert = state.indentString(Math.max(0, col - state.indentUnit)), keep = 0;\n        while (keep < space.length && keep < insert.length && space.charCodeAt(keep) == insert.charCodeAt(keep))\n            keep++;\n        changes.push({ from: line.from + keep, to: line.from + space.length, insert: insert.slice(keep) });\n    })));\n    return true;\n};\n/// Array of key bindings containing the Emacs-style bindings that are\n/// available on macOS by default.\n///\n///  - Ctrl-b: [`cursorCharLeft`](#commands.cursorCharLeft) ([`selectCharLeft`](#commands.selectCharLeft) with Shift)\n///  - Ctrl-f: [`cursorCharRight`](#commands.cursorCharRight) ([`selectCharRight`](#commands.selectCharRight) with Shift)\n///  - Ctrl-p: [`cursorLineUp`](#commands.cursorLineUp) ([`selectLineUp`](#commands.selectLineUp) with Shift)\n///  - Ctrl-n: [`cursorLineDown`](#commands.cursorLineDown) ([`selectLineDown`](#commands.selectLineDown) with Shift)\n///  - Ctrl-a: [`cursorLineStart`](#commands.cursorLineStart) ([`selectLineStart`](#commands.selectLineStart) with Shift)\n///  - Ctrl-e: [`cursorLineEnd`](#commands.cursorLineEnd) ([`selectLineEnd`](#commands.selectLineEnd) with Shift)\n///  - Ctrl-d: [`deleteCharForward`](#commands.deleteCharForward)\n///  - Ctrl-h: [`deleteCharBackward`](#commands.deleteCharBackward)\n///  - Ctrl-k: [`deleteToLineEnd`](#commands.deleteToLineEnd)\n///  - Alt-d: [`deleteGroupForward`](#commands.deleteGroupForward)\n///  - Ctrl-Alt-h: [`deleteGroupBackward`](#commands.deleteGroupBackward)\n///  - Ctrl-o: [`splitLine`](#commands.splitLine)\n///  - Ctrl-t: [`transposeChars`](#commands.transposeChars)\n///  - Alt-f: [`cursorGroupForward`](#commands.cursorGroupForward) ([`selectGroupForward`](#commands.selectGroupForward) with Shift)\n///  - Alt-b: [`cursorGroupBackward`](#commands.cursorGroupBackward) ([`selectGroupBackward`](#commands.selectGroupBackward) with Shift)\n///  - Alt-<: [`cursorDocStart`](#commands.cursorDocStart)\n///  - Alt->: [`cursorDocEnd`](#commands.cursorDocEnd)\n///  - Ctrl-v: [`cursorPageDown`](#commands.cursorPageDown)\n///  - Alt-v: [`cursorPageUp`](#commands.cursorPageUp)\nconst emacsStyleKeymap = [\n    { key: \"Ctrl-b\", run: cursorCharLeft, shift: selectCharLeft },\n    { key: \"Ctrl-f\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Ctrl-p\", run: cursorLineUp, shift: selectLineUp },\n    { key: \"Ctrl-n\", run: cursorLineDown, shift: selectLineDown },\n    { key: \"Ctrl-a\", run: cursorLineStart, shift: selectLineStart },\n    { key: \"Ctrl-e\", run: cursorLineEnd, shift: selectLineEnd },\n    { key: \"Ctrl-d\", run: deleteCharForward },\n    { key: \"Ctrl-h\", run: deleteCharBackward },\n    { key: \"Ctrl-k\", run: deleteToLineEnd },\n    { key: \"Alt-d\", run: deleteGroupForward },\n    { key: \"Ctrl-Alt-h\", run: deleteGroupBackward },\n    { key: \"Ctrl-o\", run: splitLine },\n    { key: \"Ctrl-t\", run: transposeChars },\n    { key: \"Alt-f\", run: cursorGroupForward, shift: selectGroupForward },\n    { key: \"Alt-b\", run: cursorGroupBackward, shift: selectGroupBackward },\n    { key: \"Alt-<\", run: cursorDocStart },\n    { key: \"Alt->\", run: cursorDocEnd },\n    { key: \"Ctrl-v\", run: cursorPageDown },\n    { key: \"Alt-v\", run: cursorPageUp },\n];\n/// An array of key bindings closely sticking to platform-standard or\n/// widely used bindings. (This includes the bindings from\n/// [`emacsStyleKeymap`](#commands.emacsStyleKeymap), with their `key`\n/// property changed to `mac`.)\n///\n///  - ArrowLeft: [`cursorCharLeft`](#commands.cursorCharLeft) ([`selectCharLeft`](#commands.selectCharLeft) with Shift)\n///  - ArrowRight: [`cursorCharRight`](#commands.cursorCharRight) ([`selectCharRight`](#commands.selectCharRight) with Shift)\n///  - Ctrl-ArrowLeft (Alt-ArrowLeft on macOS): [`cursorGroupLeft`](#commands.cursorGroupLeft) ([`selectGroupLeft`](#commands.selectGroupLeft) with Shift)\n///  - Ctrl-ArrowRight (Alt-ArrowRight on macOS): [`cursorGroupRight`](#commands.cursorGroupRight) ([`selectGroupRight`](#commands.selectGroupRight) with Shift)\n///  - Cmd-ArrowLeft (on macOS): [`cursorLineStart`](#commands.cursorLineStart) ([`selectLineStart`](#commands.selectLineStart) with Shift)\n///  - Cmd-ArrowRight (on macOS): [`cursorLineEnd`](#commands.cursorLineEnd) ([`selectLineEnd`](#commands.selectLineEnd) with Shift)\n///  - ArrowUp: [`cursorLineUp`](#commands.cursorLineUp) ([`selectLineUp`](#commands.selectLineUp) with Shift)\n///  - ArrowDown: [`cursorLineDown`](#commands.cursorLineDown) ([`selectLineDown`](#commands.selectLineDown) with Shift)\n///  - Cmd-ArrowUp (on macOS): [`cursorDocStart`](#commands.cursorDocStart) ([`selectDocStart`](#commands.selectDocStart) with Shift)\n///  - Cmd-ArrowDown (on macOS): [`cursorDocEnd`](#commands.cursorDocEnd) ([`selectDocEnd`](#commands.selectDocEnd) with Shift)\n///  - Ctrl-ArrowUp (on macOS): [`cursorPageUp`](#commands.cursorPageUp) ([`selectPageUp`](#commands.selectPageUp) with Shift)\n///  - Ctrl-ArrowDown (on macOS): [`cursorPageDown`](#commands.cursorPageDown) ([`selectPageDown`](#commands.selectPageDown) with Shift)\n///  - PageUp: [`cursorPageUp`](#commands.cursorPageUp) ([`selectPageUp`](#commands.selectPageUp) with Shift)\n///  - PageDown: [`cursorPageDown`](#commands.cursorPageDown) ([`selectPageDown`](#commands.selectPageDown) with Shift)\n///  - Home: [`cursorLineBoundaryBackward`](#commands.cursorLineBoundaryBackward) ([`selectLineBoundaryBackward`](#commands.selectLineBoundaryBackward) with Shift)\n///  - End: [`cursorLineBoundaryForward`](#commands.cursorLineBoundaryForward) ([`selectLineBoundaryForward`](#commands.selectLineBoundaryForward) with Shift)\n///  - Ctrl-Home (Cmd-Home on macOS): [`cursorDocStart`](#commands.cursorDocStart) ([`selectDocStart`](#commands.selectDocStart) with Shift)\n///  - Ctrl-End (Cmd-Home on macOS): [`cursorDocEnd`](#commands.cursorDocEnd) ([`selectDocEnd`](#commands.selectDocEnd) with Shift)\n///  - Enter: [`insertNewlineAndIndent`](#commands.insertNewlineAndIndent)\n///  - Ctrl-a (Cmd-a on macOS): [`selectAll`](#commands.selectAll)\n///  - Backspace: [`deleteCodePointBackward`](#commands.deleteCodePointBackward)\n///  - Delete: [`deleteCharForward`](#commands.deleteCharForward)\n///  - Ctrl-Backspace (Alt-Backspace on macOS): [`deleteGroupBackward`](#commands.deleteGroupBackward)\n///  - Ctrl-Delete (Alt-Delete on macOS): [`deleteGroupForward`](#commands.deleteGroupForward)\nconst standardKeymap = [\n    { key: \"ArrowLeft\", run: cursorCharLeft, shift: selectCharLeft },\n    { key: \"Mod-ArrowLeft\", mac: \"Alt-ArrowLeft\", run: cursorGroupLeft, shift: selectGroupLeft },\n    { mac: \"Cmd-ArrowLeft\", run: cursorLineStart, shift: selectLineStart },\n    { key: \"ArrowRight\", run: cursorCharRight, shift: selectCharRight },\n    { key: \"Mod-ArrowRight\", mac: \"Alt-ArrowRight\", run: cursorGroupRight, shift: selectGroupRight },\n    { mac: \"Cmd-ArrowRight\", run: cursorLineEnd, shift: selectLineEnd },\n    { key: \"ArrowUp\", run: cursorLineUp, shift: selectLineUp },\n    { mac: \"Cmd-ArrowUp\", run: cursorDocStart, shift: selectDocStart },\n    { mac: \"Ctrl-ArrowUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"ArrowDown\", run: cursorLineDown, shift: selectLineDown },\n    { mac: \"Cmd-ArrowDown\", run: cursorDocEnd, shift: selectDocEnd },\n    { mac: \"Ctrl-ArrowDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"PageUp\", run: cursorPageUp, shift: selectPageUp },\n    { key: \"PageDown\", run: cursorPageDown, shift: selectPageDown },\n    { key: \"Home\", run: cursorLineBoundaryBackward, shift: selectLineBoundaryBackward },\n    { key: \"Mod-Home\", run: cursorDocStart, shift: selectDocStart },\n    { key: \"End\", run: cursorLineBoundaryForward, shift: selectLineBoundaryForward },\n    { key: \"Mod-End\", run: cursorDocEnd, shift: selectDocEnd },\n    { key: \"Enter\", run: insertNewlineAndIndent },\n    { key: \"Mod-a\", run: selectAll },\n    { key: \"Backspace\", run: deleteCodePointBackward },\n    { key: \"Delete\", run: deleteCharForward },\n    { key: \"Mod-Backspace\", mac: \"Alt-Backspace\", run: deleteGroupBackward },\n    { key: \"Mod-Delete\", mac: \"Alt-Delete\", run: deleteGroupForward },\n].concat(emacsStyleKeymap.map(b => ({ mac: b.key, run: b.run, shift: b.shift })));\n/// The default keymap. Includes all bindings from\n/// [`standardKeymap`](#commands.standardKeymap) plus the following:\n///\n/// - Alt-ArrowLeft (Ctrl-ArrowLeft on macOS): [`cursorSyntaxLeft`](#commands.cursorSyntaxLeft) ([`selectSyntaxLeft`](#commands.selectSyntaxLeft) with Shift)\n/// - Alt-ArrowRight (Ctrl-ArrowRight on macOS): [`cursorSyntaxRight`](#commands.cursorSyntaxRight) ([`selectSyntaxRight`](#commands.selectSyntaxRight) with Shift)\n/// - Alt-ArrowUp: [`moveLineUp`](#commands.moveLineUp)\n/// - Alt-ArrowDown: [`moveLineDown`](#commands.moveLineDown)\n/// - Shift-Alt-ArrowUp: [`copyLineUp`](#commands.copyLineUp)\n/// - Shift-Alt-ArrowDown: [`copyLineDown`](#commands.copyLineDown)\n/// - Escape: [`simplifySelection`](#commands.simplifySelection)\n/// - Ctrl-l (Cmd-l on macOS): [`selectLine`](#commands.selectLine)\n/// - Ctrl-i (Cmd-i on macOS): [`selectParentSyntax`](#commands.selectParentSyntax)\n/// - Ctrl-[ (Cmd-[ on macOS): [`indentLess`](#commands.indentLess)\n/// - Ctrl-] (Cmd-] on macOS): [`indentMore`](#commands.indentMore)\n/// - Ctrl-Alt-\\\\ (Cmd-Alt-\\\\ on macOS): [`indentSelection`](#commands.indentSelection)\n/// - Shift-Ctrl-k (Shift-Cmd-k on macOS): [`deleteLine`](#commands.deleteLine)\n/// - Shift-Ctrl-\\\\ (Shift-Cmd-\\\\ on macOS): [`cursorMatchingBracket`](#commands.cursorMatchingBracket)\nconst defaultKeymap = [\n    { key: \"Alt-ArrowLeft\", mac: \"Ctrl-ArrowLeft\", run: cursorSyntaxLeft, shift: selectSyntaxLeft },\n    { key: \"Alt-ArrowRight\", mac: \"Ctrl-ArrowRight\", run: cursorSyntaxRight, shift: selectSyntaxRight },\n    { key: \"Alt-ArrowUp\", run: moveLineUp },\n    { key: \"Shift-Alt-ArrowUp\", run: copyLineUp },\n    { key: \"Alt-ArrowDown\", run: moveLineDown },\n    { key: \"Shift-Alt-ArrowDown\", run: copyLineDown },\n    { key: \"Escape\", run: simplifySelection },\n    { key: \"Mod-l\", run: selectLine },\n    { key: \"Mod-i\", run: selectParentSyntax },\n    { key: \"Mod-[\", run: indentLess },\n    { key: \"Mod-]\", run: indentMore },\n    { key: \"Mod-Alt-\\\\\", run: indentSelection },\n    { key: \"Shift-Mod-k\", run: deleteLine },\n    { key: \"Shift-Mod-\\\\\", run: cursorMatchingBracket }\n].concat(standardKeymap);\n\nexport { copyLineDown, copyLineUp, cursorCharBackward, cursorCharForward, cursorCharLeft, cursorCharRight, cursorDocEnd, cursorDocStart, cursorGroupBackward, cursorGroupForward, cursorGroupLeft, cursorGroupRight, cursorLineBoundaryBackward, cursorLineBoundaryForward, cursorLineDown, cursorLineEnd, cursorLineStart, cursorLineUp, cursorMatchingBracket, cursorPageDown, cursorPageUp, cursorSyntaxLeft, cursorSyntaxRight, defaultKeymap, deleteCharBackward, deleteCharForward, deleteCodePointBackward, deleteCodePointForward, deleteGroupBackward, deleteGroupForward, deleteLine, deleteToLineEnd, deleteTrailingWhitespace, emacsStyleKeymap, indentLess, indentMore, indentSelection, insertNewline, insertNewlineAndIndent, moveLineDown, moveLineUp, selectAll, selectCharBackward, selectCharForward, selectCharLeft, selectCharRight, selectDocEnd, selectDocStart, selectGroupBackward, selectGroupForward, selectGroupLeft, selectGroupRight, selectLine, selectLineBoundaryBackward, selectLineBoundaryForward, selectLineDown, selectLineEnd, selectLineStart, selectLineUp, selectMatchingBracket, selectPageDown, selectPageUp, selectParentSyntax, selectSyntaxLeft, selectSyntaxRight, simplifySelection, splitLine, standardKeymap, transposeChars };\n","import { EditorView } from '@codemirror/next/view';\nimport { EditorSelection, CharCategory } from '@codemirror/next/state';\nimport { codePointSize, codePointAt, fromCodePoint } from '@codemirror/next/text';\n\nconst defaults = {\n    brackets: [\"(\", \"[\", \"{\", \"'\", '\"'],\n    before: \")]}'\\\":;>\"\n};\n/// Extension to enable bracket-closing behavior. When a closeable\n/// bracket is typed, its closing bracket is immediately inserted\n/// after the cursor. When closing a bracket directly in front of that\n/// closing bracket, the cursor moves over the existing bracket.\nfunction closeBrackets() {\n    return EditorView.inputHandler.of(handleInput);\n}\nconst definedClosing = \"()[]{}<>\";\nfunction closing(ch) {\n    for (let i = 0; i < definedClosing.length; i += 2)\n        if (definedClosing.charCodeAt(i) == ch)\n            return definedClosing.charAt(i + 1);\n    return fromCodePoint(ch < 128 ? ch : ch + 1);\n}\nfunction config(state, pos) {\n    return state.languageDataAt(\"closeBrackets\", pos)[0] || defaults;\n}\nfunction handleInput(view, from, to, insert) {\n    let sel = view.state.selection.primary;\n    if (insert.length > 2 || insert.length == 2 && codePointSize(codePointAt(insert, 0)) == 1 ||\n        from != sel.from || to != sel.to)\n        return false;\n    let tr = handleInsertion(view.state, insert);\n    if (!tr)\n        return false;\n    view.dispatch(tr);\n    return true;\n}\n/// Command that implements deleting a pair of matching brackets when\n/// the cursor is between them.\nconst deleteBracketPair = ({ state, dispatch }) => {\n    let conf = config(state, state.selection.primary.head);\n    let tokens = conf.brackets || defaults.brackets;\n    let dont = null, changes = state.changeByRange(range => {\n        if (range.empty) {\n            let before = prevChar(state.doc, range.head);\n            for (let token of tokens) {\n                if (token == before && nextChar(state.doc, range.head) == closing(codePointAt(token, 0)))\n                    return { changes: { from: range.head - token.length, to: range.head + token.length },\n                        range: EditorSelection.cursor(range.head - token.length) };\n            }\n        }\n        return { range: dont = range };\n    });\n    if (!dont)\n        dispatch(state.update(changes, { scrollIntoView: true }));\n    return !dont;\n};\n/// Close-brackets related key bindings. Binds Backspace to\n/// [`deleteBracketPair`](#closebrackets.deleteBracketPair).\nconst closeBracketsKeymap = [\n    { key: \"Backspace\", run: deleteBracketPair }\n];\n/// Implements the extension's behavior on text insertion. @internal\nfunction handleInsertion(state, ch) {\n    let conf = config(state, state.selection.primary.head);\n    let tokens = conf.brackets || defaults.brackets;\n    for (let tok of tokens) {\n        let closed = closing(codePointAt(tok, 0));\n        if (ch == tok)\n            return closed == tok ? handleSame(state, tok, tokens.indexOf(tok + tok + tok) > -1)\n                : handleOpen(state, tok, closed, conf.before || defaults.before);\n        if (ch == closed)\n            return handleClose(state, tok, closed);\n    }\n    return null;\n}\nfunction nextChar(doc, pos) {\n    let next = doc.sliceString(pos, pos + 2);\n    return next.slice(0, codePointSize(codePointAt(next, 0)));\n}\nfunction prevChar(doc, pos) {\n    let prev = doc.sliceString(pos - 2, pos);\n    return codePointSize(codePointAt(prev, 0)) == prev.length ? prev : prev.slice(1);\n}\nfunction handleOpen(state, open, close, closeBefore) {\n    let dont = null, changes = state.changeByRange(range => {\n        if (!range.empty)\n            return { changes: [{ insert: open, from: range.from }, { insert: close, from: range.to }],\n                range: EditorSelection.range(range.anchor + open.length, range.head + open.length) };\n        let next = nextChar(state.doc, range.head);\n        if (!next || /\\s/.test(next) || closeBefore.indexOf(next) > -1)\n            return { changes: { insert: open + close, from: range.head },\n                range: EditorSelection.cursor(range.head + open.length) };\n        return { range: dont = range };\n    });\n    return dont ? null : state.update(changes, { scrollIntoView: true });\n}\nfunction handleClose(state, _open, close) {\n    let dont = null, moved = state.selection.ranges.map(range => {\n        if (range.empty && nextChar(state.doc, range.head) == close)\n            return EditorSelection.cursor(range.head + close.length);\n        return dont = range;\n    });\n    return dont ? null : state.update({ selection: EditorSelection.create(moved, state.selection.primaryIndex),\n        scrollIntoView: true });\n}\n// Handles cases where the open and close token are the same, and\n// possibly triple quotes (as in `\"\"\"abc\"\"\"`-style quoting).\nfunction handleSame(state, token, allowTriple) {\n    let dont = null, changes = state.changeByRange(range => {\n        if (!range.empty)\n            return { changes: [{ insert: token, from: range.from }, { insert: token, from: range.to }],\n                range: EditorSelection.range(range.anchor + token.length, range.head + token.length) };\n        let pos = range.head, next = nextChar(state.doc, pos);\n        if (next == token) {\n            if (nodeStart(state, pos)) {\n                return { changes: { insert: token + token, from: pos },\n                    range: EditorSelection.cursor(pos + token.length) };\n            }\n            else {\n                let isTriple = allowTriple && state.sliceDoc(pos, pos + token.length * 3) == token + token + token;\n                return { range: EditorSelection.cursor(pos + token.length * (isTriple ? 3 : 1)) };\n            }\n        }\n        else if (allowTriple && state.sliceDoc(pos - 2 * token.length, pos) == token + token &&\n            nodeStart(state, pos - 2 * token.length)) {\n            return { changes: { insert: token + token + token + token, from: pos },\n                range: EditorSelection.cursor(pos + token.length) };\n        }\n        else if (state.charCategorizer(pos)(next) != CharCategory.Word) {\n            let prev = state.sliceDoc(pos - 1, pos);\n            if (prev != token && state.charCategorizer(pos)(prev) != CharCategory.Word)\n                return { changes: { insert: token + token, from: pos },\n                    range: EditorSelection.cursor(pos + token.length) };\n        }\n        return { range: dont = range };\n    });\n    return dont ? null : state.update(changes, { scrollIntoView: true });\n}\nfunction nodeStart(state, pos) {\n    let tree = state.tree.resolve(pos + 1);\n    return tree.parent && tree.start == pos;\n}\n\nexport { closeBrackets, closeBracketsKeymap, deleteBracketPair, handleInsertion };\n","import { ViewPlugin, themeClass, PluginField, EditorView } from '@codemirror/next/view';\nimport { Facet } from '@codemirror/next/state';\n\nconst panelConfig = Facet.define({\n    combine(configs) {\n        let topContainer, bottomContainer;\n        for (let c of configs) {\n            topContainer = topContainer || c.topContainer;\n            bottomContainer = bottomContainer || c.bottomContainer;\n        }\n        return { topContainer, bottomContainer };\n    }\n});\n/// Enables the panel-managing extension.\nfunction panels(config) {\n    let ext = [panelPlugin, baseTheme];\n    if (config)\n        ext.push(panelConfig.of(config));\n    return ext;\n}\n/// Opening a panel is done by providing an object describing the\n/// panel through this facet.\nconst showPanel = Facet.define();\n/// Get the active panel created by the given constructor, if any.\n/// This can be useful when you need access to your panels' DOM\n/// structure.\nfunction getPanel(view, panel) {\n    let plugin = view.plugin(panelPlugin);\n    let index = view.state.facet(showPanel).indexOf(panel);\n    return plugin && index > -1 ? plugin.panels[index] : null;\n}\nconst panelPlugin = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.specs = view.state.facet(showPanel);\n        this.panels = this.specs.map(spec => spec(view));\n        let conf = view.state.facet(panelConfig);\n        this.top = new PanelGroup(view, true, conf.topContainer);\n        this.bottom = new PanelGroup(view, false, conf.bottomContainer);\n        this.top.sync(this.panels.filter(p => p.top));\n        this.bottom.sync(this.panels.filter(p => !p.top));\n        for (let p of this.panels) {\n            p.dom.className += \" \" + panelClass(p);\n            if (p.mount)\n                p.mount();\n        }\n    }\n    update(update) {\n        let conf = update.state.facet(panelConfig);\n        if (this.top.container != conf.topContainer) {\n            this.top.sync([]);\n            this.top = new PanelGroup(update.view, true, conf.topContainer);\n        }\n        if (this.bottom.container != conf.bottomContainer) {\n            this.bottom.sync([]);\n            this.bottom = new PanelGroup(update.view, false, conf.bottomContainer);\n        }\n        this.top.syncClasses();\n        this.bottom.syncClasses();\n        let specs = update.state.facet(showPanel);\n        if (specs != this.specs) {\n            let panels = [], top = [], bottom = [], mount = [];\n            for (let spec of specs) {\n                let known = this.specs.indexOf(spec), panel;\n                if (known < 0) {\n                    panel = spec(update.view);\n                    mount.push(panel);\n                }\n                else {\n                    panel = this.panels[known];\n                    if (panel.update)\n                        panel.update(update);\n                }\n                panels.push(panel);\n                (panel.top ? top : bottom).push(panel);\n            }\n            this.specs = specs;\n            this.panels = panels;\n            this.top.sync(top);\n            this.bottom.sync(bottom);\n            for (let p of mount) {\n                p.dom.className += \" \" + panelClass(p);\n                if (p.mount)\n                    p.mount();\n            }\n        }\n        else {\n            for (let p of this.panels)\n                if (p.update)\n                    p.update(update);\n        }\n    }\n    destroy() {\n        this.top.sync([]);\n        this.bottom.sync([]);\n    }\n}, {\n    provide: PluginField.scrollMargins.from(value => ({ top: value.top.scrollMargin(), bottom: value.bottom.scrollMargin() }))\n});\nfunction panelClass(panel) {\n    return themeClass(panel.style ? `panel.${panel.style}` : \"panel\");\n}\nclass PanelGroup {\n    constructor(view, top, container) {\n        this.view = view;\n        this.top = top;\n        this.container = container;\n        this.dom = undefined;\n        this.classes = \"\";\n        this.panels = [];\n        this.syncClasses();\n    }\n    sync(panels) {\n        this.panels = panels;\n        this.syncDOM();\n    }\n    syncDOM() {\n        if (this.panels.length == 0) {\n            if (this.dom) {\n                this.dom.remove();\n                this.dom = undefined;\n            }\n            return;\n        }\n        if (!this.dom) {\n            this.dom = document.createElement(\"div\");\n            this.dom.className = themeClass(this.top ? \"panels.top\" : \"panels.bottom\");\n            this.dom.style[this.top ? \"top\" : \"bottom\"] = \"0\";\n            let parent = this.container || this.view.dom;\n            parent.insertBefore(this.dom, this.top ? parent.firstChild : null);\n        }\n        let curDOM = this.dom.firstChild;\n        for (let panel of this.panels) {\n            if (panel.dom.parentNode == this.dom) {\n                while (curDOM != panel.dom)\n                    curDOM = rm(curDOM);\n                curDOM = curDOM.nextSibling;\n            }\n            else {\n                this.dom.insertBefore(panel.dom, curDOM);\n            }\n        }\n        while (curDOM)\n            curDOM = rm(curDOM);\n    }\n    scrollMargin() {\n        return !this.dom || this.container ? 0\n            : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - this.view.scrollDOM.getBoundingClientRect().top\n                : this.view.scrollDOM.getBoundingClientRect().bottom - this.dom.getBoundingClientRect().top);\n    }\n    syncClasses() {\n        if (!this.container || this.classes == this.view.themeClasses)\n            return;\n        for (let cls of this.classes.split(\" \"))\n            if (cls)\n                this.container.classList.remove(cls);\n        for (let cls of (this.classes = this.view.themeClasses).split(\" \"))\n            if (cls)\n                this.container.classList.add(cls);\n    }\n}\nfunction rm(node) {\n    let next = node.nextSibling;\n    node.remove();\n    return next;\n}\nconst baseTheme = EditorView.baseTheme({\n    panels: {\n        boxSizing: \"border-box\",\n        position: \"sticky\",\n        left: 0,\n        right: 0\n    },\n    \"panels@light\": {\n        backgroundColor: \"#f5f5f5\",\n        color: \"black\"\n    },\n    \"panels.top@light\": {\n        borderBottom: \"1px solid #ddd\"\n    },\n    \"panels.bottom@light\": {\n        borderTop: \"1px solid #ddd\"\n    },\n    \"panels@dark\": {\n        backgroundColor: \"#333338\",\n        color: \"white\"\n    }\n});\n\nexport { getPanel, panels, showPanel };\n","import { Decoration, themeClass, ViewPlugin, EditorView, runScopeHandlers } from '@codemirror/next/view';\nimport { StateEffect, StateField, EditorSelection, precedence } from '@codemirror/next/state';\nimport { showPanel, getPanel, panels } from '@codemirror/next/panel';\nimport { RangeSetBuilder } from '@codemirror/next/rangeset';\n\nconst basicNormalize = typeof String.prototype.normalize == \"function\" ? x => x.normalize(\"NFKD\") : x => x;\n/// A search cursor provides an iterator over text matches in a\n/// document.\nclass SearchCursor {\n    /// Create a text cursor. The query is the search string, `from` to\n    /// `to` provides the region to search.\n    ///\n    /// When `normalize` is given, it will be called, on both the query\n    /// string and the content it is matched against, before comparing.\n    /// You can, for example, create a case-insensitive search by\n    /// passing `s => s.toLowerCase()`.\n    ///\n    /// Text is always normalized with\n    /// [`.normalize(\"NFKD\")`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)\n    /// (when supported).\n    constructor(text, query, from = 0, to = text.length, normalize) {\n        /// The current match (only holds a meaningful value after\n        /// [`next`](#search.SearchCursor.next) has been called and when\n        /// `done` is false).\n        this.value = { from: 0, to: 0 };\n        /// Whether the end of the iterated region has been reached.\n        this.done = false;\n        this.matches = [];\n        this.buffer = \"\";\n        this.bufferPos = 0;\n        this.iter = text.iterRange(from, to);\n        this.bufferStart = from;\n        this.normalize = normalize ? x => normalize(basicNormalize(x)) : basicNormalize;\n        this.query = this.normalize(query);\n    }\n    peek() {\n        if (this.bufferPos == this.buffer.length) {\n            this.bufferStart += this.buffer.length;\n            this.iter.next();\n            if (this.iter.done)\n                return -1;\n            this.bufferPos = 0;\n            this.buffer = this.iter.value;\n        }\n        return this.buffer.charCodeAt(this.bufferPos);\n    }\n    /// Look for the next match. Updates the iterator's\n    /// [`value`](#search.SearchCursor.value) and\n    /// [`done`](#search.SearchCursor.done) properties. Should be called\n    /// at least once before using the cursor.\n    next() {\n        for (;;) {\n            let next = this.peek();\n            if (next < 0) {\n                this.done = true;\n                return this;\n            }\n            let str = String.fromCharCode(next), start = this.bufferStart + this.bufferPos;\n            this.bufferPos++;\n            for (;;) {\n                let peek = this.peek();\n                if (peek < 0xDC00 || peek >= 0xE000)\n                    break;\n                this.bufferPos++;\n                str += String.fromCharCode(peek);\n            }\n            let norm = this.normalize(str);\n            for (let i = 0, pos = start;; i++) {\n                let code = norm.charCodeAt(i);\n                let match = this.match(code, pos);\n                if (match) {\n                    this.value = match;\n                    return this;\n                }\n                if (i == norm.length - 1)\n                    break;\n                if (pos == start && i < str.length && str.charCodeAt(i) == code)\n                    pos++;\n            }\n        }\n    }\n    match(code, pos) {\n        let match = null;\n        for (let i = 0; i < this.matches.length; i += 2) {\n            let index = this.matches[i], keep = false;\n            if (this.query.charCodeAt(index) == code) {\n                if (index == this.query.length - 1) {\n                    match = { from: this.matches[i + 1], to: pos + 1 };\n                }\n                else {\n                    this.matches[i]++;\n                    keep = true;\n                }\n            }\n            if (!keep) {\n                this.matches.splice(i, 2);\n                i -= 2;\n            }\n        }\n        if (this.query.charCodeAt(0) == code) {\n            if (this.query.length == 1)\n                match = { from: pos, to: pos + 1 };\n            else\n                this.matches.push(1, pos);\n        }\n        return match;\n    }\n}\n\nclass Query {\n    constructor(search, replace, caseInsensitive) {\n        this.search = search;\n        this.replace = replace;\n        this.caseInsensitive = caseInsensitive;\n    }\n    eq(other) {\n        return this.search == other.search && this.replace == other.replace && this.caseInsensitive == other.caseInsensitive;\n    }\n    cursor(doc, from = 0, to = doc.length) {\n        return new SearchCursor(doc, this.search, from, to, this.caseInsensitive ? x => x.toLowerCase() : undefined);\n    }\n    get valid() { return !!this.search; }\n}\nconst setQuery = StateEffect.define();\nconst togglePanel = StateEffect.define();\nconst searchState = StateField.define({\n    create() {\n        return new SearchState(new Query(\"\", \"\", false), []);\n    },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setQuery))\n                value = new SearchState(effect.value, value.panel);\n            else if (effect.is(togglePanel))\n                value = new SearchState(value.query, effect.value ? [createSearchPanel] : []);\n        }\n        return value;\n    },\n    provide: [showPanel.nFrom(s => s.panel)]\n});\nclass SearchState {\n    constructor(query, panel) {\n        this.query = query;\n        this.panel = panel;\n    }\n}\nconst matchMark = Decoration.mark({ class: themeClass(\"searchMatch\") }), selectedMatchMark = Decoration.mark({ class: themeClass(\"searchMatch.selected\") });\nconst searchHighlighter = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.decorations = this.highlight(view.state.field(searchState));\n    }\n    update(update) {\n        let state = update.state.field(searchState);\n        if (state != update.prevState.field(searchState) || update.docChanged || update.selectionSet)\n            this.decorations = this.highlight(state);\n    }\n    highlight({ query, panel }) {\n        if (!panel.length || !query.valid)\n            return Decoration.none;\n        let state = this.view.state, viewport = this.view.viewport;\n        let cursor = query.cursor(state.doc, Math.max(0, viewport.from - query.search.length), Math.min(viewport.to + query.search.length, state.doc.length));\n        let builder = new RangeSetBuilder();\n        while (!cursor.next().done) {\n            let { from, to } = cursor.value;\n            let selected = state.selection.ranges.some(r => r.from == from && r.to == to);\n            builder.add(from, to, selected ? selectedMatchMark : matchMark);\n        }\n        return builder.finish();\n    }\n}, {\n    decorations: v => v.decorations\n});\nfunction searchCommand(f) {\n    return view => {\n        let state = view.state.field(searchState, false);\n        return state && state.query.valid ? f(view, state) : openSearchPanel(view);\n    };\n}\nfunction findNextMatch(doc, from, query) {\n    let cursor = query.cursor(doc, from).next();\n    if (cursor.done) {\n        cursor = query.cursor(doc, 0, from + query.search.length - 1).next();\n        if (cursor.done)\n            return null;\n    }\n    return cursor.value;\n}\n/// Open the search panel if it isn't already open, and move the\n/// selection to the first match after the current primary selection.\n/// Will wrap around to the start of the document when it reaches the\n/// end.\nconst findNext = searchCommand((view, state) => {\n    let { from, to } = view.state.selection.primary;\n    let next = findNextMatch(view.state.doc, view.state.selection.primary.from + 1, state.query);\n    if (!next || next.from == from && next.to == to)\n        return false;\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    maybeAnnounceMatch(view);\n    return true;\n});\nconst FindPrevChunkSize = 10000;\n// Searching in reverse is, rather than implementing inverted search\n// cursor, done by scanning chunk after chunk forward.\nfunction findPrevInRange(query, doc, from, to) {\n    for (let pos = to;;) {\n        let start = Math.max(from, pos - FindPrevChunkSize - query.search.length);\n        let cursor = query.cursor(doc, start, pos), range = null;\n        while (!cursor.next().done)\n            range = cursor.value;\n        if (range)\n            return range;\n        if (start == from)\n            return null;\n        pos -= FindPrevChunkSize;\n    }\n}\n/// Move the selection to the previous instance of the search query,\n/// before the current primary selection. Will wrap past the start\n/// of the document to start searching at the end again.\nconst findPrevious = searchCommand((view, { query }) => {\n    let { state } = view;\n    let range = findPrevInRange(query, state.doc, 0, state.selection.primary.to - 1) ||\n        findPrevInRange(query, state.doc, state.selection.primary.from + 1, state.doc.length);\n    if (!range)\n        return false;\n    view.dispatch({ selection: { anchor: range.from, head: range.to }, scrollIntoView: true });\n    maybeAnnounceMatch(view);\n    return true;\n});\n/// Select all instances of the search query.\nconst selectMatches = searchCommand((view, { query }) => {\n    let cursor = query.cursor(view.state.doc), ranges = [];\n    while (!cursor.next().done)\n        ranges.push(EditorSelection.range(cursor.value.from, cursor.value.to));\n    if (!ranges.length)\n        return false;\n    view.dispatch({ selection: EditorSelection.create(ranges) });\n    return true;\n});\n/// Select all instances of the currently selected text.\nconst selectSelectionMatches = ({ state, dispatch }) => {\n    let sel = state.selection;\n    if (sel.ranges.length > 1 || sel.primary.empty)\n        return false;\n    let { from, to } = sel.primary;\n    let ranges = [], primary = 0;\n    for (let cur = new SearchCursor(state.doc, state.sliceDoc(from, to)); !cur.next().done;) {\n        if (ranges.length > 1000)\n            return false;\n        if (cur.value.from == from)\n            primary = ranges.length;\n        ranges.push(EditorSelection.range(cur.value.from, cur.value.to));\n    }\n    dispatch(state.update({ selection: new EditorSelection(ranges, primary) }));\n    return true;\n};\n/// Replace the current match of the search query.\nconst replaceNext = searchCommand((view, { query }) => {\n    let { state } = view, next = findNextMatch(state.doc, state.selection.primary.from, query);\n    if (!next)\n        return false;\n    let { from, to } = state.selection.primary, changes = [], selection;\n    if (next.from == from && next.to == to) {\n        changes.push({ from: next.from, to: next.to, insert: query.replace });\n        next = findNextMatch(state.doc, next.to, query);\n    }\n    if (next) {\n        let off = changes.length == 0 || changes[0].from >= next.to ? 0 : next.to - next.from - query.replace.length;\n        selection = { anchor: next.from - off, head: next.to - off };\n    }\n    view.dispatch({ changes, selection, scrollIntoView: !!selection });\n    if (next)\n        maybeAnnounceMatch(view);\n    return true;\n});\n/// Replace all instances of the search query with the given\n/// replacement.\nconst replaceAll = searchCommand((view, { query }) => {\n    let cursor = query.cursor(view.state.doc), changes = [];\n    while (!cursor.next().done) {\n        let { from, to } = cursor.value;\n        changes.push({ from, to, insert: query.replace });\n    }\n    if (!changes.length)\n        return false;\n    view.dispatch({ changes });\n    return true;\n});\nfunction createSearchPanel(view) {\n    let { query } = view.state.field(searchState);\n    return {\n        dom: buildPanel({\n            view,\n            query,\n            updateQuery(q) {\n                if (!query.eq(q)) {\n                    query = q;\n                    view.dispatch({ effects: setQuery.of(query) });\n                }\n            }\n        }),\n        mount() {\n            this.dom.querySelector(\"[name=search]\").select();\n        },\n        pos: 80,\n        style: \"search\"\n    };\n}\n/// Make sure the search panel is open and focused.\nconst openSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (state && state.panel.length) {\n        let panel = getPanel(view, createSearchPanel);\n        if (!panel)\n            return false;\n        panel.dom.querySelector(\"[name=search]\").focus();\n    }\n    else {\n        view.dispatch({ effects: togglePanel.of(true),\n            reconfigure: state ? undefined : { append: searchExtensions } });\n    }\n    return true;\n};\n/// Close the search panel.\nconst closeSearchPanel = view => {\n    let state = view.state.field(searchState, false);\n    if (!state || !state.panel.length)\n        return false;\n    let panel = getPanel(view, createSearchPanel);\n    if (panel && panel.dom.contains(view.root.activeElement))\n        view.focus();\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/// Default search-related key bindings.\n///\n///  * Mod-f: [`openSearchPanel`](#search.openSearchPanel)\n///  * F3, Mod-g: [`findNext`](#search.findNext)\n///  * Shift-F3, Shift-Mod-g: [`findPrevious`](#search.findPrevious)\nconst searchKeymap = [\n    { key: \"Mod-f\", run: openSearchPanel, scope: \"editor search-panel\" },\n    { key: \"F3\", run: findNext, shift: findPrevious, scope: \"editor search-panel\" },\n    { key: \"Mod-g\", run: findNext, shift: findPrevious, scope: \"editor search-panel\" },\n    { key: \"Escape\", run: closeSearchPanel, scope: \"editor search-panel\" },\n    { key: \"Mod-Shift-l\", run: selectSelectionMatches }\n];\nfunction elt(name, props = null, children = []) {\n    let e = document.createElement(name);\n    if (props)\n        for (let prop in props) {\n            let value = props[prop];\n            if (typeof value == \"string\")\n                e.setAttribute(prop, value);\n            else\n                e[prop] = value;\n        }\n    for (let child of children)\n        e.appendChild(typeof child == \"string\" ? document.createTextNode(child) : child);\n    return e;\n}\n// FIXME sync when search state changes independently\nfunction buildPanel(conf) {\n    function p(phrase) { return conf.view.state.phrase(phrase); }\n    let searchField = elt(\"input\", {\n        value: conf.query.search,\n        placeholder: p(\"Find\"),\n        \"aria-label\": p(\"Find\"),\n        class: themeClass(\"textfield\"),\n        name: \"search\",\n        onchange: update,\n        onkeyup: update\n    });\n    let replaceField = elt(\"input\", {\n        value: conf.query.replace,\n        placeholder: p(\"Replace\"),\n        \"aria-label\": p(\"Replace\"),\n        class: themeClass(\"textfield\"),\n        name: \"replace\",\n        onchange: update,\n        onkeyup: update\n    });\n    let caseField = elt(\"input\", {\n        type: \"checkbox\",\n        name: \"case\",\n        checked: !conf.query.caseInsensitive,\n        onchange: update\n    });\n    function update() {\n        conf.updateQuery(new Query(searchField.value, replaceField.value, !caseField.checked));\n    }\n    function keydown(e) {\n        if (runScopeHandlers(conf.view, e, \"search-panel\")) {\n            e.preventDefault();\n        }\n        else if (e.keyCode == 13 && e.target == searchField) {\n            e.preventDefault();\n            (e.shiftKey ? findPrevious : findNext)(conf.view);\n        }\n        else if (e.keyCode == 13 && e.target == replaceField) {\n            e.preventDefault();\n            replaceNext(conf.view);\n        }\n    }\n    function button(name, onclick, content) {\n        return elt(\"button\", { class: themeClass(\"button\"), name, onclick }, content);\n    }\n    let panel = elt(\"div\", { onkeydown: keydown }, [\n        searchField,\n        button(\"next\", () => findNext(conf.view), [p(\"next\")]),\n        button(\"prev\", () => findPrevious(conf.view), [p(\"previous\")]),\n        button(\"select\", () => selectMatches(conf.view), [p(\"all\")]),\n        elt(\"label\", null, [caseField, \"match case\"]),\n        elt(\"br\"),\n        replaceField,\n        button(\"replace\", () => replaceNext(conf.view), [p(\"replace\")]),\n        button(\"replaceAll\", () => replaceAll(conf.view), [p(\"replace all\")]),\n        elt(\"button\", { name: \"close\", onclick: () => closeSearchPanel(conf.view), \"aria-label\": p(\"close\") }, [\"\"]),\n        elt(\"div\", { style: \"position: absolute; top: -10000px\", \"aria-live\": \"polite\" })\n    ]);\n    return panel;\n}\nconst AnnounceMargin = 30;\nconst Break = /[\\s\\.,:;?!]/;\n// FIXME this is a kludge\nfunction maybeAnnounceMatch(view) {\n    let { from, to } = view.state.selection.primary;\n    let lineStart = view.state.doc.lineAt(from).from, lineEnd = view.state.doc.lineAt(to).to;\n    let start = Math.max(lineStart, from - AnnounceMargin), end = Math.min(lineEnd, to + AnnounceMargin);\n    let text = view.state.sliceDoc(start, end);\n    if (start != lineStart) {\n        for (let i = 0; i < AnnounceMargin; i++)\n            if (!Break.test(text[i + 1]) && Break.test(text[i])) {\n                text = text.slice(i);\n                break;\n            }\n    }\n    if (end != lineEnd) {\n        for (let i = text.length - 1; i > text.length - AnnounceMargin; i--)\n            if (!Break.test(text[i - 1]) && Break.test(text[i])) {\n                text = text.slice(0, i);\n                break;\n            }\n    }\n    let panel = getPanel(view, createSearchPanel);\n    if (!panel || !panel.dom.contains(view.root.activeElement))\n        return;\n    let live = panel.dom.querySelector(\"div[aria-live]\");\n    live.textContent = view.state.phrase(\"current match\") + \". \" + text;\n}\nconst baseTheme = EditorView.baseTheme({\n    \"panel.search\": {\n        padding: \"2px 6px 4px\",\n        position: \"relative\",\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"4px\",\n            backgroundColor: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        },\n        \"& input, & button\": {\n            margin: \".2em .5em .2em 0\"\n        },\n        \"& label\": {\n            fontSize: \"80%\"\n        }\n    },\n    \"searchMatch@light\": { backgroundColor: \"#ffff0054\" },\n    \"searchMatch@dark\": { backgroundColor: \"#00ffff8a\" },\n    \"searchMatch.selected@light\": { backgroundColor: \"#ff6a0054\" },\n    \"searchMatch.selected@dark\": { backgroundColor: \"#ff00ff8a\" }\n});\nconst searchExtensions = [\n    searchState,\n    precedence(searchHighlighter, \"override\"),\n    panels(),\n    baseTheme\n];\n\nexport { SearchCursor, closeSearchPanel, findNext, findPrevious, openSearchPanel, replaceAll, replaceNext, searchKeymap, selectMatches, selectSelectionMatches };\n","import { ViewPlugin, themeClass, Direction, EditorView } from '@codemirror/next/view';\nimport { Facet, StateEffect, StateField, MapMode } from '@codemirror/next/state';\n\nconst Outside = \"-10000px\";\nconst tooltipPlugin = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.inView = true;\n        this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this };\n        this.tooltips = view.state.facet(showTooltip);\n        this.tooltipViews = this.tooltips.map(tp => this.createTooltip(tp));\n    }\n    update(update) {\n        let tooltips = update.state.facet(showTooltip);\n        if (tooltips == this.tooltips) {\n            for (let t of this.tooltipViews)\n                if (t.update)\n                    t.update(update);\n        }\n        else {\n            let views = [];\n            for (let i = 0; i < tooltips.length; i++) {\n                let tip = tooltips[i], known = -1;\n                for (let i = 0; i < this.tooltips.length; i++)\n                    if (this.tooltips[i].create == tip.create)\n                        known = i;\n                if (known < 0) {\n                    views[i] = this.createTooltip(tip);\n                }\n                else {\n                    let tooltipView = views[i] = this.tooltipViews[known];\n                    if (tooltipView.update)\n                        tooltipView.update(update);\n                }\n            }\n            for (let t of this.tooltipViews)\n                if (views.indexOf(t) < 0)\n                    t.dom.remove();\n            this.tooltips = tooltips;\n            this.tooltipViews = views;\n            this.measure();\n        }\n    }\n    measure() {\n        if (this.tooltips.length) {\n            if (this.view.inView || this.inView)\n                this.view.requestMeasure(this.measureReq);\n            this.inView = this.view.inView;\n        }\n    }\n    createTooltip(tooltip) {\n        let tooltipView = tooltip.create(this.view);\n        tooltipView.dom.className = themeClass(\"tooltip\" + (tooltip.style ? \".\" + tooltip.style : \"\"));\n        this.view.dom.appendChild(tooltipView.dom);\n        if (tooltipView.mount)\n            tooltipView.mount(this.view);\n        return tooltipView;\n    }\n    destroy() {\n        for (let { dom } of this.tooltipViews)\n            dom.remove();\n    }\n    readMeasure() {\n        return {\n            editor: this.view.dom.getBoundingClientRect(),\n            pos: this.tooltips.map(t => this.view.coordsAtPos(t.pos)),\n            size: this.tooltipViews.map(({ dom }) => dom.getBoundingClientRect()),\n            innerWidth: window.innerWidth,\n            innerHeight: window.innerHeight\n        };\n    }\n    writeMeasure(measured) {\n        let { editor } = measured;\n        for (let i = 0; i < this.tooltipViews.length; i++) {\n            let tooltip = this.tooltips[i], tView = this.tooltipViews[i], { dom } = tView;\n            let pos = measured.pos[i], size = measured.size[i];\n            // Hide tooltips that are outside of the editor.\n            if (!pos || pos.bottom <= editor.top || pos.top >= editor.bottom || pos.right <= editor.left || pos.left >= editor.right) {\n                dom.style.top = Outside;\n                continue;\n            }\n            let width = size.right - size.left, height = size.bottom - size.top;\n            let left = this.view.textDirection == Direction.LTR ? Math.min(pos.left, measured.innerWidth - width)\n                : Math.max(0, pos.left - width);\n            let above = !!tooltip.above;\n            if (!tooltip.strictSide &&\n                (above ? pos.top - (size.bottom - size.top) < 0 : pos.bottom + (size.bottom - size.top) > measured.innerHeight))\n                above = !above;\n            dom.style.top = (above ? pos.top - height : pos.bottom) + \"px\";\n            dom.style.left = left + \"px\";\n            if (tView.positioned)\n                tView.positioned();\n        }\n    }\n});\nconst baseTheme = EditorView.baseTheme({\n    tooltip: {\n        position: \"fixed\",\n        border: \"1px solid #ddd\",\n        backgroundColor: \"#f5f5f5\",\n        zIndex: 100\n    }\n});\n/// Supporting extension for displaying tooltips. Allows\n/// [`showTooltip`](#tooltip.showTooltip) to be used to define\n/// tooltips.\nfunction tooltips() {\n    return [tooltipPlugin, baseTheme];\n}\n/// Behavior by which an extension can provide a tooltip to be shown.\nconst showTooltip = Facet.define();\nconst HoverTime = 750, HoverMaxDist = 10;\nclass HoverPlugin {\n    constructor(view, source, field, setHover) {\n        this.view = view;\n        this.source = source;\n        this.field = field;\n        this.setHover = setHover;\n        this.lastMouseMove = null;\n        this.hoverTimeout = -1;\n        this.mouseInside = false;\n        this.checkHover = this.checkHover.bind(this);\n        view.dom.addEventListener(\"mouseenter\", this.mouseenter = this.mouseenter.bind(this));\n        view.dom.addEventListener(\"mouseleave\", this.mouseleave = this.mouseleave.bind(this));\n        view.dom.addEventListener(\"mousemove\", this.mousemove = this.mousemove.bind(this));\n    }\n    get active() {\n        return this.view.state.field(this.field);\n    }\n    checkHover() {\n        this.hoverTimeout = -1;\n        if (!this.mouseInside || this.active)\n            return;\n        let now = Date.now(), lastMove = this.lastMouseMove;\n        if (now - lastMove.timeStamp < HoverTime) {\n            this.hoverTimeout = setTimeout(this.checkHover, HoverTime - (now - lastMove.timeStamp));\n            return;\n        }\n        let pos = this.view.contentDOM.contains(lastMove.target)\n            ? this.view.posAtCoords({ x: lastMove.clientX, y: lastMove.clientY }) : -1;\n        let open = pos < 0 ? null : this.source(this.view, (from, to) => {\n            return from <= pos && to >= pos && (from == to || isOverRange(this.view, from, to, lastMove.clientX, lastMove.clientY));\n        });\n        if (open)\n            this.view.dispatch({ effects: this.setHover.of(open) });\n    }\n    mousemove(event) {\n        var _a;\n        this.lastMouseMove = event;\n        if (this.hoverTimeout < 0)\n            this.hoverTimeout = setTimeout(this.checkHover, HoverTime);\n        let tooltip = this.active;\n        if (tooltip && !isInTooltip(event.target)) {\n            let { pos } = tooltip, end = (_a = tooltip.end) !== null && _a !== void 0 ? _a : pos;\n            if ((pos == end ? this.view.posAtCoords({ x: event.clientX, y: event.clientY }) != pos\n                : !isOverRange(this.view, pos, end, event.clientX, event.clientY, HoverMaxDist)))\n                this.view.dispatch({ effects: this.setHover.of(null) });\n        }\n    }\n    mouseenter() {\n        this.mouseInside = true;\n    }\n    mouseleave() {\n        this.mouseInside = false;\n        if (this.active)\n            this.view.dispatch({ effects: this.setHover.of(null) });\n    }\n    destroy() {\n        this.view.dom.removeEventListener(\"mouseenter\", this.mouseenter);\n        this.view.dom.removeEventListener(\"mouseleave\", this.mouseleave);\n        this.view.dom.removeEventListener(\"mousemove\", this.mousemove);\n    }\n}\nfunction isInTooltip(elt) {\n    for (let cur = elt; cur; cur = cur.parentNode)\n        if (cur.nodeType == 1 && cur.classList.contains(\"cm-tooltip\"))\n            return true;\n    return false;\n}\nfunction isOverRange(view, from, to, x, y, margin = 0) {\n    let range = document.createRange();\n    let fromDOM = view.domAtPos(from), toDOM = view.domAtPos(to);\n    range.setEnd(toDOM.node, toDOM.offset);\n    range.setStart(fromDOM.node, fromDOM.offset);\n    let rects = range.getClientRects();\n    for (let i = 0; i < rects.length; i++) {\n        let rect = rects[i];\n        let dist = Math.max(rect.top - y, y - rect.bottom, rect.left - x, x - rect.right);\n        if (dist <= margin)\n            return true;\n    }\n    return false;\n}\n/// Enable a hover tooltip, which shows up when the pointer hovers\n/// over ranges of text. The callback should, for each hoverable\n/// range, call its `check` argument to see if that range is being\n/// hovered over, and return a tooltip description when it is.\nfunction hoverTooltip(source, options = {}) {\n    const setHover = StateEffect.define();\n    const hoverState = StateField.define({\n        create() { return null; },\n        update(value, tr) {\n            if (value && (options.hideOnChange && (tr.docChanged || tr.selection)))\n                return null;\n            for (let effect of tr.effects)\n                if (effect.is(setHover))\n                    return effect.value;\n            if (value && tr.docChanged) {\n                let newPos = tr.changes.mapPos(value.pos, -1, MapMode.TrackDel);\n                if (newPos < 0)\n                    return null;\n                let copy = Object.assign(Object.create(null), value);\n                copy.pos = newPos;\n                if (value.end != null)\n                    copy.end = tr.changes.mapPos(value.end);\n                return copy;\n            }\n            return value;\n        },\n        provide: [showTooltip.nFrom(v => v ? [v] : [])]\n    });\n    return [\n        hoverState,\n        ViewPlugin.define(view => new HoverPlugin(view, source, hoverState, setHover)),\n        tooltips()\n    ];\n}\n\nexport { hoverTooltip, showTooltip, tooltips };\n","import { showTooltip, tooltips } from '@codemirror/next/tooltip';\nimport { Facet, combineConfig, StateEffect, StateField, Transaction, Text, EditorSelection, precedence, EditorState } from '@codemirror/next/state';\nimport { EditorView, Direction, themeClass, ViewPlugin, logException, Decoration, keymap, WidgetType } from '@codemirror/next/view';\nimport { codePointAt, codePointSize, fromCodePoint } from '@codemirror/next/text';\n\n/// An instance of this is passed to completion source functions.\nclass CompletionContext {\n    /// @internal\n    constructor(\n    /// The editor state that the completion happens in.\n    state, \n    /// The position at which the completion happens.\n    pos, \n    /// Indicates whether completion was activated explicitly, or\n    /// implicitly by typing. The usual way to respond to this is to\n    /// only return completions when either there is part of a\n    /// completable entity at the cursor, or explicit is true.\n    explicit) {\n        this.state = state;\n        this.pos = pos;\n        this.explicit = explicit;\n        /// @internal\n        this.abortListeners = [];\n    }\n    /// Get the extent, content, and (if there is a token) type of the\n    /// token before `this.pos`.\n    tokenBefore(types) {\n        let token = this.state.tree.resolve(this.pos, -1);\n        while (token && types.indexOf(token.name) < 0)\n            token = token.parent;\n        return token ? { from: token.start, to: this.pos,\n            text: this.state.sliceDoc(token.start, this.pos),\n            type: token.type } : null;\n    }\n    /// Get the match of the given expression directly before the\n    /// cursor.\n    matchBefore(expr) {\n        let line = this.state.doc.lineAt(this.pos);\n        let start = Math.max(line.from, this.pos - 250);\n        let str = line.slice(start - line.from, this.pos - line.from);\n        let found = str.search(ensureAnchor(expr, false));\n        return found < 0 ? null : { from: start + found, to: this.pos, text: str.slice(found) };\n    }\n    /// Yields true when the query has been aborted. Can be useful in\n    /// asynchronous queries to avoid doing work that will be ignored.\n    get aborted() { return this.abortListeners == null; }\n    /// Allows you to register abort handlers, which will be called when\n    /// the query is\n    /// [aborted](#autocomplete.CompletionContext.aborted).\n    addEventListener(_type, listener) {\n        if (this.abortListeners)\n            this.abortListeners.push(listener);\n    }\n}\nclass Option {\n    constructor(completion, source, match) {\n        this.completion = completion;\n        this.source = source;\n        this.match = match;\n    }\n}\nfunction cur(state) { return state.selection.primary.head; }\n// Make sure the given regexp has a $ at its end and, if `start` is\n// true, a ^ at its start.\nfunction ensureAnchor(expr, start) {\n    var _a;\n    let { source } = expr;\n    let addStart = start && source[0] != \"^\", addEnd = source[source.length - 1] != \"$\";\n    if (!addStart && !addEnd)\n        return expr;\n    return new RegExp(`${addStart ? \"^\" : \"\"}(?:${source})${addEnd ? \"$\" : \"\"}`, (_a = expr.flags) !== null && _a !== void 0 ? _a : (expr.ignoreCase ? \"i\" : \"\"));\n}\nfunction applyCompletion(view, option) {\n    let apply = option.completion.apply || option.completion.label;\n    let result = option.source;\n    if (typeof apply == \"string\") {\n        view.dispatch({\n            changes: { from: result.from, to: result.to, insert: apply },\n            selection: { anchor: result.from + apply.length }\n        });\n    }\n    else {\n        apply(view, option.completion, result.from, result.to);\n    }\n}\n\n// A pattern matcher for fuzzy completion matching. Create an instance\n// once for a pattern, and then use that to match any number of\n// completions.\nclass FuzzyMatcher {\n    constructor(pattern) {\n        this.pattern = pattern;\n        this.chars = [];\n        this.folded = [];\n        // Buffers reused by calls to `match` to track matched character\n        // positions.\n        this.any = [];\n        this.precise = [];\n        this.byWord = [];\n        for (let p = 0; p < pattern.length;) {\n            let char = codePointAt(pattern, p), size = codePointSize(char);\n            this.chars.push(char);\n            let part = pattern.slice(p, p + size), upper = part.toUpperCase();\n            this.folded.push(codePointAt(upper == part ? part.toLowerCase() : upper, 0));\n            p += size;\n        }\n        this.astral = pattern.length != this.chars.length;\n    }\n    // Matches a given word (completion) against the pattern (input).\n    // Will return null for no match, and otherwise an array that starts\n    // with the match score, followed by any number of `from, to` pairs\n    // indicating the matched parts of `word`.\n    //\n    // The score is a number that is more negative the worse the match\n    // is. See `Penalty` above.\n    match(word) {\n        if (this.pattern.length == 0)\n            return [0];\n        if (word.length < this.pattern.length)\n            return null;\n        let { chars, folded, any, precise, byWord } = this;\n        // For single-character queries, only match when they occur right\n        // at the start\n        if (chars.length == 1) {\n            let first = codePointAt(word, 0);\n            return first == chars[0] ? [0, 0, codePointSize(first)]\n                : first == folded[0] ? [-200 /* CaseFold */, 0, codePointSize(first)] : null;\n        }\n        let direct = word.indexOf(this.pattern);\n        if (direct == 0)\n            return [0, 0, this.pattern.length];\n        let len = chars.length, anyTo = 0;\n        if (direct < 0) {\n            for (let i = 0, e = Math.min(word.length, 200); i < e && anyTo < len;) {\n                let next = codePointAt(word, i);\n                if (next == chars[anyTo] || next == folded[anyTo])\n                    any[anyTo++] = i;\n                i += codePointSize(next);\n            }\n            // No match, exit immediately\n            if (anyTo < len)\n                return null;\n        }\n        let preciseTo = 0;\n        let byWordTo = 0, byWordFolded = false;\n        let adjacentTo = 0, adjacentStart = -1, adjacentEnd = -1;\n        for (let i = 0, e = Math.min(word.length, 200), prevType = 0 /* NonWord */; i < e && byWordTo < len;) {\n            let next = codePointAt(word, i);\n            if (direct < 0) {\n                if (preciseTo < len && next == chars[preciseTo])\n                    precise[preciseTo++] = i;\n                if (adjacentTo < len) {\n                    if (next == chars[adjacentTo] || next == folded[adjacentTo]) {\n                        if (adjacentTo == 0)\n                            adjacentStart = i;\n                        adjacentEnd = i;\n                        adjacentTo++;\n                    }\n                    else {\n                        adjacentTo = 0;\n                    }\n                }\n            }\n            let ch, type = next < 0xff\n                ? (next >= 48 && next <= 57 || next >= 97 && next <= 122 ? 2 /* Lower */ : next >= 65 && next <= 90 ? 1 /* Upper */ : 0 /* NonWord */)\n                : ((ch = fromCodePoint(next)) != ch.toLowerCase() ? 1 /* Upper */ : ch != ch.toUpperCase() ? 2 /* Lower */ : 0 /* NonWord */);\n            if (type == 1 /* Upper */ || prevType == 0 /* NonWord */ && type != 0 /* NonWord */ &&\n                (this.chars[byWordTo] == next || (this.folded[byWordTo] == next && (byWordFolded = true))))\n                byWord[byWordTo++] = i;\n            prevType = type;\n            i += codePointSize(next);\n        }\n        if (byWordTo == len && byWord[0] == 0)\n            return this.result(-100 /* ByWord */ + (byWordFolded ? -200 /* CaseFold */ : 0), byWord, word);\n        if (adjacentTo == len && adjacentStart == 0)\n            return [-200 /* CaseFold */, 0, adjacentEnd];\n        if (direct > -1)\n            return [-700 /* NotStart */, direct, direct + this.pattern.length];\n        if (adjacentTo == len)\n            return [-200 /* CaseFold */ + -700 /* NotStart */, adjacentStart, adjacentEnd];\n        if (byWordTo == len)\n            return this.result(-100 /* ByWord */ + (byWordFolded ? -200 /* CaseFold */ : 0) + -700 /* NotStart */, byWord, word);\n        return chars.length == 2 ? null : this.result((any[0] ? -700 /* NotStart */ : 0) + -200 /* CaseFold */ + -1100 /* Gap */, any, word);\n    }\n    result(score, positions, word) {\n        let result = [score], i = 1;\n        for (let pos of positions) {\n            let to = pos + (this.astral ? codePointSize(codePointAt(word, pos)) : 1);\n            if (i > 1 && result[i - 1] == pos)\n                result[i - 1] = to;\n            else {\n                result[i++] = pos;\n                result[i++] = to;\n            }\n        }\n        return result;\n    }\n}\n\nconst MaxInfoWidth = 300;\nconst baseTheme = EditorView.baseTheme({\n    \"tooltip.autocomplete\": {\n        \"& > ul\": {\n            fontFamily: \"monospace\",\n            overflowY: \"auto\",\n            whiteSpace: \"nowrap\",\n            maxHeight: \"10em\",\n            listStyle: \"none\",\n            margin: 0,\n            padding: 0,\n            \"& > li\": {\n                cursor: \"pointer\",\n                padding: \"1px 1em 1px 3px\",\n                lineHeight: 1.2\n            },\n            \"& > li[aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            }\n        }\n    },\n    \"tooltip.completionInfo\": {\n        padding: \"3px 9px\",\n        maxWidth: MaxInfoWidth + \"px\",\n    },\n    \"snippetField@light\": { backgroundColor: \"#ddd\" },\n    \"snippetField@dark\": { backgroundColor: \"#333\" },\n    \"snippetFieldPosition\": {\n        verticalAlign: \"text-top\",\n        width: 0,\n        height: \"1.15em\",\n        margin: \"0 -0.7px -.7em\",\n        borderLeft: \"1.4px dotted #888\"\n    },\n    completionMatchedText: {\n        textDecoration: \"underline\"\n    },\n    completionDetail: {\n        marginLeft: \"0.5em\",\n        fontStyle: \"italic\"\n    },\n    completionIcon: {\n        fontSize: \"90%\",\n        width: \".8em\",\n        display: \"inline-block\",\n        textAlign: \"center\",\n        paddingRight: \".6em\",\n        opacity: \"0.6\"\n    },\n    \"completionIcon.function, completionIcon.method\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.class\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.interface\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.variable\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.constant\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.type\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.enum\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.property\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.keyword\": {\n        \"&:after\": { content: \"'\\uFE0E'\" } // Disable emoji rendering\n    },\n    \"completionIcon.namespace\": {\n        \"&:after\": { content: \"''\" }\n    },\n    \"completionIcon.text\": {\n        \"&:after\": { content: \"'abc'\", fontSize: \"50%\", verticalAlign: \"middle\" }\n    }\n});\n\nfunction createListBox(options, id) {\n    const ul = document.createElement(\"ul\");\n    ul.id = id;\n    ul.setAttribute(\"role\", \"listbox\");\n    ul.setAttribute(\"aria-expanded\", \"true\");\n    for (let i = 0; i < options.length; i++) {\n        let { completion, match } = options[i];\n        const li = ul.appendChild(document.createElement(\"li\"));\n        li.id = id + \"-\" + i;\n        let icon = li.appendChild(document.createElement(\"div\"));\n        icon.className = themeClass(\"completionIcon\" + (completion.type ? \".\" + completion.type : \"\"));\n        icon.setAttribute(\"aria-hidden\", \"true\");\n        let labelElt = li.appendChild(document.createElement(\"span\"));\n        labelElt.className = themeClass(\"completionLabel\");\n        let { label, detail } = completion, off = 0;\n        for (let j = 1; j < match.length;) {\n            let from = match[j++], to = match[j++];\n            if (from > off)\n                labelElt.appendChild(document.createTextNode(label.slice(off, from)));\n            let span = labelElt.appendChild(document.createElement(\"span\"));\n            span.appendChild(document.createTextNode(label.slice(from, to)));\n            span.className = themeClass(\"completionMatchedText\");\n            off = to;\n        }\n        if (off < label.length)\n            labelElt.appendChild(document.createTextNode(label.slice(off)));\n        if (detail) {\n            let detailElt = li.appendChild(document.createElement(\"span\"));\n            detailElt.className = themeClass(\"completionDetail\");\n            detailElt.textContent = detail;\n        }\n        li.setAttribute(\"role\", \"option\");\n    }\n    return ul;\n}\nfunction createInfoDialog(option) {\n    let dom = document.createElement(\"div\");\n    dom.className = themeClass(\"tooltip.completionInfo\");\n    let { info } = option.completion;\n    if (typeof info == \"string\")\n        dom.textContent = info;\n    else\n        dom.appendChild(info(option.completion));\n    return dom;\n}\nclass CompletionTooltip {\n    constructor(view, options, id, stateField) {\n        this.view = view;\n        this.options = options;\n        this.id = id;\n        this.stateField = stateField;\n        this.info = null;\n        this.placeInfo = {\n            read: () => this.measureInfo(),\n            write: (pos) => this.positionInfo(pos),\n            key: this\n        };\n        this.dom = document.createElement(\"div\");\n        this.list = this.dom.appendChild(createListBox(options, id));\n        this.list.addEventListener(\"click\", (e) => {\n            let index = 0, dom = e.target;\n            for (;;) {\n                dom = dom.previousSibling;\n                if (!dom)\n                    break;\n                index++;\n            }\n            if (index < options.length)\n                applyCompletion(view, options[index]);\n        });\n        this.list.addEventListener(\"scroll\", () => {\n            if (this.info)\n                this.view.requestMeasure(this.placeInfo);\n        });\n    }\n    mount() { this.updateSel(); }\n    update(update) {\n        if (update.state.field(this.stateField) != update.prevState.field(this.stateField))\n            this.updateSel();\n    }\n    positioned() {\n        if (this.info)\n            this.view.requestMeasure(this.placeInfo);\n    }\n    updateSel() {\n        let cState = this.view.state.field(this.stateField);\n        if (cState.open) {\n            if (this.updateSelectedOption(cState.open.selected)) {\n                if (this.info) {\n                    this.info.remove();\n                    this.info = null;\n                }\n                let option = cState.open.options[cState.open.selected];\n                if (option.completion.info) {\n                    this.info = this.dom.appendChild(createInfoDialog(option));\n                    this.view.requestMeasure(this.placeInfo);\n                }\n            }\n        }\n    }\n    updateSelectedOption(selected) {\n        let set = null;\n        for (let opt = this.list.firstChild, i = 0; opt; opt = opt.nextSibling, i++) {\n            if (i == selected) {\n                if (!opt.hasAttribute(\"aria-selected\")) {\n                    opt.setAttribute(\"aria-selected\", \"true\");\n                    set = opt;\n                }\n            }\n            else {\n                if (opt.hasAttribute(\"aria-selected\"))\n                    opt.removeAttribute(\"aria-selected\");\n            }\n        }\n        if (set)\n            scrollIntoView(this.list, set);\n        return set;\n    }\n    measureInfo() {\n        let sel = this.dom.querySelector(\"[aria-selected]\");\n        if (!sel)\n            return null;\n        let rect = this.dom.getBoundingClientRect();\n        let top = sel.getBoundingClientRect().top - rect.top;\n        if (top < 0 || top > this.list.clientHeight - 10)\n            return null;\n        let left = this.view.textDirection == Direction.RTL;\n        let spaceLeft = rect.left, spaceRight = innerWidth - rect.right;\n        if (left && spaceLeft < Math.min(MaxInfoWidth, spaceRight))\n            left = false;\n        else if (!left && spaceRight < Math.min(MaxInfoWidth, spaceLeft))\n            left = true;\n        return { top, left };\n    }\n    positionInfo(pos) {\n        if (this.info && pos) {\n            this.info.style.top = pos.top + \"px\";\n            this.info.style.right = pos.left ? \"100%\" : \"\";\n            this.info.style.left = pos.left ? \"\" : \"100%\";\n        }\n    }\n}\n// We allocate a new function instance every time the completion\n// changes to force redrawing/repositioning of the tooltip\nfunction completionTooltip(options, id, stateField) {\n    return (view) => new CompletionTooltip(view, options, id, stateField);\n}\nfunction scrollIntoView(container, element) {\n    let parent = container.getBoundingClientRect();\n    let self = element.getBoundingClientRect();\n    if (self.top < parent.top)\n        container.scrollTop -= parent.top - self.top;\n    else if (self.bottom > parent.bottom)\n        container.scrollTop += self.bottom - parent.bottom;\n}\n\nconst MaxOptions = 300;\nfunction sortOptions(active, state) {\n    let options = [];\n    for (let a of active)\n        if (a.hasResult()) {\n            let matcher = new FuzzyMatcher(state.sliceDoc(a.from, a.to)), match;\n            for (let option of a.result.options)\n                if (match = matcher.match(option.label)) {\n                    if (option.boost != null)\n                        match[0] += option.boost;\n                    options.push(new Option(option, a, match));\n                }\n        }\n    options.sort(cmpOption);\n    return options.length > MaxOptions ? options.slice(0, MaxOptions) : options;\n}\nclass CompletionDialog {\n    constructor(options, attrs, tooltip, timestamp, selected) {\n        this.options = options;\n        this.attrs = attrs;\n        this.tooltip = tooltip;\n        this.timestamp = timestamp;\n        this.selected = selected;\n    }\n    setSelected(selected, id) {\n        return selected == this.selected || selected >= this.options.length ? this\n            : new CompletionDialog(this.options, makeAttrs(id, selected), this.tooltip, this.timestamp, selected);\n    }\n    static build(active, state, id, prev) {\n        let options = sortOptions(active, state);\n        if (!options.length)\n            return null;\n        let selected = 0;\n        if (prev) {\n            let selectedValue = prev.options[prev.selected].completion;\n            for (let i = 0; i < options.length && !selected; i++) {\n                if (options[i].completion == selectedValue)\n                    selected = i;\n            }\n        }\n        return new CompletionDialog(options, makeAttrs(id, selected), [{\n                pos: active.reduce((a, b) => b.hasResult() ? Math.min(a, b.from) : a, 1e8),\n                style: \"autocomplete\",\n                create: completionTooltip(options, id, completionState)\n            }], prev ? prev.timestamp : Date.now(), selected);\n    }\n    map(changes) {\n        return new CompletionDialog(this.options, this.attrs, [Object.assign(Object.assign({}, this.tooltip[0]), { pos: changes.mapPos(this.tooltip[0].pos) })], this.timestamp, this.selected);\n    }\n}\nclass CompletionState {\n    constructor(active, id, open) {\n        this.active = active;\n        this.id = id;\n        this.open = open;\n    }\n    static start() {\n        return new CompletionState(none, \"cm-ac-\" + Math.floor(Math.random() * 2e6).toString(36), null);\n    }\n    update(tr) {\n        let { state } = tr, conf = state.facet(completionConfig);\n        let sources = conf.override || state.languageDataAt(\"autocomplete\", cur(state));\n        let active = sources.map(source => {\n            let value = this.active.find(s => s.source == source) || new ActiveSource(source, 0 /* Inactive */, false);\n            return value.update(tr, conf);\n        });\n        if (active.length == this.active.length && active.every((a, i) => a == this.active[i]))\n            active = this.active;\n        let open = tr.selection || active.some(a => a.hasResult() && tr.changes.touchesRange(a.from, a.to)) ||\n            !sameResults(active, this.active) ? CompletionDialog.build(active, state, this.id, this.open)\n            : this.open && tr.docChanged ? this.open.map(tr.changes) : this.open;\n        for (let effect of tr.effects)\n            if (effect.is(setSelectedEffect))\n                open = open && open.setSelected(effect.value, this.id);\n        return active == this.active && open == this.open ? this : new CompletionState(active, this.id, open);\n    }\n    get tooltip() { return this.open ? this.open.tooltip : none; }\n    get attrs() { return this.open ? this.open.attrs : baseAttrs; }\n}\nfunction sameResults(a, b) {\n    if (a == b)\n        return true;\n    for (let iA = 0, iB = 0;;) {\n        while (iA < a.length && !a[iA].hasResult)\n            iA++;\n        while (iB < b.length && !b[iB].hasResult)\n            iB++;\n        let endA = iA == a.length, endB = iB == b.length;\n        if (endA || endB)\n            return endA == endB;\n        if (a[iA++].result != b[iB++].result)\n            return false;\n    }\n}\nfunction makeAttrs(id, selected) {\n    return {\n        \"aria-autocomplete\": \"list\",\n        \"aria-activedescendant\": id + \"-\" + selected,\n        \"aria-owns\": id\n    };\n}\nconst baseAttrs = { \"aria-autocomplete\": \"list\" }, none = [];\nfunction cmpOption(a, b) {\n    let dScore = b.match[0] - a.match[0];\n    if (dScore)\n        return dScore;\n    let lA = a.completion.label, lB = b.completion.label;\n    return lA < lB ? -1 : lA == lB ? 0 : 1;\n}\nclass ActiveSource {\n    constructor(source, state, explicit) {\n        this.source = source;\n        this.state = state;\n        this.explicit = explicit;\n    }\n    hasResult() { return false; }\n    update(tr, conf) {\n        let event = tr.annotation(Transaction.userEvent), value = this;\n        if (event == \"input\" || event == \"delete\")\n            value = value.handleUserEvent(tr, event, conf);\n        else if (tr.docChanged)\n            value = value.handleChange(tr);\n        else if (tr.selection && value.state != 0 /* Inactive */)\n            value = new ActiveSource(value.source, 0 /* Inactive */, false);\n        for (let effect of tr.effects) {\n            if (effect.is(toggleCompletionEffect)) {\n                value = effect.value ? new ActiveSource(value.source, 1 /* Pending */, true)\n                    : new ActiveSource(value.source, 0 /* Inactive */, false);\n            }\n            else if (effect.is(setActiveEffect)) {\n                for (let active of effect.value)\n                    if (active.source == value.source)\n                        value = active;\n            }\n        }\n        return value;\n    }\n    handleUserEvent(_tr, type, conf) {\n        return type == \"delete\" || !conf.activateOnTyping ? this : new ActiveSource(this.source, 1 /* Pending */, false);\n    }\n    handleChange(tr) {\n        return tr.changes.touchesRange(cur(tr.startState)) ? new ActiveSource(this.source, 0 /* Inactive */, false) : this;\n    }\n}\nclass ActiveResult extends ActiveSource {\n    constructor(source, explicit, result, from, to, span) {\n        super(source, 2 /* Result */, explicit);\n        this.result = result;\n        this.from = from;\n        this.to = to;\n        this.span = span;\n    }\n    hasResult() { return true; }\n    handleUserEvent(tr, type, conf) {\n        let from = tr.changes.mapPos(this.from), to = tr.changes.mapPos(this.to, 1);\n        let pos = cur(tr.state);\n        if ((this.explicit ? pos < from : pos <= from) || pos > to)\n            return new ActiveSource(this.source, type == \"input\" && conf.activateOnTyping ? 1 /* Pending */ : 0 /* Inactive */, false);\n        if (this.span && (from == to || this.span.test(tr.state.sliceDoc(from, to))))\n            return new ActiveResult(this.source, this.explicit, this.result, from, to, this.span);\n        return new ActiveSource(this.source, 1 /* Pending */, this.explicit);\n    }\n    handleChange(tr) {\n        return tr.changes.touchesRange(this.from, this.to)\n            ? new ActiveSource(this.source, 0 /* Inactive */, false)\n            : new ActiveResult(this.source, this.explicit, this.result, tr.changes.mapPos(this.from), tr.changes.mapPos(this.to, 1), this.span);\n    }\n    map(mapping) {\n        return new ActiveResult(this.source, this.explicit, this.result, mapping.mapPos(this.from), mapping.mapPos(this.to, 1), this.span);\n    }\n}\nconst completionConfig = Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            activateOnTyping: true,\n            override: null\n        });\n    }\n});\nconst toggleCompletionEffect = StateEffect.define();\nconst setActiveEffect = StateEffect.define({\n    map(sources, mapping) { return sources.map(s => s.hasResult() && !mapping.empty ? s.map(mapping) : s); }\n});\nconst setSelectedEffect = StateEffect.define();\nconst completionState = StateField.define({\n    create() { return CompletionState.start(); },\n    update(value, tr) { return value.update(tr); },\n    provide: [\n        showTooltip.nFrom(state => state.tooltip),\n        EditorView.contentAttributes.from(state => state.attrs)\n    ]\n});\n\nconst CompletionInteractMargin = 75;\nfunction moveCompletion(dir, by) {\n    return (view) => {\n        let cState = view.state.field(completionState);\n        if (!cState.open || Date.now() - cState.open.timestamp < CompletionInteractMargin)\n            return false;\n        let step = 1, tooltip;\n        if (by == \"page\" && (tooltip = view.dom.querySelector(\".cm-tooltip-autocomplete\")))\n            step = Math.max(2, Math.floor(tooltip.offsetHeight / tooltip.firstChild.offsetHeight));\n        let selected = cState.open.selected + step * (dir == \"up\" ? -1 : 1), { length } = cState.open.options;\n        if (selected < 0)\n            selected = by == \"page\" ? 0 : length - 1;\n        else if (selected >= length)\n            selected = by == \"page\" ? length - 1 : 0;\n        view.dispatch({ effects: setSelectedEffect.of(selected) });\n        return true;\n    };\n}\nfunction acceptCompletion(view) {\n    let cState = view.state.field(completionState);\n    if (!cState.open || Date.now() - cState.open.timestamp < CompletionInteractMargin)\n        return false;\n    applyCompletion(view, cState.open.options[cState.open.selected]);\n    return true;\n}\n/// Explicitly start autocompletion.\nconst startCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (!cState)\n        return false;\n    view.dispatch({ effects: toggleCompletionEffect.of(true) });\n    return true;\n};\n/// Close the currently active completion.\nconst closeCompletion = (view) => {\n    let cState = view.state.field(completionState, false);\n    if (!cState || !cState.active.some(a => a.state != 0 /* Inactive */))\n        return false;\n    view.dispatch({ effects: toggleCompletionEffect.of(false) });\n    return true;\n};\nclass RunningQuery {\n    constructor(source, context) {\n        this.source = source;\n        this.context = context;\n        this.time = Date.now();\n        this.updates = [];\n        // Note that 'undefined' means 'not done yet', whereas 'null' means\n        // 'query returned null'.\n        this.done = undefined;\n    }\n}\nconst DebounceTime = 50, MaxUpdateCount = 50, MinAbortTime = 1000;\nconst completionPlugin = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.debounceUpdate = -1;\n        this.running = [];\n        this.debounceAccept = -1;\n        for (let active of view.state.field(completionState).active)\n            if (active.state == 1 /* Pending */)\n                this.startQuery(active);\n    }\n    update(update) {\n        let cState = update.state.field(completionState);\n        if (!update.selectionSet && !update.docChanged && update.prevState.field(completionState) == cState)\n            return;\n        let doesReset = update.transactions.some(tr => {\n            let event = tr.annotation(Transaction.userEvent);\n            return (tr.selection || tr.docChanged) && event != \"input\" && event != \"delete\";\n        });\n        for (let i = 0; i < this.running.length; i++) {\n            let query = this.running[i];\n            if (doesReset ||\n                query.updates.length + update.transactions.length > MaxUpdateCount && query.time - Date.now() > MinAbortTime) {\n                for (let handler of query.context.abortListeners) {\n                    try {\n                        handler();\n                    }\n                    catch (e) {\n                        logException(this.view.state, e);\n                    }\n                }\n                query.context.abortListeners = null;\n                this.running.splice(i--, 1);\n            }\n            else {\n                query.updates.push(...update.transactions);\n            }\n        }\n        if (this.debounceUpdate > -1)\n            clearTimeout(this.debounceUpdate);\n        this.debounceUpdate = cState.active.some(a => a.state == 1 /* Pending */ && !this.running.some(q => q.source == a.source))\n            ? setTimeout(() => this.startUpdate(), DebounceTime) : -1;\n    }\n    startUpdate() {\n        this.debounceUpdate = -1;\n        let { state } = this.view, cState = state.field(completionState);\n        for (let active of cState.active) {\n            if (active.state == 1 /* Pending */ && !this.running.some(r => r.source == active.source))\n                this.startQuery(active);\n        }\n    }\n    startQuery(active) {\n        let { state } = this.view, pos = cur(state);\n        let context = new CompletionContext(state, pos, active.explicit);\n        let pending = new RunningQuery(active.source, context);\n        this.running.push(pending);\n        Promise.resolve(active.source(context)).then(result => {\n            if (!pending.context.aborted) {\n                pending.done = result || null;\n                this.scheduleAccept();\n            }\n        }, err => {\n            this.view.dispatch({ effects: toggleCompletionEffect.of(false) });\n            logException(this.view.state, err);\n        });\n    }\n    scheduleAccept() {\n        if (this.running.every(q => q.done !== undefined))\n            this.accept();\n        else if (this.debounceAccept < 0)\n            this.debounceAccept = setTimeout(() => this.accept(), DebounceTime);\n    }\n    // For each finished query in this.running, try to create a result\n    // or, if appropriate, restart the query.\n    accept() {\n        var _a;\n        if (this.debounceAccept > -1)\n            clearTimeout(this.debounceAccept);\n        this.debounceAccept = -1;\n        let updated = [];\n        let conf = this.view.state.facet(completionConfig);\n        for (let i = 0; i < this.running.length; i++) {\n            let query = this.running[i];\n            if (query.done === undefined)\n                continue;\n            this.running.splice(i--, 1);\n            if (query.done) {\n                let active = new ActiveResult(query.source, query.context.explicit, query.done, query.done.from, (_a = query.done.to) !== null && _a !== void 0 ? _a : cur(query.updates.length ? query.updates[0].startState : this.view.state), query.done.span ? ensureAnchor(query.done.span, true) : null);\n                // Replay the transactions that happened since the start of\n                // the request and see if that preserves the result\n                for (let tr of query.updates)\n                    active = active.update(tr, conf);\n                if (active.hasResult()) {\n                    updated.push(active);\n                    continue;\n                }\n            }\n            let current = this.view.state.field(completionState).active.find(a => a.source == query.source);\n            if (current && current.state == 1 /* Pending */) {\n                if (query.done == null) {\n                    // Explicitly failed. Should clear the pending status if it\n                    // hasn't been re-set in the meantime.\n                    let active = new ActiveSource(query.source, 0 /* Inactive */, false);\n                    for (let tr of query.updates)\n                        active = active.update(tr, conf);\n                    if (active.state != 1 /* Pending */)\n                        updated.push(active);\n                }\n                else {\n                    // Cleared by subsequent transactions. Restart.\n                    this.startQuery(current);\n                }\n            }\n        }\n        if (updated.length)\n            this.view.dispatch({ effects: setActiveEffect.of(updated) });\n    }\n});\n\nclass FieldPos {\n    constructor(field, line, from, to) {\n        this.field = field;\n        this.line = line;\n        this.from = from;\n        this.to = to;\n    }\n}\nclass FieldRange {\n    constructor(field, from, to) {\n        this.field = field;\n        this.from = from;\n        this.to = to;\n    }\n    map(changes) {\n        return new FieldRange(this.field, changes.mapPos(this.from, -1), changes.mapPos(this.to, 1));\n    }\n}\nclass Snippet {\n    constructor(lines, fieldPositions) {\n        this.lines = lines;\n        this.fieldPositions = fieldPositions;\n    }\n    instantiate(state, pos) {\n        let text = [], lineStart = [pos];\n        let lineObj = state.doc.lineAt(pos), baseIndent = /^\\s*/.exec(lineObj.slice(0, Math.min(100, lineObj.length)))[0];\n        for (let line of this.lines) {\n            if (text.length) {\n                let indent = baseIndent, tabs = /^\\t*/.exec(line)[0].length;\n                for (let i = 0; i < tabs; i++)\n                    indent += state.facet(EditorState.indentUnit);\n                lineStart.push(pos + indent.length - tabs);\n                line = indent + line.slice(tabs);\n            }\n            text.push(line);\n            pos += line.length + 1;\n        }\n        let ranges = this.fieldPositions.map(pos => new FieldRange(pos.field, lineStart[pos.line] + pos.from, lineStart[pos.line] + pos.to));\n        return { text, ranges };\n    }\n    static parse(template) {\n        let fields = [];\n        let lines = [], positions = [], m;\n        for (let line of template.split(/\\r\\n?|\\n/)) {\n            while (m = /[#$]\\{(?:(\\d+)(?::([^}]*))?|([^}]*))\\}/.exec(line)) {\n                let seq = m[1] ? +m[1] : null, name = m[2] || m[3], found = -1;\n                for (let i = 0; i < fields.length; i++) {\n                    if (name ? fields[i].name == name : seq != null && fields[i].seq == seq)\n                        found = i;\n                }\n                if (found < 0) {\n                    let i = 0;\n                    while (i < fields.length && (seq == null || (fields[i].seq != null && fields[i].seq < seq)))\n                        i++;\n                    fields.splice(i, 0, { seq, name: name || null });\n                    found = i;\n                }\n                positions.push(new FieldPos(found, lines.length, m.index, m.index + name.length));\n                line = line.slice(0, m.index) + name + line.slice(m.index + m[0].length);\n            }\n            lines.push(line);\n        }\n        return new Snippet(lines, positions);\n    }\n}\nclass FieldMarker extends WidgetType {\n    toDOM() {\n        let span = document.createElement(\"span\");\n        span.className = themeClass(\"snippetFieldPosition\");\n        return span;\n    }\n}\nlet fieldMarker = Decoration.widget({ widget: new FieldMarker(null) });\nlet fieldRange = Decoration.mark({ class: themeClass(\"snippetField\") });\nclass ActiveSnippet {\n    constructor(ranges, active) {\n        this.ranges = ranges;\n        this.active = active;\n        this.deco = Decoration.set(ranges.map(r => (r.from == r.to ? fieldMarker : fieldRange).range(r.from, r.to)));\n    }\n    map(changes) {\n        return new ActiveSnippet(this.ranges.map(r => r.map(changes)), this.active);\n    }\n    selectionInsideField(sel) {\n        return sel.ranges.every(range => this.ranges.some(r => r.field == this.active && r.from <= range.from && r.to >= range.to));\n    }\n}\nconst setActive = StateEffect.define({\n    map(value, changes) { return value && value.map(changes); }\n});\nconst moveToField = StateEffect.define();\nconst snippetState = StateField.define({\n    create() { return null; },\n    update(value, tr) {\n        for (let effect of tr.effects) {\n            if (effect.is(setActive))\n                return effect.value;\n            if (effect.is(moveToField) && value)\n                return new ActiveSnippet(value.ranges, effect.value);\n        }\n        if (value && tr.docChanged)\n            value = value.map(tr.changes);\n        if (value && tr.selection && !value.selectionInsideField(tr.selection))\n            value = null;\n        return value;\n    },\n    provide: [EditorView.decorations.from(val => val ? val.deco : Decoration.none)]\n});\nfunction fieldSelection(ranges, field) {\n    return EditorSelection.create(ranges.filter(r => r.field == field).map(r => EditorSelection.range(r.from, r.to)));\n}\n/// Convert a snippet template to a function that can apply it.\n/// Snippets are written using syntax like this:\n///\n///     \"for (let ${index} = 0; ${index} < ${end}; ${index}++) {\\n\\t${}\\n}\"\n///\n/// Each `${}` placeholder (you may also use `#{}`) indicates a field\n/// that the user can fill in. Its name, if any, will be the default\n/// content for the field.\n///\n/// When the snippet is activated by calling the returned function,\n/// the code is inserted at the given position. Newlines in the\n/// template are indented by the indentation of the start line, plus\n/// one [indent unit](#state.EditorState^indentUnit) per tab character\n/// after the newline.\n///\n/// On activation, (all instances of) the first field are selected.\n/// The user can move between fields with Tab and Shift-Tab as long as\n/// the fields are active. Moving to the last field or moving the\n/// cursor out of the current field deactivates the fields.\n///\n/// The order of fields defaults to textual order, but you can add\n/// numbers to placeholders (`${1}` or `${1:defaultText}`) to provide\n/// a custom order.\nfunction snippet(template) {\n    let snippet = Snippet.parse(template);\n    return (editor, _completion, from, to) => {\n        let { text, ranges } = snippet.instantiate(editor.state, from);\n        let spec = { changes: { from, to, insert: Text.of(text) } };\n        if (ranges.length)\n            spec.selection = fieldSelection(ranges, 0);\n        if (ranges.length > 1) {\n            spec.effects = setActive.of(new ActiveSnippet(ranges, 0));\n            if (editor.state.field(snippetState, false) === undefined)\n                spec.reconfigure = { append: [snippetState, snippetKeymap, baseTheme] };\n        }\n        editor.dispatch(editor.state.update(spec));\n    };\n}\nfunction moveField(dir) {\n    return ({ state, dispatch }) => {\n        let active = state.field(snippetState, false);\n        if (!active || dir < 0 && active.active == 0)\n            return false;\n        let next = active.active + dir, last = dir > 0 && !active.ranges.some(r => r.field == next + dir);\n        dispatch(state.update({\n            selection: fieldSelection(active.ranges, next),\n            effects: setActive.of(last ? null : new ActiveSnippet(active.ranges, next))\n        }));\n        return true;\n    };\n}\nconst clearSnippet = ({ state, dispatch }) => {\n    let active = state.field(snippetState, false);\n    if (!active)\n        return false;\n    dispatch(state.update({ effects: setActive.of(null) }));\n    return true;\n};\nconst snippetKeymap = precedence(keymap([\n    { key: \"Tab\", run: moveField(1), shift: moveField(-1) },\n    { key: \"Escape\", run: clearSnippet }\n]), \"override\");\n\n/// Returns an extension that enables autocompletion.\nfunction autocompletion(config = {}) {\n    return [\n        completionState,\n        completionConfig.of(config),\n        completionPlugin,\n        baseTheme,\n        tooltips(),\n        precedence(keymap([\n            { key: \"ArrowDown\", run: moveCompletion(\"down\") },\n            { key: \"ArrowUp\", run: moveCompletion(\"up\") },\n            { key: \"PageDown\", run: moveCompletion(\"down\", \"page\") },\n            { key: \"PageUp\", run: moveCompletion(\"up\", \"page\") },\n            { key: \"Enter\", run: acceptCompletion }\n        ]), \"override\")\n    ];\n}\n/// Basic keybindings for autocompletion.\n///\n///  - Ctrl-Space (Cmd-Space on macOS): [`startCompletion`](#autocomplete.startCompletion)\n///  - Escape: [`closeCompletion`](#autocomplete.closeCompletion)\nconst completionKeymap = [\n    { key: \"Mod-Space\", run: startCompletion },\n    { key: \"Escape\", run: closeCompletion }\n];\nfunction toSet(chars) {\n    let flat = Object.keys(chars).join(\"\");\n    let words = /\\w/.test(flat);\n    if (words)\n        flat = flat.replace(/\\w/g, \"\");\n    return `[${words ? \"\\\\w\" : \"\"}${flat.replace(/[^\\w\\s]/g, \"\\\\$&\")}]`;\n}\nfunction prefixMatch(options) {\n    let first = Object.create(null), rest = Object.create(null);\n    for (let { label } of options) {\n        first[label[0]] = true;\n        for (let i = 1; i < label.length; i++)\n            rest[label[i]] = true;\n    }\n    let source = toSet(first) + toSet(rest) + \"*$\";\n    return [new RegExp(\"^\" + source), new RegExp(source)];\n}\n/// Given a a fixed array of options, return an autocompleter that\n/// compares those options to the current\n/// [token](#autocomplete.CompletionContext.tokenBefore) and returns\n/// the matching ones.\nfunction completeFromList(list) {\n    let options = list.map(o => typeof o == \"string\" ? { label: o } : o);\n    let [span, match] = options.every(o => /^\\w+$/.test(o.label)) ? [/\\w*$/, /\\w+$/] : prefixMatch(options);\n    return (context) => {\n        let token = context.matchBefore(match);\n        return token || context.explicit ? { from: token ? token.from : context.pos, options, span } : null;\n    };\n}\n/// Create a completion source from an array of snippet specs.\nfunction completeSnippets(snippets) {\n    return completeFromList(snippets.map(s => Object.assign({}, s, { apply: snippet(s.snippet) })));\n}\n/// Get the current completion status. When completions are available,\n/// this will return `\"active\"`. When completions are pending (in the\n/// process of being queried), this returns `\"pending\"`. Otherwise, it\n/// returns `null`.\nfunction completionStatus(state) {\n    let cState = state.field(completionState, false);\n    return cState && cState.active.some(a => a.state == 1 /* Pending */) ? \"pending\"\n        : cState && cState.active.some(a => a.state != 0 /* Inactive */) ? \"active\" : null;\n}\n/// Returns the available completions as an array.\nfunction currentCompletions(state) {\n    var _a;\n    let open = (_a = state.field(completionState, false)) === null || _a === void 0 ? void 0 : _a.open;\n    return open ? open.options.map(o => o.completion) : [];\n}\n\nexport { CompletionContext, autocompletion, closeCompletion, completeFromList, completeSnippets, completionKeymap, completionStatus, currentCompletions, snippet, startCompletion };\n","import { EditorSelection } from '@codemirror/next/state';\n\n/// Comments or uncomments the current `SelectionRange` using line-comments.\n/// The line-comment token is defined on a language basis.\nconst toggleLineComment = target => {\n    return dispatch(toggleLineCommentWithOption(CommentOption.Toggle), target);\n};\n/// Comments the current `SelectionRange` using line-comments.\n/// The line-comment token is defined on a language basis.\nconst lineComment = target => {\n    return dispatch(toggleLineCommentWithOption(CommentOption.OnlyComment), target);\n};\n/// Uncomments the current `SelectionRange` using line-comments.\n/// The line-comment token is defined on a language basis.\nconst lineUncomment = target => {\n    return dispatch(toggleLineCommentWithOption(CommentOption.OnlyUncomment), target);\n};\n/// Comments or uncomments the current `SelectionRange` using block-comments.\n/// The block-comment tokens are defined on a language basis.\nconst toggleBlockComment = target => {\n    return dispatch(toggleBlockCommentWithOption(CommentOption.Toggle), target);\n};\n/// Comments the current `SelectionRange` using block-comments.\n/// The block-comment tokens are defined on a language basis.\nconst blockComment = target => {\n    return dispatch(toggleBlockCommentWithOption(CommentOption.OnlyComment), target);\n};\n/// Uncomments the current `SelectionRange` using block-comments.\n/// The block-comment tokens are defined on a language basis.\nconst blockUncomment = target => {\n    return dispatch(toggleBlockCommentWithOption(CommentOption.OnlyUncomment), target);\n};\n/// Default key bindings for this package.\n///\n///  - Ctrl-/ (Cmd-/ on macOS): [\\`toggleLineComment\\`](#comment.toggleLineComment).\n///  - Shift-Alt-a: [\\`toggleBlockComment\\`](#comment.toggleBlockComment).\nconst commentKeymap = [\n    { key: \"Mod-/\", run: toggleLineComment },\n    { key: \"Alt-A\", run: toggleBlockComment }\n];\nfunction dispatch(cmd, target) {\n    const tr = cmd(target.state);\n    if (!tr)\n        return false;\n    target.dispatch(tr);\n    return true;\n}\nvar CommentOption;\n(function (CommentOption) {\n    CommentOption[CommentOption[\"Toggle\"] = 0] = \"Toggle\";\n    CommentOption[CommentOption[\"OnlyComment\"] = 1] = \"OnlyComment\";\n    CommentOption[CommentOption[\"OnlyUncomment\"] = 2] = \"OnlyUncomment\";\n})(CommentOption || (CommentOption = {}));\nfunction getConfig(state, pos = state.selection.primary.head) {\n    return state.languageDataAt(\"commentTokens\", pos)[0] || {};\n}\nconst toggleBlockCommentWithOption = (option) => (state) => {\n    const config = getConfig(state);\n    return config.block ? new BlockCommenter(config.block.open, config.block.close).toggle(option, state) : null;\n};\nconst toggleLineCommentWithOption = (option) => (state) => {\n    const config = getConfig(state);\n    return config.line ? new LineCommenter(config.line).toggle(option, state) : null;\n};\n// This class performs toggle, comment and uncomment\n// of block comments in languages that support them.\n// The `open` and `close` arguments refer to the open and close\n// tokens of which this `BlockCommenter` is made up.\nclass BlockCommenter {\n    constructor(open, close, margin = \" \") {\n        this.open = open;\n        this.close = close;\n        this.margin = margin;\n    }\n    toggle(option, state) {\n        const selectionCommented = this.isSelectionCommented(state);\n        if (selectionCommented !== null) {\n            if (option !== CommentOption.OnlyComment) {\n                return state.update({\n                    changes: selectionCommented.map(({ open, close }) => [\n                        { from: open.pos - this.open.length, to: open.pos + open.margin },\n                        { from: close.pos - close.margin, to: close.pos + this.close.length }\n                    ])\n                });\n            }\n        }\n        else {\n            if (option !== CommentOption.OnlyUncomment) {\n                return state.update(state.changeByRange(range => {\n                    const shift = (this.open + this.margin).length;\n                    return {\n                        changes: [{ from: range.from, insert: this.open + this.margin },\n                            { from: range.to, insert: this.margin + this.close }],\n                        range: EditorSelection.range(range.anchor + shift, range.head + shift)\n                    };\n                }));\n            }\n        }\n        return null;\n    }\n    /// Determines whether all selection ranges in `state` are block-commented.\n    isSelectionCommented(state) {\n        let result = [];\n        for (const range of state.selection.ranges) {\n            const x = this.isRangeCommented(state, range);\n            if (x === null)\n                return null;\n            result.push(x);\n        }\n        return result;\n    }\n    /// Determines if the `range` is block-commented in the given `state`.\n    /// The `range` must be a valid range in `state`.\n    isRangeCommented(state, range) {\n        let textBefore = state.sliceDoc(range.from - SearchMargin, range.from);\n        let textAfter = state.sliceDoc(range.to, range.to + SearchMargin);\n        let spaceBefore = /\\s*$/.exec(textBefore)[0].length, spaceAfter = /^\\s*/.exec(textAfter)[0].length;\n        let beforeOff = textBefore.length - spaceBefore;\n        if (textBefore.slice(beforeOff - this.open.length, beforeOff) == this.open &&\n            textAfter.slice(spaceAfter, spaceAfter + this.close.length) == this.close) {\n            return { open: { pos: range.from - spaceBefore, margin: spaceBefore && 1 },\n                close: { pos: range.to + spaceAfter, margin: spaceAfter && 1 } };\n        }\n        let startText, endText;\n        if (range.to - range.from <= 2 * SearchMargin) {\n            startText = endText = state.sliceDoc(range.from, range.to);\n        }\n        else {\n            startText = state.sliceDoc(range.from, range.from + SearchMargin);\n            endText = state.sliceDoc(range.to - SearchMargin, range.to);\n        }\n        let startSpace = /^\\s*/.exec(startText)[0].length, endSpace = /\\s*$/.exec(endText)[0].length;\n        let endOff = endText.length - endSpace - this.close.length;\n        if (startText.slice(startSpace, startSpace + this.open.length) == this.open &&\n            endText.slice(endOff, endOff + this.close.length) == this.close) {\n            return { open: { pos: range.from + startSpace + this.open.length,\n                    margin: /\\s/.test(startText.charAt(startSpace + this.open.length)) ? 1 : 0 },\n                close: { pos: range.to - endSpace - this.close.length,\n                    margin: /\\s/.test(endText.charAt(endOff - 1)) ? 1 : 0 } };\n        }\n        return null;\n    }\n}\nconst SearchMargin = 50;\n// This class performs toggle, comment and uncomment\n// of line comments in languages that support them.\n// The `lineCommentToken` argument refer to the token of\n// which this `LineCommenter` is made up.\nclass LineCommenter {\n    constructor(lineCommentToken, margin = \" \") {\n        this.lineCommentToken = lineCommentToken;\n        this.margin = margin;\n    }\n    toggle(option, state) {\n        const linesAcrossSelection = [];\n        const linesAcrossRange = {};\n        for (let i = 0; i < state.selection.ranges.length; i++) {\n            const lines = getLinesInRange(state.doc, state.selection.ranges[i]);\n            linesAcrossSelection.push(...lines);\n            linesAcrossRange[i] = lines;\n        }\n        const column = this.isRangeCommented(state, linesAcrossSelection);\n        if (column.isRangeLineSkipped) {\n            if (option != CommentOption.OnlyComment) {\n                let changes = [];\n                for (let i = 0; i < state.selection.ranges.length; i++) {\n                    const lines = linesAcrossRange[i];\n                    for (const line of lines) {\n                        if (lines.length > 1 && column.isLineSkipped[line.number])\n                            continue;\n                        const pos = line.from + column.minCol;\n                        const posAfter = column.minCol + this.lineCommentToken.length;\n                        const marginLen = line.slice(posAfter, posAfter + 1) == \" \" ? 1 : 0;\n                        changes.push({ from: pos, to: pos + this.lineCommentToken.length + marginLen });\n                    }\n                }\n                return state.update({ changes });\n            }\n        }\n        else {\n            if (option != CommentOption.OnlyUncomment) {\n                let changes = [];\n                for (let i = 0; i < state.selection.ranges.length; i++) {\n                    const lines = linesAcrossRange[i];\n                    for (const line of lines) {\n                        if (lines.length <= 1 || !column.isLineSkipped[line.number])\n                            changes.push({ from: line.from + column.minCol, insert: this.lineCommentToken + this.margin });\n                    }\n                }\n                return state.update({ changes });\n            }\n        }\n        return null;\n    }\n    isRangeCommented(_state, lines) {\n        let minCol = Infinity;\n        let isRangeLineDiscarded = true;\n        const isLineSkipped = [];\n        for (const line of lines) {\n            const str = line.slice(0, Math.min(line.length, SearchMargin));\n            const col = /^\\s*/.exec(str)[0].length;\n            if ((lines.length == 1 || col < str.length) && col < minCol) {\n                minCol = col;\n            }\n            if (isRangeLineDiscarded && (lines.length == 1 || col < str.length) &&\n                str.slice(col, col + this.lineCommentToken.length) != this.lineCommentToken) {\n                isRangeLineDiscarded = false;\n            }\n            isLineSkipped[line.number] = col == str.length;\n        }\n        return { minCol: minCol, isRangeLineSkipped: isRangeLineDiscarded, isLineSkipped: isLineSkipped };\n    }\n}\n// Computes the lines spanned by `range`.\n/// @internal\nfunction getLinesInRange(doc, range) {\n    let line = doc.lineAt(range.from);\n    const lines = [];\n    while (line.from + line.length < range.to ||\n        (line.from <= range.to && range.to <= line.to)) {\n        lines.push(line);\n        if (line.number + 1 <= doc.lines) {\n            line = doc.line(line.number + 1);\n        }\n        else {\n            break;\n        }\n    }\n    return lines;\n}\n\nexport { blockComment, blockUncomment, commentKeymap, lineComment, lineUncomment, toggleBlockComment, toggleLineComment };\n","import { EditorSelection } from '@codemirror/next/state';\nimport { EditorView } from '@codemirror/next/view';\nimport { findColumn, countColumn } from '@codemirror/next/text';\n\n// Don't compute precise column positions for line offsets above this\n// (since it could get expensive). Assume offset==column for them.\nconst MaxOff = 2000;\nfunction rectangleFor(state, a, b) {\n    let startLine = Math.min(a.line, b.line), endLine = Math.max(a.line, b.line);\n    let ranges = [];\n    if (a.off > MaxOff || b.off > MaxOff || a.col < 0 || b.col < 0) {\n        let startOff = Math.min(a.off, b.off), endOff = Math.max(a.off, b.off);\n        for (let i = startLine; i <= endLine; i++) {\n            let line = state.doc.line(i);\n            if (line.length <= endOff)\n                ranges.push(EditorSelection.range(line.from + startOff, line.to + endOff));\n        }\n    }\n    else {\n        let startCol = Math.min(a.col, b.col), endCol = Math.max(a.col, b.col);\n        for (let i = startLine; i <= endLine; i++) {\n            let line = state.doc.line(i), str = line.length > MaxOff ? line.slice(0, 2 * endCol) : line.slice();\n            let start = findColumn(str, 0, startCol, state.tabSize), end = findColumn(str, 0, endCol, state.tabSize);\n            if (!start.leftOver)\n                ranges.push(EditorSelection.range(line.from + start.offset, line.from + end.offset));\n        }\n    }\n    return ranges;\n}\nfunction absoluteColumn(view, x) {\n    let ref = view.coordsAtPos(view.viewport.from);\n    return ref ? Math.round(Math.abs((ref.left - x) / view.defaultCharacterWidth)) : -1;\n}\nfunction getPos(view, event) {\n    let offset = view.posAtCoords({ x: event.clientX, y: event.clientY }); // FIXME\n    let line = view.state.doc.lineAt(offset), off = offset - line.from;\n    let col = off > MaxOff ? -1\n        : off == line.length ? absoluteColumn(view, event.clientX)\n            : countColumn(line.slice(0, offset - line.from), 0, view.state.tabSize);\n    return { line: line.number, col, off };\n}\nfunction rectangleSelectionStyle(view, event) {\n    let start = getPos(view, event), startSel = view.state.selection;\n    return {\n        update(update) {\n            if (update.docChanged) {\n                let newStart = update.changes.mapPos(update.prevState.doc.line(start.line).from);\n                let newLine = update.state.doc.lineAt(newStart);\n                start = { line: newLine.number, col: start.col, off: Math.min(start.off, newLine.length) };\n                startSel = startSel.map(update.changes);\n            }\n        },\n        get(event, _extend, multiple) {\n            let cur = getPos(view, event), ranges = rectangleFor(view.state, start, cur);\n            if (!ranges.length)\n                return startSel;\n            if (multiple)\n                return EditorSelection.create(ranges.concat(startSel.ranges));\n            else\n                return EditorSelection.create(ranges);\n        }\n    };\n}\n/// Create an extension that enables rectangular selections. By\n/// default, it will rect to left mouse drag with the alt key held\n/// down. When such a selection occurs, the text within the rectangle\n/// that was dragged over will be selected, as one selection\n/// [range](#state.SelectionRange) per line. You can pass a custom\n/// predicate function, which takes a `mousedown` event and returns\n/// true if it should be used for rectangular selection.\nfunction rectangularSelection(eventFilter) {\n    let filter = eventFilter || (e => e.altKey && e.button == 0);\n    return EditorView.mouseSelectionStyle.of((view, event) => filter(event) ? rectangleSelectionStyle(view, event) : null);\n}\n\nexport { rectangularSelection };\n","import { getPanel, panels, showPanel } from '@codemirror/next/panel';\nimport { EditorSelection } from '@codemirror/next/state';\nimport { EditorView, themeClass } from '@codemirror/next/view';\n\nconst extTag = typeof Symbol == \"undefined\" ? \"__goto-line\" : Symbol(\"goto-line\");\nfunction createLineDialog(view) {\n    let dom = document.createElement(\"form\");\n    dom.innerHTML = `<label>${view.state.phrase(\"Go to line:\")} <input class=${themeClass(\"textfield\")} name=line></label>\n<button class=${themeClass(\"button\")} type=submit>${view.state.phrase(\"go\")}</button>`;\n    let input = dom.querySelector(\"input\");\n    function go() {\n        let n = parseInt(input.value, 10);\n        view.dispatch({\n            reconfigure: { [extTag]: [baseTheme] },\n            selection: !isNaN(n) && n > 0 && n <= view.state.doc.lines ? EditorSelection.cursor(view.state.doc.line(n).from) : undefined,\n            scrollIntoView: true\n        });\n        view.focus();\n    }\n    dom.addEventListener(\"keydown\", event => {\n        if (event.keyCode == 27) { // Escape\n            event.preventDefault();\n            view.dispatch({ reconfigure: { append: [baseTheme] } });\n            view.focus();\n        }\n        else if (event.keyCode == 13) { // Enter\n            event.preventDefault();\n            go();\n        }\n    });\n    dom.addEventListener(\"submit\", go);\n    return { dom, style: \"gotoLine\", pos: -10 };\n}\n/// Command that shows a dialog asking the user for a line number, and\n/// when a valid number is provided, moves the cursor to that line.\n///\n/// The dialog can be styled with the `panel.gotoLine` theme\n/// selector.\nconst gotoLine = view => {\n    let panel = getPanel(view, createLineDialog);\n    if (!panel) {\n        view.dispatch({ reconfigure: { append: [panels(), showPanel.of(createLineDialog), baseTheme] } });\n        panel = getPanel(view, createLineDialog);\n    }\n    if (panel)\n        panel.dom.querySelector(\"input\").focus();\n    return true;\n};\nconst baseTheme = EditorView.baseTheme({\n    \"panel.gotoLine\": {\n        padding: \"2px 6px 4px\",\n        \"& label\": { fontSize: \"80%\" }\n    }\n});\n/// Keymap that binds Alt-g to [`gotoLine`](#goto-line.gotoLine).\nconst gotoLineKeymap = [\n    { key: \"Alt-g\", run: gotoLine }\n];\n\nexport { gotoLine, gotoLineKeymap };\n","import { Decoration, themeClass, ViewPlugin, EditorView } from '@codemirror/next/view';\nimport { Facet, combineConfig, CharCategory } from '@codemirror/next/state';\nimport { SearchCursor } from '@codemirror/next/search';\n\n/// Mark lines that have a cursor on them with the \\`activeLine\\`\n/// theme selector.\nfunction highlightActiveLine() {\n    return [defaultTheme, activeLineHighlighter];\n}\nconst lineDeco = Decoration.line({ attributes: { class: themeClass(\"activeLine\") } });\nconst activeLineHighlighter = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.decorations = this.getDeco(view);\n    }\n    update(update) {\n        if (update.docChanged || update.selectionSet)\n            this.decorations = this.getDeco(update.view);\n    }\n    getDeco(view) {\n        let lastLineStart = -1, deco = [];\n        for (let r of view.state.selection.ranges) {\n            if (!r.empty)\n                continue;\n            let line = view.visualLineAt(r.head);\n            if (line.from > lastLineStart) {\n                deco.push(lineDeco.range(line.from));\n                lastLineStart = line.from;\n            }\n        }\n        return Decoration.set(deco);\n    }\n}, {\n    decorations: v => v.decorations\n});\nconst defaultHighlightOptions = {\n    highlightWordAroundCursor: false,\n    minSelectionLength: 1,\n    maxMatches: 100\n};\nconst highlightConfig = Facet.define({\n    combine(options) {\n        return combineConfig(options, defaultHighlightOptions, {\n            highlightWordAroundCursor: (a, b) => a || b,\n            minSelectionLength: Math.min,\n            maxMatches: Math.min\n        });\n    }\n});\n/// This extension highlights text that matches the selection. It uses\n/// the `selectionMatch` theme selector for the highlighting. When\n/// `highlightWordAroundCursor` is enabled, the word at the cursor\n/// itself will be highlighted with `selectionMatch.main`.\nfunction highlightSelectionMatches(options) {\n    let ext = [defaultTheme, matchHighlighter];\n    if (options)\n        ext.push(highlightConfig.of(options));\n    return ext;\n}\nfunction wordAt(doc, pos, check) {\n    let line = doc.lineAt(pos);\n    let from = pos - line.from, to = pos - line.from;\n    while (from > 0) {\n        let prev = line.findClusterBreak(from, false);\n        if (check(line.slice(prev, from)) != CharCategory.Word)\n            break;\n        from = prev;\n    }\n    while (to < line.length) {\n        let next = line.findClusterBreak(to, true);\n        if (check(line.slice(to, next)) != CharCategory.Word)\n            break;\n        to = next;\n    }\n    return from == to ? null : line.slice(from, to);\n}\nconst matchDeco = Decoration.mark({ class: themeClass(\"selectionMatch\") });\nconst mainMatchDeco = Decoration.mark({ class: themeClass(\"selectionMatch.main\") });\nconst matchHighlighter = ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.decorations = this.getDeco(view);\n    }\n    update(update) {\n        if (update.selectionSet || update.docChanged || update.viewportChanged)\n            this.decorations = this.getDeco(update.view);\n    }\n    getDeco(view) {\n        let conf = view.state.facet(highlightConfig);\n        let { state } = view, sel = state.selection;\n        if (sel.ranges.length > 1)\n            return Decoration.none;\n        let range = sel.primary, query, check = null;\n        if (range.empty) {\n            if (!conf.highlightWordAroundCursor)\n                return Decoration.none;\n            check = state.charCategorizer(range.head);\n            query = wordAt(state.doc, range.head, check);\n            if (!query)\n                return Decoration.none;\n        }\n        else {\n            let len = range.to - range.from;\n            if (len < conf.minSelectionLength || len > 200)\n                return Decoration.none;\n            query = state.sliceDoc(range.from, range.to).trim();\n            if (!query)\n                return Decoration.none;\n        }\n        let deco = [];\n        for (let part of view.visibleRanges) {\n            let cursor = new SearchCursor(state.doc, query, part.from, part.to);\n            while (!cursor.next().done) {\n                let { from, to } = cursor.value;\n                if (!check || ((from == 0 || check(state.sliceDoc(from - 1, from)) != CharCategory.Word) &&\n                    (to == state.doc.length || check(state.sliceDoc(to, to + 1)) != CharCategory.Word))) {\n                    if (check && from <= range.from && to >= range.to)\n                        deco.push(mainMatchDeco.range(from, to));\n                    else if (from >= range.to || to <= range.from)\n                        deco.push(matchDeco.range(from, to));\n                    if (deco.length > conf.maxMatches)\n                        return Decoration.none;\n                }\n            }\n        }\n        return Decoration.set(deco);\n    }\n}, {\n    decorations: v => v.decorations\n});\nconst defaultTheme = EditorView.baseTheme({\n    \"activeLine@light\": { backgroundColor: \"#e8f2ff\" },\n    \"activeLine@dark\": { backgroundColor: \"#223039\" },\n    \"selectionMatch\": {\n        backgroundColor: \"#99ff7780\",\n        \".cm-searchMatch &\": {\n            backgroundColor: \"transparent\"\n        }\n    }\n});\n\nexport { highlightActiveLine, highlightSelectionMatches };\n","import { NodeProp } from 'lezer-tree';\nimport { StyleModule } from 'style-mod';\nimport { ViewPlugin, EditorView, Decoration } from '@codemirror/next/view';\nimport { precedence, EditorState } from '@codemirror/next/state';\nimport { RangeSetBuilder } from '@codemirror/next/rangeset';\n\n/// A tag system defines a set of node (token) tags used for\n/// highlighting. You'll usually want to use the\n/// [default](#highlight.defaultTags) set, but it is possible to\n/// define your own custom system when that doesn't fit your use case.\nclass TagSystem {\n    /// Define a tag system. Each tag identifies a type of syntactic\n    /// element, which can have a single type and any number of flags.\n    /// The `flags` argument should be an array of flag names, and the\n    /// `types` argument an array of type names. Type names may have a\n    /// `\"name=parentName\"` format to specify that this type is an\n    /// instance of some other type, which means that, if no styling for\n    /// the type itself is provided, it'll fall back to the parent\n    /// type's styling.\n    ///\n    /// You can specify a `subtypes` property to assign a given number\n    /// of sub-types to each type. These are automatically generated\n    /// types with the base type name suffixed with `#1` to `#`_`N`_\n    /// (where _N_ is the number given in the `subtypes` field) that\n    /// have the base type as parent type.\n    constructor(options) {\n        /// @internal\n        this.typeNames = [\"\"];\n        /// @internal\n        this.typeIDs = Object.create(null);\n        /// @internal\n        this.prop = new NodeProp();\n        this.flags = options.flags;\n        this.types = options.types;\n        this.flagMask = Math.pow(2, this.flags.length) - 1;\n        this.typeShift = this.flags.length;\n        let subtypes = options.subtypes || 0;\n        let parentNames = [undefined];\n        this.typeIDs[\"\"] = 0;\n        let typeID = 1;\n        for (let type of options.types) {\n            let match = /^([\\w\\-]+)(?:=([\\w-]+))?$/.exec(type);\n            if (!match)\n                throw new RangeError(\"Invalid type name \" + type);\n            let id = typeID++;\n            this.typeNames[id] = match[1];\n            this.typeIDs[match[1]] = id;\n            parentNames[id] = match[2];\n            for (let i = 0; i < subtypes; i++) {\n                let subID = typeID++, name = match[1] + \"#\" + (i + 1);\n                this.typeNames[subID] = name;\n                this.typeIDs[name] = subID;\n                parentNames[subID] = match[1];\n            }\n        }\n        this.parents = parentNames.map(name => {\n            if (name == null)\n                return 0;\n            let id = this.typeIDs[name];\n            if (id == null)\n                throw new RangeError(`Unknown parent type '${name}' specified`);\n            return id;\n        });\n        if (this.flags.length > 30 || this.typeNames.length > Math.pow(2, 30 - this.flags.length))\n            throw new RangeError(\"Too many style tag flags to fit in a 30-bit integer\");\n    }\n    /// @internal\n    get(name) {\n        let value = 0;\n        for (let part of name.split(\" \"))\n            if (part) {\n                let flag = this.flags.indexOf(part);\n                if (flag > -1) {\n                    value += 1 << flag;\n                }\n                else {\n                    let typeID = this.typeIDs[part];\n                    if (typeID == null)\n                        throw new RangeError(`Unknown tag type '${part}'`);\n                    if (value >> this.typeShift)\n                        throw new RangeError(`Multiple tag types specified in '${name}'`);\n                    value += typeID << this.typeShift;\n                }\n            }\n        return value;\n    }\n    /// @internal\n    getWithMode(name) {\n        let mode = name[0] == \"+\" ? 1 /* Inherit */ : name[0] == \"!\" ? 0 /* Opaque */ : 2 /* Normal */;\n        return { mode, tag: this.get(mode == 2 /* Normal */ ? name : name.slice(1)) };\n    }\n    /// Manually add a highlighting tag to a set of node props.\n    addTagProp(name, props = {}) {\n        let { mode, tag } = this.getWithMode(name);\n        return this.prop.set(props, new Rule(tag, mode, noContext));\n    }\n    /// Create a\n    /// [`PropSource`](https://lezer.codemirror.net/docs/ref#tree.PropSource)\n    /// that adds node properties for this system. See\n    /// [`styleTags`](#highlight.styleTags) for documentation of the\n    /// argument object.\n    add(tags) {\n        let byName = Object.create(null);\n        for (let prop in tags) {\n            let value = tags[prop];\n            let { mode, tag } = this.getWithMode(value);\n            for (let part of prop.split(\" \")) {\n                let stack = part.split(\"/\"), inner = stack[stack.length - 1];\n                let context = stack.length > 1 ? stack.slice(0, stack.length - 1).map(s => s == \"*\" ? null : s) : noContext;\n                let rule = new Rule(tag, mode, context);\n                byName[inner] = rule.sort(byName[inner]);\n            }\n        }\n        return this.prop.add(byName);\n    }\n    /// Create a highlighter extension for this system, styling the\n    /// given tags using the given CSS objects.\n    highlighter(spec) {\n        let styling = new Styling(this, spec);\n        return [\n            precedence(ViewPlugin.define(view => new Highlighter(view, this.prop, styling), {\n                decorations: v => v.decorations\n            }), \"fallback\"),\n            EditorView.styleModule.of(styling.module)\n        ];\n    }\n    /// @internal\n    specificity(tag) {\n        let flags = tag & this.flagMask, spec = 0;\n        for (let i = 1; i <= this.flags.length; i++)\n            if (flags & (1 << i))\n                spec++;\n        for (let type = tag >> this.typeShift; type; type = this.parents[type])\n            spec += 1000;\n        return spec;\n    }\n}\n/// The set of highlighting tags used by regular language packages and\n/// themes.\nconst defaultTags = new TagSystem({\n    flags: [\"invalid\", \"meta\", \"standard\",\n        \"definition\", \"constant\", \"local\", \"control\",\n        \"link\", \"strong\", \"emphasis\", \"monospace\",\n        \"changed\", \"inserted\", \"deleted\"],\n    subtypes: 7,\n    types: [\n        \"comment\",\n        \"lineComment=comment\",\n        \"blockComment=comment\",\n        \"docComment=comment\",\n        \"name\",\n        \"variableName=name\",\n        \"typeName=name\",\n        \"propertyName=name\",\n        \"className=name\",\n        \"labelName=name\",\n        \"functionName=name\",\n        \"namespace=name\",\n        \"literal\",\n        \"string=literal\",\n        \"docString=string\",\n        \"character=string\",\n        \"number=literal\",\n        \"integer=number\",\n        \"float=number\",\n        \"bool=literal\",\n        \"regexp=literal\",\n        \"escape=literal\",\n        \"color=literal\",\n        \"content\",\n        \"heading=content\",\n        \"list=content\",\n        \"quote=content\",\n        \"keyword\",\n        \"self=keyword\",\n        \"null=keyword\",\n        \"atom=keyword\",\n        \"unit=keyword\",\n        \"modifier=keyword\",\n        \"operatorKeyword=keyword\",\n        \"operator\",\n        \"derefOperator=operator\",\n        \"arithmeticOperator=operator\",\n        \"logicOperator=operator\",\n        \"bitwiseOperator=operator\",\n        \"compareOperator=operator\",\n        \"updateOperator=operator\",\n        \"typeOperator=operator\",\n        \"punctuation\",\n        \"separator=punctuation\",\n        \"bracket=punctuation\",\n        \"angleBracket=bracket\",\n        \"squareBracket=bracket\",\n        \"paren=bracket\",\n        \"brace=bracket\"\n    ]\n});\nconst noContext = [];\nclass Rule {\n    constructor(tag, mode, context, next) {\n        this.tag = tag;\n        this.mode = mode;\n        this.context = context;\n        this.next = next;\n    }\n    sort(other) {\n        if (!other || other.context.length < this.context.length) {\n            this.next = other;\n            return this;\n        }\n        other.next = this.sort(other.next);\n        return other;\n    }\n}\n/// Used to add a set of tags to a language syntax via\n/// [`Parser.withProps`](https://lezer.codemirror.net/docs/ref#lezer.Parser.withProps).\n///\n/// The argument object maps node selectors to [tag\n/// names](#highlight.TagSystem), optionally prefixed with:\n///\n///  - `+`, to make the style apply not just to the node itself, but\n///    also to child nodes (which by default replace the styles\n///    assigned by their parent nodes)\n///\n///  - `!` to make a node _opaque_, meaning its child nodes are\n///    ignored for styling purposes.\n///\n/// Node selectors can be [node\n/// names](https://lezer.codemirror.net/docs/ref#tree.NodeType.name),\n/// or groups of node names separated by spaces. It is possible to\n/// combine multiple node names with slashes, as in\n/// `\"Block/Declaration/VariableName\"`, to match the final node but\n/// only if its direct parent nodes are the other nodes mentioned. A\n/// `*` can be used as a wildcard in such a path. (But only matches a\n/// single parentwildcards that match multiple parents aren't\n/// supported, both for efficiency reasons and because Lezer trees\n/// make it rather hard to reason about what they would match.)\n///\n/// For example:\n///\n/// ```javascript\n/// parser.withProps(\n///   styleTags({\n///     // Style Number and BigNumber nodes\n///     \"Number BigNumber\": \"number\",\n///     // Style Escape nodes whose parent is String\n///     \"String/Escape\": \"escape\",\n///     // Style anything inside Attributes nodes\n///     \"Attributes\": \"!meta\",\n///     // Add a style to all content inside Italic nodes\n///     \"Italic\": \"+emphasis\"\n///   })\n/// )\n/// ```\nconst styleTags = (tags) => defaultTags.add(tags);\n/// Create a highlighter theme that adds the given styles to the given\n/// tags. The spec's property names must be [tag\n/// names](#highlight.defaultTags) or comma-separated lists of tag\n/// names. The values should be\n/// [`style-mod`](https://github.com/marijnh/style-mod#documentation)\n/// style objects that define the CSS for that tag.\nconst highlighter = (spec) => defaultTags.highlighter(spec);\nclass StyleRule {\n    constructor(type, flags, specificity, cls) {\n        this.type = type;\n        this.flags = flags;\n        this.specificity = specificity;\n        this.cls = cls;\n    }\n}\nclass Styling {\n    constructor(tags, spec) {\n        this.tags = tags;\n        this.cache = Object.create(null);\n        let modSpec = Object.create(null);\n        let nextCls = 0;\n        let rules = [];\n        for (let prop in spec) {\n            let cls = \"c\" + nextCls++;\n            modSpec[cls] = spec[prop];\n            for (let part of prop.split(/\\s*,\\s*/)) {\n                let tag = tags.get(part);\n                rules.push(new StyleRule(tag >> tags.typeShift, tag & tags.flagMask, tags.specificity(tag), cls));\n            }\n        }\n        this.rules = rules.sort((a, b) => b.specificity - a.specificity);\n        this.module = new StyleModule(modSpec);\n    }\n    match(tag) {\n        let known = this.cache[tag];\n        if (known != null)\n            return known;\n        let result = \"\";\n        let type = tag >> this.tags.typeShift, flags = tag & this.tags.flagMask;\n        for (;;) {\n            for (let rule of this.rules) {\n                if (rule.type == type && (rule.flags & flags) == rule.flags) {\n                    if (result)\n                        result += \" \";\n                    result += this.module[rule.cls];\n                    flags &= ~rule.flags;\n                    if (type)\n                        break;\n                }\n            }\n            if (type)\n                type = this.tags.parents[type];\n            else\n                break;\n        }\n        return this.cache[tag] = result;\n    }\n}\nclass Highlighter {\n    constructor(view, prop, styling) {\n        this.prop = prop;\n        this.styling = styling;\n        // Reused stacks for buildDeco\n        this.nodeStack = [\"\"];\n        this.classStack = [\"\"];\n        this.inheritStack = [\"\"];\n        this.tree = view.state.tree;\n        this.decorations = this.buildDeco(view.visibleRanges, this.tree);\n    }\n    update(update) {\n        let syntax = update.state.facet(EditorState.syntax);\n        if (!syntax.length) {\n            this.decorations = Decoration.none;\n        }\n        else if (syntax[0].parsePos(update.state) < update.view.viewport.to) {\n            this.decorations = this.decorations.map(update.changes);\n        }\n        else if (this.tree != syntax[0].getTree(update.state) || update.viewportChanged) {\n            this.tree = syntax[0].getTree(update.state);\n            this.decorations = this.buildDeco(update.view.visibleRanges, this.tree);\n        }\n    }\n    buildDeco(ranges, tree) {\n        let builder = new RangeSetBuilder();\n        let start, curClass, depth;\n        function flush(pos, style) {\n            if (pos > start && style)\n                builder.add(start, pos, Decoration.mark({ class: style })); // FIXME cache these\n            start = pos;\n        }\n        let { nodeStack, classStack, inheritStack } = this;\n        for (let { from, to } of ranges) {\n            curClass = \"\";\n            depth = 0;\n            start = from;\n            tree.iterate({\n                from, to,\n                enter: (type, start) => {\n                    depth++;\n                    let inheritedClass = inheritStack[depth - 1];\n                    let cls = inheritedClass;\n                    let rule = type.prop(this.prop), opaque = false;\n                    while (rule) {\n                        if (!rule.context.length || matchContext(rule.context, nodeStack, depth)) {\n                            let style = this.styling.match(rule.tag);\n                            if (style) {\n                                if (cls)\n                                    cls += \" \";\n                                cls += style;\n                                if (rule.mode == 1 /* Inherit */)\n                                    inheritedClass = cls;\n                                else if (rule.mode == 0 /* Opaque */)\n                                    opaque = true;\n                            }\n                            break;\n                        }\n                        rule = rule.next;\n                    }\n                    if (cls != curClass) {\n                        flush(start, curClass);\n                        curClass = cls;\n                    }\n                    if (opaque) {\n                        depth--;\n                        return false;\n                    }\n                    classStack[depth] = cls;\n                    inheritStack[depth] = inheritedClass;\n                    nodeStack[depth] = type.name;\n                    return undefined;\n                },\n                leave: (_t, _s, end) => {\n                    depth--;\n                    let backTo = classStack[depth];\n                    if (backTo != curClass) {\n                        flush(Math.min(to, end), curClass);\n                        curClass = backTo;\n                    }\n                }\n            });\n        }\n        return builder.finish();\n    }\n}\nfunction matchContext(context, stack, depth) {\n    if (context.length > depth - 1)\n        return false;\n    for (let d = depth - 1, i = context.length - 1; i >= 0; i--, d--) {\n        let check = context[i];\n        if (check && check != stack[d])\n            return false;\n    }\n    return true;\n}\n/// A default highlighter (works well with light themes).\nconst defaultHighlighter = highlighter({\n    deleted: { textDecoration: \"line-through\" },\n    inserted: { textDecoration: \"underline\" },\n    link: { textDecoration: \"underline\" },\n    strong: { fontWeight: \"bold\" },\n    emphasis: { fontStyle: \"italic\" },\n    invalid: { color: \"#f00\" },\n    keyword: { color: \"#708\" },\n    \"atom, bool\": { color: \"#219\" },\n    number: { color: \"#164\" },\n    string: { color: \"#a11\" },\n    \"regexp, escape\": { color: \"#e40\" },\n    \"variableName definition\": { color: \"#00f\" },\n    typeName: { color: \"#085\" },\n    className: { color: \"#167\" },\n    \"propertyName definition\": { color: \"#00c\" },\n    comment: { color: \"#940\" },\n    meta: { color: \"#555\" },\n});\n\nexport { TagSystem, defaultHighlighter, defaultTags, highlighter, styleTags };\n","import { EditorView, Decoration, themeClass, ViewPlugin, logException, WidgetType } from '@codemirror/next/view';\nimport { StateEffect, StateField } from '@codemirror/next/state';\nimport { hoverTooltip } from '@codemirror/next/tooltip';\nimport { panels, showPanel, getPanel } from '@codemirror/next/panel';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, diagnostics.length, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostic != diagnostic)\n            return;\n        found = new SelectedDiagnostic(from, to, spec.diagnostic);\n        return false;\n    });\n    return found;\n}\nfunction maybeEnableLint(state) {\n    return state.field(lintState, false) ? undefined : { append: [\n            lintState,\n            EditorView.decorations.compute([lintState], state => {\n                let { selected, panel } = state.field(lintState);\n                return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n                    activeMark.range(selected.from, selected.to)\n                ]);\n            }),\n            panels(),\n            hoverTooltip(lintTooltip),\n            baseTheme\n        ] };\n}\n/// State effect that is used to update the current set of\n/// diagnostics.\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: setDiagnosticsEffect.of(diagnostics),\n        reconfigure: maybeEnableLint(state)\n    };\n}\nconst setDiagnosticsEffect = StateEffect.define();\nconst togglePanel = StateEffect.define();\nconst movePanelSelection = StateEffect.define();\nconst lintState = StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            value = new LintState(mapped, value.panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let ranges = Decoration.set(effect.value.map((d) => {\n                    return d.from < d.to\n                        ? Decoration.mark({\n                            attributes: { class: themeClass(\"lintRange.\" + d.severity) },\n                            diagnostic: d\n                        }).range(d.from, d.to)\n                        : Decoration.widget({\n                            widget: new DiagnosticWidget(d),\n                            diagnostic: d\n                        }).range(d.from);\n                }));\n                value = new LintState(ranges, value.panel, findDiagnostic(ranges));\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: [showPanel.nFrom(s => s.panel ? [s.panel] : []),\n        EditorView.decorations.from(s => s.diagnostics)]\n});\nconst activeMark = Decoration.mark({ class: themeClass(\"lintRange.active\") });\nfunction lintTooltip(view, check) {\n    let { diagnostics } = view.state.field(lintState);\n    let found = [], stackStart = 2e8, stackEnd = 0;\n    diagnostics.between(0, view.state.doc.length, (start, end, { spec }) => {\n        if (check(start, end)) {\n            found.push(spec.diagnostic);\n            stackStart = Math.min(start, stackStart);\n            stackEnd = Math.max(end, stackEnd);\n        }\n    });\n    if (!found.length)\n        return null;\n    return {\n        pos: stackStart,\n        end: stackEnd,\n        style: \"lint\",\n        create() {\n            let dom = document.createElement(\"ul\");\n            for (let d of found)\n                dom.appendChild(renderDiagnostic(view, d));\n            return { dom };\n        }\n    };\n}\n/// Command to open and focus the lint panel.\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: togglePanel.of(true),\n            reconfigure: maybeEnableLint(view.state) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/// Command to close the lint panel, when open.\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/// Move the selection to the next diagnostic.\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.primary, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/// A set of default key bindings for the lint functionality.\n///\n/// - Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](#lint.openLintPanel)\n/// - F8: [\\`nextDiagnostic\\`](#lint.nextDiagnostic)\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst LintDelay = 500;\n/// Given a diagnostic source, this function returns an extension that\n/// enables linting with that source. It will be called whenever the\n/// editor is idle (after its content changed).\nfunction linter(source) {\n    return ViewPlugin.fromClass(class {\n        constructor(view) {\n            this.view = view;\n            this.lintTime = Date.now() + LintDelay;\n            this.set = true;\n            this.run = this.run.bind(this);\n            setTimeout(this.run, LintDelay);\n        }\n        run() {\n            let now = Date.now();\n            if (now < this.lintTime - 10) {\n                setTimeout(this.run, this.lintTime - now);\n            }\n            else {\n                this.set = false;\n                let { state } = this.view;\n                Promise.resolve(source(this.view)).then(annotations => {\n                    var _a, _b;\n                    if (this.view.state.doc == state.doc &&\n                        (annotations.length || ((_b = (_a = this.view.state.field(lintState, false)) === null || _a === void 0 ? void 0 : _a.diagnostics) === null || _b === void 0 ? void 0 : _b.size)))\n                        this.view.dispatch(setDiagnostics(this.view.state, annotations));\n                }, error => { logException(this.view.state, error); });\n            }\n        }\n        update(update) {\n            if (update.docChanged) {\n                this.lintTime = Date.now() + LintDelay;\n                if (!this.set) {\n                    this.set = true;\n                    setTimeout(this.run, LintDelay);\n                }\n            }\n        }\n    });\n}\nfunction renderDiagnostic(view, diagnostic) {\n    let dom = document.createElement(\"li\");\n    dom.textContent = diagnostic.message;\n    dom.className = themeClass(\"diagnostic.\" + diagnostic.severity);\n    if (diagnostic.actions)\n        for (let action of diagnostic.actions) {\n            let button = dom.appendChild(document.createElement(\"button\"));\n            button.className = themeClass(\"diagnosticAction\");\n            button.textContent = action.name;\n            button.onclick = button.onmousedown = e => {\n                e.preventDefault();\n                let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n                if (found)\n                    action.apply(view, found.from, found.to);\n            };\n        }\n    // FIXME render source?\n    return dom;\n}\nclass DiagnosticWidget extends WidgetType {\n    toDOM() {\n        let elt = document.createElement(\"span\");\n        elt.className = themeClass(\"lintPoint.\" + this.value.severity);\n        return elt;\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic);\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        this.dom = document.createElement(\"div\");\n        this.list = this.dom.appendChild(document.createElement(\"ul\"));\n        this.list.tabIndex = 0;\n        this.list.setAttribute(\"role\", \"listbox\");\n        this.list.setAttribute(\"aria-label\", this.view.state.phrase(\"Diagnostics\"));\n        this.list.addEventListener(\"keydown\", event => {\n            if (event.keyCode == 27) { // Escape\n                event.preventDefault();\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38) { // ArrowUp\n                event.preventDefault();\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40) { // ArrowDown\n                event.preventDefault();\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                event.preventDefault();\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                event.preventDefault();\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) {\n                event.preventDefault();\n                this.view.focus();\n            } // FIXME PageDown/PageUp\n        });\n        this.list.addEventListener(\"click\", event => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        });\n        let close = this.dom.appendChild(document.createElement(\"button\"));\n        close.setAttribute(\"name\", \"close\");\n        close.setAttribute(\"aria-label\", this.view.state.phrase(\"close\"));\n        close.textContent = \"\";\n        close.addEventListener(\"click\", () => closeLintPanel(this.view));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            let found = -1, item;\n            for (let j = i; j < this.items.length; j++)\n                if (this.items[j].diagnostic == spec.diagnostic) {\n                    found = j;\n                    break;\n                }\n            if (found < 0) {\n                item = new PanelItem(this.view, spec.diagnostic);\n                this.items.splice(i, 0, item);\n                needsSync = true;\n            }\n            else {\n                item = this.items[found];\n                if (found > i) {\n                    this.items.splice(i, found - i);\n                    needsSync = true;\n                }\n            }\n            if (selected && item.diagnostic == selected.diagnostic) {\n                if (!item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.setAttribute(\"aria-selected\", \"true\");\n                    newSelectedItem = item;\n                }\n            }\n            else if (item.dom.hasAttribute(\"aria-selected\")) {\n                item.dom.removeAttribute(\"aria-selected\");\n            }\n            i++;\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= panel.top - sel.top;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += sel.bottom - panel.bottom;\n                }\n            });\n        }\n        else if (!this.items.length) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n        if (!this.list.firstChild)\n            this.list.appendChild(renderDiagnostic(this.view, {\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n    }\n    moveSelection(selectedIndex) {\n        // FIXME make actions accessible\n        if (this.items.length == 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    get style() { return \"lint\"; }\n    static open(view) { return new LintPanel(view); }\n}\nfunction underline(color) {\n    let svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"6\" height=\"3\">\n    <path d=\"m0 3 l2 -2 l1 0 l2 2 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>\n  </svg>`;\n    return `url('data:image/svg+xml;base64,${btoa(svg)}')`;\n}\nconst baseTheme = EditorView.baseTheme({\n    diagnostic: {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\"\n    },\n    \"diagnostic.error\": { borderLeft: \"5px solid #d11\" },\n    \"diagnostic.warning\": { borderLeft: \"5px solid orange\" },\n    \"diagnostic.info\": { borderLeft: \"5px solid #999\" },\n    diagnosticAction: {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\"\n    },\n    lintRange: {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\"\n    },\n    \"lintRange.error\": { backgroundImage: underline(\"#d11\") },\n    \"lintRange.warning\": { backgroundImage: underline(\"orange\") },\n    \"lintRange.info\": { backgroundImage: underline(\"#999\") },\n    \"lintRange.active\": { backgroundColor: \"#ffdd9980\" },\n    lintPoint: {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \"lintPoint.warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \"lintPoint.info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \"panel.lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\"\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    },\n    \"tooltip.lint\": {\n        padding: 0,\n        margin: 0\n    }\n});\n\nexport { closeLintPanel, lintKeymap, linter, nextDiagnostic, openLintPanel, setDiagnostics };\n","import { highlightSpecialChars, multipleSelections, indentOnInput, keymap } from '@codemirror/next/view';\nexport { EditorView } from '@codemirror/next/view';\nimport { history, historyKeymap } from '@codemirror/next/history';\nimport { foldGutter, foldKeymap } from '@codemirror/next/fold';\nimport { lineNumbers } from '@codemirror/next/gutter';\nimport { defaultKeymap } from '@codemirror/next/commands';\nimport { bracketMatching } from '@codemirror/next/matchbrackets';\nimport { closeBrackets, closeBracketsKeymap } from '@codemirror/next/closebrackets';\nimport { searchKeymap } from '@codemirror/next/search';\nimport { autocompletion, completionKeymap } from '@codemirror/next/autocomplete';\nimport { commentKeymap } from '@codemirror/next/comment';\nimport { rectangularSelection } from '@codemirror/next/rectangular-selection';\nimport { gotoLineKeymap } from '@codemirror/next/goto-line';\nimport { highlightActiveLine, highlightSelectionMatches } from '@codemirror/next/highlight-selection';\nimport { defaultHighlighter } from '@codemirror/next/highlight';\nimport { lintKeymap } from '@codemirror/next/lint';\nexport { EditorState } from '@codemirror/next/state';\n\n/// This is an extension value that just pulls together a whole lot of\n/// extensions that you might want in a basic editor. It is meant as a\n/// convenient helper to quickly set up CodeMirror without installing\n/// and importing a lot of packages.\n///\n/// Specifically, it includes...\n///\n///  - [the default command bindings](#commands.defaultKeymap)\n///  - [line numbers](#gutter.lineNumbers)\n///  - [special character highlighting](#view.highlightSpecialChars)\n///  - [the undo history](#history.history)\n///  - [a fold gutter](#fold.foldGutter)\n///  - [multiple selection support](#view.multipleSelections)\n///  - [reindentation on input](#view.indentOnInput)\n///  - [the default highlighter](#highlight.defaultHighlighter)\n///  - [bracket matching](#matchbrackets.bracketMatching)\n///  - [bracket closing](#closebrackets.closeBrackets)\n///  - [autocompletion](#autocomplete.autocompletion)\n///  - [rectangular selection](#rectangular-selection.rectangularSelection)\n///  - [active line highlighting](#highlight-selection.highlightActiveLine)\n///  - [selection match highlighting](#highlight-selection.highlightSelectionMatches)\n///  - [search](#search.searchKeymap)\n///  - [go to line](#goto-line.gotoLineKeymap)\n///  - [commenting](#comment.commentKeymap)\n///  - [linting](#lint.lintKeymap)\n///\n/// (You'll probably want to add some language package to your setup\n/// too.)\n///\n/// This package does not allow customization. The idea is that, once\n/// you decide you want to configure your editor more precisely, you\n/// take this package's source (which is just a bunch of imports and\n/// an array literal), copy it into your own code, and adjust it as\n/// desired.\nconst basicSetup = [\n    lineNumbers(),\n    highlightSpecialChars(),\n    history(),\n    foldGutter(),\n    multipleSelections(),\n    indentOnInput(),\n    defaultHighlighter,\n    bracketMatching(),\n    closeBrackets(),\n    autocompletion(),\n    rectangularSelection(),\n    highlightActiveLine(),\n    highlightSelectionMatches(),\n    keymap([\n        ...closeBracketsKeymap,\n        ...defaultKeymap,\n        ...searchKeymap,\n        ...historyKeymap,\n        ...foldKeymap,\n        ...commentKeymap,\n        ...gotoLineKeymap,\n        ...completionKeymap,\n        ...lintKeymap\n    ])\n];\n\nexport { basicSetup };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {Action, Term, StateFlag, ParseState, Seq} from \"./constants\"\nimport {StackContext} from \"./parse\"\nimport {Tree, TreeBuffer, BufferCursor} from \"lezer-tree\"\n\n/// A parse stack. These are used internally by the parser to track\n/// parsing progress. They also provide some properties and methods\n/// that external code such as a tokenizer can use to get information\n/// about the parse state.\nexport class Stack {\n  /// @internal\n  constructor(\n    /// A group of values that the stack will share with all\n    /// split instances\n    ///@internal\n    readonly cx: StackContext,\n    /// Holds state, pos, value stack pos (15 bits array index, 15 bits\n    /// buffer index) triplets for all but the top state\n    /// @internal\n    readonly stack: number[],\n    /// The current parse state @internal\n    public state: number,\n    // The position at which the next reduce should take place. This\n    // can be less than `this.pos` when skipped expressions have been\n    // added to the stack (which should be moved outside of the next\n    // reduction)\n    /// @internal\n    public reducePos: number,\n    /// The input position up to which this stack has parsed.\n    public pos: number,\n    /// The dynamic score of the stack, including dynamic precedence\n    /// and error-recovery penalties\n    /// @internal\n    public score: number,\n    // The output buffer. Holds (type, start, end, size) quads\n    // representing nodes created by the parser, where `size` is\n    // amount of buffer array entries covered by this node.\n    /// @internal\n    readonly buffer: number[],\n    // The base offset of the buffer. When stacks are split, the split\n    // instance shared the buffer history with its parent up to\n    // `bufferBase`, which is the absolute offset (including the\n    // offset of previous splits) into the buffer at which this stack\n    // starts writing.\n    /// @internal\n    readonly bufferBase: number,\n    // A parent stack from which this was split off, if any. This is\n    // set up so that it always points to a stack that has some\n    // additional buffer content, never to a stack with an equal\n    // `bufferBase`.\n    /// @internal\n    readonly parent: Stack | null\n  ) {}\n\n  /// @internal\n  toString() {\n    return `[${this.stack.filter((_, i) => i % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? \"!\" + this.score : \"\"}`\n  }\n\n  // Start an empty stack\n  /// @internal\n  static start(cx: StackContext, state: number, pos = 0) {\n    return new Stack(cx, [], state, pos, pos, 0, [], 0, null)\n  }\n\n  // Push a state onto the stack, tracking its start position as well\n  // as the buffer base at that point.\n  /// @internal\n  pushState(state: number, start: number) {\n    this.stack.push(this.state, start, this.bufferBase + this.buffer.length)\n    this.state = state\n  }\n\n  // Apply a reduce action\n  /// @internal\n  reduce(action: number) {\n    let depth = action >> Action.ReduceDepthShift, type = action & Action.ValueMask\n    let {parser} = this.cx\n\n    let dPrec = parser.dynamicPrecedence(type)\n    if (dPrec) this.score += dPrec\n\n    if (depth == 0) {\n      // Zero-depth reductions are a special casethey add stuff to\n      // the stack without popping anything off.\n      if (type < parser.minRepeatTerm) this.storeNode(type, this.reducePos, this.reducePos, 4, true)\n      this.pushState(parser.getGoto(this.state, type, true), this.reducePos)\n      return\n    }\n\n    // Find the base index into `this.stack`, content after which will\n    // be dropped. Note that with `StayFlag` reductions we need to\n    // consume two extra frames (the dummy parent node for the skipped\n    // expression and the state that we'll be staying in, which should\n    // be moved to `this.state`).\n    let base = this.stack.length - ((depth - 1) * 3) - (action & Action.StayFlag ? 6 : 0)\n    let start = this.stack[base - 2]\n    let bufferBase = this.stack[base - 1], count = this.bufferBase + this.buffer.length - bufferBase\n    if (type < parser.minRepeatTerm || // Normal term\n        (action & Action.RepeatFlag) || // Inner repeat marker\n        (type > parser.maxNode && type <= parser.maxRepeatWrap)) { // Repeat wrapper\n      let pos = parser.stateFlag(this.state, StateFlag.Skipped) ? this.pos : this.reducePos\n      this.storeNode(type, start, pos, count + 4, true)\n    }\n    if (action & Action.StayFlag) {\n      this.state = this.stack[base]\n    } else {\n      let baseStateID = this.stack[base - 3]\n      this.state = parser.getGoto(baseStateID, type, true)\n    }\n    while (this.stack.length > base) this.stack.pop()\n  }\n\n  // Shift a value into the buffer\n  /// @internal\n  storeNode(term: number, start: number, end: number, size = 4, isReduce = false) {\n    if (term == Term.Err) { // Try to omit/merge adjacent error nodes\n      let cur: Stack | null = this, top = this.buffer.length\n      if (top == 0 && cur.parent) {\n        top = cur.bufferBase - cur.parent.bufferBase\n        cur = cur.parent\n      }\n      if (top > 0 && cur.buffer[top - 4] == Term.Err && cur.buffer[top - 1] > -1) {\n        if (start == end) return\n        if (cur.buffer[top - 2] >= start) { cur.buffer[top - 2] = end; return }\n      }\n    }\n\n    if (!isReduce || this.pos == end) { // Simple case, just append\n      this.buffer.push(term, start, end, size)\n    } else { // There may be skipped nodes that have to be moved forward\n      let index = this.buffer.length\n      if (index > 0 && this.buffer[index - 4] != Term.Err) while (index > 0 && this.buffer[index - 2] > end) {\n        // Move this record forward\n        this.buffer[index] = this.buffer[index - 4]\n        this.buffer[index + 1] = this.buffer[index - 3]\n        this.buffer[index + 2] = this.buffer[index - 2]\n        this.buffer[index + 3] = this.buffer[index - 1]\n        index -= 4\n        if (size > 4) size -= 4\n      }\n      this.buffer[index] = term\n      this.buffer[index + 1] = start\n      this.buffer[index + 2] = end\n      this.buffer[index + 3] = size\n    }\n  }\n\n  // Apply a shift action\n  /// @internal\n  shift(action: number, next: number, nextEnd: number) {\n    if (action & Action.GotoFlag) {\n      this.pushState(action & Action.ValueMask, this.pos)\n    } else if ((action & Action.StayFlag) == 0) { // Regular shift\n      let start = this.pos, nextState = action, {parser} = this.cx\n      if (nextEnd > this.pos || next <= parser.maxNode) {\n        this.pos = nextEnd\n        if (!parser.stateFlag(nextState, StateFlag.Skipped)) this.reducePos = nextEnd\n      }\n      this.pushState(nextState, start)\n      if (next <= parser.maxNode) this.buffer.push(next, start, nextEnd, 4)\n    } else { // Shift-and-stay, which means this is a skipped token\n      if (next <= this.cx.parser.maxNode) this.buffer.push(next, this.pos, nextEnd, 4)\n      this.pos = nextEnd\n    }\n  }\n\n  // Apply an action\n  /// @internal\n  apply(action: number, next: number, nextEnd: number) {\n    if (action & Action.ReduceFlag) this.reduce(action)\n    else this.shift(action, next, nextEnd)\n  }\n\n  // Add a prebuilt node into the buffer. This may be a reused node or\n  // the result of running a nested parser.\n  /// @internal\n  useNode(value: Tree | TreeBuffer, next: number) {\n    let index = this.cx.reused.length - 1\n    if (index < 0 || this.cx.reused[index] != value) {\n      this.cx.reused.push(value)\n      index++\n    }\n    let start = this.pos\n    this.reducePos = this.pos = start + value.length\n    this.pushState(next, start)\n    this.buffer.push(index, start, this.reducePos, -1 /* size < 0 means this is a reused value */)\n  }\n\n  // Split the stack. Due to the buffer sharing and the fact\n  // that `this.stack` tends to stay quite shallow, this isn't very\n  // expensive.\n  /// @internal\n  split() {\n    let parent: Stack | null = this\n    let off = parent.buffer.length\n    // Because the top of the buffer (after this.pos) may be mutated\n    // to reorder reductions and skipped tokens, and shared buffers\n    // should be immutable, this copies any outstanding skipped tokens\n    // to the new buffer, and puts the base pointer before them.\n    while (off > 0 && parent.buffer[off - 2] > parent.reducePos) off -= 4\n    let buffer = parent.buffer.slice(off), base = parent.bufferBase + off\n    // Make sure parent points to an actual parent with content, if there is such a parent.\n    while (parent && base == parent.bufferBase) parent = parent.parent\n    return new Stack(this.cx, this.stack.slice(), this.state, this.reducePos, this.pos,\n                     this.score, buffer, base, parent)\n  }\n\n  // Try to recover from an error by 'deleting' (ignoring) one token.\n  /// @internal\n  recoverByDelete(next: number, nextEnd: number) {\n    let isNode = next <= this.cx.parser.maxNode\n    if (isNode) this.storeNode(next, this.pos, nextEnd)\n    this.storeNode(Term.Err, this.pos, nextEnd, isNode ? 8 : 4)\n    this.pos = this.reducePos = nextEnd\n    this.score -= Recover.Token\n  }\n\n  /// Check if the given term would be able to be shifted (optionally\n  /// after some reductions) on this stack. This can be useful for\n  /// external tokenizers that want to make sure they only provide a\n  /// given token when it applies.\n  canShift(term: number) {\n    for (let sim = new SimulatedStack(this);;) {\n      let action = this.cx.parser.stateSlot(sim.top, ParseState.DefaultReduce) || this.cx.parser.hasAction(sim.top, term)\n      if ((action & Action.ReduceFlag) == 0) return true\n      if (action == 0) return false\n      sim.reduce(action)\n    }\n  }\n\n  /// Find the start position of the rule that is currently being parsed.\n  get ruleStart() {\n    for (let state = this.state, base = this.stack.length;;) {\n      let force = this.cx.parser.stateSlot(state, ParseState.ForcedReduce)\n      if (!(force & Action.ReduceFlag)) return 0\n      base -= 3 * (force >> Action.ReduceDepthShift)\n      if ((force & Action.ValueMask) < this.cx.parser.minRepeatTerm)\n        return this.stack[base + 1]\n      state = this.stack[base]\n    }\n  }\n\n  /// Find the start position of the innermost instance of any of the\n  /// given term types, or return `-1` when none of them are found.\n  ///\n  /// **Note:** this is only reliable when there is at least some\n  /// state that unambiguously matches the given rule on the stack.\n  /// I.e. if you have a grammar like this, where the difference\n  /// between `a` and `b` is only apparent at the third token:\n  ///\n  ///     a { b | c }\n  ///     b { \"x\" \"y\" \"x\" }\n  ///     c { \"x\" \"y\" \"z\" }\n  ///\n  /// Then a parse state after `\"x\"` will not reliably tell you that\n  /// `b` is on the stack. You _can_ pass `[b, c]` to reliably check\n  /// for either of those two rules (assuming that `a` isn't part of\n  /// some rule that includes other things starting with `\"x\"`).\n  startOf(types: readonly number[]) {\n    let state = this.state, frame = this.stack.length, {parser} = this.cx\n    for (;;) {\n      let force = parser.stateSlot(state, ParseState.ForcedReduce)\n      let depth = force >> Action.ReduceDepthShift, term = force & Action.ValueMask\n      if (types.indexOf(term) > -1) {\n        let base = frame - (3 * (force >> Action.ReduceDepthShift))\n        return this.stack[base + 1]\n      }\n      if (frame == 0) return -1\n      if (depth == 0) {\n        frame -= 3\n        state = this.stack[frame]\n      } else {\n        frame -= 3 * (depth - 1)\n        state = parser.getGoto(this.stack[frame - 3], term, true)\n      }\n    }\n  }\n\n  // Apply up to Recover.MaxNext recovery actions that conceptually\n  // inserts some missing token or rule.\n  /// @internal\n  recoverByInsert(next: number): Stack[] {\n    if (this.stack.length >= Recover.MaxInsertStackDepth) return []\n\n    let nextStates = this.cx.parser.nextStates(this.state)\n    if (nextStates.length > Recover.MaxNext || this.stack.length >= Recover.DampenInsertStackDepth) {\n      let best = nextStates.filter(s => s != this.state && this.cx.parser.hasAction(s, next))\n      if (this.stack.length < Recover.DampenInsertStackDepth)\n        for (let i = 0; best.length < Recover.MaxNext && i < nextStates.length; i++)\n          if (best.indexOf(nextStates[i]) < 0) best.push(nextStates[i])\n      nextStates = best\n    }\n    let result: Stack[] = []\n    for (let i = 0; i < nextStates.length && result.length < Recover.MaxNext; i++) {\n      if (nextStates[i] == this.state) continue\n      let stack = this.split()\n      stack.storeNode(Term.Err, stack.pos, stack.pos, 4, true)\n      stack.pushState(nextStates[i], this.pos)\n      stack.score -= Recover.Token\n      result.push(stack)\n    }\n    return result\n  }\n\n  // Force a reduce, if possible. Return false if that can't\n  // be done.\n  /// @internal\n  forceReduce() {\n    let reduce = this.cx.parser.stateSlot(this.state, ParseState.ForcedReduce)\n    if ((reduce & Action.ReduceFlag) == 0) return false\n    if (!this.cx.parser.validAction(this.state, reduce)) {\n      this.storeNode(Term.Err, this.reducePos, this.reducePos, 4, true)\n      this.score -= Recover.Reduce\n    }\n    this.reduce(reduce)\n    return true\n  }\n\n  /// @internal\n  forceAll() {\n    while (!this.cx.parser.stateFlag(this.state, StateFlag.Accepting) && this.forceReduce()) {}\n    return this\n  }\n\n  /// Check whether this state has no further actions (assumed to be a direct descendant of the\n  /// top state, since any other states must be able to continue\n  /// somehow). @internal\n  get deadEnd() {\n    if (this.stack.length != 3) return false\n    let {parser} = this.cx\n    return parser.data[parser.stateSlot(this.state, ParseState.Actions)] == Seq.End &&\n      !parser.stateSlot(this.state, ParseState.DefaultReduce)\n  }\n\n  /// Restart the stack (put it back in its start state). Only safe\n  /// when this.stack.length == 3 (state is directly below the top\n  /// state). @internal\n  restart() {\n    this.state = this.stack[0]\n    this.stack.length = 0\n  }\n\n  /// @internal\n  sameState(other: Stack) {\n    if (this.state != other.state || this.stack.length != other.stack.length) return false\n    for (let i = 0; i < this.stack.length; i += 3)\n      if (this.stack[i] != other.stack[i]) return false\n    return true\n  }\n\n  // Convert the stack's buffer to a syntax tree.\n  /// @internal\n  toTree(): Tree {\n    return Tree.build({buffer: StackBufferCursor.create(this),\n                       group: this.cx.parser.group,\n                       topID: this.cx.topTerm,\n                       maxBufferLength: this.cx.maxBufferLength,\n                       reused: this.cx.reused,\n                       minRepeatType: this.cx.parser.minRepeatTerm})\n  }\n\n  /// Get the parser used by this stack.\n  get parser() { return this.cx.parser }\n\n  /// Test whether a given dialect (by numeric ID, as exported from\n  /// the terms file) is enabled.\n  dialectEnabled(dialectID: number) { return this.cx.dialect.flags[dialectID] }\n}\n\nexport const enum Recover {\n  Token = 200,\n  Reduce = 100,\n  MaxNext = 4,\n  MaxInsertStackDepth = 300,\n  DampenInsertStackDepth = 120\n}\n\n// Used to cheaply run some reductions to scan ahead without mutating\n// an entire stack\nclass SimulatedStack {\n  top: number\n  rest: number[]\n  offset: number\n\n  constructor(readonly stack: Stack) {\n    this.top = stack.state\n    this.rest = stack.stack\n    this.offset = this.rest.length\n  }\n\n  reduce(action: number) {\n    let term = action & Action.ValueMask, depth = action >> Action.ReduceDepthShift\n    if (depth == 0) {\n      if (this.rest == this.stack.stack) this.rest = this.rest.slice()\n      this.rest.push(this.top, 0, 0)\n      this.offset += 3\n    } else {\n      this.offset -= (depth - 1) * 3\n    }\n    let goto = this.stack.cx.parser.getGoto(this.rest[this.offset - 3], term, true)\n    this.top = goto\n  }\n}\n\n// This is given to `Tree.build` to build a buffer, and encapsulates\n// the parent-stack-walking necessary to read the nodes.\nclass StackBufferCursor implements BufferCursor {\n  buffer: number[]\n\n  constructor(public stack: Stack, public pos: number, public index: number) {\n    this.buffer = stack.buffer\n    if (this.index == 0) this.maybeNext()\n  }\n\n  static create(stack: Stack) {\n    return new StackBufferCursor(stack, stack.bufferBase + stack.buffer.length, stack.buffer.length)\n  }\n\n  maybeNext() {\n    let next = this.stack.parent\n    if (next != null) {\n      this.index = this.stack.bufferBase - next.bufferBase\n      this.stack = next\n      this.buffer = next.buffer\n    }\n  }\n\n  get id() { return this.buffer[this.index - 4] }\n  get start() { return this.buffer[this.index - 3] }\n  get end() { return this.buffer[this.index - 2] }\n  get size() { return this.buffer[this.index - 1] }\n\n  next() {\n    this.index -= 4\n    this.pos -= 4\n    if (this.index == 0) this.maybeNext()\n  }\n\n  fork() {\n    return new StackBufferCursor(this.stack, this.pos, this.index)\n  }\n}\n","import {Stack} from \"./stack\"\n\n/// Tokenizers write the tokens they read into instances of this class.\nexport class Token {\n  /// The start of the token. This is set by the parser, and should not\n  /// be mutated by the tokenizer.\n  start = -1\n  /// This starts at -1, and should be updated to a term id when a\n  /// matching token is found.\n  value = -1\n  /// When setting `.value`, you should also set `.end` to the end\n  /// position of the token. (You'll usually want to use the `accept`\n  /// method.)\n  end = -1\n\n  /// Accept a token, setting `value` and `end` to the given values.\n  accept(value: number, end: number) {\n    this.value = value\n    this.end = end\n  }\n}\n\n/// This is the interface the parser uses to access the document. It\n/// exposes a sequence of UTF16 code units. Most access will be\n/// sequential, so implementations can optimize for that.\nexport interface InputStream {\n  /// The end of the stream.\n  length: number\n  /// Get the code unit at the given position. Will return -1 when\n  /// asked for a point below 0 or beyond the end of the stream\n  get(pos: number): number\n  /// Read part of the stream as a string\n  read(from: number, to: number): string\n  /// Return a new `InputStream` over the same data, but with a lower\n  /// `length`. Used, for example, when nesting grammars to give the\n  /// inner grammar a narrower view of the input.\n  clip(at: number): InputStream\n}\n\n/// An `InputStream` that is backed by a single, flat string.\nexport class StringStream implements InputStream {\n  constructor(readonly string: string, readonly length = string.length) {}\n\n  get(pos: number) {\n    return pos < 0 || pos >= this.length ? -1 : this.string.charCodeAt(pos)\n  }\n  \n  read(from: number, to: number): string { return this.string.slice(from, Math.min(this.length, to)) }\n\n  clip(at: number) { return new StringStream(this.string, at) }\n}\n\nexport interface Tokenizer {\n  token(input: InputStream, token: Token, stack: Stack): void\n  contextual: boolean\n  fallback: boolean\n  extend: boolean\n}\n\n/// @internal\nexport class TokenGroup implements Tokenizer {\n  contextual!: boolean\n  fallback!: boolean\n  extend!: boolean\n\n  constructor(readonly data: Readonly<Uint16Array>, readonly id: number) {}\n\n  token(input: InputStream, token: Token, stack: Stack) { readToken(this.data, input, token, stack, this.id) }\n}\n\nTokenGroup.prototype.contextual = TokenGroup.prototype.fallback = TokenGroup.prototype.extend = false\n\ninterface ExternalOptions {\n  /// When set to true, mark this tokenizer as depending on the\n  /// current parse stack, which prevents its result from being cached\n  /// between parser actions at the same positions.\n  contextual?: boolean,\n  /// By defaults, when a tokenizer returns a token, that prevents\n  /// tokenizers with lower precedence from even running. When\n  /// `fallback` is true, the tokenizer is allowed to run when a\n  /// previous tokenizer returned a token that didn't match any of the\n  /// current state's actions.\n  fallback?: boolean\n  /// When set to true, tokenizing will not stop after this tokenizer\n  /// has produced a token. (But it will still fail to reach this one\n  /// if a higher-precedence tokenizer produced a token.)\n  extend?: boolean\n}\n\n/// Exports that are used for `@external tokens` in the grammar should\n/// export an instance of this class.\nexport class ExternalTokenizer {\n  /// @internal\n  contextual: boolean\n  /// @internal\n  fallback: boolean\n  /// @internal\n  extend: boolean\n\n  /// Create a tokenizer. The first argument is the function that,\n  /// given an input stream and a token object,\n  /// [fills](#lezer.Token.accept) the token object if it recognizes a\n  /// token. `token.start` should be used as the start position to\n  /// scan from.\n  constructor(\n    /// @internal\n    readonly token: (input: InputStream, token: Token, stack: Stack) => void,\n    options: ExternalOptions = {}\n  ) {\n    this.contextual = !!options.contextual\n    this.fallback = !!options.fallback\n    this.extend = !!options.extend\n  }\n}\n\n// Tokenizer data is stored a big uint16 array containing, for each\n// state:\n//\n//  - A group bitmask, indicating what token groups are reachable from\n//    this state, so that paths that can only lead to tokens not in\n//    any of the current groups can be cut off early.\n//\n//  - The position of the end of the state's sequence of accepting\n//    tokens\n//\n//  - The number of outgoing edges for the state\n//\n//  - The accepting tokens, as (token id, group mask) pairs\n//\n//  - The outgoing edges, as (start character, end character, state\n//    index) triples, with end character being exclusive\n//\n// This function interprets that data, running through a stream as\n// long as new states with the a matching group mask can be reached,\n// and updating `token` when it matches a token.\nfunction readToken(data: Readonly<Uint16Array>,\n                   input: InputStream,\n                   token: Token,\n                   stack: Stack,\n                   group: number) {\n  let state = 0, groupMask = 1 << group, dialect = stack.cx.dialect\n  scan: for (let pos = token.start;;) {\n    if ((groupMask & data[state]) == 0) break\n    let accEnd = data[state + 1]\n    // Check whether this state can lead to a token in the current group\n    // Accept tokens in this state, possibly overwriting\n    // lower-precedence / shorter tokens\n    for (let i = state + 3; i < accEnd; i += 2) if ((data[i + 1] & groupMask) > 0) {\n      let term = data[i]\n      if (dialect.allows(term) &&\n          (token.value == -1 || token.value == term || stack.cx.parser.overrides(term, token.value))) {\n        token.accept(term, pos)\n        break\n      }\n    }\n    let next = input.get(pos++)\n    // Do a binary search on the state's edges\n    for (let low = 0, high = data[state + 2]; low < high;) {\n      let mid = (low + high) >> 1\n      let index = accEnd + mid + (mid << 1)\n      let from = data[index], to = data[index + 1]\n      if (next < from) high = mid\n      else if (next >= to) low = mid + 1\n      else { state = data[index + 2]; continue scan }\n    }\n    break\n  }\n}\n","// See lezer-generator/src/encode.ts for comments about the encoding\n// used here\n\nimport {Encode} from \"./constants\"\n\nexport function decodeArray<T extends {[i: number]: number} = Uint16Array>(\n  input: string | T,\n  Type: {new (n: number): T} = Uint16Array as any\n): T {\n  if (typeof input != \"string\") return input\n  let array: T | null = null\n  for (let pos = 0, out = 0; pos < input.length;) {\n    let value = 0\n    for (;;) {\n      let next = input.charCodeAt(pos++), stop = false\n      if (next == Encode.BigValCode) { value = Encode.BigVal; break }\n      if (next >= Encode.Gap2) next--\n      if (next >= Encode.Gap1) next--\n      let digit = next - Encode.Start\n      if (digit >= Encode.Base) { digit -= Encode.Base; stop = true }\n      value += digit\n      if (stop) break\n      value *= Encode.Base\n    }\n    if (array) array[out++] = value\n    else array = new Type(value)\n  }\n  return array!\n}\n","import {Stack, Recover} from \"./stack\"\nimport {Action, Specialize, Term, Seq, StateFlag, ParseState} from \"./constants\"\nimport {InputStream, Token, StringStream, Tokenizer, TokenGroup, ExternalTokenizer} from \"./token\"\nimport {DefaultBufferLength, Tree, TreeBuffer, NodeGroup, NodeType, NodeProp, NodePropSource} from \"lezer-tree\"\nimport {decodeArray} from \"./decode\"\n\n// Environment variable used to control console output\nconst verbose = typeof process != \"undefined\" && /\\bparse\\b/.test(process.env.LOG!)\n\nlet stackIDs: WeakMap<Stack, string> | null = null\n\n/// Nested grammar values are associated with nesting positions in the\n/// grammar. If they are null, the nested region is simply skipped\n/// over. If they hold a parser object, that parser is used to parse\n/// the region. To implement dynamic behavior, the value may also be a\n/// function which returns a description of the way the region should\n/// be parsed.\nexport type NestedGrammar = null | Parser | ((input: InputStream, stack: Stack) => NestedGrammarSpec)\n\n/// An object indicating how to proceed with a nested parse.\nexport interface NestedGrammarSpec {\n  /// When given, this is used to provide a parser that should be used\n  /// to parse the content.\n  parser?: Parser\n  /// When `parser` is given, this can be used to configure which top\n  /// rule to parse with it.\n  top?: string\n  /// When `parser` is given, this can be used to configure a dialect.\n  dialect?: string\n  /// This being true means that the outer grammar should use\n  /// the fallback expression provided for the nesting to parse the\n  /// content.\n  stay?: boolean\n  /// Alternatively, `parseNode` may hold a function which will be made\n  /// responsible for parsing the region.\n  parseNode?: (input: InputStream, start: number) => Tree\n  /// An optional extra type to tag the resulting tree with.\n  wrapType?: number,\n  /// When a `filterEnd` property is present, that should hold a\n  /// function that determines whether a given end token (which matches\n  /// the end token specified in the grammar) should be used (true) or\n  /// ignored (false). This is mostly useful for implementing things\n  /// like XML closing tag matching.\n  filterEnd?: (endToken: string) => boolean\n}\n\nclass CacheCursor {\n  trees: Tree[]\n  start = [0]\n  index = [0]\n  nextStart: number = 0\n\n  constructor(tree: Tree) { this.trees = [tree] }\n\n  // `pos` must be >= any previously given `pos` for this cursor\n  nodeAt(pos: number): Tree | TreeBuffer | null {\n    if (pos < this.nextStart) return null\n\n    for (;;) {\n      let last = this.trees.length - 1\n      if (last < 0) { // End of tree\n        this.nextStart = 1e9\n        return null\n      }\n      let top = this.trees[last], index = this.index[last]\n      if (index == top.children.length) {\n        this.trees.pop()\n        this.start.pop()\n        this.index.pop()\n        continue\n      }\n      let next = top.children[index]\n      let start = this.start[last] + top.positions[index]\n      if (start >= pos) return start == pos ? next : null\n      if (next instanceof TreeBuffer) {\n        this.index[last]++\n        this.nextStart = start + next.length\n      } else {\n        this.index[last]++\n        if (start + next.length >= pos) { // Enter this node\n          this.trees.push(next)\n          this.start.push(start)\n          this.index.push(0)\n        }\n      }\n    }\n  }\n}\n\nclass CachedToken extends Token {\n  extended = -1\n  mask = 0\n\n  clear(start: number) {\n    this.start = start\n    this.value = this.extended = -1\n  }\n}\n\nconst dummyToken = new Token\n\nclass TokenCache {\n  tokens: CachedToken[] = []\n  mainToken: Token = dummyToken\n\n  actions: number[] = []\n\n  constructor(parser: Parser) {\n    this.tokens = parser.tokenizers.map(_ => new CachedToken)\n  }\n\n  getActions(stack: Stack, input: InputStream) {\n    let actionIndex = 0\n    let main: Token | null = null\n    let {parser} = stack.cx, {tokenizers} = parser\n\n    let mask = parser.stateSlot(stack.state, ParseState.TokenizerMask)\n    for (let i = 0; i < tokenizers.length; i++) {\n      if (((1 << i) & mask) == 0) continue\n      let tokenizer = tokenizers[i], token = this.tokens[i]\n      if (main && !tokenizer.fallback) continue\n      if (tokenizer.contextual || token.start != stack.pos || token.mask != mask) {\n        this.updateCachedToken(token, tokenizer, stack, input)\n        token.mask = mask\n      }\n\n      if (token.value != Term.Err) {\n        let startIndex = actionIndex\n        if (token.extended > -1) actionIndex = this.addActions(stack, token.extended, token.end, actionIndex)\n        actionIndex = this.addActions(stack, token.value, token.end, actionIndex)\n        if (!tokenizer.extend) {\n          main = token\n          if (actionIndex > startIndex) break\n        }\n      }\n    }\n\n    while (this.actions.length > actionIndex) this.actions.pop()\n    if (!main) {\n      main = dummyToken\n      main.start = stack.pos\n      if (stack.pos == input.length) main.accept(stack.cx.parser.eofTerm, stack.pos)\n      else main.accept(Term.Err, stack.pos + 1)\n    }\n    this.mainToken = main\n    return this.actions\n  }\n\n  updateCachedToken(token: CachedToken, tokenizer: Tokenizer, stack: Stack, input: InputStream) {\n    token.clear(stack.pos)\n    tokenizer.token(input, token, stack)\n    if (token.value > -1) {\n      let {parser} = stack.cx\n\n      for (let i = 0; i < parser.specialized.length; i++) if (parser.specialized[i] == token.value) {\n        let result = parser.specializers[i](input.read(token.start, token.end), stack)\n        if (result >= 0 && stack.cx.dialect.allows(result >> 1)) {\n          if ((result & 1) == Specialize.Specialize) token.value = result >> 1\n          else token.extended = result >> 1\n          break\n        }\n      }\n    } else if (stack.pos == input.length) {\n      token.accept(stack.cx.parser.eofTerm, stack.pos)\n    } else {\n      token.accept(Term.Err, stack.pos + 1)\n    }\n  }\n\n  putAction(action: number, token: number, end: number, index: number) {\n    // Don't add duplicate actions\n    for (let i = 0; i < index; i += 3) if (this.actions[i] == action) return index\n    this.actions[index++] = action\n    this.actions[index++] = token\n    this.actions[index++] = end\n    return index\n  }\n\n  addActions(stack: Stack, token: number, end: number, index: number) {\n    let {state} = stack, {parser} = stack.cx, {data} = parser\n    for (let set = 0; set < 2; set++) {\n      for (let i = parser.stateSlot(state, set ? ParseState.Skip : ParseState.Actions), next; (next = data[i]) != Seq.End; i += 3) {\n        if (next == token || (next == Term.Err && index == 0))\n          index = this.putAction(data[i + 1] | (data[i + 2] << 16), token, end, index)\n      }\n    }\n    return index\n  }\n}\n\n/// Options that can be passed to control parsing.\nexport interface ParseOptions {\n  /// Passing a cached tree is used for incremental parsing. This\n  /// should be a tree whose content is aligned with the current\n  /// document (though a call to `Tree.unchanged`) if any changes were\n  /// made since it was produced. The parser will try to reuse nodes\n  /// from this tree in the new parse, greatly speeding up the parse\n  /// when it can reuse nodes for most of the document.\n  cache?: Tree\n  /// When true, the parser will raise an exception, rather than run\n  /// its error-recovery strategies, when the input doesn't match the\n  /// grammar.\n  strict?: boolean,\n  /// The maximum length of the TreeBuffers generated in the output\n  /// tree. Defaults to 1024.\n  bufferLength?: number,\n  /// The name of the @top declaration to parse from. If not\n  /// specified, the first @top declaration is used.\n  top?: string,\n  /// A space-separated string of dialects to enable.\n  dialect?: string\n}\n\nexport class StackContext {\n  reused: (Tree | TreeBuffer)[] = []\n  tokens: TokenCache\n  constructor(\n    readonly parser: Parser,\n    readonly maxBufferLength: number,\n    readonly input: InputStream,\n    readonly topTerm: number,\n    readonly dialect: Dialect,\n    readonly parent: Stack | null = null,\n    public wrapType: number = -1 // Set to -2 when a stack descending from this nesting event finishes\n  ) {\n    this.tokens = new TokenCache(parser)\n  }\n}\n\nconst recoverDist = 5, maxRemainingPerStep = 3, minBufferLengthPrune = 200, forceReduceLimit = 10\n\n/// A parse context can be used for step-by-step parsing. After\n/// creating it, you repeatedly call `.advance()` until it returns a\n/// tree to indicate it has reached the end of the parse.\nexport class ParseContext {\n  // Active parse stacks.\n  private stacks: Stack[]\n  // The position to which the parse has advanced.\n  public pos = 0\n  private recovering = 0\n  private tokenCount = 0\n  private cache: CacheCursor | null\n  private strict: boolean\n  private nextStackID = 0x2654\n\n  /// @internal\n  constructor(parser: Parser,\n              input: InputStream,\n              options: ParseOptions = {}) {\n    let {cache = undefined, strict = false, bufferLength = DefaultBufferLength, top = undefined, dialect} = options\n    let topInfo = top ? parser.topRules[top] : parser.defaultTop\n    if (!topInfo) throw new RangeError(`Invalid top rule name ${top}`)\n    this.stacks = [Stack.start(new StackContext(parser, bufferLength, input, topInfo[1], parser.parseDialect(dialect)), topInfo[0])]\n    this.strict = strict\n    this.cache = cache ? new CacheCursor(cache) : null\n  }\n\n  /// @internal\n  putStack(stack: Stack) {\n    this.stacks.push(stack)\n    if (this.pos < 0 || stack.pos < this.pos) this.pos = stack.pos\n  }\n\n  /// @internal\n  putStackDedup(stack: Stack) {\n    for (let i = 0; i < this.stacks.length; i++) {\n      let other = this.stacks[i]\n      if (other.pos == stack.pos && other.sameState(stack)) {\n        if (this.stacks[i].score < stack.score) this.stacks[i] = stack\n        return\n      }\n    }\n    this.putStack(stack)\n  }\n\n  /// Move the parser forward. This will process all parse stacks at\n  /// `this.pos` and try to advance them to a further position. If no\n  /// stack for such a position is found, it'll start error-recovery.\n  ///\n  /// When the parse is finished, this will return a syntax tree. When\n  /// not, it returns `null`.\n  advance() {\n    let stacks = this.stacks, pos = this.pos\n    // This will now hold stacks beyond `pos`.\n    this.stacks = []\n    // Will be reset to the next position by `putStack`.\n    this.pos = -1\n    let stopped: Stack[] | null = null, stoppedTokens: number[] | null = null\n\n    // Keep advancing any stacks at `pos` until they either move\n    // forward or can't be advanced. Gather stacks that can't be\n    // advanced further in `stopped`.\n    for (let i = 0; i < stacks.length; i++) {\n      let stack = stacks[i]\n      for (;;) {\n        if (stack.pos > pos) {\n          this.putStack(stack)\n        } else {\n          let result = this.advanceStack(stack, stacks)\n          if (result) {\n            stack = result\n            continue\n          } else {\n            if (!stopped) { stopped = []; stoppedTokens = [] }\n            stopped.push(stack)\n            let tok = stack.cx.tokens.mainToken\n            stoppedTokens!.push(tok.value, tok.end)\n          }\n        }\n        break\n      }\n    }\n\n    if (!this.stacks.length) {\n      let finished = stopped && findFinished(stopped)\n      if (finished) return finished.toTree()\n\n      if (this.strict) throw new SyntaxError(\"No parse at \" + pos)\n      if (!this.recovering) this.recovering = recoverDist\n    }\n\n    if (this.recovering && stopped) {\n      let finished = this.runRecovery(stopped, stoppedTokens!)\n      if (finished) return finished.forceAll().toTree()\n    }\n\n    if (this.recovering) {\n      let maxRemaining = this.recovering == 1 ? 1 : this.recovering * maxRemainingPerStep\n      if (this.stacks.length > maxRemaining) {\n        this.stacks.sort((a, b) => b.score - a.score)\n        this.stacks.length = maxRemaining\n      }\n      if (this.stacks.some(s => s.reducePos > pos)) this.recovering--\n    } else if (this.stacks.length > 1) {\n      // Prune stacks that are in the same state, or that have been\n      // running without splitting for a while, to avoid getting stuck\n      // with multiple successful stacks running endlessly on.\n      outer: for (let i = 0; i < this.stacks.length - 1; i++) {\n        let stack = this.stacks[i]\n        for (let j = i + 1; j < this.stacks.length; j++) {\n          let other = this.stacks[j]\n          if (stack.sameState(other) ||\n              stack.buffer.length > minBufferLengthPrune && other.buffer.length > minBufferLengthPrune) {\n            if (((stack.score - other.score) || (stack.buffer.length - other.buffer.length)) > 0) {\n              this.stacks.splice(j--, 1)\n            } else {\n              this.stacks.splice(i--, 1)\n              continue outer\n            }\n          }\n        }\n      }\n    }\n\n    this.tokenCount++\n    return null\n  }\n\n  // Returns an updated version of the given stack, or null if the\n  // stack can't advance normally. When `split` is given, stacks split\n  // off by ambiguous operations will be pushed to that, or given to\n  // `putStack` if they move `pos` forward.\n  private advanceStack(stack: Stack, split: null | Stack[]) {\n    let start = stack.pos, {input, parser} = stack.cx\n    let base = verbose ? this.stackID(stack) + \" -> \" : \"\"\n\n    if (this.cache) {\n      for (let cached = this.cache.nodeAt(start); cached;) {\n        let match = parser.group.types[cached.type.id] == cached.type ? parser.getGoto(stack.state, cached.type.id) : -1\n        if (match > -1) {\n          stack.useNode(cached, match)\n          if (verbose) console.log(base + this.stackID(stack) + ` (via reuse of ${parser.getName(cached.type.id)})`)\n          return stack\n        }\n        if (!(cached instanceof Tree) || cached.children.length == 0 || cached.positions[0] > 0) break\n        let inner = cached.children[0]\n        if (inner instanceof Tree) cached = inner\n        else break\n      }\n    }\n\n    let nest = parser.startNested(stack.state)\n    maybeNest: if (nest > -1) {\n      let {grammar, end: endToken, placeholder} = parser.nested[nest]\n      let filterEnd = undefined, parseNode = null, nested, top, dialect, wrapType = undefined\n      if (typeof grammar == \"function\") {\n        let query = grammar(input, stack)\n        if (query.stay) break maybeNest\n        ;({parseNode, parser: nested, top, dialect, filterEnd, wrapType} = query)\n      } else {\n        nested = grammar\n      }\n      let end = this.scanForNestEnd(stack, endToken, filterEnd)\n      let clippedInput = stack.cx.input.clip(end)\n      if (parseNode || !nested) {\n        let node = parseNode ? parseNode(clippedInput, stack.pos) : Tree.empty\n        if (node.length != end - stack.pos) node = new Tree(node.type, node.children, node.positions, end - stack.pos)\n        if (wrapType != null) node = new Tree(parser.group.types[wrapType], [node], [0], node.length)\n        stack.useNode(node, parser.getGoto(stack.state, placeholder, true))\n        return stack\n      } else {\n        let topInfo = top ? nested.topRules[top] : nested.defaultTop\n        let newStack = Stack.start(new StackContext(nested, stack.cx.maxBufferLength, clippedInput, topInfo[1],\n                                                    nested.parseDialect(dialect), stack, wrapType),\n                                   topInfo[0], stack.pos)\n        if (verbose) console.log(base + this.stackID(newStack) + ` (nested)`)\n        return newStack\n      }\n    }\n\n    let defaultReduce = parser.stateSlot(stack.state, ParseState.DefaultReduce)\n    if (defaultReduce > 0) {\n      stack.reduce(defaultReduce)\n      if (verbose) console.log(base + this.stackID(stack) + ` (via always-reduce ${parser.getName(defaultReduce & Action.ValueMask)})`)\n      return stack\n    }\n\n    let actions = stack.cx.tokens.getActions(stack, input)\n    for (let i = 0; i < actions.length;) {\n      let action = actions[i++], term = actions[i++], end = actions[i++]\n      let last = i == actions.length || !split\n      let localStack = last ? stack : stack.split()\n      localStack.apply(action, term, end)\n      if (verbose)\n        console.log(base + this.stackID(localStack) + ` (via ${(action & Action.ReduceFlag) == 0 ? \"shift\"\n                     : `reduce of ${parser.getName(action & Action.ValueMask)}`} for ${\n        parser.getName(term)} @ ${start}${localStack == stack ? \"\" : \", split\"})`)\n      if (last) return localStack\n      else if (localStack.pos > start) this.putStack(localStack)\n      else split!.push(localStack)\n    }\n\n    if (stack.cx.parent && stack.pos == input.length) return this.finishNested(stack)\n    return null\n  }\n\n  // Advance a given stack forward as far as it will go. Returns the\n  // (possibly updated) stack if it got stuck, or null if it moved\n  // forward and was given to `putStackDedup`.\n  private advanceFully(stack: Stack) {\n    let pos = stack.pos\n    for (;;) {\n      let result = this.advanceStack(stack, null)\n      if (!result) return stack\n      if (result.pos > pos) {\n        this.putStackDedup(result)\n        return null\n      }\n      stack = result\n    }\n  }\n\n  private runRecovery(stacks: Stack[], tokens: number[]) {\n    let finished: Stack | null = null, restarted = false\n    for (let i = 0; i < stacks.length; i++) {\n      let stack = stacks[i], token = tokens[i << 1], tokenEnd = tokens[(i << 1) + 1]\n      let base = verbose ? this.stackID(stack) + \" -> \" : \"\"\n\n      if (stack.deadEnd) {\n        if (restarted) continue\n        restarted = true\n        stack.restart()\n        if (verbose) console.log(base + this.stackID(stack) + \" (restarted)\")\n        let stopped = this.advanceFully(stack)\n        if (stopped) stack = stopped\n        else continue\n      }\n\n      let force = stack.split(), forceBase = base\n      for (let j = 0; force.forceReduce() && j < forceReduceLimit; j++) {\n        if (verbose) console.log(forceBase + this.stackID(force) + \" (via force-reduce)\")\n        let stopped = this.advanceFully(force)\n        if (!stopped) break\n        force = stopped\n        if (verbose) forceBase = this.stackID(stopped) + \" -> \"\n      }\n\n      for (let insert of stack.recoverByInsert(token)) {\n        if (verbose) console.log(base + this.stackID(insert) + \" (via recover-insert)\")\n        this.advanceFully(insert)\n      }\n\n      if (stack.cx.input.length > stack.pos) {\n        if (tokenEnd == stack.pos) {\n          tokenEnd++\n          token = Term.Err\n        }\n        stack.recoverByDelete(token, tokenEnd)\n        if (verbose) console.log(base + this.stackID(stack) + ` (via recover-delete ${stack.cx.parser.getName(token)})`)\n        this.putStackDedup(stack)\n      } else if (!stack.cx.parent && (!finished || finished.score < stack.score)) {\n        finished = stack\n      }\n    }\n    return finished\n  }\n\n  /// Force the parse to finish, generating a tree containing the nodes\n  /// parsed so far.\n  forceFinish() {\n    return this.stacks[0].split().forceAll().toTree()\n  }\n\n  /// A value that indicates how successful the parse is so far, as\n  /// the number of error-recovery steps taken divided by the number\n  /// of tokens parsed. Could be used to decide to abort a parse when\n  /// the input doesn't appear to match the grammar at all.\n  get badness() {\n    if (!this.stacks.length) return 0\n    return -(this.stacks[0].score / (Recover.Token * this.tokenCount))\n  }\n\n  private scanForNestEnd(stack: Stack, endToken: TokenGroup, filter?: ((token: string) => boolean)) {\n    let input = stack.cx.input\n    for (let pos = stack.pos; pos < input.length; pos++) {\n      dummyToken.start = pos\n      dummyToken.value = -1\n      endToken.token(input, dummyToken, stack)\n      if (dummyToken.value > -1 && (!filter || filter(input.read(pos, dummyToken.end)))) return pos\n    }\n    return input.length\n  }\n\n  private finishNested(stack: Stack) {\n    if (stack.cx.wrapType == -2) return null // Another nested stack already finished\n    let parent = stack.cx.parent!, tree = stack.forceAll().toTree()\n    let parentParser = parent.cx.parser, info = parentParser.nested[parentParser.startNested(parent.state)]\n    tree = new Tree(tree.type, tree.children, tree.positions.map(p => p - parent!.pos), stack.pos - parent.pos)\n    if (stack.cx.wrapType > -1) tree = new Tree(parentParser.group.types[stack.cx.wrapType], [tree], [0], tree.length)\n    stack.cx.wrapType = -2\n    parent.useNode(tree, parentParser.getGoto(parent.state, info.placeholder, true))\n    if (verbose) console.log(this.stackID(parent) + ` (via unnest ${stack.cx.wrapType > -1 ? parentParser.getName(stack.cx.wrapType) : tree.type.name})`)\n    return parent\n  }\n\n  private stackID(stack: Stack) {\n    let id = (stackIDs || (stackIDs = new WeakMap)).get(stack)\n    if (!id) stackIDs.set(stack, id = String.fromCodePoint(this.nextStackID++))\n    return id + stack\n  }\n}\n\nexport class Dialect {\n  constructor(readonly source: string | undefined,\n              readonly flags: readonly boolean[],\n              readonly disabled: null | Uint8Array) {}\n\n  allows(term: number) { return !this.disabled || this.disabled[term] == 0 }\n}\n\ntype ParserSpec = {\n  states: string | Uint32Array,\n  stateData: string | Uint16Array,\n  goto: string | Uint16Array,\n  nodeNames: string,\n  maxTerm: number,\n  repeatNodeCount: number,\n  nodeProps?: [NodeProp<any>, ...(string | number)[]][],\n  tokenData: string,\n  tokenizers: (Tokenizer | number)[],\n  topRules: {[name: string]: [number, number]},\n  nested?: [string, null | NestedGrammar, string | Uint16Array, number][],\n  dialects?: {[name: string]: number},\n  dynamicPrecedences?: {[term: number]: number},\n  specialized?: {term: number, get: (value: string, stack: Stack) => number}[],\n  tokenPrec: number,\n  termNames?: {[id: number]: string}\n}\n\n/// A parser holds the parse tables for a given grammar, as generated\n/// by `lezer-generator`.\nexport class Parser {\n  /// The parse states for this grammar @internal\n  readonly states: Readonly<Uint32Array>\n  /// A blob of data that the parse states, as well as some\n  /// of `Parser`'s fields, point into @internal\n  readonly data: Readonly<Uint16Array>\n  /// The goto table. See `computeGotoTable` in\n  /// lezer-generator for details on the format @internal\n  readonly goto: Readonly<Uint16Array>\n  /// A node group with the node types used by this parser.\n  readonly group: NodeGroup\n  /// The highest term id @internal\n  readonly maxTerm: number\n  /// The first repeat-related term id @internal\n  readonly minRepeatTerm: number\n  /// The tokenizer objects used by the grammar @internal\n  readonly tokenizers: readonly Tokenizer[]\n  /// Maps top rule names to [state ID, top term ID] pairs.\n  readonly topRules: {[name: string]: [number, number]}\n  /// Metadata about nested grammars used in this grammar @internal\n  readonly nested: readonly {\n    /// A name, used by `withNested`\n    name: string,\n    /// The grammar or grammar query function to use\n    grammar: NestedGrammar,\n    /// A token-recognizing automaton for the end of the nesting\n    end: TokenGroup,\n    /// The id of the placeholder term that appears in the grammar at\n    /// the position of this nesting\n    placeholder: number\n  }[]\n  /// A mapping from dialect names to the tokens that are exclusive\n  /// to them. @internal\n  readonly dialects: {[name: string]: number}\n  /// Null if there are no dynamic precedences, a map from term ids\n  /// to precedence otherwise. @internal\n  readonly dynamicPrecedences: {[term: number]: number} | null\n  /// The token types have specializers (in this.specializers) @internal\n  readonly specialized: Uint16Array\n  /// The specializer functions for the token types in specialized @internal\n  readonly specializers: ((value: string, stack: Stack) => number)[]\n  /// Points into this.data at an array that holds the\n  /// precedence order (higher precedence first) for ambiguous\n  /// tokens @internal\n  readonly tokenPrecTable: number\n  /// An optional object mapping term ids to name strings @internal\n  readonly termNames: null | {[id: number]: string}\n  /// @internal\n  readonly maxNode: number\n  /// @internal\n  readonly maxRepeatWrap: number\n\n  private nextStateCache: (readonly number[] | null)[] = []\n  private cachedDialect: Dialect | null = null\n\n  /// @internal\n  constructor(spec: ParserSpec) {\n    let tokenArray = decodeArray<Uint16Array>(spec.tokenData)\n    let nodeNames = spec.nodeNames.split(\" \")\n    this.minRepeatTerm = nodeNames.length\n    for (let i = 0; i < spec.repeatNodeCount; i++) nodeNames.push(\"\")\n    let nodeProps: {[id: number]: any}[] = []\n    for (let i = 0; i < nodeNames.length; i++) nodeProps.push(noProps)\n    function setProp(nodeID: number, prop: NodeProp<any>, value: any) {\n      if (nodeProps[nodeID] == noProps) nodeProps[nodeID] = Object.create(null)\n      prop.set(nodeProps[nodeID], prop.deserialize(String(value)))\n    }\n    setProp(0, NodeProp.error, \"\")\n    if (spec.nodeProps) for (let propSpec of spec.nodeProps) {\n      let prop = propSpec[0]\n      for (let i = 1; i < propSpec.length; i += 2)\n        setProp(propSpec[i] as number, prop, propSpec[i + 1] as string)\n    }\n    this.specialized = new Uint16Array(spec.specialized ? spec.specialized.length : 0)\n    this.specializers = []\n    if (spec.specialized) for (let i = 0; i < spec.specialized.length; i++) {\n      this.specialized[i] = spec.specialized[i].term\n      this.specializers[i] = spec.specialized[i].get\n    }\n\n    this.states = decodeArray(spec.states, Uint32Array)\n    this.data = decodeArray(spec.stateData)\n    this.goto = decodeArray(spec.goto)\n    this.group = new NodeGroup(nodeNames.map((name, i) => new (NodeType as any)(name, nodeProps[i], i)))\n    this.maxTerm = spec.maxTerm\n    this.tokenizers = spec.tokenizers.map(value => typeof value == \"number\" ? new TokenGroup(tokenArray, value) : value)\n    this.topRules = spec.topRules\n    this.nested = (spec.nested || []).map(([name, grammar, endToken, placeholder]) => {\n      return {name, grammar, end: new TokenGroup(decodeArray(endToken), 0), placeholder}\n    })\n    this.dialects = spec.dialects || {}\n    this.dynamicPrecedences = spec.dynamicPrecedences || null\n    this.tokenPrecTable = spec.tokenPrec\n    this.termNames = spec.termNames || null\n    this.maxNode = this.group.types.length - 1\n    this.maxRepeatWrap = this.group.types.length + (this.group.types.length - this.minRepeatTerm) - 1\n    for (let i = 0, l = this.states.length / ParseState.Size; i < l; i++) this.nextStateCache[i] = null\n  }\n\n  /// Parse a given string or stream.\n  parse(input: InputStream | string, options?: ParseOptions) {\n    if (typeof input == \"string\") input = new StringStream(input)\n    let cx = new ParseContext(this, input, options)\n    for (;;) {\n      let done = cx.advance()\n      if (done) return done\n    }\n  }\n\n  /// Create a `ParseContext`.\n  startParse(input: InputStream | string, options?: ParseOptions) {\n    if (typeof input == \"string\") input = new StringStream(input)\n    return new ParseContext(this, input, options)\n  }\n\n  /// Get a goto table entry @internal\n  getGoto(state: number, term: number, loose = false) {\n    let table = this.goto\n    if (term >= table[0]) return -1\n    for (let pos = table[term + 1];;) {\n      let groupTag = table[pos++], last = groupTag & 1\n      let target = table[pos++]\n      if (last && loose) return target\n      for (let end = pos + (groupTag >> 1); pos < end; pos++)\n        if (table[pos] == state) return target\n      if (last) return -1\n    }\n  }\n\n  /// Check if this state has an action for a given terminal @internal\n  hasAction(state: number, terminal: number) {\n    let data = this.data\n    for (let set = 0; set < 2; set++) {\n      for (let i = this.stateSlot(state, set ? ParseState.Skip : ParseState.Actions), next; (next = data[i]) != Seq.End; i += 3) {\n        if (next == terminal || next == Term.Err)\n          return data[i + 1] | (data[i + 2] << 16)\n      }\n    }\n    return 0\n  }\n\n  /// @internal\n  stateSlot(state: number, slot: number) {\n    return this.states[(state * ParseState.Size) + slot]\n  }\n\n  /// @internal\n  stateFlag(state: number, flag: number) {\n    return (this.stateSlot(state, ParseState.Flags) & flag) > 0\n  }\n\n  /// @internal\n  startNested(state: number) {\n    let flags = this.stateSlot(state, ParseState.Flags)\n    return flags & StateFlag.StartNest ? flags >> StateFlag.NestShift : -1\n  }\n\n  /// @internal\n  validAction(state: number, action: number) {\n    if (action == this.stateSlot(state, ParseState.DefaultReduce)) return true\n    for (let i = this.stateSlot(state, ParseState.Actions);; i += 3) {\n      if (this.data[i] == Seq.End) return false\n      if (action == (this.data[i + 1] | (this.data[i + 2] << 16))) return true\n    }\n  }\n\n  /// Get the states that can follow this one through shift actions or\n  /// goto jumps. @internal\n  nextStates(state: number): readonly number[] {\n    let cached = this.nextStateCache[state]\n    if (cached) return cached\n    let result: number[] = []\n    for (let i = this.stateSlot(state, ParseState.Actions); this.data[i] != Seq.End; i += 3) {\n      if ((this.data[i + 2] & (Action.ReduceFlag >> 16)) == 0 && result.indexOf(this.data[i + 1]) < 0)\n        result.push(this.data[i + 1])\n    }\n    let table = this.goto, max = table[0]\n    for (let term = 0; term < max; term++) {\n      for (let pos = table[term + 1];;) {\n        let groupTag = table[pos++], target = table[pos++]\n        for (let end = pos + (groupTag >> 1); pos < end; pos++)\n          if (table[pos] == state && result.indexOf(target) < 0) result.push(target)\n        if (groupTag & 1) break\n      }\n    }\n    return this.nextStateCache[state] = result\n  }\n\n  /// @internal\n  overrides(token: number, prev: number) {\n    let iPrev = findOffset(this.data, this.tokenPrecTable, prev)\n    return iPrev < 0 || findOffset(this.data, this.tokenPrecTable, token) < iPrev\n  }\n\n  /// Create a new `Parser` instance with different values for (some\n  /// of) the nested grammars. This can be used to, for example, swap\n  /// in a different language for a nested grammar or fill in a nested\n  /// grammar that was left blank by the original grammar.\n  withNested(spec: {[name: string]: NestedGrammar | null}) {\n    return this.copy({nested: this.nested.map(obj => {\n      if (!Object.prototype.hasOwnProperty.call(spec, obj.name)) return obj\n      return {name: obj.name, grammar: spec[obj.name], end: obj.end, placeholder: obj.placeholder}\n    })})\n  }\n\n  /// Create a new `Parser` instance whose node types have the given\n  /// props added. You should use [`NodeProp.add`](#tree.NodeProp.add)\n  /// to create the arguments to this method.\n  withProps(...props: NodePropSource[]) {\n    return this.copy({group: this.group.extend(...props)})\n  }\n\n  /// Replace the given external tokenizer with another one, returning\n  /// a new parser object.\n  withTokenizer(from: ExternalTokenizer, to: ExternalTokenizer) {\n    return this.copy({tokenizers: this.tokenizers.map(t => t == from ? to : t)})\n  }\n\n  private copy(props: {[name: string]: any}): Parser {\n    // Hideous reflection-based kludge to make it easy to create a\n    // slightly modified copy of a parser.\n    let obj = Object.create(Parser.prototype)\n    for (let key of Object.keys(this))\n      obj[key] = key in props ? props[key] : (this as any)[key]\n    return obj\n  }\n\n  /// Returns the name associated with a given term. This will only\n  /// work for all terms when the parser was generated with the\n  /// `--names` option. By default, only the names of tagged terms are\n  /// stored.\n  getName(term: number): string {\n    return this.termNames ? this.termNames[term] : String(term <= this.maxNode && this.group.types[term].name || term)\n  }\n\n  /// The eof term id is always allocated directly after the node\n  /// types. @internal\n  get eofTerm() { return this.maxRepeatWrap + 1 }\n\n  /// Tells you whether this grammar has any nested grammars.\n  get hasNested() { return this.nested.length > 0 }\n\n  /// @internal\n  get defaultTop() { return this.topRules[Object.keys(this.topRules)[0]] }\n\n  /// @internal\n  dynamicPrecedence(term: number) {\n    let prec = this.dynamicPrecedences\n    return prec == null ? 0 : prec[term] || 0\n  }\n\n  /// The node type produced by the default top rule.\n  get topType() { return this.group.types[this.defaultTop[1]] }\n\n  /// @internal\n  parseDialect(dialect?: string) {\n    if (this.cachedDialect && this.cachedDialect.source == dialect) return this.cachedDialect\n    let values = Object.keys(this.dialects), flags = values.map(() => false)\n    if (dialect) for (let part of dialect.split(\" \")) {\n      let id = values.indexOf(part)\n      if (id >= 0) flags[id] = true\n    }\n    let disabled: Uint8Array | null = null\n    for (let i = 0; i < values.length; i++) if (!flags[i]) {\n      for (let j = this.dialects[values[i]], id; (id = this.data[j++]) != Seq.End;)\n        (disabled || (disabled = new Uint8Array(this.maxTerm + 1)))[id] = 1\n    }\n    return this.cachedDialect = new Dialect(dialect, flags, disabled)\n  }\n\n  /// (used by the output of the parser generator) @internal\n  static deserialize(spec: ParserSpec) {\n    return new Parser(spec)\n  }\n}\n\n// Hidden export for use by lezer-generator\n;(Parser as any).TokenGroup = TokenGroup\n\nconst noProps: {[propID: number]: any} = Object.create(null)\n\nfunction findOffset(data: Readonly<Uint16Array>, start: number, term: number) {\n  for (let i = start, next; (next = data[i]) != Seq.End; i++)\n    if (next == term) return i - start\n  return -1\n}\n\nfunction findFinished(stacks: Stack[]) {\n  let best: Stack | null = null\n  for (let stack of stacks) {\n    if (stack.pos == stack.cx.input.length &&\n        stack.cx.parser.stateFlag(stack.state, StateFlag.Accepting) &&\n        (!best || best.score < stack.score))\n      best = stack\n  }\n  return best\n}\n","import { Parser, NodeProp } from 'lezer';\n\n// This file was generated by lezer-generator. You probably shouldn't edit it.\nconst parser = Parser.deserialize({\n  states: \"$nOTPPOOOOPO'#Cb'#CbOkPPO'#CcOrPPO'#CfOOPO'#Cn'#CnQOPPOOOOPO'#Ce'#CeO!]PPO'#CdO!aPPO'#CrOOPO,58},58}O!hPPO,58}O!lPPO'#CwOOPO,59Q,59QO!sPPO,59QOTPPO,59OO!wPPO'#CiO#OPPO'#CgOOPO,59^,59^OOPO1G.i1G.iO#SPPO'#CjOTPPO'#ChOOPO,59c,59cOOPO1G.l1G.lOOPO1G.j1G.jOOPO,59R,59ROOPO-E6e-E6eOOPO,59S,59SOOPO-E6f-E6f\",\n  stateData: \"#Z~aOS~QSORSOSSOTSOcPOeQOjRO~cUOdXO~QSORSOSSOTSOcPOeQOi[OjRO~g^O~h`OdfX~dbO~hdOikX~ifO~h`Od]X~cUO~hdOi^X~\",\n  goto: \"!slPPPPPPmmsym}!T!Z!^PPP!aPPP!mPPPP!pXSOR^dQWQRi`TVQ`Q_WRh_QcZRjcRaWReZQTOQZRQg^RkdRYQR]R\",\n  nodeNames: \" JsonText True False Null Number String Object Property PropertyName Array\",\n  maxTerm: 27,\n  nodeProps: [\n    [NodeProp.top, 1,true]\n  ],\n  repeatNodeCount: 2,\n  tokenData: \"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oa~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOc~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rOj~~&wOi~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOe~~(pOd~\",\n  tokenizers: [0],\n  topRules: {\"JsonText\":[0,1]},\n  tokenPrec: 0\n});\n\nexport { parser };\n","import { NodeProp, Tree } from 'lezer-tree';\nimport { IndentContext, EditorState, StateEffect, StateField, Facet, languageDataProp } from '@codemirror/next/state';\nimport { ViewPlugin } from '@codemirror/next/view';\n\n/// A syntax tree node prop used to associate indentation strategies\n/// with node types. Such a strategy is a function from an indentation\n/// context to a number. That number may be -1, to indicate that no\n/// definitive indentation can be determined, or a column number to\n/// which the given line should be indented.\nconst indentNodeProp = new NodeProp();\nfunction syntaxIndentation(syntax) {\n    return EditorState.indentation.of((cx, pos) => {\n        return computeIndentation(cx, syntax.getTree(cx.state), pos);\n    });\n}\n// Compute the indentation for a given position from the syntax tree.\nfunction computeIndentation(cx, ast, pos) {\n    let tree = ast.resolve(pos);\n    // Enter previous nodes that end in empty error terms, which means\n    // they were broken off by error recovery, so that indentation\n    // works even if the constructs haven't been finished.\n    for (let scan = tree, scanPos = pos;;) {\n        let last = scan.childBefore(scanPos);\n        if (!last)\n            break;\n        if (last.type.prop(NodeProp.error) && last.start == last.end) {\n            tree = scan;\n            scanPos = last.start;\n        }\n        else {\n            scan = last;\n            scanPos = scan.end + 1;\n        }\n    }\n    for (; tree; tree = tree.parent) {\n        let strategy = indentStrategy(tree);\n        if (strategy)\n            return strategy(new TreeIndentContext(cx, pos, tree));\n    }\n    return -1;\n}\nfunction ignoreClosed(cx) {\n    var _a, _b;\n    return cx.pos == ((_a = cx.options) === null || _a === void 0 ? void 0 : _a.simulateBreak) && ((_b = cx.options) === null || _b === void 0 ? void 0 : _b.simulateDoubleBreak);\n}\nfunction indentStrategy(tree) {\n    let strategy = tree.type.prop(indentNodeProp);\n    if (strategy)\n        return strategy;\n    let first = tree.firstChild, close;\n    if (first && (close = first.type.prop(NodeProp.closedBy))) {\n        let last = tree.lastChild, closed = last && close.indexOf(last.name) > -1;\n        return cx => delimitedStrategy(cx, true, 1, undefined, closed && !ignoreClosed(cx) ? last.start : undefined);\n    }\n    return tree.parent == null ? topIndent : null;\n}\nfunction topIndent() { return 0; }\n/// Objects of this type provide context information and helper\n/// methods to indentation functions.\nclass TreeIndentContext extends IndentContext {\n    /// @internal\n    constructor(base, \n    /// The position at which indentation is being computed.\n    pos, \n    /// The syntax tree node for which the indentation strategy is\n    /// registered.\n    node) {\n        super(base.state, base.options);\n        this.pos = pos;\n        this.node = node;\n    }\n    /// Get the text directly after `this.pos`, either the entire line\n    /// or the next 100 characters, whichever is shorter.\n    get textAfter() {\n        return this.textAfterPos(this.pos);\n    }\n    /// Get the indentation at the reference line for `this.node`, which\n    /// is the line on which it starts, unless there is a node that is\n    /// _not_ a parent of this node covering the start of that line. If\n    /// so, the line at the start of that node is tried, again skipping\n    /// on if it is covered by another such node.\n    get baseIndent() {\n        let line = this.state.doc.lineAt(this.node.start);\n        // Skip line starts that are covered by a sibling (or cousin, etc)\n        for (;;) {\n            let atBreak = this.node.resolve(line.from);\n            while (atBreak.parent && atBreak.parent.start == atBreak.start)\n                atBreak = atBreak.parent;\n            if (isParent(atBreak, this.node))\n                break;\n            line = this.state.doc.lineAt(atBreak.start);\n        }\n        return this.lineIndent(line);\n    }\n}\nfunction isParent(parent, of) {\n    for (let cur = of; cur; cur = cur.parent)\n        if (parent == cur)\n            return true;\n    return false;\n}\n// Check whether a delimited node is aligned (meaning there are\n// non-skipped nodes on the same line as the opening delimiter). And\n// if so, return the opening token.\nfunction bracketedAligned(context) {\n    var _a;\n    let tree = context.node;\n    let openToken = tree.childAfter(tree.start), last = tree.lastChild;\n    if (!openToken)\n        return null;\n    let sim = (_a = context.options) === null || _a === void 0 ? void 0 : _a.simulateBreak;\n    let openLine = context.state.doc.lineAt(openToken.start);\n    let lineEnd = sim == null || sim <= openLine.from ? openLine.to : Math.min(openLine.to, sim);\n    for (let pos = openToken.end;;) {\n        let next = tree.childAfter(pos);\n        if (!next || next == last)\n            return null;\n        if (!next.type.prop(NodeProp.skipped))\n            return next.start < lineEnd ? openToken : null;\n        pos = next.end;\n    }\n}\n/// An indentation strategy for delimited (usually bracketed) nodes.\n/// Will, by default, indent one unit more than the parent's base\n/// indent unless the line starts with a closing token. When `align`\n/// is true and there are non-skipped nodes on the node's opening\n/// line, the content of the node will be aligned with the end of the\n/// opening node, like this:\n///\n///     foo(bar,\n///         baz)\nfunction delimitedIndent({ closing, align = true, units = 1 }) {\n    return (context) => delimitedStrategy(context, align, units, closing);\n}\nfunction delimitedStrategy(context, align, units, closing, closedAt) {\n    let after = context.textAfter, space = after.match(/^\\s*/)[0].length;\n    let closed = closing && after.slice(space, space + closing.length) == closing || closedAt == context.pos + space;\n    let aligned = align ? bracketedAligned(context) : null;\n    if (aligned)\n        return closed ? context.column(aligned.start) : context.column(aligned.end);\n    return context.baseIndent + (closed ? 0 : context.unit * units);\n}\n/// An indentation strategy that aligns a node content to its base\n/// indentation.\nconst flatIndent = (context) => context.baseIndent;\n/// Creates an indentation strategy that, by default, indents\n/// continued lines one unit more than the node's base indentation.\n/// You can provide `except` to prevent indentation of lines that\n/// match a pattern (for example `/^else\\b/` in `if`/`else`\n/// constructs), and you can change the amount of units used with the\n/// `units` option.\nfunction continuedIndent({ except, units = 1 } = {}) {\n    return (context) => {\n        let matchExcept = except && except.test(context.textAfter);\n        return context.baseIndent + (matchExcept ? 0 : units * context.unit);\n    };\n}\n\n/// This node prop is used to associate folding information with node\n/// types. Given a subtree, it should check whether that tree is\n/// foldable and return the range that can be collapsed when it is.\nconst foldNodeProp = new NodeProp();\nfunction syntaxFolding(syntax) {\n    return EditorState.foldable.of((state, start, end) => {\n        let inner = syntax.getTree(state).resolve(end);\n        let found = null;\n        for (let cur = inner; cur; cur = cur.parent) {\n            if (cur.end <= end || cur.start > end)\n                continue;\n            if (found && cur.start < start)\n                break;\n            let prop = cur.type.prop(foldNodeProp);\n            if (prop) {\n                let value = prop(cur, state);\n                if (value && value.from <= end && value.from >= start && value.to > end)\n                    found = value;\n            }\n        }\n        return found;\n    });\n}\n\n/// A [syntax provider](#state.Syntax) based on a\n/// [Lezer](https://lezer.codemirror.net) parser.\nclass LezerSyntax {\n    /// @internal\n    constructor(\n    /// The Lezer parser used by this syntax.\n    parser, \n    /// The dialect enabled for the parser.\n    dialect, \n    /// The [language data](#state.EditorState.languageDataAt) data\n    /// facet used for this language.\n    languageData) {\n        this.parser = parser;\n        this.dialect = dialect;\n        this.languageData = languageData;\n        let setSyntax = StateEffect.define();\n        this.field = StateField.define({\n            create: state => SyntaxState.advance(Tree.empty, this, state.doc),\n            update: (value, tr) => value.apply(tr, this, setSyntax)\n        });\n        this.extension = [\n            EditorState.syntax.of(this),\n            this.field,\n            ViewPlugin.define(view => new HighlightWorker(view, this, setSyntax)),\n            syntaxIndentation(this),\n            syntaxFolding(this)\n        ];\n    }\n    /// Create a syntax instance for the given parser. You'll usually\n    /// want to use the\n    /// [`withProps`](https://lezer.codemirror.net/docs/ref/#lezer.Parser.withProps)\n    /// method to register CodeMirror-specific syntax node props in the\n    /// parser, before passing it to this constructor.\n    static define(parser, config = {}) {\n        let languageData = Facet.define({\n            combine: config.languageData ? values => values.concat(config.languageData) : undefined\n        });\n        return new LezerSyntax(parser.withProps(languageDataProp.add({ [parser.topType.name]: languageData })), config.dialect || \"\", languageData);\n    }\n    withDialect(dialect) {\n        return new LezerSyntax(this.parser, dialect, this.languageData);\n    }\n    getTree(state) {\n        return state.field(this.field).tree;\n    }\n    parsePos(state) {\n        return state.field(this.field).upto;\n    }\n    ensureTree(state, upto, timeout = 100) {\n        let field = state.field(this.field);\n        if (field.upto >= upto)\n            return field.updatedTree;\n        if (!field.parse)\n            field.startParse(this, state.doc);\n        if (field.parse.pos < upto) {\n            let done = work(field.parse, timeout, upto);\n            if (done)\n                return field.stopParse(done, state.doc.length);\n        }\n        return field.parse.pos < upto ? null : field.stopParse();\n    }\n    languageDataFacetAt(state, pos) {\n        if (this.parser.hasNested) {\n            let tree = this.getTree(state);\n            let target = tree.resolve(pos, -1);\n            while (target) {\n                let facet = target.type.prop(languageDataProp);\n                if (facet)\n                    return facet;\n                target = target.parent;\n            }\n        }\n        return this.languageData;\n    }\n}\nclass DocStream {\n    constructor(doc, length = doc.length) {\n        this.doc = doc;\n        this.length = length;\n        this.cursorPos = 0;\n        this.string = \"\";\n        this.cursor = doc.iter();\n    }\n    get(pos) {\n        if (pos >= this.length)\n            return -1;\n        let stringStart = this.cursorPos - this.string.length;\n        if (pos < stringStart || pos >= this.cursorPos) {\n            if (pos < this.cursorPos) { // Reset the cursor if we have to go back\n                this.cursor = this.doc.iter();\n                this.cursorPos = 0;\n            }\n            this.string = this.cursor.next(pos - this.cursorPos).value;\n            this.cursorPos = pos + this.string.length;\n            stringStart = this.cursorPos - this.string.length;\n        }\n        return this.string.charCodeAt(pos - stringStart);\n    }\n    read(from, to) {\n        let stringStart = this.cursorPos - this.string.length;\n        if (from < stringStart || to >= this.cursorPos)\n            return this.doc.sliceString(from, to);\n        else\n            return this.string.slice(from - stringStart, to - stringStart);\n    }\n    clip(at) {\n        return new DocStream(this.doc, at);\n    }\n}\nfunction work(parse, time, upto = 5000000 /* MaxPos */) {\n    let endTime = Date.now() + time;\n    for (;;) {\n        let done = parse.advance();\n        if (done)\n            return done;\n        if (parse.pos > upto || Date.now() > endTime)\n            return null;\n    }\n}\nfunction takeTree(parse, base) {\n    let parsed = parse.forceFinish();\n    let cache = parsed.applyChanges([{ fromA: parse.pos, toA: parsed.length, fromB: parse.pos, toB: parsed.length }])\n        .append(base.applyChanges([{ fromA: 0, toA: parse.pos, fromB: 0, toB: parse.pos }]));\n    return { parsed, cache };\n}\nclass SyntaxState {\n    constructor(\n    // The current tree. Immutable, because directly accessible from\n    // the editor state.\n    tree, \n    // The point upto which the document has been parsed.\n    upto, \n    // The tree that can be used as cache for further incremental\n    // parsing. May differ from tree/updatedTree if a parse is broken\n    // off halfwayin that case, this one will have nodes that touch\n    // the break-off point dropped/decomposed so that they don't get\n    // incorrectly reused. The other properties will have those nodes,\n    // since they may be useful for code consuming the tree.\n    cache) {\n        this.tree = tree;\n        this.upto = upto;\n        this.cache = cache;\n        // In-progress parse, if any\n        this.parse = null;\n        this.updatedTree = tree;\n    }\n    static advance(cache, syntax, doc) {\n        let parse = syntax.parser.startParse(new DocStream(doc), { cache, dialect: syntax.dialect });\n        let done = work(parse, 25 /* Apply */);\n        if (done)\n            return new SyntaxState(done, doc.length, done);\n        let result = takeTree(parse, cache);\n        return new SyntaxState(result.parsed, parse.pos, result.cache);\n    }\n    apply(tr, syntax, effect) {\n        for (let e of tr.effects)\n            if (e.is(effect))\n                return e.value;\n        if (!tr.docChanged)\n            return this;\n        let ranges = [];\n        tr.changes.iterChangedRanges((fromA, toA, fromB, toB) => ranges.push({ fromA, toA, fromB, toB }));\n        return SyntaxState.advance((this.parse ? takeTree(this.parse, this.updatedTree).cache : this.cache).applyChanges(ranges), syntax, tr.state.doc);\n    }\n    startParse(syntax, doc) {\n        this.parse = syntax.parser.startParse(new DocStream(doc), { cache: this.cache, dialect: syntax.dialect });\n    }\n    stopParse(tree, upto) {\n        if (!tree)\n            ({ parsed: tree, cache: this.cache } = takeTree(this.parse, this.updatedTree));\n        else\n            this.cache = tree;\n        this.updatedTree = tree;\n        this.upto = upto !== null && upto !== void 0 ? upto : this.parse.pos;\n        this.parse = null;\n        return tree;\n    }\n}\nlet requestIdle = typeof window != \"undefined\" && window.requestIdleCallback ||\n    ((callback, { timeout }) => setTimeout(callback, timeout));\nlet cancelIdle = typeof window != \"undefined\" && window.cancelIdleCallback || clearTimeout;\n// FIXME figure out some way to back off from full re-parses when the\n// document is largeyou could waste a lot of battery re-parsing a\n// multi-megabyte document every time you insert a backtick, even if\n// it happens in the background.\nclass HighlightWorker {\n    constructor(view, syntax, setSyntax) {\n        this.view = view;\n        this.syntax = syntax;\n        this.setSyntax = setSyntax;\n        this.working = -1;\n        this.work = this.work.bind(this);\n        this.scheduleWork();\n    }\n    update(update) {\n        if (update.docChanged)\n            this.scheduleWork();\n    }\n    scheduleWork() {\n        if (this.working > -1)\n            return;\n        let { state } = this.view, field = state.field(this.syntax.field);\n        if (field.upto >= state.doc.length)\n            return;\n        this.working = requestIdle(this.work, { timeout: 200 /* Pause */ });\n    }\n    work(deadline) {\n        this.working = -1;\n        let { state } = this.view, field = state.field(this.syntax.field);\n        if (field.upto >= state.doc.length)\n            return;\n        if (!field.parse)\n            field.startParse(this.syntax, state.doc);\n        let done = work(field.parse, deadline ? Math.max(25 /* MinSlice */, deadline.timeRemaining()) : 100 /* Slice */);\n        if (done || field.parse.badness > .8) {\n            let tree = field.stopParse(done, state.doc.length);\n            this.view.dispatch({\n                effects: this.setSyntax.of(new SyntaxState(tree, state.doc.length, field.cache))\n            });\n        }\n        else {\n            this.scheduleWork();\n        }\n    }\n    destroy() {\n        if (this.working >= 0)\n            cancelIdle(this.working);\n    }\n}\n\nexport { LezerSyntax, TreeIndentContext, continuedIndent, delimitedIndent, flatIndent, foldNodeProp, indentNodeProp };\n","import { basicSetup, EditorState, EditorView } from '@codemirror/next/basic-setup';\r\n\r\nlet json = String.raw`{\r\n  \"literals\": [true, false, null],\r\n  \"numbers\": [1, 123, 123.5, -123, 43e5, 23e-5, 23e+5],\r\n  \"strings\": [\r\n    \"A simple string\",\r\n    \"Escapes: \\n\\b\\r\\t\",\r\n    \"Unicode: \\u005c\"\r\n  ],\r\n  {\r\n    \"let us\": {\r\n      \"nest\": [\"some\", \"things\"]\r\n    }\r\n  }\r\n}`\r\n\r\nimport {parser} from \"./dist/index.es\"\r\nimport {Subtree} from  \"lezer-tree\"\r\nimport {LezerSyntax, foldNodeProp} from \"@codemirror/next/syntax\"\r\nimport {styleTags} from \"@codemirror/next/highlight\"\r\n\r\nlet jsonSyntax = LezerSyntax.define(parser.withProps(\r\n  foldNodeProp.add({\r\n    Array(tree) { return {from: tree.start + 1, to: tree.end - 1} },\r\n    Object(tree) { return {from: tree.start + 1, to: tree.end - 1} }\r\n  }),\r\n  styleTags({\r\n    Number: 'number',\r\n    String: 'string',\r\n    'True False': 'atom',\r\n    Null: 'null',\r\n    PropertyName: 'propertyName'\r\n  })\r\n))\r\n\r\nlet view = new EditorView({state: EditorState.create({\r\n  doc: json,\r\n  extensions: [\r\n    basicSetup,\r\n    jsonSyntax\r\n  ]\r\n})})\r\n\r\ndocument.body.appendChild(view.dom)\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}